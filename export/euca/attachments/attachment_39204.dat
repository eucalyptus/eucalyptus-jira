{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Cloudformation template that tests misplaced DependsOn resource attribute in AWS::EC2::SubnetNetworkAclAssociation resource",
    "Parameters": {
        "KeyName": {
            "Default": "testrunner",
            "Description": "",
            "Type": "String"
        }
    },
    "Resources": {
        "AttachInternetGateway": {
            "Properties": {
                "InternetGatewayId": {
                    "Ref": "InternetGateway2Internetgateway"
                },
                "VpcId": {
                    "Ref": "VPC2vpc"
                }
            },
            "Type": "AWS::EC2::VPCGatewayAttachment"
        },
        "Instance2host0": {
            "Properties": {
                "ImageId": "emi-e26c03c3",
                "InstanceType": "m1.xlarge",
                "KeyName": {
                    "Ref": "KeyName"
                },
                "Monitoring": "true",
                "NetworkInterfaces": [
                    {
                        "DeviceIndex": "0",
                        "NetworkInterfaceId": {
                            "Ref": "NetworkInterface2host0eni0"
                        }
                    }
                ],
                "Tags": [
                         {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId"}}
                ]
            },
            "Type": "AWS::EC2::Instance"
        },
        "InternetGateway2Internetgateway": {
            "Properties": {},
            "Type": "AWS::EC2::InternetGateway"
        },
        "NetworkAcl2DefaultACL": {
            "Properties": {
                "Tags": [ {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId"}} ],
                "VpcId": {
                    "Ref": "VPC2vpc"
                }
            },
            "Type": "AWS::EC2::NetworkAcl"
        },
        "NetworkAcl2DefaultACL2AssociationSet20": {
            "Properties": {
                "NetworkAclId": {
                    "Ref": "NetworkAcl2DefaultACL"
                },
                "DependsOn": "Subnet2subnet0",
                "SubnetId": {
                    "Ref": "Subnet2subnet0"
                }
            },
            "Type": "AWS::EC2::SubnetNetworkAclAssociation"
        },
        "NetworkInterface2host0eni0": {
            "Properties": {
                "GroupSet": [
                    {
                        "Ref": "SecurityGroup2DefaultSG"
                    }
                ],
                "PrivateIpAddresses": [
                    {
                        "Primary": true,
                        "PrivateIpAddress": "10.0.0.4"
                    }
                ],
                "SourceDestCheck": true,
                "SubnetId": {
                    "Ref": "Subnet2subnet0"
                }
            },
            "Type": "AWS::EC2::NetworkInterface"
        },
        "RouteTable2RT0": {
            "Properties": {
                "Tags": [ {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId"}} ],
                "VpcId": {
                    "Ref": "VPC2vpc"
                }
            },
            "Type": "AWS::EC2::RouteTable"
        },
        "RouteTable2RT02AssociationSet22": {
            "Properties": {
                "RouteTableId": {
                    "Ref": "RouteTable2RT0"
                },
                "SubnetId": {
                    "Ref": "Subnet2subnet0"
                }
            },
            "Type": "AWS::EC2::SubnetRouteTableAssociation"
        },
        "RouteTable2RT02RouteSet21": {
            "Properties": {
                "DestinationCidrBlock": "0.0.0.0/0",
                "GatewayId": {
                    "Ref": "InternetGateway2Internetgateway"
                },
                "RouteTableId": {
                    "Ref": "RouteTable2RT0"
                }
            },
            "Type": "AWS::EC2::Route"
        },
        "SecurityGroup2DefaultSG": {
            "Properties": {
                "GroupDescription": "default VPC security group",
                "Tags": [ {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId"}} ],
                "VpcId": {
                    "Ref": "VPC2vpc"
                }
            },
            "Type": "AWS::EC2::SecurityGroup"
        },
        "SecurityGroup2DefaultSG2Egress20": {
            "Properties": {
                "CidrIp": "0.0.0.0/0",
                "FromPort": "0",
                "GroupId": {
                    "Ref": "SecurityGroup2DefaultSG"
                },
                "IpProtocol": "-1",
                "ToPort": "65535"
            },
            "Type": "AWS::EC2::SecurityGroupEgress"
        },
        "SecurityGroup2DefaultSG2Ingress20": {
            "Properties": {
                "CidrIp": "0.0.0.0/0",
                "FromPort": "22",
                "GroupId": {
                    "Ref": "SecurityGroup2DefaultSG"
                },
                "IpProtocol": "tcp",
                "ToPort": "22"
            },
            "Type": "AWS::EC2::SecurityGroupIngress"
        },
        "SecurityGroup2DefaultSG2IpPermissions22": {
            "Properties": {
                "CidrIp": "0.0.0.0/0",
                "FromPort": "22",
                "GroupId": {
                    "Ref": "SecurityGroup2DefaultSG"
                },
                "IpProtocol": "tcp",
                "ToPort": "22"
            },
            "Type": "AWS::EC2::SecurityGroupIngress"
        },
        "SecurityGroup2DefaultSG2IpPermissionsEgress20": {
            "Properties": {
                "CidrIp": "0.0.0.0/0",
                "FromPort": "0",
                "GroupId": {
                    "Ref": "SecurityGroup2DefaultSG"
                },
                "IpProtocol": "-1",
                "ToPort": "65535"
            },
            "Type": "AWS::EC2::SecurityGroupEgress"
        },
        "Subnet2subnet0": {
            "Properties": {
                "AvailabilityZone" : { "Fn::Select" : [ "0", { "Fn::GetAZs" : { "Ref" : "AWS::Region" } } ] },
                "CidrBlock": "10.0.0.0/24",
                "Tags": [ {"Key" : "Application", "Value" : { "Ref" : "AWS::StackId"}} ],
                "VpcId": {
                    "Ref": "VPC2vpc"
                }
            },
            "Type": "AWS::EC2::Subnet"
        },
        "VPC2vpc": {
            "Properties": {
                "CidrBlock": "10.0.0.0/16",
                "InstanceTenancy": "default"
            },
            "Type": "AWS::EC2::VPC"
        }
    }
}
