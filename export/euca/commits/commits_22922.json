{"errors":[],"detail":[{"repositories":[{"name":"eucalyptus","url":"https://github.com/eucalyptus/eucalyptus","commits":[{"id":"37c5f3ec9a6e3e150ebacc274430f02a2baa679a","displayId":"37c5f3e","authorTimestamp":"2013-08-08T05:03:31.000+0000","url":"https://github.com/eucalyptus/eucalyptus/commit/37c5f3ec9a6e3e150ebacc274430f02a2baa679a","author":{"name":"chris grzegorczyk","avatar":"https://avatars2.githubusercontent.com/u/985057?v=4","url":"https://github.com/grze"},"fileCount":2,"merge":false,"message":"Fix cluster gating concurrency issue EUCA-7103\n\nUses a ReadWriteLock. This makes it possible to remove the contention between concurrent run instance allocations but preserves the serialization and mutual exclusion of migrate instance requests:\n- Make the Cluster.gateLock be a ReadWrite lock\n com.eucalyptus.cluster.Cluster.gateLock\n- Use the Cluster.gateLock.readLock() during (1) node resource allocation and (2) update -- these allow for concurrent access among themselves, but must be mutually exclusive with migrations (the \"writers\").\n 1. com.eucalyptus.cloud.run.AdmissionControl.NodeResourceAllocator.requestResourceToken(Allocation, int, int)\n 2. com.eucalyptus.cluster.Cluster.check()\n- Use the Cluster.gateLock.writeLock() during migrateInstance(s) -- these must be serialized with respect to each other and also any other allocation or update acceses.\n com.eucalyptus.cluster.Cluster.migrateInstance(String, Boolean, List<String>)\n com.eucalyptus.cluster.Cluster.migrateInstances(String, Boolean, List<String>)\n- Increase the gate lock try time to 1 minute -- after that requests will fail synchronously w/ the original indicated error.","files":[{"path":"clc/modules/cluster-manager/src/main/java/com/eucalyptus/cloud/run/AdmissionControl.java","url":"https://github.com/eucalyptus/eucalyptus/commit/37c5f3ec9a6e3e150ebacc274430f02a2baa679a#diff-0","changeType":"MODIFIED","linesAdded":2,"linesRemoved":2},{"path":"clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/Cluster.java","url":"https://github.com/eucalyptus/eucalyptus/commit/37c5f3ec9a6e3e150ebacc274430f02a2baa679a#diff-1","changeType":"MODIFIED","linesAdded":10,"linesRemoved":8}]},{"id":"ecce01fc6bd8d0849b6904508c22b68d66cace25","displayId":"ecce01f","authorTimestamp":"2013-08-08T05:03:31.000+0000","url":"https://github.com/eucalyptus/eucalyptus/commit/ecce01fc6bd8d0849b6904508c22b68d66cace25","author":{"name":"chris grzegorczyk","avatar":"https://avatars2.githubusercontent.com/u/985057?v=4","url":"https://github.com/grze"},"fileCount":2,"merge":false,"message":"Fix cluster gating concurrency issue EUCA-7103\n\nUses a ReadWriteLock. This makes it possible to remove the contention between concurrent run instance allocations but preserves the serialization and mutual exclusion of migrate instance requests:\n- Make the Cluster.gateLock be a ReadWrite lock\n com.eucalyptus.cluster.Cluster.gateLock\n- Use the Cluster.gateLock.readLock() during (1) node resource allocation and (2) update -- these allow for concurrent access among themselves, but must be mutually exclusive with migrations (the \"writers\").\n 1. com.eucalyptus.cloud.run.AdmissionControl.NodeResourceAllocator.requestResourceToken(Allocation, int, int)\n 2. com.eucalyptus.cluster.Cluster.check()\n- Use the Cluster.gateLock.writeLock() during migrateInstance(s) -- these must be serialized with respect to each other and also any other allocation or update acceses.\n com.eucalyptus.cluster.Cluster.migrateInstance(String, Boolean, List<String>)\n com.eucalyptus.cluster.Cluster.migrateInstances(String, Boolean, List<String>)\n- Increase the gate lock try time to 1 minute -- after that requests will fail synchronously w/ the original indicated error.","files":[{"path":"clc/modules/cluster-manager/src/main/java/com/eucalyptus/cloud/run/AdmissionControl.java","url":"https://github.com/eucalyptus/eucalyptus/commit/ecce01fc6bd8d0849b6904508c22b68d66cace25#diff-0","changeType":"MODIFIED","linesAdded":2,"linesRemoved":2},{"path":"clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/Cluster.java","url":"https://github.com/eucalyptus/eucalyptus/commit/ecce01fc6bd8d0849b6904508c22b68d66cace25#diff-1","changeType":"MODIFIED","linesAdded":10,"linesRemoved":8}]}]}],"_instance":{"singleInstance":true,"baseUrl":"https://github.com","name":"GitHub","typeName":"GitHub","id":"github","type":"github"}}]}