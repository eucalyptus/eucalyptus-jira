{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"14807","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14807","key":"EUCA-3006","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2012-11-06T18:43:34.054-0600","customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3006/watchers","watchCount":2,"isWatching":false},"lastViewed":null,"created":"2012-07-23T17:50:22.614-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2012-09-26T05:50:46.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"updated":"2013-01-09T19:57:24.677-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"There is a possibility that a problem encountered on a long-term installation is related to logprintfl() not being thread-safe. Specifically, get_instance_stats() starts failing, in two different ways, right after a log is rotated.\r\n\r\nh6. First failure:\r\n\r\n{code}\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-A6A83CA7] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=5993 netdevs=vnet7 netMB=1634886\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-C08B4002] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=4079 netdevs=vnet1 netMB=1977533\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-228C3C08] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=6500 netdevs=vnet3 netMB=1664394\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] doDescribeResource: cores=0/48 mem=9149/132029 disk=4/401 iqn=...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-F769406B] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=9855 netdevs=vnet8 netMB=22233\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] doDescribeInstances: userId=eucalyptus correlationId=UNSET epoch=0 services[0].name= services[0].type= services[0].uris[0]=\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-CBFF4408] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-33E14066] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-A6A83CA7] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-C08B4002] Extant ...\r\n<------------------------------------------------- log rolls --------------------------------------------->\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-2B1A3FE0] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=2490 netdevs=vnet4 netMB=1776\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-228C3C08] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-F769406B] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-2B1A3FE0] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-5B633F56] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-88BE40BD] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-B5014423] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-5D8D442E] Extant ...\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-5B633F56] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=4365 netdevs=vnet2 netMB=426182\r\n[Sat Jul 14 20:27:53 2012][005803][EUCAWARN  ] [i-88BE40BD] warning: get_instance_stats: empty output from getstats command\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-88BE40BD] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=0 netdevs=vnet9 netMB=0\r\n[Sat Jul 14 20:27:53 2012][005803][EUCAWARN  ] [i-88BE40BD] refresh_instances(): cannot get instance stats (block, network)\r\n[Sat Jul 14 20:27:53 2012][005803][EUCAWARN  ] [i-B5014423] warning: get_instance_stats: empty output from getstats command\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-B5014423] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=0 netdevs=vnet6 netMB=0\r\n[Sat Jul 14 20:27:53 2012][005803][EUCAWARN  ] [i-B5014423] refresh_instances(): cannot get instance stats (block, network)\r\n[Sat Jul 14 20:27:53 2012][005803][EUCAWARN  ] [i-5D8D442E] warning: get_instance_stats: empty output from getstats command\r\n[Sat Jul 14 20:27:53 2012][005803][EUCADEBUG ] [i-5D8D442E] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=0 netdevs=vnet10 netMB=0\r\n{code}\r\n\r\nh6. Second failure:\r\n\r\n{code}\r\n[Sun Jul 15 04:43:46 2012][005803][EUCADEBUG ] [i-F769406B] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=0 netdevs=vnet8 netMB=0\r\n[Sun Jul 15 04:43:46 2012][005803][EUCAWARN  ] [i-F769406B] refresh_instances(): cannot get instance stats (block, network)\r\n[Sun Jul 15 04:43:46 2012][005803][EUCAWARN  ] [i-2B1A3FE0] warning: get_instance_stats: empty output from getstats command\r\n<------------------------------------------------- log rolls --------------------------------------------->\r\n[Sun Jul 15 04:43:46 2012][005803][EUCADEBUG ] [i-2B1A3FE0] get_instance_stats: blkdevs=sda3,sda2,sda1,sda, blkMB=0 netdevs=vnet4 netMB=0\r\n[Sun Jul 15 04:43:46 2012][005803][EUCAWARN  ] [i-2B1A3FE0] refresh_instances(): cannot get instance stats (block, network)\r\n[Sun Jul 15 04:43:49 2012][005803][EUCADEBUG ] doDescribeResource: cores=0/48 mem=9149/132029 disk=4/401 iqn=...\r\n[Sun Jul 15 04:43:49 2012][005803][EUCADEBUG ] doDescribeInstances: userId=eucalyptus correlationId=UNSET epoch=0 services[0].name= services[0].type= services[0].uris[0]=\r\n[Sun Jul 15 04:43:49 2012][005803][EUCADEBUG ] [i-CBFF4408] Extant ...\r\n\r\n(no more get_instance_stats entries at all)\r\n{code}\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"logprintfl() should be thread-safe (and it is not)","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_26494_*|*_10001_*:*_1_*:*_7866_*|*_10000_*:*_1_*:*_5598447909_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_3566709272","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01gvj:","customfield_10001":"2012-11-06T18:43:34.127-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["alice(alice)","dmitrii(dmitrii)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3006/votes","votes":1,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14807/comment/34776","id":"34776","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"body":"The euca- feature described in the bug is no longer supported. Did not see evidence of logprintfl() not being thread-safe. For example nc.log is logging consistently.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-06T18:43:34.127-0600","updated":"2012-11-06T18:43:34.127-0600"}],"maxResults":1,"total":1,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}