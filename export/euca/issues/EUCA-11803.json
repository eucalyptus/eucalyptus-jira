{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"39692","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692","key":"EUCA-11803","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17200","id":"17200","description":"Eucalyptus 4.2.2","name":"4.2.2","archived":false,"released":true,"releaseDate":"2016-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2016-04-07T22:04:15.579-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11803/watchers","watchCount":8,"isWatching":false},"created":"2015-12-03T10:56:51.613-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2016-03-25T08:07:32.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16401","id":"16401","description":"Eucalyptus 4.2.1","name":"4.2.1","archived":false,"released":true,"releaseDate":"2015-12-07"}],"customfield_11901":null,"issuelinks":[{"id":"33925","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/33925","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"39191","key":"EUCA-11668","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39191","fields":{"summary":"selinux check in eucalyptus-nc startup script is too strict","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-10-28T00:35:07.954-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"It was found that during verification of EUCA-11668 that instance migration will fail when selinux is enabled and in Permissive mode. \r\n\r\nThe error presented in the logs:\r\n{code}\r\n2015-12-02 12:01:15 ERROR 000016181 libvirt_err_handler      | libvirt: internal error Cannot parse sensitivity level in s0 (code=1)\r\n2015-12-02 12:01:15 ERROR 000016181 migrating_thread         | [i-f7139381] cannot migrate instance, giving up and rolling back.\r\n{code}\r\n\r\nThe error thrown by libvirtd is from the fact that the security context of the libvirtd process doesn't have the correct type/level:\r\n{code}\r\n[root@e-16 ~]# ps -eZ | grep libvirt\r\nsystem_u:system_r:httpd_t:s0    16071 ?        00:00:26 libvirtd\r\n{code}\r\n\r\nThe security context *should* look like the following, according to the policy:\r\n{code}\r\n[root@nc1 ~]# ps -eZ | grep libvirt\r\nunconfined_u:system_r:virtd_t:s0-s0:c0.c1023 20306 ? 00:00:00 libvirtd\r\n{code}\r\n\r\nIndeed when restarting the libvirt daemon, it comes back up with the correct security context. But when a migration is triggered the context switches *back* to http_t. \r\n\r\nThe reason this happens is that during migration new migration keys are generated via a call to {{generate-migration-keys.sh}} which has the following block of code:\r\n{code}\r\nif [ \"$RESTART\" == \"yes\" ] ; then\r\n    echo \"Key installation complete, restarting libvirtd.\"\r\n\r\n    # Ensure libvirtd is run with --listen arg.\r\n    ensure_listen\r\n\r\n    /sbin/service libvirtd restart\r\nelse\r\n    echo \"Key installation complete, libvirtd will require manual restart.\"\r\nfi\r\n{code}\r\n\r\nThis causes the process context of the libvirtd daemon to be associated with the same context as the process that restarted it, which is the httpd server (the Node Controller):\r\n{code}\r\n[root@a-34 log]# ps -eZ | grep httpd_t\r\nsystem_u:system_r:httpd_t:s0     2488 ?        00:00:00 httpd\r\nsystem_u:system_r:httpd_t:s0     2556 ?        00:01:48 httpd\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Instance Migration Fails when SELinux is enabled and is in Permissive mode.","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_89401300_*|*_10000_*:*_1_*:*_18952008_*|*_10001_*:*_1_*:*_9672354012_*|*_10003_*:*_1_*:*_1142136659_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i03jhr:","customfield_10001":"2016-03-24T14:25:35.516-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["shaon(shaon)","jgallucci32(jgallucci32)","sgraham(sgraham)","vasya(vasya)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/100677","id":"100677","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~sgraham], are you looking for a warning that migration would not work or set valid context for libvirt?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-03-24T14:25:35.516-0500","updated":"2016-03-24T14:25:35.516-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/100714","id":"100714","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~gholms], [~sgraham], Do I understand correctly that warning only make sense on 4.2 and the fix should not be merged into master?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-03-25T15:58:42.448-0500","updated":"2016-03-25T15:58:42.448-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/100715","id":"100715","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in 58a544bb797555d600060b2b54aca9fd41cb3fc2","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-03-25T16:48:38.930-0500","updated":"2016-03-25T16:48:38.930-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/101180","id":"101180","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"So, the fix is to provide appropriate warning when instance migration fails due to selinux?\r\n\r\ne.g\r\n{noformat}\r\n2016-04-07 17:49:46 DEBUG 000005367 migrating_thread         | [i-81da54f3] connecting to remote hypervisor at 'qemu+tls://10.111.5.196/system'\r\n2016-04-07 17:49:46  INFO 000005367 migrating_thread         | [i-81da54f3] migrating instance\r\n2016-04-07 17:49:46 ERROR 000005367 libvirt_err_handler      | libvirt: internal error Cannot parse sensitivity level in s0 (code=1)\r\n2016-04-07 17:49:46  WARN 000005367 check_enforce            | SELinux is in Permissive mode. Some functionality like migration would not work.\r\n2016-04-07 17:49:46 ERROR 000005367 migrating_thread         | [i-81da54f3] cannot migrate instance, giving up and rolling back.\r\n2016-04-07 17:49:46 DEBUG 000005367 migrating_thread         | 1 outgoing migrations still active\r\n2016-04-07 17:49:46  INFO 000005367 migration_rollback       | [i-81da54f3] starting migration rollback of instance on source 10.111.5.4\r\n2016-04-07 17:49:46  INFO 000005367 migration_rollback       | [i-81da54f3] migration source rolled back\r\n2016-04-07 17:49:46 DEBUG 000005367 migrating_thread         | done\r\n2016-04-07 17:49:51 DEBUG 000003491 doDescribeResource       | Core status:   in-use 1 physical 16 over-committed no\r\n2016-04-07 17:49:51 DEBUG 000003491 doDescribeResource       | Memory status: in-use 512 physical 65846 over-committed no\r\n2016-04-07 17:49:51 DEBUG 000003491 doDescribeResource       | returning status=enabled cores=31/32 mem=65334/65846 disk=48/58 iqn=iqn.1994-05.com.redhat:24cfa3215772\r\n2016-04-07 17:49:51 DEBUG 000003491 doDescribeInstances      | invoked userId=eucalyptus correlationId=UNSET epoch=34 services[0]{.name=10.111.1.63 .type=autoscalingbackend .uris[0]=http://10.111.1.63:8773/services/AutoScalingBackend}\r\n2016-04-07 17:49:51 DEBUG 000003491 doDescribeInstances      | [i-81da54f3] Extant (running) pub=10.111.30.63 vols=\r\n2016-04-07 17:49:51  INFO 000003491 doMigrateInstances       | migrating 1 instances\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | verifying instance # 0...\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | invoked (action=commit instance[0].{id=i-81da54f3 src=10.111.5.4 dst=10.111.5.196) creds=UNSET\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | verifying instance # 0...\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | [i-81da54f3] proposed migration action 'commit' (10.111.5.4 > 10.111.5.196) [creds=present]\r\n2016-04-07 17:49:51 DEBUG 000003491 doMigrateInstances       | [i-81da54f3] processing instance # 0 (10.111.5.4 > 10.111.5.196)\r\n2016-04-07 17:49:51 ERROR 000003491 doMigrateInstances       | [i-81da54f3] request to commit migration 10.111.5.4 > 10.111.5.196 when source migration_state='none' (not 'ready')\r\n2016-04-07 17:49:51 ERROR 000003491 ncMigrateInstancesMarsha | failed error=11\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-07T19:53:06.961-0500","updated":"2016-04-07T19:53:06.961-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/101188","id":"101188","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Yarp","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2016-04-07T20:57:12.212-0500","updated":"2016-04-07T20:57:12.212-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39692/comment/102031","id":"102031","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jgallucci32","name":"jgallucci32","key":"jgallucci32","accountId":"557058:1cd98ee4-b2ee-4683-a315-2a6abd75b048","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"John Gallucci","active":true,"timeZone":"America/Los_Angeles"},"body":"I saw this ticket and was wondering why I couldn't reproduce the problem on RHEL 6.7 with SELinux in Permissive mode (I am migrating dozens of instances).\r\n\r\nThen in occured to me that sometime in 4.1.1 we put in a workaround because SELinux had issues but I never reported it.  For those interested this is how we fixed SELinux issues with the instances\r\n{noformat}sed -i 's/#security_driver =.*/security_driver = \"none\"/g' /etc/libvirt/qemu.conf{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jgallucci32","name":"jgallucci32","key":"jgallucci32","accountId":"557058:1cd98ee4-b2ee-4683-a315-2a6abd75b048","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/31cfdf964a6ac26962c22f3279e2c85c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"John Gallucci","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-26T23:58:15.648-0500","updated":"2016-04-26T23:58:15.648-0500"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11803/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}