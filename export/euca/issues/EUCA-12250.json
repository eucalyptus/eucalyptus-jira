{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"42440","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42440","key":"EUCA-12250","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2016-04-28T16:15:59.575-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12250/watchers","watchCount":2,"isWatching":false},"created":"2016-04-24T12:13:33.433-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10300":null,"labels":["AWSCompat-PM"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16401","id":"16401","description":"Eucalyptus 4.2.1","name":"4.2.1","archived":false,"released":true,"releaseDate":"2015-12-07"}],"issuelinks":[],"assignee":null,"updated":"2016-06-06T16:33:20.767-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nPer [AWS documentation regarding specifying block device mappings for instance store-backed AMIs|http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html#create-ami-bdm], a user can register an instance store-backed machine image with additional instance store block device mappings upon registration of the machine image.  \r\n{quote}\r\n...\r\nFor an EBS-backed AMI, you can add EBS volumes and instance store volumes using a block device mapping. For an instance store-backed AMI, you can add instance store volumes only by modifying the block device mapping entries in the image manifest file when registering the image.\r\n...\r\n{quote}\r\nCurrently, we support registering the machine image, however we do not pass the instance store block device mapping to the instance. Eucalyptus Version: {{4.2.2-0.24193.25.20160415git7967717.el6}}.\r\n\r\n*Signs*\r\n\r\n* Registration of EMI\r\n{code}\r\n[root@c-31 ~]# euca-install-image -i wily-server-cloudimg-amd64-disk1.raw -b ubuntu-wily-x86_64-hvm-20160424 -n ubuntu-wily-x86_64-hvm --arch x86_64 --virtualization-type hvm --block-device-mappings \"/dev/sdb=ephemeral0,/dev/sdc=ephemeral1\" --region qa-admin@asap-rocky\r\n/var/tmp/bundle-Nw7Qtu/wily-server-cloudimg-amd64-disk1.raw.part.00 100% |===================================================================================================|  10.00 MB  17.39 MB/s Time: 0:00:00\r\n/var/tmp/bundle-Nw7Qtu/wily-server-cloudimg-amd64-disk1.raw.part.01 100% |===================================================================================================|  10.00 MB  17.41 MB/s Time: 0:00:00\r\n....\r\n/var/tmp/bundle-Nw7Qtu/wily-server-cloudimg-amd64-disk1.raw.part.28 100% |===================================================================================================|   5.69 MB   8.47 MB/s Time: 0:00:00\r\n/var/tmp/bundle-Nw7Qtu/wily-server-cloudimg-amd64-disk1.raw.manifest.xml 100% |==============================================================================================|   6.32 kB  12.88 kB/s Time: 0:00:00\r\nIMAGE\temi-7071903b\r\n{code}\r\n* Instance launched successfully; display block devices provided to instance\r\n{code}\r\n[root@c-31 ~]# euca-describe-instances i-95d37940 --region qa-admin@asap-rocky\r\nRESERVATION\tr-cfd4d0d5\t001879049886\tdefault\r\nINSTANCE\ti-95d37940\temi-7071903b\teuca-10-116-162-81.eucalyptus.g-22-07.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-15-196.eucalyptus.internal\trunning\tqa-admin\t0\t\tm1.xlarge\t2016-04-24T16:35:38.422Z\tat-long-last-asap\t\t\t\tmonitoring-disabled\t10.116.162.81\t172.31.15.196\tvpc-896cd872\tsubnet-54166805\tinstance-store\t\t\t\t\thvm\t\t\tsg-43cf6cf7\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-a43bf008\tsubnet-54166805\tvpc-896cd872\t001879049886\tin-use\t172.31.15.196\teuca-172-31-15-196.eucalyptus.internal\ttrue\r\nATTACHMENT\teni-attach-977f7fa0\t0\tattached\t2016-04-24T16:35:38.429Z\ttrue\r\nASSOCIATION\t10.116.162.81\t\t172.31.15.196\r\nGROUP\tsg-43cf6cf7\tdefault\r\nPRIVATEIPADDRESS\t172.31.15.196\teuca-172-31-15-196.eucalyptus.internal\tprimary\r\n\r\n[root@c-31 ~]# ssh -i qa-admin ubuntu@euca-10-116-162-81.eucalyptus.g-22-07.autoqa.qa1.eucalyptus-systems.com\r\nWelcome to Ubuntu 15.10 (GNU/Linux 4.2.0-35-generic x86_64)\r\n\r\n * Documentation:  https://help.ubuntu.com/\r\n\r\n  Get cloud support with Ubuntu Advantage Cloud Guest:\r\n    http://www.ubuntu.com/business/services/cloud\r\n\r\n0 packages can be updated.\r\n0 updates are security updates.\r\n\r\nNew release '16.04 LTS' available.\r\nRun 'do-release-upgrade' to upgrade to it.\r\n\r\n\r\nLast login: Sun Apr 24 16:48:39 2016 from 10.111.1.66\r\nubuntu@euca-172-31-15-196:~$ ls /dev/vd*\r\nvda   vda1  vdb\r\n\r\nubuntu@euca-172-31-15-196:~$ sudo parted /dev/vdb\r\nGNU Parted 3.2\r\nUsing /dev/vdb\r\nWelcome to GNU Parted! Type 'help' to view a list of commands.\r\n(parted) print\r\nModel: Virtio Block Device (virtblk)\r\nDisk /dev/vdb: 13.7GB\r\nSector size (logical/physical): 512B/512B\r\nPartition Table: loop\r\nDisk Flags:\r\n\r\nNumber  Start  End     Size    File system  Flags\r\n 1      0.00B  13.7GB  13.7GB  ext3\r\n\r\n(parted) exit\r\nubuntu@euca-172-31-15-196:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping; echo\r\nami\r\nemi\r\nephemeral0\r\nroot\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"HVM EMI registered with multiple instance store block devices, fails to display the correct instance store mapping ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i03q1z:","customfield_10000":"5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_360146152","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2016-04-28T16:15:59.583-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dmitrii(dmitrii)","hspencer(hspencer)"],"customfield_10116":null,"customfield_10117":null,"environment":"*Federated Setup*\r\n* Eucalyptus multi-cluster cloud with Eucalyptus DNS enabled - [hspencer-309|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.2/309/]\r\n* Eucalyptus cloud with Eucalyptus DNS enabled - [hspencer-352|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.2/352/]","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42440/comment/102163","id":"102163","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Expected behavior for ephemeral devices.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-04-28T16:15:59.583-0500","updated":"2016-04-28T16:15:59.583-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12250/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}