{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"62406","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/62406","key":"EUCA-13454","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13454/watchers","watchCount":1,"isWatching":false},"created":"2017-11-13T11:55:06.536-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/19100","id":"19100","description":"Eucalyptus 4.4.2","name":"4.4.2","archived":false,"released":true,"releaseDate":"2017-08-30"}],"customfield_11901":null,"issuelinks":[{"id":"54003","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/54003","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"56900","key":"EUCA-13335","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/56900","fields":{"summary":"Failed to set property services.loadbalancing.worker.image","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":null,"updated":"2017-11-15T10:56:27.259-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10012","id":"10012","name":"Properties Service"}],"timeoriginalestimate":null,"description":"When there are load balancers in use setting the keyname property fails due to timeout:\r\n\r\n{code}\r\n#\r\n# euctl services.loadbalancing.worker.keyname=root\r\neuctl: error: connection error (HTTPConnectionPool(host='properties.e-04.autoqa.qa1.eucalyptus-systems.com', port=8773): Read timed out. (read timeout=30.0))\r\n#\r\n{code}\r\n\r\nincreasing the euca2ools client timeout and running against the cloud controller we see:\r\n\r\n{code}\r\n#\r\n# euctl -U http://10.111.1.39:8773/services/Properties services.loadbalancing.worker.keyname=root\r\neuctl: error (ModifyPropertyValueType): Could not change key name due to: Failed to modify properties. Check log files for error details\r\n#\r\n#\r\n{code}\r\n\r\nThe following error was logged on a ufs host in the cloud-error.log:\r\n\r\n{code}\r\nMon Nov 13 09:50:21 2017 ERROR [EucalyptusActivityTasks$EucalyptusActivityTask:listenable-future-pool-2] [com.eucalyptus.loadbalancing.activities.EucalyptusActivityTasks$EucalyptusActivityTask.dispatchFailure(EucalyptusActivityTasks.java):2702] Loadbalancer activity error\r\ncom.eucalyptus.context.ServiceDispatchException: Failed to send message DescribeLaunchConfigurationsType to service autoscaling-request because: nested exception is com.eucalyptus.util.EucalyptusCloudException: Channel was closed before the response was received.:DescribeLaunchConfigurationsType:93681e97-0d67-4543-b811-316644e9c0b2::806d029b-0d68-4cb4-a6a9-680bdf1c3a69:return=true:epoch=null:status=null\r\n\tat com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:259)\r\n\tat com.eucalyptus.context.ServiceContext.lambda$runWithContext$2(ServiceContext.java:292)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.springframework.messaging.MessageHandlingException: nested exception is com.eucalyptus.util.EucalyptusCloudException: Channel was closed before the response was received.:DescribeLaunchConfigurationsType:93681e97-0d67-4543-b811-316644e9c0b2::806d029b-0d68-4cb4-a6a9-680bdf1c3a69:return=true:epoch=null:status=null\r\n\tat org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:96)\r\n\tat org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:89)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:109)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n\tat org.springframework.integration.handler.MessageHandlerChain$1.send(MessageHandlerChain.java:129)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n\tat org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:292)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:212)\r\n\tat org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:129)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:115)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n\tat org.springframework.integration.handler.MessageHandlerChain.handleMessageInternal(MessageHandlerChain.java:110)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n\tat org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n\tat org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n\tat org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n\tat org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:150)\r\n\tat org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:45)\r\n\tat org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:42)\r\n\tat org.springframework.messaging.core.AbstractDestinationResolvingMessagingTemplate.sendAndReceive(AbstractDestinationResolvingMessagingTemplate.java:112)\r\n\tat com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:254)\r\n\t... 4 more\r\nCaused by: com.eucalyptus.util.EucalyptusCloudException: Channel was closed before the response was received.:DescribeLaunchConfigurationsType:93681e97-0d67-4543-b811-316644e9c0b2::806d029b-0d68-4cb4-a6a9-680bdf1c3a69:return=true:epoch=null:status=null\r\n\tat com.eucalyptus.autoscaling.service.AutoScalingService.dispatchAction(AutoScalingService.java:80)\r\n\tat sun.reflect.GeneratedMethodAccessor973.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113)\r\n\tat org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:129)\r\n\tat org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49)\r\n\tat org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347)\r\n\tat org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88)\r\n\tat org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:131)\r\n\tat org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:330)\r\n\tat org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\r\n\tat org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:317)\r\n\tat org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:155)\r\n\tat org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:93)\r\n\t... 30 more\r\nCaused by: com.eucalyptus.util.async.ConnectionException: Channel was closed before the response was received.:DescribeLaunchConfigurationsType:93681e97-0d67-4543-b811-316644e9c0b2::806d029b-0d68-4cb4-a6a9-680bdf1c3a69:return=true:epoch=null:status=null\r\n\tat com.eucalyptus.util.async.AsyncRequestHandler.checkFinished(AsyncRequestHandler.java:325)\r\n\tat com.eucalyptus.util.async.AsyncRequestHandler.handleUpstream(AsyncRequestHandler.java:268)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:119)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:119)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:119)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:119)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:119)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.channelDisconnected(SimpleChannelUpstreamHandler.java:208)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:102)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.handler.codec.replay.ReplayingDecoder.cleanup(ReplayingDecoder.java:570)\r\n\tat org.jboss.netty.handler.codec.frame.FrameDecoder.channelDisconnected(FrameDecoder.java:365)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:102)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.channel.SimpleChannelHandler.channelDisconnected(SimpleChannelHandler.java:199)\r\n\tat org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:120)\r\n\tat org.jboss.netty.handler.timeout.IdleStateAwareChannelHandler.handleUpstream(IdleStateAwareChannelHandler.java:36)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.channelDisconnected(SimpleChannelUpstreamHandler.java:208)\r\n\tat org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:102)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\r\n\tat org.jboss.netty.channel.Channels.fireChannelDisconnected(Channels.java:396)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:361)\r\n\tat org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventSunk(NioClientSocketPipelineSink.java:58)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779)\r\n\tat org.jboss.netty.channel.SimpleChannelHandler.closeRequested(SimpleChannelHandler.java:334)\r\n\tat org.jboss.netty.channel.SimpleChannelHandler.handleDownstream(SimpleChannelHandler.java:260)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:54)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleDownstream(MessageStackHandler.java:89)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleDownstream(MessageStackHandler.java:89)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleDownstream(MessageStackHandler.java:89)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleDownstream(MessageStackHandler.java:89)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:784)\r\n\tat com.eucalyptus.ws.handlers.MessageStackHandler.handleDownstream(MessageStackHandler.java:89)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:591)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:582)\r\n\tat org.jboss.netty.channel.Channels.close(Channels.java:812)\r\n\tat org.jboss.netty.channel.AbstractChannel.close(AbstractChannel.java:197)\r\n\tat com.eucalyptus.ws.Handlers$2$1.channelIdle(Handlers.java:251)\r\n\tat org.jboss.netty.handler.timeout.IdleStateAwareChannelHandler.handleUpstream(IdleStateAwareChannelHandler.java:34)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n\tat org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n\tat org.jboss.netty.handler.timeout.IdleStateHandler.channelIdle(IdleStateHandler.java:392)\r\n\tat org.jboss.netty.handler.timeout.IdleStateHandler$1.run(IdleStateHandler.java:382)\r\n\tat org.jboss.netty.channel.socket.ChannelRunnableWrapper.run(ChannelRunnableWrapper.java:40)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.processTaskQueue(AbstractNioSelector.java:366)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:290)\r\n\tat org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:90)\r\n\tat org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\r\n\tat org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\r\n\tat org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\r\n\tat org.jboss.netty.handler.execution.MemoryAwareThreadPoolExecutor$MemoryAwareRunnable.run(MemoryAwareThreadPoolExecutor.java:622)\r\n\t... 3 more\r\nMon Nov 13 09:50:25 2017 ERROR [ModifyServicePropertiesWorkflowImpl:SWF Decider LoadBalancerTasks 2] [com.eucalyptus.loadbalancing.workflow.ModifyServicePropertiesWorkflowImpl$1.doCatch(ModifyServicePropertiesWorkflowImpl.java):60] Workflow for modifying ELB service properties has failed: \r\ncom.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: Failed to apply ELB property changes for activityId=\"2\" of activityType={Name: LoadBalancingActivities.modifyServicePropertiesUpdateScalingGroup,Version: 1.0}\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.GenericActivityClientImpl.handleActivityTaskFailed(GenericActivityClientImpl.java:192)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.AsyncDecider.processEvent(AsyncDecider.java:188)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.AsyncDecider.decide(AsyncDecider.java:496)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.AsyncDecisionTaskHandler.handleDecisionTask(AsyncDecisionTaskHandler.java:50)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.DecisionTaskPoller.pollAndProcessSingleTask(DecisionTaskPoller.java:201)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.GenericWorker$PollServiceTask.run(GenericWorker.java:94)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n\tat --- continuation ---.(:0)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.GenericActivityClientImpl.scheduleActivityTask(GenericActivityClientImpl.java:103)\r\n\tat com.amazonaws.services.simpleworkflow.flow.DynamicActivitiesClientImpl$2.doTry(DynamicActivitiesClientImpl.java:120)\r\n\tat --- continuation ---.(:0)\r\n\tat com.amazonaws.services.simpleworkflow.flow.DynamicActivitiesClientImpl.scheduleActivity(DynamicActivitiesClientImpl.java:101)\r\n\tat com.amazonaws.services.simpleworkflow.flow.DynamicActivitiesClientImpl$1.doExecute(DynamicActivitiesClientImpl.java:91)\r\n\tat --- continuation ---.(:0)\r\n\tat com.amazonaws.services.simpleworkflow.flow.core.Functor.<init>(Functor.java:22)\r\n\tat com.amazonaws.services.simpleworkflow.flow.DynamicActivitiesClientImpl$1.<init>(DynamicActivitiesClientImpl.java:82)\r\n\tat com.amazonaws.services.simpleworkflow.flow.DynamicActivitiesClientImpl.scheduleActivity(DynamicActivitiesClientImpl.java:82)\r\n\tat com.amazonaws.services.simpleworkflow.flow.ActivitiesClientBase.scheduleActivity(ActivitiesClientBase.java:32)\r\n\tat com.eucalyptus.loadbalancing.workflow.LoadBalancingActivitiesClientImpl.modifyServicePropertiesUpdateScalingGroupImpl(LoadBalancingActivitiesClientImpl.java:1876)\r\n\tat com.eucalyptus.loadbalancing.workflow.LoadBalancingActivitiesClientImpl.modifyServicePropertiesUpdateScalingGroup(LoadBalancingActivitiesClientImpl.java:1839)\r\n\tat com.eucalyptus.loadbalancing.workflow.ModifyServicePropertiesWorkflowImpl$1.doTry(ModifyServicePropertiesWorkflowImpl.java:53)\r\n\tat --- continuation ---.(:0)\r\n\tat com.eucalyptus.loadbalancing.workflow.ModifyServicePropertiesWorkflowImpl.modifyServiceProperties(ModifyServicePropertiesWorkflowImpl.java:48)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.amazonaws.services.simpleworkflow.flow.pojo.POJOWorkflowDefinition.invokeMethod(POJOWorkflowDefinition.java:150)\r\n\tat com.amazonaws.services.simpleworkflow.flow.pojo.POJOWorkflowDefinition.access$1(POJOWorkflowDefinition.java:148)\r\n\tat com.amazonaws.services.simpleworkflow.flow.pojo.POJOWorkflowDefinition$1.doTry(POJOWorkflowDefinition.java:76)\r\n\tat --- continuation ---.(:0)\r\n\tat com.amazonaws.services.simpleworkflow.flow.pojo.POJOWorkflowDefinition.execute(POJOWorkflowDefinition.java:66)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.AsyncDecider$WorkflowExecuteAsyncScope.doAsync(AsyncDecider.java:70)\r\nCaused by: com.eucalyptus.loadbalancing.workflow.LoadBalancingActivityException: Failed to apply ELB property changes\r\n\tat com.eucalyptus.loadbalancing.workflow.LoadBalancingActivitiesImpl.modifyServicePropertiesUpdateScalingGroup(LoadBalancingActivitiesImpl.java:2421)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat com.amazonaws.services.simpleworkflow.flow.pojo.POJOActivityImplementation.execute(POJOActivityImplementation.java:64)\r\n\tat com.amazonaws.services.simpleworkflow.flow.generic.ActivityImplementationBase.execute(ActivityImplementationBase.java:46)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.SynchronousActivityTaskPoller.execute(SynchronousActivityTaskPoller.java:196)\r\n\tat com.amazonaws.services.simpleworkflow.flow.worker.ActivityTaskPoller$2.run(ActivityTaskPoller.java:92)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.RuntimeException: failed to describe launch configuration\r\n\tat com.eucalyptus.util.Exceptions.toUndeclared(Exceptions.java:259)\r\n\tat com.eucalyptus.util.Exceptions.toUndeclared(Exceptions.java:265)\r\n\tat com.eucalyptus.loadbalancing.activities.EucalyptusActivityTasks.resultOf(EucalyptusActivityTasks.java:2777)\r\n\tat com.eucalyptus.loadbalancing.activities.EucalyptusActivityTasks.describeLaunchConfigurationImpl(EucalyptusActivityTasks.java:558)\r\n\tat com.eucalyptus.loadbalancing.activities.EucalyptusActivityTasks.describeLaunchConfiguration(EucalyptusActivityTasks.java:555)\r\n\tat com.eucalyptus.loadbalancing.workflow.LoadBalancingActivitiesImpl.modifyServicePropertiesUpdateScalingGroup(LoadBalancingActivitiesImpl.java:2370)\r\n\t... 11 more\r\nCaused by: com.eucalyptus.loadbalancing.activities.EucalyptusActivityException: failed to describe launch configuration\r\n\tat com.eucalyptus.loadbalancing.activities.EucalyptusActivityTasks.resultOf(EucalyptusActivityTasks.java:2775)\r\n\t... 14 more\r\n{code}\r\n\r\nA work around could be to manually set the key for use by a load balancer on the related launch configuration for the elbs autoscaling group under the load balancing system account.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"security":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"ELB timeout setting worker keyname property","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i0456v:","customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["sjones(sjones)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13454/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/62406/comment/128052","id":"128052","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue is caused by long running administrative actions blocking workers and causing other actions to timeout due to not being handled. We run with 32 server workers in 4.4.x:\r\n\r\n{code}\r\n# euctl bootstrap.webservices.server_pool_max_threads\r\nbootstrap.webservices.server_pool_max_threads = 32\r\n{code}\r\n\r\nwith each worker expected to handle multiple connections. \r\n\r\nWhen the load balancing worker keyname is updated a workflow is started to validate the new value and update the launch configurations for existing load balancers. When there are a few load balancers this generates enough activity that a request will be assigned for handling by the worker that is blocked handling the administrative property modification request. This will cause a timeout leading to the failure of the workflow and the property modification.\r\n\r\nThe configuration can be updated so that administrative actions run with a separate worker pool and so do not block other actions from being handled:\r\n\r\n{code}\r\n#\r\n# euctl bootstrap.webservices.async_internal_operations=true\r\nbootstrap.webservices.async_internal_operations = true\r\n#\r\n{code}\r\n\r\nAfter changing this property and waiting 30 seconds for the change to be applied it is possible to modify the load balancer worker keyname property.\r\n\r\nOnce the load balancer is updated this bootstrap.webservices.async_internal_operations setting change should be reverted as it also impacts service actions.\r\n\r\nThis issue most likely also occurs with any of the following load balancing worker configuration properties:\r\n\r\n* services.loadbalancing.worker.image\r\n* services.loadbalancing.worker.init_script\r\n* services.loadbalancing.worker.instance_type\r\n* services.loadbalancing.worker.keyname\r\n\r\nand the same workaround applies.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-11-13T12:49:01.409-0600","updated":"2017-11-13T12:49:01.409-0600"}],"maxResults":1,"total":1,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}