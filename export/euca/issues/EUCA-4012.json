{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"16812","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16812","key":"EUCA-4012","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2015-05-20T14:17:29.932-0500","customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4012/watchers","watchCount":5,"isWatching":false},"created":"2012-10-31T14:30:26.708-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"issuelinks":[],"assignee":null,"updated":"2016-06-06T16:32:03.810-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"I created a volume, attached it to a running instance, did some tests and detached the volume.  \r\n\r\nNext I attempted to attach the volume again using the same command and I saw an error: AttachVolumeType: Already have a device attached to: /dev/sdg\r\n\r\nSee details:\r\n\r\n{noformat}\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tin-use\t2012-10-31T18:42:57.721Z\r\nATTACHMENT\tvol-FA053FE7\ti-CA4A45B1\t/dev/sdf\tattached\t2012-10-31T18:53:04.037Z\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nVOLUME\tvol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdf vol-FA053FE7 --debug\r\n2012-10-31 12:11:52,354 euca2ools [DEBUG]:Method: POST\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:Path: /services/Eucalyptus/\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:Data: \r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:Headers: {}\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:Host: 192.168.51.196:8773\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:establishing HTTP connection: kwargs={}\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:Token: None\r\n2012-10-31 12:11:52,355 euca2ools [DEBUG]:using _calc_signature_2\r\n2012-10-31 12:11:52,356 euca2ools [DEBUG]:query string: AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdf&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A11%3A52Z&Version=2009-11-30&VolumeId=vol-FA053FE7\r\n2012-10-31 12:11:52,356 euca2ools [DEBUG]:string_to_sign: POST\r\n192.168.51.196:8773\r\n/services/Eucalyptus/\r\nAWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdf&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A11%3A52Z&Version=2009-11-30&VolumeId=vol-FA053FE7\r\n2012-10-31 12:11:52,356 euca2ools [DEBUG]:len(b64)=44\r\n2012-10-31 12:11:52,356 euca2ools [DEBUG]:base64 encoded digest: VgBAJQbss3f8aZzRrrVtSyFwB9xDhNRuUPblgSEEmW4=\r\n2012-10-31 12:11:52,356 euca2ools [DEBUG]:query_string: AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdf&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A11%3A52Z&Version=2009-11-30&VolumeId=vol-FA053FE7 Signature: VgBAJQbss3f8aZzRrrVtSyFwB9xDhNRuUPblgSEEmW4=\r\nsend: 'POST /services/Eucalyptus/ HTTP/1.1\\r\\nHost: 192.168.51.196:8773\\r\\nAccept-Encoding: identity\\r\\nContent-Length: 277\\r\\nContent-Type: application/x-www-form-urlencoded; charset=UTF-8\\r\\nUser-Agent: Boto/2.5.2 (linux2)\\r\\n\\r\\n'\r\nsend: 'AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdf&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A11%3A52Z&Version=2009-11-30&VolumeId=vol-FA053FE7&Signature=VgBAJQbss3f8aZzRrrVtSyFwB9xDhNRuUPblgSEEmW4%3D'\r\nreply: 'HTTP/1.1 406 Not Acceptable\\r\\n'\r\nheader: Content-Length: 1813\r\nheader: Content-Type: application/xml; charset=UTF-8\r\n2012-10-31 12:11:52,550 euca2ools [DEBUG]:<?xml version=\"1.0\"?><Response><Errors><Error><Code>AttachVolumeType</Code><Message>Already have a device attached to: /dev/sdf</Message></Error></Errors><RequestID>com.eucalyptus.util.EucalyptusCloudException: Already have a device attached to: /dev/sdf\r\ncom.eucalyptus.util.EucalyptusCloudException: Already have a device attached to: /dev/sdf\r\n\tat com.eucalyptus.blockstorage.VolumeManager.AttachVolume(VolumeManager.java:346)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:127)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService$ComponentStageWorker.run(SedaService.java:533)\r\n\tat org.mule.work.WorkerContext.run(WorkerContext.java:310)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\r\n\tat java.lang.Thread.run(Thread.java:679)\r\n</RequestID></Response>\r\n2012-10-31 12:11:52,550 euca2ools [ERROR]:406 Not Acceptable\r\n2012-10-31 12:11:52,550 euca2ools [ERROR]:<?xml version=\"1.0\"?><Response><Errors><Error><Code>AttachVolumeType</Code><Message>Already have a device attached to: /dev/sdf</Message></Error></Errors><RequestID>com.eucalyptus.util.EucalyptusCloudException: Already have a device attached to: /dev/sdf\r\ncom.eucalyptus.util.EucalyptusCloudException: Already have a device attached to: /dev/sdf\r\n\tat com.eucalyptus.blockstorage.VolumeManager.AttachVolume(VolumeManager.java:346)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:127)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService$ComponentStageWorker.run(SedaService.java:533)\r\n\tat org.mule.work.WorkerContext.run(WorkerContext.java:310)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\r\n\tat java.lang.Thread.run(Thread.java:679)\r\n</RequestID></Response>\r\nAttachVolumeType: Already have a device attached to: /dev/sdf\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdg vol-FA053FE7 --debug\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Method: POST\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Path: /services/Eucalyptus/\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Data: \r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Headers: {}\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Host: 192.168.51.196:8773\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:establishing HTTP connection: kwargs={}\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:Token: None\r\n2012-10-31 12:21:56,014 euca2ools [DEBUG]:using _calc_signature_2\r\n2012-10-31 12:21:56,015 euca2ools [DEBUG]:query string: AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdg&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A21%3A56Z&Version=2009-11-30&VolumeId=vol-FA053FE7\r\n2012-10-31 12:21:56,015 euca2ools [DEBUG]:string_to_sign: POST\r\n192.168.51.196:8773\r\n/services/Eucalyptus/\r\nAWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdg&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A21%3A56Z&Version=2009-11-30&VolumeId=vol-FA053FE7\r\n2012-10-31 12:21:56,016 euca2ools [DEBUG]:len(b64)=44\r\n2012-10-31 12:21:56,016 euca2ools [DEBUG]:base64 encoded digest: xB4XrA/+caSvuZjghtgJtq3+1jDScL42JAZMBbw0P/4=\r\n2012-10-31 12:21:56,016 euca2ools [DEBUG]:query_string: AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdg&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A21%3A56Z&Version=2009-11-30&VolumeId=vol-FA053FE7 Signature: xB4XrA/+caSvuZjghtgJtq3+1jDScL42JAZMBbw0P/4=\r\nsend: 'POST /services/Eucalyptus/ HTTP/1.1\\r\\nHost: 192.168.51.196:8773\\r\\nAccept-Encoding: identity\\r\\nContent-Length: 285\\r\\nContent-Type: application/x-www-form-urlencoded; charset=UTF-8\\r\\nUser-Agent: Boto/2.5.2 (linux2)\\r\\n\\r\\n'\r\nsend: 'AWSAccessKeyId=GFVTNSVV4OJUA6YDXXIW8&Action=AttachVolume&Device=%2Fdev%2Fsdg&InstanceId=i-CA4A45B1&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2012-10-31T19%3A21%3A56Z&Version=2009-11-30&VolumeId=vol-FA053FE7&Signature=xB4XrA%2F%2BcaSvuZjghtgJtq3%2B1jDScL42JAZMBbw0P%2F4%3D'\r\nreply: 'HTTP/1.1 200 OK\\r\\n'\r\nheader: Content-Length: 262\r\nheader: Content-Type: application/xml; charset=UTF-8\r\n2012-10-31 12:21:56,636 euca2ools [DEBUG]:<AttachVolumeResponse xmlns=\"http://ec2.amazonaws.com/doc/2009-11-30/\"><volumeId>vol-FA053FE7</volumeId><instanceId>i-CA4A45B1</instanceId><device>/dev/sdg</device><status>attaching</status><attachTime>2012-10-31T19:21:56.584Z</attachTime></AttachVolumeResponse>\r\nVOLUME\tvol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nDetachVolumeType: Failed to detach volume which is currently attaching: vol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nDetachVolumeType: Failed to detach volume which is currently attaching: vol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nDetachVolumeType: Failed to detach volume which is currently attaching: vol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nDetachVolumeType: Failed to detach volume which is currently attaching: vol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nDetachVolumeType: Failed to detach volume which is currently attaching: vol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-FA053FE7\r\nVOLUME\tvol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdg vol-FA053FE7\r\nAttachVolumeType: Already have a device attached to: /dev/sdg\r\n{noformat}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Re-attaching volume complains that device is already attached","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":"5_*:*_1_*:*_0_*|*_10000_*:*_2_*:*_152468076_*|*_10001_*:*_1_*:*_80271059492_*|*_10005_*:*_1_*:*_14095685","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01wu7:","customfield_10001":"2012-11-01T12:30:39.835-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["awithrow(awithrow)","tjcramer(tjcramer)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16812/comment/34547","id":"34547","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"show if the volume is available first before attempting re-attach","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-01T12:30:39.835-0500","updated":"2012-11-01T12:30:39.835-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16812/comment/34565","id":"34565","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"I attempted to reproduce this and saw further strange behavior:\r\n\r\nI launched a new instance, created and attached a new volume to that new instance.  Detached the volume, confirmed it was \"available\" and tried to add again and saw a different error.  I waited  bit and tried again and it was successful.  Look like the the volume isn't really available though the output from the describe-volumes says it is.  \r\n\r\n{code}\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:13:06.378Z\r\n[root@eucahost-51-196 ~]# \r\n[root@eucahost-51-196 ~]# \r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:13:48 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-detach-volume vol-1C283E83\r\nVOLUME\tvol-1C283E83\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:13:57 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tdetaching\t2012-11-01T21:13:06.378Z\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tavailable\t2012-11-01T17:55:42.758Z\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:14:15 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-attach-volume vol-1C283E83 -i i-5FBB3FCB -d /dev/sdf\r\nAttachVolumeType: Failed to send message AttachStorageVolumeType to service StorageInternal because: Unable to run command: tgtadm: this target already exists\r\n\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:14:22 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tavailable\t2012-11-01T17:55:42.758Z\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:14:40 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-attach-volume vol-1C283E83 -i i-5FBB3FCB -d /dev/sdf\r\nAttachVolumeType: Failed to send message AttachStorageVolumeType to service StorageInternal because: Unable to run command: tgtadm: this target already exists\r\n\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:14:52 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-attach-volume vol-1C283E83 -i i-5FBB3FCB -d /dev/sdf\r\nVOLUME\tvol-1C283E83\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:15:05 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattaching\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# \r\n{code}\r\n\r\n\r\nI tried to reproduce with the original instance and volume and saw this same error, though also saw this fail with no error:\r\n\r\n{code}\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:20:25 PDT 2012\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:20:31 PDT 2012\r\n[root@eucahost-51-196 ~]# \r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdf vol-FA053FE7\r\nAttachVolumeType: Failed to send message AttachStorageVolumeType to service StorageInternal because: Unable to run command: tgtadm: this target already exists\r\n\r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdf vol-FA053FE7\r\nAttachVolumeType: Failed to send message AttachStorageVolumeType to service StorageInternal because: Unable to run command: tgtadm: this target already exists\r\n\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# euca-attach-volume -i i-CA4A45B1 -d /dev/sdf vol-FA053FE7\r\nVOLUME\tvol-FA053FE7\r\n[root@eucahost-51-196 ~]# euca-describe-volumes \r\nVOLUME\tvol-FA053FE7\t 1\t\tPARTI00\tavailable\t2012-10-31T18:42:57.721Z\r\nVOLUME\tvol-1C283E83\t 1\t\tPARTI00\tin-use\t2012-11-01T17:55:42.758Z\r\nATTACHMENT\tvol-1C283E83\ti-5FBB3FCB\t/dev/sdf\tattached\t2012-11-01T21:15:02.313Z\r\n[root@eucahost-51-196 ~]# date\r\nThu Nov  1 14:21:19 PDT 2012\r\n[root@eucahost-51-196 ~]# \r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-11-01T16:24:27.109-0500","updated":"2012-11-01T16:24:48.944-0500"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4012/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}