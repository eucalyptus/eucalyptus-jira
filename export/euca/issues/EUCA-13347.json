{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"57402","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57402","key":"EUCA-13347","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@19d80fff[id=149,rapidViewId=118,state=CLOSED,name=5.0 Sprint 2,goal=,startDate=2017-04-06T19:05:14.391Z,endDate=2017-04-27T19:05:00.000Z,completeDate=2017-05-01T19:25:11.414Z,sequence=149]"],"customfield_12800":null,"customfield_10105":null,"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10703":null,"customfield_10704":null,"resolutiondate":null,"customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13347/watchers","watchCount":3,"isWatching":false},"created":"2017-04-10T11:56:02.412-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2017-04-14T15:58:34.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[{"id":"51303","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/51303","type":{"id":"10100","name":"Blocks","inward":"is blocked by","outward":"blocks","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10100"},"inwardIssue":{"id":"55209","key":"EUCA-13260","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55209","fields":{"summary":"PBILL : Cloudwatch API sensor","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10003","description":"This issue is undergoing QA.  See linked QA issue(s) for progress.","iconUrl":"https://s3.amazonaws.com/awithrow-jira/Jira_icon_in_qa.png","name":"In QA","id":"10003","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2017-04-14T16:49:41.101-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10003","description":"This issue is undergoing QA.  See linked QA issue(s) for progress.","iconUrl":"https://s3.amazonaws.com/awithrow-jira/Jira_icon_in_qa.png","name":"In QA","id":"10003","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"As a cloud user I would like to see information on my cloudwatch api usage in my billing aws usage reports so that I can better manage my account.\r\n\r\nThis story builds on EUCA-13260 to use the sensor data in a report.","customfield_13200":null,"customfield_11300":"EUCA-12561","customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"PBILL: CloudWatch API aws usage reporting","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i043xb:","customfield_10001":"2017-04-12T18:40:51.084-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10004":3.0,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["spark(spark)","sjones(sjones)","tony(tony)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13347/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57402/comment/120719","id":"120719","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Changes for review:\r\n\r\n  https://github.com/sjones4/eucalyptus/commit/ca1c104fef74938c32b8\r\n\r\nCloudWatch request counts by operation (action) are now captured for aws usage reporting:\r\n\r\n{code}\r\neucalyptus_shared=# select auth_account_number, auth_account_name from eucalyptus_auth.auth_account;\r\n auth_account_number |     auth_account_name      \r\n---------------------+----------------------------\r\n 000207036766        | eucalyptus\r\n 000588823281        | (eucalyptus)imaging\r\n 000140890443        | (eucalyptus)aws-exec-read\r\n 000879948050        | (eucalyptus)blockstorage\r\n 000466144893        | (eucalyptus)cloudformation\r\n 000009157043        | (eucalyptus)database\r\n 000720472473        | (eucalyptus)loadbalancing\r\n 000628560605        | (eucalyptus)objectstorage\r\n 000763153932        | (eucalyptus)billing\r\n 000341383025        | (eucalyptus)simplequeue\r\n 000518010361        | testrunner\r\n(11 rows)\r\n\r\neucalyptus_shared=# select creation_timestamp, start_time, end_time, operation, account_id, service, usage_type, usage_value from eucalyptus_billing.aws_usage_hourly where service='AmazonCloudWatch' order by account_id, end_time, operation;\r\n   creation_timestamp    |     start_time      |      end_time       |        operation        |  account_id  |     service      |    usage_type    | usage_value \r\n-------------------------+---------------------+---------------------+-------------------------+--------------+------------------+------------------+-------------\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | DeleteAlarms            | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | DescribeAlarmHistory    | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | DescribeAlarms          | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | DescribeAlarmsForMetric | 000207036766 | AmazonCloudWatch | Request-NoCharge | 2\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | DisableAlarmActions     | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | EnableAlarmActions      | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | GetMetricStatistics     | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | ListMetrics             | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | PutMetricAlarm          | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.473 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | SetAlarmState           | 000207036766 | AmazonCloudWatch | Request-NoCharge | 300\r\n 2017-04-11 21:00:12.41  | 2017-04-11 20:00:00 | 2017-04-11 21:00:00 | DeleteAlarms            | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 21:00:12.41  | 2017-04-11 20:00:00 | 2017-04-11 21:00:00 | DescribeAlarms          | 000207036766 | AmazonCloudWatch | Request-NoCharge | 2\r\n 2017-04-11 21:00:12.41  | 2017-04-11 20:00:00 | 2017-04-11 21:00:00 | GetMetricStatistics     | 000207036766 | AmazonCloudWatch | Request-NoCharge | 8\r\n 2017-04-11 21:00:12.41  | 2017-04-11 20:00:00 | 2017-04-11 21:00:00 | PutMetricAlarm          | 000207036766 | AmazonCloudWatch | Request-NoCharge | 1\r\n 2017-04-11 20:00:11.356 | 2017-04-11 19:00:00 | 2017-04-11 20:00:00 | PutMetricData           | 000763153932 | AmazonCloudWatch | Request-NoCharge | 230\r\n 2017-04-11 21:00:12.285 | 2017-04-11 20:00:00 | 2017-04-11 21:00:00 | PutMetricData           | 000763153932 | AmazonCloudWatch | Request-NoCharge | 896\r\n(16 rows)\r\n{code}\r\n\r\nExample data from \"ViewUsage\" for \"cloudwatch\" service with \"Request-NoCharge\" usage type and \"hourly\" granularity:\r\n\r\n{code}\r\nService, Operation, UsageType, Resource, StartTime, EndTime, UsageValue\r\nAmazonCloudWatch,DeleteAlarms,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,GetMetricStatistics,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,PutMetricAlarm,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,SetAlarmState,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,300\r\nAmazonCloudWatch,DescribeAlarmsForMetric,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,2\r\nAmazonCloudWatch,ListMetrics,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,DescribeAlarmHistory,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,EnableAlarmActions,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,DisableAlarmActions,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,DescribeAlarms,Request-NoCharge,,04/11/17 19:00:00,04/11/17 20:00:00,1\r\nAmazonCloudWatch,DeleteAlarms,Request-NoCharge,,04/11/17 20:00:00,04/11/17 21:00:00,1\r\nAmazonCloudWatch,GetMetricStatistics,Request-NoCharge,,04/11/17 20:00:00,04/11/17 21:00:00,8\r\nAmazonCloudWatch,PutMetricAlarm,Request-NoCharge,,04/11/17 20:00:00,04/11/17 21:00:00,1\r\nAmazonCloudWatch,DescribeAlarms,Request-NoCharge,,04/11/17 20:00:00,04/11/17 21:00:00,2\r\n{code}\r\n\r\nThe CloudWatchServiceSensor now periodically (5 min) fires CloudWatchApiUsageEvents on each ufs host. The CloudWatchApiUsageEventListener handles the CloudWatchApiUsageEvents and submits them to the billing sensor sqs queue (\"BillingSensorQueue\") after transforming via QueuedEvents#FromCloudWatchApiUsageEvent. AwsUsageRecordType#CLOUDWATCH_REQUEST is added to generate aws usage records for the \"AmazonCloudWatch\" service.\r\n\r\nThe following items came up while working on this story that could be addressed for this issue by later work:\r\n* where to put operation in event? - currently passing as QueuedEvent#resourceId\r\n* what should event type be? - currently using CW:Requests for QueuedEvent#eventType\r\n* UsageType in report should have region?\r\n* should PortalService#viewUsage support queries with \"request\" usage type?\r\n* should we have a different report UsageType for usage with \"charges\"? (i.e. a subset of actions/operations)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-12T12:05:32.334-0500","updated":"2017-04-12T12:05:32.334-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57402/comment/120738","id":"120738","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"Looks good to me.\r\n\r\nFor other usage events, we use ResourceUsageEventWorkflow to periodically fire resource usage by services (instead of ClockTick listener). For CW, that would need a little extra work because activity tasks should be scheduled onto all UFS. We can address that later. \r\n\r\nwhere to put operation in event? - currently passing as QueuedEvent#resourceId\r\nThat usage is probably ok. We may want to change AwsUsageRecordType later to address growing number of service-operation-usage_type combinations.\r\n\r\nwhat should event type be? - currently using CW:Requests for QueuedEvent#eventType\r\neven type is used for only filtering events in AwsUsageRecordType. So any name should be ok.\r\n\r\nUsageType in report should have region?\r\nCurrently there is no region appended in other usage types. If we decide to do, we should do it for other services too.\r\n\r\nshould PortalService#viewUsage support queries with \"request\" usage type?\r\nI think so. EUCA-13326 might be relevant.\r\n\r\nshould we have a different report UsageType for usage with \"charges\"? (i.e. a subset of actions/operations)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-12T18:40:51.084-0500","updated":"2017-04-12T18:40:51.084-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57402/comment/120828","id":"120828","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The portal service now supports querying aws usage for the \"cloudwatch\" service and the \"request\" usage type. Currently it does not make any difference if you pass \"request\"  or null as there is only request data being captured. \r\n\r\nWhen there are multiple CloudWatch services data is aggregated from all hosts. The returned data is as shown in previous comments.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-14T16:48:52.775-0500","updated":"2017-04-14T16:48:52.775-0500"}],"maxResults":3,"total":3,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}