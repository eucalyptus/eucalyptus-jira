{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"14842","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842","key":"EUCA-3031","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10306","value":"System","id":"10306"}],"customfield_11401":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2013-02-23T12:48:22.354-0600","customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10203","value":"Xen","id":"10203"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3031/watchers","watchCount":5,"isWatching":false},"created":"2012-07-25T11:43:25.042-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:17:46.516-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"description":"Steps to reproduce:\r\n1) Run multiple RunInstances API calls in parallel. This can be achieved in one client application by running the following code multiple times in parallel on multiple threads:\r\n- create EC2 client\r\n- execute RunInstances API call\r\nThis pretty much simulates multiple clients executing the RunInstances API call in parallel.\r\n2) Wait for the RunInstances API calls to return and check that they report success and that a reservation ID has been provided.\r\n3) Run the DescribeInstances API call and check that all provided reservation IDs are listed there.\r\n\r\nExpected behavior:\r\nSince all RunInstances API calls have returned success, the DescribeInstances API call should return a list that covers all the received reservation IDs.\r\n\r\nActual behavior:\r\nOne or more of the RunInstances API fail on the backend. I can reproduce it with a minimum of 3 or 4 threads in parallel, but I expect it to depend on the speed of both the Cluster Controller and the client executing the calls.\r\n\r\nThe following error message is shown in the logs:\r\n\r\nWed Jul 25 11:37:55 2012 ERROR [ClusterAllocator:Eucalyptus.cluster:ClusterConfiguration:arn:euca:eucalyptus:cluster-us:cluster:\r\ncc-10.34.2.170/.class java.util.concurrent.ThreadPoolExecutor$Worker#557] [com.eucalyptus.cloud.run.ClusterAllocator.<init>(Clus\r\nterAllocator.java):192] org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update\r\nWed Jul 25 11:37:55 2012 ERROR [Allocations:Eucalyptus.cluster:ClusterConfiguration:arn:euca:eucalyptus:cluster-us:cluster:cc-10.34.2.170/.class java.util.concurrent.ThreadPoolExecutor$Worker#557] [com.eucalyptus.cloud.run.Allocations$Allocation.abort(Allocations.java):246] Aborting resource token: ResourceToken:i-042642A6:\r\njava.lang.RuntimeException\r\n        at com.eucalyptus.cloud.run.Allocations$Allocation.abort(Allocations.java:246)\r\n        at com.eucalyptus.cloud.run.ClusterAllocator.<init>(ClusterAllocator.java:194)\r\n        at com.eucalyptus.cloud.run.ClusterAllocator.<init>(ClusterAllocator.java:126)\r\n        at com.eucalyptus.cloud.run.ClusterAllocator$SubmitAllocation$1.call(ClusterAllocator.java:160)\r\n        at com.eucalyptus.cloud.run.ClusterAllocator$SubmitAllocation$1.call(ClusterAllocator.java:156)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Eucalyptus forget about reservation ID when handling multiple RunInstancesRequests on parallel connections","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"customfield_10000":"10001_*:*_1_*:*_8722812797_*|*_10000_*:*_1_*:*_9687884533_*|*_5_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01gzb:","customfield_10001":"2012-07-27T14:51:06.637-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["agrimm(agrimm)","kedwards(kedwards)","oskar.senft(oskar.senft)","tjcramer(tjcramer)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3031/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/30158","id":"30158","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I mean \"speed of the Cloud Controller\", not \"Cluster Controller\" in the description, sorry.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-07-25T11:44:46.688-0500","updated":"2012-07-25T11:44:46.688-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/30159","id":"30159","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"My initial feeling is that the Cloud Controller uses some kind of time-dependent \"random ID\" to create objects, which then causes problems when trying to store those objects in the DB as the ID might not be unique. I haven't looked at the code yet, so any pointer would be appreciated.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-07-25T11:46:00.725-0500","updated":"2012-07-25T11:46:00.725-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/30194","id":"30194","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I just realized that there's more information in the cloud-exhaust.log:\n\nWed Jul 25 11:37:55 2012 ERROR [org.hibernate.util.JDBCExceptionReporter.logExceptions(JDBCExceptionReporter.java):101] Batch entry 0 insert into metadata_extant_network (creation_timestamp, last_update_timestamp, metadata_perm_uuid, version, metadata_display_name, metadata_last_state, metadata_state, metadata_state_change_stack, metadata_account_name, metadata_account_id, metadata_unique_name, metadata_user_id, metadata_user_name, networkGroup_id, metadata_extant_network_tag, id) values ('2012-07-25 11:37:55.418000 -04:00:00', '2012-07-25 11:37:55.418000 -04:00:00', 'b7472a3c-9017-4977-9228-85b606259828', '0', 'default', 'PENDING', 'PENDING', 'n/a', NULL, '387824932736', '387824932736:default', '9CLHLH3WQ4CCGSEFMB34O', 'admin', 'ff808181384f032b013853d7c6c50456', '-268', 'ff808181386c124b0138bec989da56c3') was aborted.  Call getNextException to see the cause.\nWed Jul 25 11:37:55 2012  WARN [org.hibernate.util.JDBCExceptionReporter.logExceptions(JDBCExceptionReporter.java):100] SQL Error: 0, SQLState: 23505\nWed Jul 25 11:37:55 2012 ERROR [org.hibernate.util.JDBCExceptionReporter.logExceptions(JDBCExceptionReporter.java):101] ERROR: duplicate key value violates unique constraint \"metadata_extant_network_metadata_unique_name_key\"  Detail: Key (metadata_unique_name)=(387824932736:default) already exists.\n\nThe problems seems to be pretty straightforward: the metadata_unique_name is always set to \"387824932736:default\" (with \"387824932736\" == metadata_account_id), because all the requests come from the same user.\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-07-25T22:16:01.509-0500","updated":"2012-07-25T22:16:01.509-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/30297","id":"30297","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Oskar, thanks for this report.  I'll try to get someone to reproduce this internally.  At first glance, your analysis of the problem looks correct to me.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-07-27T14:51:06.637-0500","updated":"2012-07-27T14:51:06.637-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/35363","id":"35363","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"I have not reproduced this yet, but these steps should be sufficient to write a eutester test case to determine whether we've resolved this in 3.2, so I'm confirming it to get engineering's eyes on it.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-11-14T13:48:09.565-0600","updated":"2012-11-14T13:48:09.565-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/35370","id":"35370","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"Thanks, Andy. I'd like to add that we updated our client code to prevent parallel instantiations, but we're still getting this problem intermittently. In those scenarios we're pretty much in a \"production down\" situation until someone logs on and manually clears out the 'metadata_extant_network' table. I tried to figure out what's going on in the code, but I was missing internal information to understand why Eucalyptus tries to write a record to the table to begin with, so I eventually gave up :-/ It would be great if this was fixed in the latest Eucalyptus version!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-11-14T14:05:40.520-0600","updated":"2012-11-14T14:05:40.520-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/35473","id":"35473","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"This looks like it was fixed recently in 3.2.  Ken to verify","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-15T13:13:04.417-0600","updated":"2012-11-15T13:13:04.417-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14842/comment/40536","id":"40536","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixed in 3.2.1","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-23T12:48:22.369-0600","updated":"2013-02-23T12:48:22.369-0600"}],"maxResults":8,"total":8,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}