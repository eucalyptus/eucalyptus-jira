{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"34153","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34153","key":"EUCA-10328","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@58e18d49[id=92,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 9,goal=<null>,startDate=2014-12-19T17:39:04.067Z,endDate=2015-01-23T17:39:00.000Z,completeDate=2015-02-02T18:43:16.138Z,sequence=92]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10100","value":"Yes","id":"10100"},"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2015-01-17T00:14:24.840-0600","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10328/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2015-01-13T15:37:00.504-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2015-01-16T00:34:08.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"labels":["AWSCompat-PM"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"customfield_11901":null,"issuelinks":[{"id":"28559","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28559","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"33986","key":"EUCA-10275","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33986","fields":{"summary":"Snapshots Shared With Another Account Aren't Viewable","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"28589","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28589","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"34197","key":"EUCA-10361","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34197","fields":{"summary":"Disambiguate reset of snapshot behavior","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:04:49.889-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nWhile verifying EUCA-10275, tested resetting the snapshot attribute after it had been set.  Looks to not work. Use case was performed on [Group #1 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-TypeofDeployments].\r\n\r\n_Snapshot attribute Before Reset_\r\n{code}\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tgroup\tall\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tuserId\t792312799970\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-b52161a8 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-b52161a8\tuserId\t792312799970\r\n{code}\r\n\r\n_Reset Snapshot Attributes and Display Results_\r\n{code}\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tRESET\r\n\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tRESET\r\n\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-b52161a8 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-b52161a8\tRESET\r\n{code}\r\n{code}\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tgroup\tall\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tuserId\t792312799970\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-b52161a8 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-b52161a8\tuserId\t792312799970\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Uploaded IAM access policy for account that will create snapshots can share them:\r\n{code}\r\n# euare-grouplistpolicies -g Testers --region admin-hspencer@group1 -v\r\neuca23-snapshot-policy\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419701314091\",\r\n      \"Action\": [\r\n        \"ec2:CreateVolume\",\r\n        \"ec2:DeleteVolume\",\r\n        \"ec2:DescribeVolumeAttribute\",\r\n        \"ec2:DescribeVolumes\",\r\n        \"ec2:ModifyVolumeAttribute\",\r\n        \"ec2:CreateSnapshot\",\r\n        \"ec2:DeleteSnapshot\",\r\n        \"ec2:DescribeSnapshotAttribute\",\r\n        \"ec2:DescribeSnapshots\",\r\n        \"ec2:ModifySnapshotAttribute\",\r\n        \"ec2:ResetSnapshotAttribute\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n\r\n# euare-grouplistusers -g Testers --region admin-hspencer@group1\r\narn:aws:iam::203845665981:group/Testers\r\n   users\r\n   arn:aws:iam::203845665981:user/tessai\r\n{code}\r\n# Create volumes on both clusters, then snapshots from those volumes:\r\n{code}\r\n# euca-create-volume -s 10 -z one --region tessai-group1@group1\r\nVOLUME\tvol-2d3600fe\t10\t\tone\tcreating\t2015-01-13T20:12:40.902Z\r\n\r\n# euca-create-volume -s 15 -z two --region tessai-group1@group1\r\nVOLUME\tvol-690eb568\t15\t\ttwo\tcreating\t2015-01-13T20:12:51.675Z\r\n\r\n# euca-describe-volumes --region tessai-group1@group1\r\nVOLUME\tvol-690eb568\t15\t\ttwo\tavailable\t2015-01-13T20:12:51.675Z\tstandard\r\nVOLUME\tvol-2d3600fe\t10\t\tone\tavailable\t2015-01-13T20:12:40.902Z\tstandard\r\n\r\n# euca-create-snapshot vol-2d3600fe --region tessai-group1@group1\r\nSNAPSHOT\tsnap-00bc3703\tvol-2d3600fe\tpending\t2015-01-13T20:15:11.185Z\t203845665981\t10\r\n\r\n# euca-create-snapshot vol-690eb568 --region tessai-group1@group1\r\nSNAPSHOT\tsnap-552222fa\tvol-690eb568\tpending\t2015-01-13T20:15:28.230Z\t203845665981\t15\r\n\r\n# euca-describe-snapshots --region tessai-group1@group1\r\nSNAPSHOT\tsnap-00bc3703\tvol-2d3600fe\tcompleted\t2015-01-13T20:15:11.185Z\t100%\t203845665981\t10\r\nSNAPSHOT\tsnap-552222fa\tvol-690eb568\tcompleted\t2015-01-13T20:15:28.230Z\t100%\t203845665981\t15\r\n{code}\r\n# Modify attribute on snapshots:\r\n{code}\r\n# euca-modify-snapshot-attribute --create-volume-permission --add 792312799970 snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tADD\tUserId\t792312799970\r\n\r\n# euca-modify-snapshot-attribute --create-volume-permission --add all snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tADD\tGroup\tall\r\n{code}\r\n# Reset snapshot attributes:\r\n{code}\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tgroup\tall\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tuserId\t792312799970\r\n\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tRESET\r\n\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tRESET\r\n{code}\r\n# Notice that attributes haven't been removed:\r\n{code}\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-00bc3703 --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-00bc3703\tgroup\tall\r\n\r\n# euca-describe-snapshot-attribute --create-volume-permission snap-552222fa --region tessai-group1@group1\r\ncreateVolumePermission\tsnap-552222fa\tuserId\t792312799970\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Reset of Snapshot Attributes Doesn't Work","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_44835498_*|*_10000_*:*_1_*:*_73831012_*|*_10002_*:*_1_*:*_133932_*|*_10001_*:*_1_*:*_87727316_*|*_10003_*:*_1_*:*_83716594_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i031lr:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-01-14T10:47:56.528-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["hspencer(hspencer)","sjones(sjones)"],"customfield_10116":null,"environment":"* [Group #1 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-TypeofDeployments]","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34153/comment/81823","id":"81823","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The ResetSnapshotAttribute action is not currently implemented in 4.1. I've flagged this as a security issue as this is most likely the approach (reset createVolumePermission) that would be used to unshare a snapshot and I think the current behaviour gives the impression that the action was successful but does not actually change the permissions.\r\n\r\nhttp://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_ResetSnapshotAttribute.html","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T10:47:56.528-0600","updated":"2015-01-14T10:47:56.528-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34153/comment/81998","id":"81998","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The reset attribute action is now implemented:\r\n\r\n{code}\r\n#\r\n# euca-create-volume -s 1 -z PARTI00\r\nVOLUME\tvol-4f0b8701\t1\t\tPARTI00\tcreating\t2015-01-16T06:28:33.935Z\r\n#\r\n#\r\n# euca-create-snapshot vol-4f0b8701\r\nSNAPSHOT\tsnap-90a22ada\tvol-4f0b8701\tpending\t2015-01-16T06:28:55.760Z\t519350771903\t1\t\r\n#\r\n#\r\n# euca-modify-snapshot-attribute -c -a all snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tADD\tGroup\tall\r\n#\r\n#\r\n# euca-describe-snapshot-attribute -c snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tgroup\tall\r\n# \r\n# \r\n# euca-reset-snapshot-attribute -c snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tRESET\r\n# \r\n# \r\n# euca-describe-snapshot-attribute -c snap-90a22ada\r\n# \r\n# \r\n# euca-modify-snapshot-attribute -c -a 726222262848 snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tADD\tUserId\t726222262848\r\n# \r\n# \r\n# euca-describe-snapshot-attribute -c snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tuserId\t726222262848\r\n# \r\n# \r\n# euca-reset-snapshot-attribute -c snap-90a22ada\r\ncreateVolumePermission\tsnap-90a22ada\tRESET\r\n# \r\n# \r\n# euca-describe-snapshot-attribute -c snap-90a22ada\r\n#\r\n#\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-16T00:59:08.258-0600","updated":"2015-01-16T00:59:08.258-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34153/comment/82103","id":"82103","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nSolid work here.  Verified that issue is fixed and the shared snapshot feature is fully supported.  Thanks for the hard work and getting this in.\r\n\r\nEucalyptus Version:  4.1.0-0.0.23021.351.20150116git411b4a0.el6\r\n\r\n*Steps*\r\n\r\n# Created accounts using LDAP integration on Eucalyptus 4.1.0 Cloud with VMware Broker.\r\n#  Downloaded credentials for admin user of account2 and account3 using euca-get-credentials.\r\n#  Using credentials for admin user of account2, created snapshots from volumes:\r\n{code}\r\n# euca-describe-snapshots --region admin-account2@vmware\r\nSNAPSHOT\tsnap-37bc411c\tvol-1b74368c\tcompleted\t2015-01-17T05:01:58.356Z\t100%\t881029380924\t7\r\nSNAPSHOT\tsnap-7100b60a\tvol-1b74368c\tcompleted\t2015-01-17T05:12:15.691Z\t100%\t881029380924\t7\r\nSNAPSHOT\tsnap-51030421\tvol-1646b9fd\tcompleted\t2015-01-17T04:18:49.164Z\t100%\t881029380924\t10\r\n{code}\r\n# Shared one snapshot with 'all'; shared another snapshot with an account ID (account3):\r\n{code}\r\n# euca-modify-snapshot-attribute --create-volume-permission --add all snap-37bc411c --region admin-account2@vmware\r\ncreateVolumePermission\tsnap-37bc411c\tADD\tGroup\tall\r\n# euca-modify-snapshot-attribute --create-volume-permission --add 413366792956 snap-51030421 --region admin-account2@vmware\r\ncreateVolumePermission\tsnap-51030421\tADD\tUserId\t413366792956\r\n{code}\r\n# Sourced credentials of admin user of account3, and confirmed snapshots were viewable:\r\n{code}\r\n# euca-describe-snapshots\r\nSNAPSHOT\tsnap-51030421\tvol-1646b9fd\tcompleted\t2015-01-17T04:18:49.164Z\t100%\t881029380924\t10\r\n# euca-describe-snapshots --all\r\nSNAPSHOT\tsnap-37bc411c\tvol-1b74368c\tcompleted\t2015-01-17T05:01:58.356Z\t100%\t881029380924\t7\r\nSNAPSHOT\tsnap-51030421\tvol-1646b9fd\tcompleted\t2015-01-17T04:18:49.164Z\t100%\t881029380924\t10\r\n{code}\r\n# Create snapshots from the volumes:\r\n{code}\r\n# euca-create-volume --snapshot snap-37bc411c -z one\r\nVOLUME\tvol-bd32f0d2\t7\tsnap-37bc411c\tone\tcreating\t2015-01-17T06:02:59.927Z\r\n# euca-create-volume --snapshot snap-51030421 -z one\r\nVOLUME\tvol-5a45b61b\t10\tsnap-51030421\tone\tcreating\t2015-01-17T06:03:09.987Z\r\n{code}\r\n{code}\r\n# euca-describe-volumes\r\nVOLUME\tvol-bd32f0d2\t7\tsnap-37bc411c\tone\tavailable\t2015-01-17T06:02:59.927Z\tstandard\r\nVOLUME\tvol-5a45b61b\t10\tsnap-51030421\tone\tavailable\t2015-01-17T06:03:09.987Z\tstandard\r\n{code}\r\n# Use admin user creds from account2 to reset snapshot attributes:\r\n{code}\r\n# euca-reset-snapshot-attribute --create-volume-permission snap-37bc411c --region admin-account2@vmware\r\ncreateVolumePermission\tsnap-37bc411c\tRESET\r\n# euca-describe-snapshot-attribute -c snap-37bc411c --region admin-account2@vmware\r\n#\r\n# euca-reset-snapshot-attribute -c snap-51030421 --region admin-account2@vmware\r\ncreateVolumePermission\tsnap-51030421\tRESET\r\n# euca-describe-snapshot-attribute -c snap-51030421 --region admin-account2@vmware\r\n#\r\n{code}\r\n# Confirm snapshots are not viewable by admin user of account3:\r\n{code}\r\n# euca-describe-snapshots --all\r\n#\r\n{code}\r\n\r\n*Bonus*\r\n\r\nAs a negative test, attempted to delete the snapshot shared by account2 by the admin user of account3.  The following message was returned:\r\n{code}\r\n# euca-delete-snapshot snap-51030421\r\neuca-delete-snapshot: error (InternalFailure): Not authorized to delete snapshot snap-51030421 by admin\r\n{code}\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-17T00:14:24.853-0600","updated":"2015-01-17T00:14:24.853-0600"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10328/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}