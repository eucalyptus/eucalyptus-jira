{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"38155","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38155","key":"EUCA-11367","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@6a7f3f06[id=129,rapidViewId=92,state=CLOSED,name=4.3.0 Sprint 0,goal=<null>,startDate=2015-11-03T02:34:16.335Z,endDate=2015-11-24T02:34:00.000Z,completeDate=2015-12-01T17:42:47.033Z,sequence=129]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11367/watchers","watchCount":4,"isWatching":false},"created":"2015-09-11T18:59:18.348-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[{"id":"32230","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/32230","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"15912","key":"EUCA-3594","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15912","fields":{"summary":"Don't retry postgres initialization  that partially succeeded","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"updated":"2015-12-04T19:14:27.218-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"When I installed eucalyptus-cloud on a new system and attempted to initialize a new cloud the database failed to start for reasons that are irrelevant to this bug.  Once this happened, though, the CLC went into a loop in which it repeatedly tried to initialize the database again only for postgresql to refuse to do it because /var/lib/eucalyptus/db/data wasn't empty.\r\n\r\nIf {{eucalyptus-cloud --initialize}} fails to start the database it should say so on stderr and then exit, not run an infinite loop with no indication to the caller that anything is going wrong.\r\n\r\nThe output of such a situation follows:\r\n{code}\r\n# clcadmin-initialize-cloud \r\n2015-09-11 16:50:26 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:50:26 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:50:26 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:50:26 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:50:54 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:50:54 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:50:54 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:50:54 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@77c2685b\r\n2015-09-11 16:50:54 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:50:54 INFO Executing Post-Shutdown Hook: PostgresqlBootstrapper$2@7c516bc9\r\n2015-09-11 16:50:54 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:50:54 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:50:54 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:50:54 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:51:09 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:51:09 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:51:09 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:51:09 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@563899d8\r\n2015-09-11 16:51:09 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:51:09 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:51:09 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:51:09 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:51:09 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:51:24 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:51:24 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:51:24 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:51:24 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@61e661ea\r\n2015-09-11 16:51:24 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:51:24 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:51:24 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:51:24 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:51:24 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:51:38 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:51:38 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:51:38 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:51:38 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@3ce2e325\r\n2015-09-11 16:51:38 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:51:38 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:51:38 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:51:38 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:51:38 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:51:53 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:51:53 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:51:53 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:51:53 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@72518bab\r\n2015-09-11 16:51:53 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:51:53 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:51:53 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:51:53 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:51:53 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-09-11 16:52:08 INFO Executing Pre-Shutdown Hooks...\r\n2015-09-11 16:52:08 INFO Executing Shutdown Hooks...\r\n2015-09-11 16:52:08 INFO Executing Post-Shutdown Hooks...\r\n2015-09-11 16:52:08 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@5d2b206d\r\n2015-09-11 16:52:08 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-09-11 16:52:08 INFO ulimit: resource=7 soft=1024 hard=4096\r\n2015-09-11 16:52:08 INFO ulimit: resource=7 soft=65535 hard=65535\r\n2015-09-11 16:52:08 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-09-11 16:52:08 INFO ulimit: resource=6 soft=-1 hard=-1\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"``eucalyptus-cloud --initialize'' loops infinitely when database startup fails","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i03dnz:","customfield_10001":"2015-09-17T16:31:19.765-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["dmitrii(dmitrii)","ethomas(ethomas)","gholms(gholms)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38155/comment/91939","id":"91939","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"[~zhill] and [~gholms] know great ways to reproduce this.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-09-17T16:31:19.765-0500","updated":"2015-09-17T16:31:19.765-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11367/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}