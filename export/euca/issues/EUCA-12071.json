{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"41044","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/41044","key":"EUCA-12071","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17200","id":"17200","description":"Eucalyptus 4.2.2","name":"4.2.2","archived":false,"released":true,"releaseDate":"2016-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2016-04-28T16:00:57.508-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12071/watchers","watchCount":2,"isWatching":false},"created":"2016-02-26T19:19:32.397-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{repository={count=4, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":4,\"lastUpdated\":\"2016-03-01T21:38:07.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":4,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-10-28T00:34:56.663-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"}],"timeoriginalestimate":null,"description":"Lots of bad things happen when you have policies and listeners in an ELB in CF.\r\n\r\n1)  If you have an ELB in a template which has a listener, and the listener has a list of policy names, as below\r\n{code}\r\n{\r\n  \"Resources\" : {\r\n    \"MyLoadBalancer\" : {\r\n      \"Type\" : \"AWS::ElasticLoadBalancing::LoadBalancer\",\r\n      \"Properties\" : {\r\n        \"AvailabilityZones\" : {\"Fn::GetAZs\" : {\"Ref\" : \"AWS::Region\"}},\r\n        \"Listeners\" : [{\r\n          \"LoadBalancerPort\" : \"80\",\r\n          \"InstancePort\" : \"8080\",\r\n          \"Protocol\" : \"HTTP\",\r\n          \"InstanceProtocol\" : \"HTTP\",\r\n          \"PolicyNames\" : [\r\n            \"MyAppCookieStickinessPolicy\"\r\n          ]}\r\n        ],\r\n        \"Policies\" : [{\r\n          \"PolicyName\" : \"MyAppCookieStickinessPolicy\",\r\n          \"PolicyType\" : \"AppCookieStickinessPolicyType\",\r\n          \"Attributes\" : [\r\n            {\"Name\" : \"CookieName\",\"Value\" : \"MyCookie\"}\r\n          ]\r\n        }]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code}\r\nan error will occur: \tClass class com.eucalyptus.cloudformation.resources.standard.propertytypes.ElasticLoadBalancingListener has a Collection type policyNames that must be non-null ResourcePropertyResolver.populateResourceProperties can be called \r\n\r\n2) Once that error is fixed, attributes in polices do not have an @Property annotation assoicated with them.  This will cause the following error to occur:\r\nThere is no attribute CookieName found (Cardinality: ONE)\r\n\r\n3) Once the above error is fixed, the following template will not work (nothing to do with listeners yet):\r\n{code}\r\n{\r\n  \"Resources\" : {\r\n    \"MyLoadBalancer\" : {\r\n      \"Type\" : \"AWS::ElasticLoadBalancing::LoadBalancer\",\r\n      \"Properties\" : {\r\n        \"AvailabilityZones\" : {\"Fn::GetAZs\" : {\"Ref\" : \"AWS::Region\"}},\r\n        \"Listeners\" : [{\r\n          \"LoadBalancerPort\" : \"80\",\r\n          \"InstancePort\" : \"8080\",\r\n          \"Protocol\" : \"HTTP\",\r\n          \"InstanceProtocol\" : \"HTTP\"\r\n        }],\r\n        \"AppCookieStickinessPolicy\" : [{\r\n          \"PolicyName\" : \"MyAppCookieStickinessPolicy\",\r\n          \"CookieName\" : \"MyCookie\"\r\n        }]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code}\r\nThis will fail becaue AppCookieStickinessPolicy is not currently a list, and it will be looking for \"CookieName\" at  the top level.  The docs have always said this is a list.\r\n\r\n4) Once that error is fixed, policies defined within the AppCookieStickinessPolicy or LBCookieStickinessPolicy are defined currently in the workflow after Policies are attached to listeners.  Hence the previous templates should work, but the following will not.\r\n{code}\r\n{\r\n  \"Resources\" : {\r\n    \"MyLoadBalancer\" : {\r\n      \"Type\" : \"AWS::ElasticLoadBalancing::LoadBalancer\",\r\n      \"Properties\" : {\r\n        \"AvailabilityZones\" : {\"Fn::GetAZs\" : {\"Ref\" : \"AWS::Region\"}},\r\n        \"Listeners\" : [{\r\n          \"LoadBalancerPort\" : \"80\",\r\n          \"InstancePort\" : \"8080\",\r\n          \"Protocol\" : \"HTTP\",\r\n          \"InstanceProtocol\" : \"HTTP\",\r\n          \"PolicyNames\" : [\r\n            \"MyAppCookieStickinessPolicy\"\r\n          ]}\r\n        ],\r\n        \"AppCookieStickinessPolicy\" : [{\r\n          \"PolicyName\" : \"MyAppCookieStickinessPolicy\",\r\n          \"CookieName\" : \"MyCookie\"\r\n        }]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code}\r\nThe order of steps in create stack should put attaching policies to listeners after StickinessPolicy creation.\r\n\r\n5) The fields \"InstancePorts\" and \"LoadBalancerPorts\" are currently ignored in \"Policies\".  InstancePorts represent the back end server, so the policy should be bound to the back end server with the SetLoadBalancerPoliciesForBackendServer command.  LoadBalancerPorts are a different way to attach the policy to a listener (the other way is having the policy name in the listener), and the policy should be attached to the listener with the corresponding instance port.  The following template should work:\r\n{code}\r\n{\r\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\r\n  \"Resources\":{\r\n    \"MyLoadBalancer\":{\r\n      \"Type\":\"AWS::ElasticLoadBalancing::LoadBalancer\",\r\n      \"Properties\":{\r\n        \"AvailabilityZones\":{\r\n          \"Fn::GetAZs\":{\r\n            \"Ref\":\"AWS::Region\"\r\n          }\r\n        },\r\n        \"Listeners\":[\r\n          {\r\n            \"LoadBalancerPort\":\"80\",\r\n            \"InstancePort\":\"8080\",\r\n            \"Protocol\":\"HTTP\",\r\n            \"InstanceProtocol\":\"HTTP\",\r\n            \"PolicyNames\":[\r\n              \"MyAppCookieStickinessPolicy\"\r\n            ]\r\n          },\r\n          {\r\n            \"LoadBalancerPort\":\"8181\",\r\n            \"InstancePort\":\"8182\",\r\n            \"Protocol\":\"HTTP\",\r\n            \"InstanceProtocol\":\"HTTP\"\r\n          },\r\n          {\r\n            \"LoadBalancerPort\":\"8443\",\r\n            \"InstancePort\":\"8443\",\r\n            \"Protocol\":\"HTTPS\",\r\n            \"InstanceProtocol\":\"HTTPS\",\r\n            \"SSLCertificateId\":\"arn:aws:iam::000779815788:server-certificate/mycert\"\r\n          }\r\n        ],\r\n        \"Policies\":[\r\n          {\r\n            \"PolicyName\":\"MyAppCookieStickinessPolicy\",\r\n            \"PolicyType\":\"AppCookieStickinessPolicyType\",\r\n            \"Attributes\":[\r\n              {\r\n                \"Name\":\"CookieName\",\r\n                \"Value\":\"MyCookie\"\r\n              }\r\n            ],\r\n            \"LoadBalancerPorts\":[\r\n              \"8181\"\r\n            ]\r\n          },\r\n          {\r\n            \"PolicyName\":\"MyPublicKeyPolicy\",\r\n            \"PolicyType\":\"PublicKeyPolicyType\",\r\n            \"Attributes\":[\r\n              {\r\n                \"Name\":\"PublicKey\",\r\n                \"Value\":{\r\n                  \"Fn::Join\":[\r\n                    \"\\n\",\r\n                    [\r\n                      \"MIIC3jCCAcYCCQDQF9lsE6pwxjANBgkqhkiG9w0BAQUFADAxMS8wLQYDVQQDEyZl\",\r\n                      \"dWNhLTEwLTExMS0zMC0xNTcuZXVjYWx5cHR1cy5pbnRlcm5hbDAeFw0xNTAyMTAx\",\r\n                      \"OTMyMzRaFw0yNTAyMDcxOTMyMzRaMDExLzAtBgNVBAMTJmV1Y2EtMTAtMTExLTMw\",\r\n                      \"LTE1Ny5ldWNhbHlwdHVzLmludGVybmFsMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A\",\r\n                      \"MIIBCgKCAQEAxO3tvSAqcQ1pnzXiS1PbQnfb/eeKGeDu80sRxO0vv89AC4yJbE5t\",\r\n                      \"Y0dx+/8F/itayhF8Xh5hiFhWnaKIw/WusFlcEFncdtHK1J6iaLY7MyLfCnRHwPSI\",\r\n                      \"w5AJTIljqkwIKR6mqcvGJ9Fz8OTGzvCkNMypYdpwkMKl3m7g9NyWCRyzIzfn5StG\",\r\n                      \"qudk8aw3zwyW/EI7rHx7pvkjN4nkC++Q0fcMAgy0NWkG427pwPO75ChECkSzR0D2\",\r\n                      \"ILaDkiL0kgskTL4KgcMaKVgiNKiTSybbn0D6woOTafw/Un23jcSZfu3tHGpbbbN0\",\r\n                      \"WSJsQmOu+JAx/NJRlxH3mEUpLgVEcCCcBwIDAQABMA0GCSqGSIb3DQEBBQUAA4IB\",\r\n                      \"AQCpqPgEgCkyfHxo39A2Ytfg6TFt6pEhljHivsNXF9EAKkTWmvx1QIQXgfcNPzqU\",\r\n                      \"3R6kTwS8Rcrjs2t2/5Iom2JydcXpi8/tVE9Xypy1xv6/GBQQ9PJsdmN7fdgfsbGG\",\r\n                      \"14eoKNPyU6q1hbw7cqKZND0QSC3+nf/7DR+ctJf5r/fz6ZR3wUoKn5OThMyorSjJ\",\r\n                      \"PqTxSQBubqmTi8A3gkCft1evMeN+dCYP3Glnp8uHABJXK7yd+dDTuoRaelcj8LPs\",\r\n                      \"C5hKQBJrko9afI9k6destIoX/cZg/LM+H7/Gm+zsLCzw6Ddly8752Wa/MqznNr9m\",\r\n                      \"d6EOiSt2jR27BS36tdn41Z9z\"\r\n                    ]\r\n                  ]\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            \"PolicyName\":\"MyBackendServerAuthenticationPolicy\",\r\n            \"PolicyType\":\"BackendServerAuthenticationPolicyType\",\r\n            \"Attributes\":[\r\n              {\r\n                \"Name\":\"PublicKeyPolicyName\",\r\n                \"Value\":\"MyPublicKeyPolicy\"\r\n              }\r\n            ],\r\n            \"InstancePorts\":[\r\n              \"8443\"\r\n            ]\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code} after the value of the SSLCertificateId is updated.  \r\nA way to generate an ssl cert can be found here:\r\nhttp://www.akadia.com/services/ssh_test_certificate.html\r\nDo steps 1-4.  Once the server.crt and server.key files are created, run\r\n{code}\r\neuare-servercertupload --certificate-file server.crt --private-key-file server.key mycert\r\n{code}\r\nYou can get the ARN via:\r\n{code}\r\neuare-servercertlistbypath \r\narn:aws:iam::000351613481:server-certificate/mycert\r\n{code}\r\nOnce done, to see all the policies, listeners, ports, etc, you can run\r\n{code}eulb-describe-lbs --debug{code} and there will be a big chunk of xml you can format and evaluate.  A formatted version of the output above is\r\n{code}\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<DescribeLoadBalancersResponse xmlns=\"http://elasticloadbalancing.amazonaws.com/doc/2012-06-01/\">\r\n   <DescribeLoadBalancersResult>\r\n      <LoadBalancerDescriptions>\r\n         <member>\r\n            <LoadBalancerName>elb3-MyLoadBalance-NIRLWFMVZWNBT</LoadBalancerName>\r\n            <DNSName>elb3-MyLoadBalance-NIRLWFMVZWNBT-000239944289.lb.g-12-10.autoqa.qa1.eucalyptus-systems.com</DNSName>\r\n            <ListenerDescriptions>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTP</Protocol>\r\n                     <LoadBalancerPort>80</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTP</InstanceProtocol>\r\n                     <InstancePort>8080</InstancePort>\r\n                  </Listener>\r\n                  <PolicyNames>\r\n                     <member>MyAppCookieStickinessPolicy</member>\r\n                  </PolicyNames>\r\n               </member>\r\n            </ListenerDescriptions>\r\n            <Policies>\r\n               <AppCookieStickinessPolicies>\r\n                  <member>\r\n                     <PolicyName>MyAppCookieStickinessPolicy</PolicyName>\r\n                     <CookieName>MyCookie</CookieName>\r\n                  </member>\r\n               </AppCookieStickinessPolicies>\r\n               <LBCookieStickinessPolicies />\r\n               <OtherPolicies />\r\n            </Policies>\r\n            <BackendServerDescriptions />\r\n            <AvailabilityZones>\r\n               <member>one</member>\r\n            </AvailabilityZones>\r\n            <HealthCheck>\r\n               <Target>TCP:8080</Target>\r\n               <Interval>30</Interval>\r\n               <Timeout>5</Timeout>\r\n               <UnhealthyThreshold>3</UnhealthyThreshold>\r\n               <HealthyThreshold>3</HealthyThreshold>\r\n            </HealthCheck>\r\n            <SourceSecurityGroup>\r\n               <OwnerAlias>000294665955</OwnerAlias>\r\n               <GroupName>euca-internal-000239944289-elb3-MyLoadBalance-NIRLWFMVZWNBT</GroupName>\r\n            </SourceSecurityGroup>\r\n            <CreatedTime>2016-02-29T01:34:57.861Z</CreatedTime>\r\n            <Scheme>internet-facing</Scheme>\r\n         </member>\r\n         <member>\r\n            <LoadBalancerName>elb4-MyLoadBalance-WEBF4YDNPJBOD</LoadBalancerName>\r\n            <DNSName>elb4-MyLoadBalance-WEBF4YDNPJBOD-000239944289.lb.g-12-10.autoqa.qa1.eucalyptus-systems.com</DNSName>\r\n            <ListenerDescriptions>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTPS</Protocol>\r\n                     <LoadBalancerPort>8443</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTPS</InstanceProtocol>\r\n                     <InstancePort>8443</InstancePort>\r\n                     <SSLCertificateId>arn:aws:iam::000239944289:server-certificate/mycert</SSLCertificateId>\r\n                  </Listener>\r\n                  <PolicyNames>\r\n                     <member>ELBSecurityPolicy-2015-05</member>\r\n                  </PolicyNames>\r\n               </member>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTP</Protocol>\r\n                     <LoadBalancerPort>8181</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTP</InstanceProtocol>\r\n                     <InstancePort>8182</InstancePort>\r\n                  </Listener>\r\n                  <PolicyNames>\r\n                     <member>MyAppCookieStickinessPolicy</member>\r\n                  </PolicyNames>\r\n               </member>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTP</Protocol>\r\n                     <LoadBalancerPort>80</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTP</InstanceProtocol>\r\n                     <InstancePort>8080</InstancePort>\r\n                  </Listener>\r\n                  <PolicyNames>\r\n                     <member>MyAppCookieStickinessPolicy</member>\r\n                  </PolicyNames>\r\n               </member>\r\n            </ListenerDescriptions>\r\n            <Policies>\r\n               <AppCookieStickinessPolicies>\r\n                  <member>\r\n                     <PolicyName>MyAppCookieStickinessPolicy</PolicyName>\r\n                     <CookieName>MyCookie</CookieName>\r\n                  </member>\r\n               </AppCookieStickinessPolicies>\r\n               <LBCookieStickinessPolicies />\r\n               <OtherPolicies>\r\n                  <member>ELBSecurityPolicy-2015-05</member>\r\n                  <member>MyPublicKeyPolicy</member>\r\n                  <member>MyBackendServerAuthenticationPolicy</member>\r\n               </OtherPolicies>\r\n            </Policies>\r\n            <BackendServerDescriptions>\r\n               <member>\r\n                  <InstancePort>8443</InstancePort>\r\n                  <PolicyNames>\r\n                     <member>MyBackendServerAuthenticationPolicy</member>\r\n                  </PolicyNames>\r\n               </member>\r\n            </BackendServerDescriptions>\r\n            <AvailabilityZones>\r\n               <member>one</member>\r\n            </AvailabilityZones>\r\n            <HealthCheck>\r\n               <Target>TCP:8080</Target>\r\n               <Interval>30</Interval>\r\n               <Timeout>5</Timeout>\r\n               <UnhealthyThreshold>3</UnhealthyThreshold>\r\n               <HealthyThreshold>3</HealthyThreshold>\r\n            </HealthCheck>\r\n            <SourceSecurityGroup>\r\n               <OwnerAlias>000294665955</OwnerAlias>\r\n               <GroupName>euca-internal-000239944289-elb4-MyLoadBalance-WEBF4YDNPJBOD</GroupName>\r\n            </SourceSecurityGroup>\r\n            <CreatedTime>2016-02-29T01:35:16.755Z</CreatedTime>\r\n            <Scheme>internet-facing</Scheme>\r\n         </member>\r\n         <member>\r\n            <LoadBalancerName>elb-MyLoadBalancer-WYH93NBAWQWUZ</LoadBalancerName>\r\n            <DNSName>elb-MyLoadBalancer-WYH93NBAWQWUZ-000239944289.lb.g-12-10.autoqa.qa1.eucalyptus-systems.com</DNSName>\r\n            <ListenerDescriptions>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTP</Protocol>\r\n                     <LoadBalancerPort>80</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTP</InstanceProtocol>\r\n                     <InstancePort>8080</InstancePort>\r\n                  </Listener>\r\n                  <PolicyNames>\r\n                     <member>MyAppCookieStickinessPolicy</member>\r\n                  </PolicyNames>\r\n               </member>\r\n            </ListenerDescriptions>\r\n            <Policies>\r\n               <AppCookieStickinessPolicies>\r\n                  <member>\r\n                     <PolicyName>MyAppCookieStickinessPolicy</PolicyName>\r\n                     <CookieName>MyCookie</CookieName>\r\n                  </member>\r\n               </AppCookieStickinessPolicies>\r\n               <LBCookieStickinessPolicies />\r\n               <OtherPolicies />\r\n            </Policies>\r\n            <BackendServerDescriptions />\r\n            <AvailabilityZones>\r\n               <member>one</member>\r\n            </AvailabilityZones>\r\n            <HealthCheck>\r\n               <Target>TCP:8080</Target>\r\n               <Interval>30</Interval>\r\n               <Timeout>5</Timeout>\r\n               <UnhealthyThreshold>3</UnhealthyThreshold>\r\n               <HealthyThreshold>3</HealthyThreshold>\r\n            </HealthCheck>\r\n            <SourceSecurityGroup>\r\n               <OwnerAlias>000294665955</OwnerAlias>\r\n               <GroupName>euca-internal-000239944289-elb-MyLoadBalancer-WYH93NBAWQWUZ</GroupName>\r\n            </SourceSecurityGroup>\r\n            <CreatedTime>2016-02-29T01:34:22.259Z</CreatedTime>\r\n            <Scheme>internet-facing</Scheme>\r\n         </member>\r\n         <member>\r\n            <LoadBalancerName>elb2-MyLoadBalance-ZGCBJKXD2YUQ8</LoadBalancerName>\r\n            <DNSName>elb2-MyLoadBalance-ZGCBJKXD2YUQ8-000239944289.lb.g-12-10.autoqa.qa1.eucalyptus-systems.com</DNSName>\r\n            <ListenerDescriptions>\r\n               <member>\r\n                  <Listener>\r\n                     <Protocol>HTTP</Protocol>\r\n                     <LoadBalancerPort>80</LoadBalancerPort>\r\n                     <InstanceProtocol>HTTP</InstanceProtocol>\r\n                     <InstancePort>8080</InstancePort>\r\n                  </Listener>\r\n                  <PolicyNames />\r\n               </member>\r\n            </ListenerDescriptions>\r\n            <Policies>\r\n               <AppCookieStickinessPolicies>\r\n                  <member>\r\n                     <PolicyName>MyAppCookieStickinessPolicy</PolicyName>\r\n                     <CookieName>MyCookie</CookieName>\r\n                  </member>\r\n               </AppCookieStickinessPolicies>\r\n               <LBCookieStickinessPolicies />\r\n               <OtherPolicies />\r\n            </Policies>\r\n            <BackendServerDescriptions />\r\n            <AvailabilityZones>\r\n               <member>one</member>\r\n            </AvailabilityZones>\r\n            <HealthCheck>\r\n               <Target>TCP:8080</Target>\r\n               <Interval>30</Interval>\r\n               <Timeout>5</Timeout>\r\n               <UnhealthyThreshold>3</UnhealthyThreshold>\r\n               <HealthyThreshold>3</HealthyThreshold>\r\n            </HealthCheck>\r\n            <SourceSecurityGroup>\r\n               <OwnerAlias>000294665955</OwnerAlias>\r\n               <GroupName>euca-internal-000239944289-elb2-MyLoadBalance-ZGCBJKXD2YUQ8</GroupName>\r\n            </SourceSecurityGroup>\r\n            <CreatedTime>2016-02-29T01:34:41.846Z</CreatedTime>\r\n            <Scheme>internet-facing</Scheme>\r\n         </member>\r\n      </LoadBalancerDescriptions>\r\n   </DescribeLoadBalancersResult>\r\n   <ResponseMetadata>\r\n      <RequestId>3c479f91-a71b-4b90-89a8-685a7a03415a::b381f0a3-a71d-4a8f-834d-ae7dc5d185d6</RequestId>\r\n   </ResponseMetadata>\r\n</DescribeLoadBalancersResponse>\r\n{code}\r\nNote especially in stack 4, the policy names are correct for the listeners and the backend server has a policy as well.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"CF: ELB policy creation/listener is incorrectly implemented","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_7596_*|*_10000_*:*_1_*:*_353341813_*|*_10001_*:*_1_*:*_432069_*|*_10003_*:*_1_*:*_4987503645_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i03nav:","customfield_10001":"2016-04-28T16:00:57.516-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["ethomas(ethomas)","hspencer(hspencer)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/41044/comment/102159","id":"102159","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixed verified.  Refer to QA-511 for steps.\r\n\r\nEucalyptus Version: {{4.2.2-0.24193.25.20160415git7967717.el6}}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-28T16:00:57.516-0500","updated":"2016-04-28T22:31:16.600-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12071/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}