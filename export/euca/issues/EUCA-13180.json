{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54102","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54102","key":"EUCA-13180","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18601","id":"18601","description":"Eucalyptus 4.4.1","name":"4.4.1","archived":false,"released":true,"releaseDate":"2017-05-09"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10105":null,"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2017-04-18T11:40:54.062-0500","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13180/watchers","watchCount":2,"isWatching":false},"created":"2017-02-01T11:31:46.523-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-02-01T16:36:26.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"customfield_11901":null,"issuelinks":[{"id":"48400","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/48400","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"51011","key":"EUCA-12956","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51011","fields":{"summary":"Support Elastic IP on ELB Instances","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}},{"id":"48403","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/48403","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"54105","key":"EUCA-13183","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54105","fields":{"summary":"DELETE_FAILED stack state reached due to IGW delete failure","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"48406","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/48406","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"54106","key":"EUCA-13184","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54106","fields":{"summary":"ELB responds with 503 with an InService state instance","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-04-18T11:40:54.271-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"description":"*Environment*\r\n* _Eucalyptus Version_\r\n{{4.4.0-0.25741.120.20170118git85b6870.el7}}\r\n* _Setup_\r\nFederated setup with two Eucalyptus VPC clouds\r\n** [hspencer-240-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/240/]\r\n** [hspencer-243-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/243/]\r\n{code}\r\n[root@d-02 ~]# euca-describe-regions\r\nREGION\tdrake\thttp://ec2.d-14.autoqa.qa1.eucalyptus-systems.com:8773/\r\nREGION\tfuture\thttp://ec2.c-29.autoqa.qa1.eucalyptus-systems.com:8773/\r\n[root@d-02 ~]# euca-describe-availability-zones\r\nAVAILABILITYZONE\ttake-care\tavailable\r\n[root@c-25 ~]# euca-describe-availability-zones\r\nAVAILABILITYZONE\tds2\tavailable\r\nAVAILABILITYZONE\tevol\tavailable\r\n{code}\r\n\r\n*Assessment*\r\n\r\nDeploying a stack using the linked {{cfn-elb-enable-zone-cloudwatch-vpc-template.json}} results in a failure.\r\n{code}\r\n[root@d-02 ~]# euform-create-stack NginxStack --template-file cfn-elb-enable-zone-cloudwatch-vpc-template.json --parameter KeyName=eng-admin --parameter ImageId=emi-6b3768f5 --region eng-admin@future\r\narn:aws:cloudformation::001458033822:stack/NginxStack/8ea7af90-cc91-4893-b5f5-c7dfc408b1e7\r\n[root@d-02 ~]# euform-describe-stacks --region eng-admin@future\r\nSTACK\tNginxStack\tROLLBACK_COMPLETE\t\tCloudFormation template to enable another availability zone for ELB and AutoScaling Group\t2017-02-01T15:57:02.683Z\r\nPARAMETER\tImageId\t\temi-6b3768f5\r\nPARAMETER\tKeyName\t\teng-admin\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nPARAMETER\tMinSize\t\t2\r\nPARAMETER\tMaxSize\t\t4\r\n{code}\r\nAfter reviewing the stack events, the following error was found:\r\n{code}\r\n[root@d-02 ~]# euform-describe-stack-events NginxStack --region eng-admin@future\r\n....\r\nEVENT\tNginxStack\tNginxSubnetRouteTableAssocaiation-DELETE_IN_PROGRESS-1485964696812\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiationrtbassoc-785a3d9e\t2017-02-01T15:58:16.812Z\tDELETE_IN_PROGRESS\r\nEVENT\tNginxStack\t9e1e0ed5-f7bc-462c-b3c6-a8e2e5901ee6\tAWS::CloudFormation::Stack\tNginxStack\tarn:aws:cloudformation::001458033822:stack/NginxStack/8ea7af90-cc91-4893-b5f5-c7dfc408b1e7\t2017-02-01T15:58:15.306Z\tROLLBACK_IN_PROGRESS\tCreate stack failed.  Rollback requested by user.\r\nEVENT\tNginxStack\t3e52638a-9192-4424-a9dd-fca71fbaae0a\tAWS::CloudFormation::Stack\tNginxStack\tarn:aws:cloudformation::001458033822:stack/NginxStack/8ea7af90-cc91-4893-b5f5-c7dfc408b1e7\t2017-02-01T15:57:48.045Z\tCREATE_FAILED\tThe following resource(s) failed to create: [InstanceSecurityGroup, NginxELB, NginxSubnetRouteTableAssocaiation2].\r\nEVENT\tNginxStack\tNginxELB-CREATE_FAILED-1485964667656\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\t\t2017-02-01T15:57:47.656Z\tCREATE_FAILED\tResource creation cancelled\r\nEVENT\tNginxStack\tInstanceSecurityGroup-CREATE_FAILED-1485964667607\tAWS::EC2::SecurityGroup\tInstanceSecurityGroup\t\t2017-02-01T15:57:47.607Z\tCREATE_FAILED\tResource creation cancelled\r\nEVENT\tNginxStack\tSubnetNetworkAclAssociation-CREATE_COMPLETE-1485964666987\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-973f5526\t2017-02-01T15:57:46.987Z\tCREATE_COMPLETE\r\nEVENT\tNginxStack\tNginxELB-CREATE_IN_PROGRESS-1485964666881\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\t\t2017-02-01T15:57:46.881Z\tCREATE_IN_PROGRESS\r\nEVENT\tNginxStack\tNginxSubnetRouteTableAssocaiation-CREATE_COMPLETE-1485964666631\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation\trtbassoc-785a3d9e\t2017-02-01T15:57:46.631Z\tCREATE_COMPLETE\r\n....\r\n{code}\r\nReviewing the {{cloud-debug.log}} (attached) on the UFS for {{future}} region, the following stack trace can be found:\r\n{code}\r\nWed Feb 1 07:57:44 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 26] Performing creation step CREATE_ASSOCIATION on resource SubnetNetworkAclAssociat\r\nion2\r\nWed Feb 1 07:57:45 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 25] Finished creating resource NginxRoute\r\nWed Feb 1 07:57:46 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Error creating resource NginxSubnetRouteTableAssocaiation2\r\nWed Feb 1 07:57:46 2017 ERROR [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] java.util.concurrent.ExecutionException: com.eucalyptus.context.ServiceDispatchException: Failed to send message AssociateRouteTableType to service compute-request because: nested exception is com.eucalyptus.compute.service.ComputeServiceException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\njava.util.concurrent.ExecutionException: com.eucalyptus.context.ServiceDispatchException: Failed to send message AssociateRouteTableType to service compute-request because: nested exception is com.eucalyptus.compute.service.ComputeServiceException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\n        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)\r\n        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)\r\n        at com.eucalyptus.util.async.AsyncRequests.sendSync(AsyncRequests.java:127)\r\n        at com.eucalyptus.util.async.AsyncRequests.sendSync(AsyncRequests.java:108)\r\n        at com.eucalyptus.cloudformation.resources.standard.actions.AWSEC2SubnetRouteTableAssociationResourceAction.associateRouteTable(AWSEC2SubnetRouteTableAssociationResourceAction.java:185)\r\n        at com.eucalyptus.cloudformation.resources.standard.actions.AWSEC2SubnetRouteTableAssociationResourceAction.access$400(AWSEC2SubnetRouteTableAssociationResourceAction.java:60)\r\n        at com.eucalyptus.cloudformation.resources.standard.actions.AWSEC2SubnetRouteTableAssociationResourceAction$CreateSteps$1.perform(AWSEC2SubnetRouteTableAssociationResourceAction.java:92)\r\n        at com.eucalyptus.cloudformation.workflow.StackActivityImpl.performCreateStep(StackActivityImpl.groovy:381)\r\n        at sun.reflect.GeneratedMethodAccessor2428.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at com.amazonaws.services.simpleworkflow.flow.pojo.POJOActivityImplementation.execute(POJOActivityImplementation.java:64)\r\n        at com.amazonaws.services.simpleworkflow.flow.generic.ActivityImplementationBase.execute(ActivityImplementationBase.java:46)\r\n        at com.amazonaws.services.simpleworkflow.flow.worker.SynchronousActivityTaskPoller.execute(SynchronousActivityTaskPoller.java:196)\r\n        at com.amazonaws.services.simpleworkflow.flow.worker.ActivityTaskPoller$2.run(ActivityTaskPoller.java:92)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.eucalyptus.context.ServiceDispatchException: Failed to send message AssociateRouteTableType to service compute-request because: nested exception is com.eucalyptus.compute.service.ComputeServiceException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\n        at com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:259)\r\n        at com.eucalyptus.context.ServiceContext.lambda$runWithContext$2(ServiceContext.java:292)\r\n        ... 3 more\r\nCaused by: org.springframework.messaging.MessageHandlingException: nested exception is com.eucalyptus.compute.service.ComputeServiceException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\n        at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:96)\r\n        at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:89)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler$AdvisedRequestHandler.handleRequestMessage(AbstractReplyProducingMessageHandler.java:154)\r\n        at sun.reflect.GeneratedMethodAccessor162.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:333)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:190)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:157)\r\n        at org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice$1.execute(AbstractRequestHandlerAdvice.java:75)\r\n        at com.eucalyptus.context.ServiceAdvice.doInvoke(ServiceAdvice.java:33)\r\n        at org.springframework.integration.handler.advice.AbstractRequestHandlerAdvice.invoke(AbstractRequestHandlerAdvice.java:70)\r\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\r\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213)\r\n        at com.sun.proxy.$Proxy156.handleRequestMessage(Unknown Source)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.doInvokeAdvisedRequestHandler(AbstractReplyProducingMessageHandler.java:127)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:112)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.handler.MessageHandlerChain$1.send(MessageHandlerChain.java:129)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:292)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:212)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:129)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:115)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.handler.MessageHandlerChain.handleMessageInternal(MessageHandlerChain.java:110)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:150)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:42)\r\n        at org.springframework.messaging.core.AbstractDestinationResolvingMessagingTemplate.sendAndReceive(AbstractDestinationResolvingMessagingTemplate.java:112)\r\n        at com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:254)\r\n        ... 4 more\r\nCaused by: com.eucalyptus.compute.service.ComputeServiceException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\n        at com.eucalyptus.compute.service.ComputeService.handleServiceException(ComputeService.java:1741)\r\n        at com.eucalyptus.compute.service.ComputeService.proxy(ComputeService.java:1376)\r\n        at sun.reflect.GeneratedMethodAccessor459.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113)\r\n        at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:129)\r\n        at org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49)\r\n        at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347)\r\n        at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88)\r\n        at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:131)\r\n        at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:330)\r\n        at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:317)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:155)\r\n        at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:93)\r\n        ... 44 more\r\nWed Feb 1 07:57:46 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 26] Finished creating resource SubnetNetworkAclAssociation2\r\nWed Feb 1 07:57:46 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Creating resource InstanceSecurityGroup\r\nWed Feb 1 07:57:46 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 26] Finished creating resource NginxSubnetRouteTableAssocaiation\r\nWed Feb 1 07:57:46 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 26] Creating resource NginxELB\r\nWed Feb 1 07:57:47 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Finished creating resource SubnetNetworkAclAssociation\r\nWed Feb 1 07:57:47 2017 ERROR [CreateStackWorkflowImpl:SWF Decider CloudFormationTaskList 6] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.compute.service.ComputeServiceException:Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822: for activityId=\"80\" of activityType={Name: StackActivity.performCreateStep,Version: 1.0}\r\nWed Feb 1 07:57:47 2017 ERROR [CreateStackWorkflowImpl:SWF Decider CloudFormationTaskList 5] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.compute.service.ComputeServiceException:Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822: for activityId=\"80\" of activityType={Name: StackActivity.performCreateStep,Version: 1.0}\r\nWed Feb 1 07:57:48 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Creating global stack event: CREATE_FAILED\r\nWed Feb 1 07:57:48 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Done creating global stack event: CREATE_FAILED\r\nWed Feb 1 07:57:48 2017 ERROR [CreateStackWorkflowImpl:SWF Decider CloudFormationTaskList 8] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.compute.service.ComputeServiceException:Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822: for activityId=\"80\" of activityType={Name: StackActivity.performCreateStep,Version: 1.0}\r\nWed Feb 1 07:58:15 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] status = CREATE_FAILED\r\nWed Feb 1 07:58:15 2017  INFO [StackActivityImpl:SWF Activity  CloudFormationTaskList 24] Creating global stack event: ROLLBACK_IN_PROGRESS\r\n...\r\n{code}\r\n\r\n*Signs*\r\n\r\n* I found this error odd because the same stack deployed just fine in earlier testing (verified the fix for EUCA-11896).\r\n* Same template used right after deleting this stack worked just fine:\r\n{code}\r\n[root@d-02 ~]# euform-delete-stack NginxStack --region eng-admin@future\r\n[root@d-02 ~]# euform-describe-stacks --region eng-admin@future\r\n[root@d-02 ~]# euform-create-stack MultiZoneNginxStack --template-file cfn-elb-enable-zone-cloudwatch-vpc-template.json --parameter KeyName=eng-admin --parameter ImageId=emi-6b3768f5 --region eng-admin@future\r\narn:aws:cloudformation::001458033822:stack/MultiZoneNginxStack/dda886c1-61c9-4f63-9254-792609fd4158\r\n[root@d-02 ~]# euform-describe-stacks --region eng-admin@future\r\nSTACK\tMultiZoneNginxStack\tCREATE_COMPLETE\t\tCloudFormation template to enable another availability zone for ELB and AutoScaling Group\t2017-02-01T16:50:45.900Z\r\nPARAMETER\tImageId\t\temi-6b3768f5\r\nPARAMETER\tKeyName\t\teng-admin\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nPARAMETER\tMinSize\t\t2\r\nPARAMETER\tMaxSize\t\t4\r\nOUTPUT\tAccessLogBucket\tmultizonenginxstack-s3loggingbucket-w8iizvee59m7a\r\nOUTPUT\tELBURL\thttp://MultiZone-NginxELB-BEYWXEYGWY4J6-001458033822.lb.c-29.autoqa.qa1.eucalyptus-systems.com\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38601","id":"38601","filename":"cfn-elb-enable-zone-cloudwatch-vpc-template.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T11:31:03.316-0600","size":12685,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/38601/cfn-elb-enable-zone-cloudwatch-vpc-template.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38607","id":"38607","filename":"clc-cloud-debug.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T16:18:37.961-0600","size":5163887,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/38607/clc-cloud-debug.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38608","id":"38608","filename":"clc-cloud-error.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T16:18:34.336-0600","size":2399444,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/38608/clc-cloud-error.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38609","id":"38609","filename":"clc-cloud-output.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T16:19:17.645-0600","size":10640088,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/38609/clc-cloud-output.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38610","id":"38610","filename":"clc-cloud-tracking.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T16:19:06.222-0600","size":289649,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/38610/clc-cloud-tracking.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/38600","id":"38600","filename":"cloud-debug.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T11:31:11.698-0600","size":8703621,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/38600/cloud-debug.log"}],"aggregatetimeestimate":null,"summary":"Stack on multi-cluster VPC fails to deploy due to route table not being able to be updated","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|hzzzp4:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_67818562_*|*_10000_*:*_1_*:*_16650155_*|*_10002_*:*_1_*:*_3124824244_*|*_10001_*:*_1_*:*_3853442_*|*_10003_*:*_1_*:*_3350201387_*|*_10006_*:*_1_*:*_0","customfield_10001":"2017-02-02T12:03:48.677-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","sjones(sjones)"],"environment":"Multi-cluster VPC cloud","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13180/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54102/comment/116842","id":"116842","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Attached the following files from the CLC:\r\n* {{cloud-debug.log}}\r\n* {{cloud-error.log}}\r\n* {{cloud-tracking.log}}\r\n* {{cloud-output.log}}\r\n\r\nFollowing stack trace seen in {{cloud-error.log}}:\r\n{code}\r\nWed Feb 1 07:57:44 2017 ERROR [VpcManager:eucalyptus-bootstrap-servicecontext-common-worker-1125] [com.eucalyptus.compute.vpc.VpcManager.handleException(VpcManager.java):2252] com.eucalyptus.compute.common.internal.vpc.VpcMetadataException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\ncom.eucalyptus.compute.common.internal.vpc.VpcMetadataException: Error updating route-table 'rtb-8d565019' for arn:aws:euare::001458033822:\r\n        at com.eucalyptus.compute.vpc.persist.VpcPersistenceSupport.metadataException(VpcPersistenceSupport.java:56)\r\n        at com.eucalyptus.compute.vpc.persist.VpcPersistenceSupport.metadataException(VpcPersistenceSupport.java:32)\r\n        at com.eucalyptus.entities.AbstractPersistentSupport.updateByExample(AbstractPersistentSupport.java:160)\r\n        at com.eucalyptus.compute.vpc.persist.PersistenceRouteTables.updateByExample(PersistenceRouteTables.java:39)\r\n        at com.eucalyptus.compute.vpc.VpcManager.associateRouteTable(VpcManager.java:224)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113)\r\n        at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:102)\r\n        at org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49)\r\n        at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347)\r\n        at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88)\r\n        at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:131)\r\n        at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:330)\r\n        at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:317)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:155)\r\n        at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:93)\r\n        at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:89)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:109)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:194)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.router.AbstractMessageRouter.handleMessageInternal(AbstractMessageRouter.java:194)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:292)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:212)\r\n        at org.springframework.integration.handler.MessageHandlerChain$ReplyForwardingMessageChannel.send(MessageHandlerChain.java:239)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:292)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:212)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:129)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:115)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.handler.MessageHandlerChain.handleMessageInternal(MessageHandlerChain.java:110)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at com.eucalyptus.context.ServiceContext.lambda$dispatch$0(ServiceContext.java:187)\r\n        at com.eucalyptus.context.ServiceContext.lambda$runWithContext$2(ServiceContext.java:292)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: com.eucalyptus.entities.TransactionCallbackException: javax.persistence.RollbackException: Error while committing the transaction\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:523)\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:505)\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:468)\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:461)\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:445)\r\n        at com.eucalyptus.entities.AbstractPersistentSupport.updateByExample(AbstractPersistentSupport.java:156)\r\n        ... 78 more\r\nCaused by: javax.persistence.RollbackException: Error while committing the transaction\r\n        at org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:94)\r\n        at com.eucalyptus.entities.Entities$CascadingTx$TxState.commit(Entities.java:1422)\r\n        at com.eucalyptus.entities.Entities$CascadingTx.commit(Entities.java:1276)\r\n        at com.eucalyptus.entities.TransactionResource.commit(TransactionResource.java:56)\r\n        at com.eucalyptus.entities.Transactions.one(Transactions.java:520)\r\n        ... 83 more\r\nCaused by: javax.persistence.OptimisticLockException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n        at org.hibernate.jpa.spi.AbstractEntityManagerImpl.wrapStaleStateException(AbstractEntityManagerImpl.java:1800)\r\n        at org.hibernate.jpa.spi.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1705)\r\n        at org.hibernate.jpa.spi.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1677)\r\n        at org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:82)\r\n        ... 87 more\r\nCaused by: org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1\r\n        at org.hibernate.jdbc.Expectations$BasicExpectation.checkBatched(Expectations.java:81)\r\n        at org.hibernate.jdbc.Expectations$BasicExpectation.verifyOutcome(Expectations.java:73)\r\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.checkRowCounts(BatchingBatch.java:155)\r\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.performExecution(BatchingBatch.java:132)\r\n        at org.hibernate.engine.jdbc.batch.internal.BatchingBatch.doExecuteBatch(BatchingBatch.java:114)\r\n        at org.hibernate.engine.jdbc.batch.internal.AbstractBatchImpl.execute(AbstractBatchImpl.java:163)\r\n        at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:226)\r\n        at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:484)\r\n        at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:351)\r\n        at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:350)\r\n        at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:56)\r\n        at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1258)\r\n        at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:425)\r\n        at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)\r\n        at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:177)\r\n        at org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:77)\r\n        ... 87 more\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T16:24:34.130-0600","updated":"2017-02-01T16:24:34.130-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54102/comment/116911","id":"116911","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The fix is in master and can be merged to 4.4.1 when that version is being worked on. The (internal repository) branch and commit are:\r\n\r\n{code}\r\ndev-sjones-euca-13180\r\n009ce5d16aefb972b8f6712142eaae8b6c59b2b2\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-02T12:03:48.677-0600","updated":"2017-02-02T12:03:48.677-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54102/comment/120864","id":"120864","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.4.0-0.25876.33.20170412git5f0e510.el7}}\r\n\r\n*Steps* \r\n\r\n# Deploy Eucalyptus 4.4 VPC cloud with multiple AZs - [hspencer-672-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/672/]\r\n{code}\r\n[root@a-16-l ~]# euca-describe-availability-zones\r\nAVAILABILITYZONE\tblack-dollar\tavailable\r\nAVAILABILITYZONE\tblack-market\tavailable\r\n{code}\r\n# Create non-eucalyptus account\r\n{code}\r\n[root@a-16-l ~]# euare-accountcreate -a development-operations -w > .euca/devops-admin.ini\r\n{code}\r\n# Create and upload keypair\r\n{code}\r\n[root@a-16-l ~]# ssh-keygen -t rsa -b 4096 -C \"Developement Operations Admin Key\"\r\n[root@a-16-l ~]# euca-import-keypair -f devops-admin-pk.pub devops-admin --region devops-admin@\r\nKEYPAIR\tdevops-admin\tb8:ea:b0:d4:d4:40:26:5f:14:91:ba:a9:05:20:9d:72\r\n{code}\r\n# Bundle, upload and register Ubuntu Xenial cloud image:\r\n{code}\r\n[root@a-16-l ~]# euca-describe-images --all --region devops-admin@\r\nIMAGE\temi-d64c38f0\tubuntu-xenial-x86_64-hvm-20170413/xenial-server-cloudimg-amd64-disk1.raw.manifest.xml\t000756474874\tavailable\tpublic\tx86_64\tmachine   \t\t\t\tinstance-store\thvm\r\n{code}\r\n# Using linked {{cfn-elb-enable-zone-cloudwatch-vpc-template.json}} template, create stack:\r\n{code}\r\n[root@a-16-l ~]# euform-create-stack NginxStack --template-file cfn-elb-enable-zone-cloudwatch-vpc-template.json --parameter KeyName=devops-admin --parameter ImageId=emi-d64c38f0 --region devops-admin@\r\narn:aws:cloudformation::000571701517:stack/NginxStack/bc6eb732-6f35-4969-a303-8d932525c604\r\n[root@a-16-l ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tNginxStack\tCREATE_COMPLETE\t\tCloudFormation template to enable another availability zone for ELB and AutoScaling Group\t2017-04-18T15:11:24.133Z\r\nPARAMETER\tImageId\t\temi-d64c38f0\r\nPARAMETER\tKeyName\t\tdevops-admin\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nPARAMETER\tMinSize\t\t2\r\nPARAMETER\tMaxSize\t\t4\r\nOUTPUT\tAccessLogBucket\tnginxstack-s3loggingbucket-2kxxaucr3l7uy\r\nOUTPUT\tELBURL\thttp://NginxStac-NginxELB-IYSFOYWGRZL8O-000571701517.lb.b-34.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n# Confirm network access to ELB+ASG resource:\r\n{code}\r\n[root@a-16-l ~]# curl -I http://NginxStac-NginxELB-IYSFOYWGRZL8O-000571701517.lb.b-34.autoqa.qa1.eucalyptus-systems.com\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Tue, 18 Apr 2017 15:27:57 GMT\r\nContent-Type: text/html\r\nContent-Length: 437174\r\nLast-Modified: Tue, 18 Apr 2017 15:15:22 GMT\r\nETag: \"58f62d8a-6abb6\"\r\nAccept-Ranges: bytes\r\n\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-18T11:40:54.261-0500","updated":"2017-04-18T11:40:54.261-0500"}],"maxResults":3,"total":3,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}