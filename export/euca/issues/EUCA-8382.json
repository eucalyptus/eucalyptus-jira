{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"25634","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25634","key":"EUCA-8382","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/13700","id":"13700","description":"Eucalyptus 3.4.2","name":"3.4.2","archived":false,"released":true,"releaseDate":"2014-02-24"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10306","value":"System","id":"10306"}],"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2014-02-24T15:26:46.577-0600","customfield_10704":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11301","value":"vSphere 5.1","id":"11301"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8382/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2013-11-27T18:07:37.141-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12801","id":"12801","description":"Eucalyptus 3.4.1","name":"3.4.1","archived":false,"released":true,"releaseDate":"2013-12-16"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2014-06-16T16:58:36.435-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11301","id":"11301","name":"Broker","description":"Broker-style component for interfacing hypervisors"}],"timeoriginalestimate":null,"description":"I've been unable to migrate Windows instances with vmware today. \r\nesx 5.1, vmotion enabled and config + relevant log from broker below. \r\nThanks,\r\n-M\r\n\r\n\r\n{code}\r\n[root@c-08 ~]# euca-migrate-instances -i i-CBB93D75\r\n[root@c-08 ~]# euca-describe-instances\r\nRESERVATION\tr-352C3F14\t006380397897\ttest\r\nINSTANCE\ti-CBB93D75\temi-09CA36F0\t10.111.3.14\t10.111.3.14\trunning\ttest\t0\t\tm3.2xlarge\t2013-11-27T23:16:49.839Z\tPARTI00\t\t\twindows\tmonitoring-disabled\t10.111.3.14\t10.111.3.14\t\t\tinstance-store\t\t\t\t\thvm\t\t\t\t\t\t\r\nTAG\tinstance\ti-CBB93D75\teuca:node\t10.111.5.76\r\nTAG\tinstance\ti-CBB93D75\teuca:node:migration:destination\t10.111.5.59\r\nTAG\tinstance\ti-CBB93D75\teuca:node:migration:source\t10.111.5.76\r\nTAG\tinstance\ti-CBB93D75\teuca:node:migration:state\tpreparing\r\n\r\n{code}\r\n\r\n\r\n\r\n{code}\r\n2013-11-27 15:48:46  INFO 000001028 VSphereBrokerTaskFactory | 10.111.5.76: initiating VSphereInstanceMigrationTask [E i-CBB93D75]\r\n2013-11-27 15:48:46  INFO 000001028 BrokerInstance           | 10.111.5.76: updated in DB instance i-CBB93D75\r\n2013-11-27 15:48:46 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting volume write lock for i-CBB93D75 for i-CBB93D75\r\n2013-11-27 15:48:46 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting session read lock\r\n2013-11-27 15:48:46 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} got session read lock\r\n2013-11-27 15:48:47 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 => Host 10.111.1.43 #30 /10.111.1.43 coordinator=10.111.1.43 booted db:synched started=1385593750993 [/10.111.1.43]\r\n2013-11-27 15:48:47 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 finished.\r\n2013-11-27 15:48:47 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 => Host 10.111.1.43 #30 /10.111.1.43 coordinator=10.111.1.43 booted db:synched started=1385593750993 [/10.111.1.43]\r\n2013-11-27 15:48:47 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 finished.\r\n2013-11-27 15:48:48 DEBUG 000000549 Timers                   | com.eucalyptus.component.ServiceOperations$1@4a1273e5: completed in 16 msec.\r\n2013-11-27 15:48:48 DEBUG 000000693 VSphereEndpoint          | 10.111.1.133: {693} hosts query thread initiated (current ops: 1, threads: 1, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n2013-11-27 15:48:48 DEBUG 000000693 VSphereEndpoint          | 10.111.1.133: {693} query thread will poll hosts\r\n2013-11-27 15:48:48 DEBUG 000000878 VSphereEndpoint          | 10.111.1.133: {878} getting session read lock\r\n2013-11-27 15:48:48 DEBUG 000000878 VSphereEndpoint          | 10.111.1.133: {878} releasing session read lock, to upgrade\r\n2013-11-27 15:48:48 DEBUG 000000878 VSphereEndpoint          | 10.111.1.133: {878} getting session write lock\r\n2013-11-27 15:48:48 DEBUG 000000875 VSphereEndpoint          | 10.111.1.133: {875} instances query thread initiated (current ops: 1, threads: 2, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n2013-11-27 15:48:48 DEBUG 000000875 VSphereEndpoint          | 10.111.1.133: {875} query thread will poll instances\r\n2013-11-27 15:48:48 DEBUG 000000695 VSphereEndpoint          | 10.111.1.133: {695} getting session read lock\r\n2013-11-27 15:48:48 DEBUG 000000550 Timers                   | com.eucalyptus.component.ServiceOperations$1@7bb80b1b: completed in 16 msec.\r\n2013-11-27 15:48:49 DEBUG 000000551 Timers                   | com.eucalyptus.component.ServiceOperations$1@30dd14cf: completed in 16 msec.\r\n2013-11-27 15:48:49 DEBUG 000000552 Timers                   | com.eucalyptus.component.ServiceOperations$1@1960a855: completed in 24 msec.\r\n2013-11-27 15:48:51 DEBUG 000000058 Hosts                    | Hosts.entrySet(): 10.111.5.35 => Host 10.111.5.35 #30 /10.111.5.35 coordinator=10.111.1.43 booted nodb(notsynced) dbpool:ok started=1385593929704 [/10.107.105.35, /10.111.5.35]\r\n2013-11-27 15:48:51 DEBUG 000000058 Hosts                    | Hosts.entrySet(): 10.111.5.35 finished.\r\n2013-11-27 15:48:52 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.5.35 => Host 10.111.5.35 #30 /10.111.5.35 coordinator=10.111.1.43 booted nodb(notsynced) dbpool:ok started=1385593929704 [/10.107.105.35, /10.111.5.35]\r\n2013-11-27 15:48:52 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.5.35 finished.\r\n2013-11-27 15:48:52  WARN 000000694 VSphereEndpoint          | 10.111.5.76: VM: i-CBB93D75. Detected migraion incompatibility: Currently connected device 'Floppy drive 1' uses backing '[datastore1 (3)] i-CBB93D75/i-CBB93D75.flp', which is not accessible.\r\n2013-11-27 15:48:52 DEBUG 000001028 BrokerInterface          | 10.111.5.76: BrokerRequest {DescribeResource: resourceType=null userId=eucalyptus}\r\n2013-11-27 15:48:52 DEBUG 000000878 VSphereEndpoint          | 10.111.1.133: {878} got session write lock\r\n2013-11-27 15:48:52 ERROR 000000694 VSphereEndpointAsync     | migration VM failed\r\njava.rmi.RemoteException: Can't start migration\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpoint.doMigrateVM(VSphereEndpoint.java:931)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync.access$2801(VSphereEndpointAsync.java:41)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync$21.call(VSphereEndpointAsync.java:710)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\n2013-11-27 15:48:52  INFO 000001028 BrokerResponseType       | 10.111.5.76: BrokerReply {DescribeResource: status: enabled migration: true iqn: iqn.1998-01.com.vmware:a-34-383079b6 cores: 0/4 mem: 1583/5679 disk: 918016/948736}\r\n2013-11-27 15:48:52  INFO 000000694 VSphereBrokerTaskFactory | 10.111.5.76: sending VSphereBrokerMonitoringTask [E i-CBB93D75]: MigrationOpEvent [result=FAILED]\r\n2013-11-27 15:48:52 DEBUG 000000878 hereConfigurationManager | polling hosts on endpoint https://10.111.1.133/sdk\r\n2013-11-27 15:48:52  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: receiving VSphereBrokerMonitoringTask [E i-CBB93D75]: MigrationOpEvent [result=FAILED]\r\n2013-11-27 15:48:52  INFO 000000694 VSphereBrokerTaskFactory | 10.111.5.76: sending VSphereInstanceMigrationTask [E i-CBB93D75]: MigrationOpEvent [result=FAILED]\r\n2013-11-27 15:48:52 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting volume write lock for i-CBB93D75 for i-CBB93D75\r\n2013-11-27 15:48:52  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: receiving VSphereInstanceMigrationTask [E i-CBB93D75]: MigrationOpEvent [result=FAILED]\r\n2013-11-27 15:48:52  WARN 000001130 VSphereBrokerTaskFactory | Migration failed for instance i-CBB93D75\r\n2013-11-27 15:48:52 DEBUG 000001028 BrokerInterface          | 10.111.5.59: BrokerRequest {DescribeResource: resourceType=null userId=eucalyptus}\r\n2013-11-27 15:48:52  INFO 000001028 BrokerResponseType       | 10.111.5.59: BrokerReply {DescribeResource: status: enabled migration: true iqn: iqn.1998-01.com.vmware:a-17-65471179 cores: 0/4 mem: 1593/5689 disk: 918016/948736}\r\n2013-11-27 15:48:52  INFO 000001130 BrokerInstance           | 10.111.5.76: updated in DB instance i-CBB93D75\r\n2013-11-27 15:48:52  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: Broker task VSphereInstanceMigrationTask [F i-CBB93D75] stopped after 6274 ms in state FAILED\r\n2013-11-27 15:48:52  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: initiating VSpherePrepareOrCleanHostTask [E i-CBB93D75]\r\n2013-11-27 15:48:52 DEBUG 000001028 BrokerInterface          | 10.111.5.76: BrokerRequest {DescribeInstances: instances=[] userId=eucalyptus}\r\n2013-11-27 15:48:52  INFO 000001028 BrokerResponseType       | 10.111.5.76: BrokerReply {DescribeInstances:}\r\n2013-11-27 15:48:52 DEBUG 000001028 BrokerInterface          | 10.111.5.59: BrokerRequest {DescribeInstances: instances=[] userId=eucalyptus}\r\n2013-11-27 15:48:52  INFO 000001028 BrokerResponseType       | 10.111.5.59: BrokerReply {DescribeInstances:i-CBB93D75/Teardown(cleaning/poweredOn)}\r\n2013-11-27 15:48:53  INFO 000001130 BrokerInstance           | 10.111.5.76: updated in DB instance i-CBB93D75\r\n2013-11-27 15:48:53 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting volume write lock for i-CBB93D75 for i-CBB93D75\r\n2013-11-27 15:48:53 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting session read lock\r\n2013-11-27 15:48:57 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 => Host 10.111.1.43 #30 /10.111.1.43 coordinator=10.111.1.43 booted db:synched started=1385593750993 [/10.111.1.43]\r\n2013-11-27 15:48:57 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 finished.\r\n2013-11-27 15:48:57 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 => Host 10.111.1.43 #30 /10.111.1.43 coordinator=10.111.1.43 booted db:synched started=1385593750993 [/10.111.1.43]\r\n2013-11-27 15:48:57 DEBUG 000000057 Hosts                    | Hosts.entrySet(): 10.111.1.43 finished.\r\n2013-11-27 15:48:59 DEBUG 000001028 BrokerInterface          | 10.111.5.76: BrokerRequest {DescribeResource: resourceType=null userId=eucalyptus}\r\n2013-11-27 15:48:59  INFO 000001028 BrokerResponseType       | 10.111.5.76: BrokerReply {DescribeResource: status: enabled migration: true iqn: iqn.1998-01.com.vmware:a-34-383079b6 cores: 0/4 mem: 1583/5679 disk: 918016/948736}\r\n2013-11-27 15:48:59 DEBUG 000001028 BrokerInterface          | 10.111.5.59: BrokerRequest {DescribeResource: resourceType=null userId=eucalyptus}\r\n2013-11-27 15:48:59  INFO 000001028 BrokerResponseType       | 10.111.5.59: BrokerReply {DescribeResource: status: enabled migration: true iqn: iqn.1998-01.com.vmware:a-17-65471179 cores: 4/4 mem: 5689/5689 disk: 948736/948736}\r\n2013-11-27 15:48:59 DEBUG 000001028 BrokerInterface          | 10.111.5.76: BrokerRequest {DescribeInstances: instances=[] userId=eucalyptus}\r\n2013-11-27 15:48:59  INFO 000001028 BrokerResponseType       | 10.111.5.76: BrokerReply {DescribeInstances:}\r\n2013-11-27 15:48:59 DEBUG 000001028 BrokerInterface          | 10.111.5.59: BrokerRequest {DescribeInstances: instances=[] userId=eucalyptus}\r\n2013-11-27 15:48:59  INFO 000001028 BrokerResponseType       | 10.111.5.59: BrokerReply {DescribeInstances:i-CBB93D75/Teardown(cleaning/poweredOn)}\r\n2013-11-27 15:48:59 DEBUG 000000878 VSphereEndpoint          | 10.111.1.133: {878} releasing session write lock, to downgrade\r\n2013-11-27 15:48:59 ERROR 000000878 VSphereEndpointAsync     | failed while polling hosts on endpoint https://10.111.1.133/sdk: null\r\njava.lang.NullPointerException\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereVmManager.updateVmCacheVimPointers(VSphereVmManager.java:288)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereConfigurationManager.pollHosts(VSphereConfigurationManager.java:481)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereConfigurationManager.mayPoll(VSphereConfigurationManager.java:169)\r\n\tat com.eucalyptus.cloud.ws.Broker.mayPoll(Broker.java:60)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync.ensureAndLockSession(VSphereEndpointAsync.java:821)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync$2$1.call(VSphereEndpointAsync.java:184)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\n2013-11-27 15:48:59 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} got session read lock\r\n2013-11-27 15:48:59 ERROR 000000878 VSphereEndpointAsync     | java.lang.NullPointerException\r\njava.lang.NullPointerException\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereVmManager.updateVmCacheVimPointers(VSphereVmManager.java:288)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereConfigurationManager.pollHosts(VSphereConfigurationManager.java:481)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereConfigurationManager.mayPoll(VSphereConfigurationManager.java:169)\r\n\tat com.eucalyptus.cloud.ws.Broker.mayPoll(Broker.java:60)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync.ensureAndLockSession(VSphereEndpointAsync.java:821)\r\n\tat com.eucalyptus.cloud.ws.vsphere.VSphereEndpointAsync$2$1.call(VSphereEndpointAsync.java:184)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\n2013-11-27 15:48:59 DEBUG 000000694 VSphereEndpoint          | Skipping network removal attempt. There are other VM(s) migrating to the host\r\n2013-11-27 15:48:59 DEBUG 000000695 hereConfigurationManager | polling instances on endpoint https://10.111.1.133/sdk\r\n2013-11-27 15:48:59 DEBUG 000000694 VSphereEndpoint          | Cleaning host after instance. Doing cleanup of destination\r\n2013-11-27 15:48:59 DEBUG 000000693 VSphereEndpoint          | 10.111.1.133: {693} query thread has polled hosts\r\n2013-11-27 15:48:59  INFO 000000694 VSphereBrokerTaskFactory | 10.111.5.76: sending VSphereBrokerMonitoringTask [E i-CBB93D75]: CleanUpHostOpEvent [result=SUCCEEDED]\r\n2013-11-27 15:48:59  INFO 000000694 VSphereBrokerTaskFactory | 10.111.5.76: sending VSpherePrepareOrCleanHostTask [E i-CBB93D75]: CleanUpHostOpEvent [result=SUCCEEDED]\r\n2013-11-27 15:48:59  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: receiving VSphereBrokerMonitoringTask [E i-CBB93D75]: CleanUpHostOpEvent [result=SUCCEEDED]\r\n2013-11-27 15:48:59 DEBUG 000000694 VSphereEndpoint          | 10.111.1.133: {694} getting volume write lock for i-CBB93D75 for i-CBB93D75\r\n2013-11-27 15:48:59  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: receiving VSpherePrepareOrCleanHostTask [E i-CBB93D75]: CleanUpHostOpEvent [result=SUCCEEDED]\r\n2013-11-27 15:48:59  INFO 000001130 BrokerInstance           | 10.111.5.76: updated in DB instance i-CBB93D75\r\n2013-11-27 15:48:59  INFO 000001130 VSphereBrokerTaskFactory | 10.111.5.76: Broker task VSpherePrepareOrCleanHostTask [S i-CBB93D75] stopped after 6758 ms in state SUCCEEDED\r\n2013-11-27 15:49:01  INFO 000000695 SpherePerformanceManager | 10.111.1.133: found 19 metrics for the instance i-CBB93D75\r\n2013-11-27 15:49:01 DEBUG 000000695 VSphereVmManager         | 10.111.1.133: i-CBB93D75: completed [updateVmStats=true] in 1595ms\r\n2013-11-27 15:49:01  INFO 000000695 hereConfigurationManager | 10.111.1.133: polled 1 instance(s) over 1595ms\r\n2013-11-27 15:49:01 DEBUG 000000695 VSphereEndpoint          | 10.111.1.133: {695} got session read lock\r\n\r\n\r\n\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Windows Migrate failing in Vmware","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_2_*:*_3178025654_*|*_10001_*:*_2_*:*_958700597_*|*_10000_*:*_1_*:*_684291495_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_2255195382","customfield_12100":"0|i02e2v:","customfield_10001":"2014-01-22T13:17:54.873-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["mclark(mclark)","tony(tony)","vasya(vasya)"],"customfield_10116":null,"environment":"\r\n\r\nGIT_REPO\tgit+ssh://repo-euca@git.eucalyptus-systems.com/internal#maint/3.4/testing\r\nGIT_HASH\t6f024dd655b082729535b64d561b1f0466bfc7b8\r\n\r\n10.111.1.43\tCENTOS\t6.3\t64\tREPO\t[CLC WS UI]\r\n10.111.5.35\tCENTOS\t6.3\t64\tREPO\t[CC00 SC00]\r\n10.111.5.59\tVMWARE\tESXI-5.1\t64\tREPO\t[NC00]\r\n10.111.5.76\tVMWARE\tESXI-5.1\t64\tREPO\t[NC00]\r\n\r\nEBS_STORAGE_MANAGER=DASManager\r\nNETWORK\tSYSTEM\r\n\r\n<!-- Eucalyptus VMware Broker configuration file -->\r\n{code}\r\n<configuration>\r\n\t<vsphere>\r\n\t\t<endpoint url=\"https://10.111.1.133/sdk\" login=\"euca-test\" password=\"foobar\" discover=\"false\">\r\n\t\t<host nama=\"10.111.5.76\" login=\"root\" password=\"foobar\" />\r\n\t\t<host name=\"10.111.5.59\" login=\"root\" password=\"foobar\" />\r\n\t\t</endpoint>\r\n\t</vsphere>\r\n</configuration>\r\n{code}","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8382/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25634/comment/61658","id":"61658","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in bb6ab8f076f3d56ff76da7fcccc0fafa96856728","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T13:17:54.873-0600","updated":"2014-01-22T13:17:54.873-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25634/comment/62792","id":"62792","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"[~vasya] I can confirm migration of windows VM is working, but only one time. Migration back to original node leaves some confusion of the actual location of the instance. Euca believes the instance has migrated but vSphere shows it did not migrate (see EUCA-8715).  I wonder if that is a result of this fix because I only see EUCA-8715 when dealing with windows instances.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2014-02-12T00:21:27.962-0600","updated":"2014-02-12T00:21:27.962-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25634/comment/63007","id":"63007","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"Fix Verified.\r\n\r\nTopology:\r\nCLC WS CC00 SC00\r\nesxi 5.1\r\nesxi 5.1\r\n\r\nInstalled Packages\r\nName        : eucalyptus\r\nArch        : x86_64\r\nVersion     : 3.4.2\r\nRelease     : 0.0.548.el6\r\n\r\nAble to migrate a windows Vm and maintain functionality.\r\n\r\n{code}\r\n[13:17:39] [c-12 | 10.111.1.47]: euca-describe-nodes\r\nNODE\tPARTI00\t\t10.111.5.73\tENABLED\r\nINSTANCE\ti-CB7B418F\r\nNODE\tPARTI00\t\t10.111.1.54\tENABLED\r\n[13:17:42] [c-12 | 10.111.1.47]: euca-migrate-instances -i i-CB7B418F\r\n[13:17:47] [c-12 | 10.111.1.47]: euca-describe-nodes\r\nNODE\tPARTI00\t\t10.111.5.73\tENABLED\r\nNODE\tPARTI00\t\t10.111.1.54\tENABLED\r\nINSTANCE\ti-CB7B418F\r\n[13:24:03] [c-12 | 10.111.1.47]: euca-migrate-instances -i i-CB7B418F\r\n[13:28:29] [c-12 | 10.111.1.47]: euca-describe-nodes\r\nNODE\tPARTI00\t\t10.111.5.73\tENABLED\r\nINSTANCE\ti-CB7B418F\r\nNODE\tPARTI00\t\t10.111.1.54\tENABLED\r\n[13:40:34] [c-12 | 10.111.1.47]: euca-describe-instances\r\nRESERVATION\tr-71BD4056\t897126584410\tdefault\r\nINSTANCE\ti-CB7B418F\temi-DFF73DC8\teuca-10-111-102-61.eucalyptus.c-12.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-226-59.eucalyptus.internal\trunning\ttonykey\t0\t\tm3.xlarge\t2014-02-17T19:50:09.277Z\tPARTI00\t\t\twindows\tmonitoring-disabled\t10.111.102.61\t172.31.226.59\t\t\tinstance-store\t\t\t\t\thvm\r\nTAG\tinstance\ti-CB7B418F\teuca:node\t10.111.5.73\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2014-02-17T15:44:30.240-0600","updated":"2014-02-17T15:44:30.240-0600"}],"maxResults":3,"total":3,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}