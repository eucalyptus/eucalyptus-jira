{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"51708","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51708","key":"EUCA-13008","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@75dd7471[id=144,rapidViewId=118,state=CLOSED,name=4.4.0 Sprint 5,goal=,startDate=2016-12-05T23:35:25.781Z,endDate=2017-01-05T05:35:00.000Z,completeDate=2017-01-05T17:09:22.486Z,sequence=144]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2017-03-15T23:15:17.833-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13008/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2016-12-06T18:55:21.214-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10300":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-03-15T23:15:17.843-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"When there are a large number of closed workflows simpleworkflow performance is poor:\r\n\r\n{code}\r\neucalyptus_shared=# select count(*) from eucalyptus_simpleworkflow.swf_workflow_execution;\r\n count \r\n-------\r\n 57805\r\n(1 row)\r\n{code}\r\n\r\nMain slow queries logged:\r\n\r\n{code}\r\n2016-12-06 16:18:42 PSTLOG:  duration: 286.517 ms  execute <unnamed>: select count(*) as y0_ from eucalyptus_simpleworkflow.swf_workflow_execution this_ where (this_.metadata_state=$1 and this_.metada\r\nta_account_id=$2 and this_.decision_status=$3 and this_.domain=$4 and this_.task_list=$5) and 1=1\r\n2016-12-06 16:18:42 PSTDETAIL:  parameters: $1 = 'Open', $2 = '000756878880', $3 = 'Pending', $4 = 'LoadbalancingDomain', $5 = 'LoadBalancerTasks'\r\n2016-12-06 16:18:42 PSTLOG:  duration: 236.111 ms  execute <unnamed>: select this_.id as id1_4_1_, this_.creation_timestamp as creation2_4_1_, this_.last_update_timestamp as last_upd3_4_1_, this_.meta\r\ndata_perm_uuid as metadata4_4_1_, this_.version as version5_4_1_, this_.metadata_display_name as metadata6_4_1_, this_.metadata_last_state as metadata7_4_1_, this_.metadata_state as metadata8_4_1_, th\r\nis_.metadata_state_change_stack as metadata9_4_1_, this_.metadata_account_id as metadat10_4_1_, this_.metadata_unique_name as metadat11_4_1_, this_.metadata_user_id as metadat12_4_1_, this_.metadata_u\r\nser_name as metadat13_4_1_, this_.cancel_requested as cancel_14_4_1_, this_.child_policy as child_p15_4_1_, this_.close_status as close_s16_4_1_, this_.close_timestamp as close_t17_4_1_, this_.decisio\r\nn_status as decisio18_4_1_, this_.decision_timestamp as decisio19_4_1_, this_.domain_id as domain_30_4_1_, this_.domain as domain20_4_1_, this_.domain_uuid as domain_21_4_1_, this_.exec_start_to_close\r\n_timeout as exec_st22_4_1_, this_.latest_activity_timestamp as latest_23_4_1_, this_.latest_execution_context as latest_24_4_1_, this_.retention_timestamp as retenti25_4_1_, this_.task_list as task_li\r\n26_4_1_, this_.task_start_to_close_timeout as task_st27_4_1_, this_.timeout_timestamp as timeout28_4_1_, this_.workflow_id as workflo29_4_1_, this_.workflow_type_id as workflo31_4_1_, domain2_.id as i\r\nd1_2_0_, domain2_.creation_timestamp as creation2_2_0_, domain2_.last_update_timestamp as last_upd3_2_0_, domain2_.metadata_perm_uuid as metadata4_2_0_, domain2_.version as version5_2_0_, domain2_.met\r\nadata_display_name as metadata6_2_0_, domain2_.metadata_last_state as metadata7_2_0_, domain2_.metadata_state as metadata8_2_0_, domain2_.metadata_state_change_stack as metadata9_2_0_, domain2_.metada\r\nta_account_id as metadat10_2_0_, domain2_.metadata_unique_name as metadat11_2_0_, domain2_.metadata_user_id as metadat12_2_0_, domain2_.metadata_user_name as metadat13_2_0_, domain2_.description as de\r\nscrip14_2_0_, domain2_.workflow_retention_days as workflo15_2_0_ from eucalyptus_simpleworkflow.swf_workflow_execution this_ inner join eucalyptus_simpleworkflow.swf_domain domain2_ on this_.domain_id\r\n=domain2_.id where (this_.metadata_state=$1 and this_.metadata_account_id=$2 and this_.decision_status=$3 and this_.domain=$4 and this_.task_list=$5)\r\n2016-12-06 16:18:42 PSTDETAIL:  parameters: $1 = 'Open', $2 = '000756878880', $3 = 'Pending', $4 = 'LoadbalancingDomain', $5 = 'LoadBalancerTasks'\r\n{code}\r\n\r\nWe should add indexes to allow faster lookup of (and checking for) pending workflow tasks.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Simpleworkflow performance poor with many closed workflows","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i040km:","customfield_10000":"3_*:*_1_*:*_1322844_*|*_10000_*:*_1_*:*_162717500_*|*_10001_*:*_1_*:*_5432235_*|*_10003_*:*_1_*:*_4722814137_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2017-02-01T09:53:27.927-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["hspencer(hspencer)","lbiasi(lbiasi)","sjones(sjones)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51708/comment/114013","id":"114013","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The following partial index may address this issue:\r\n\r\n{code}\r\ncreate index swf_workflow_execution_open_pending_idx on eucalyptus_simpleworkflow.swf_workflow_execution ( metadata_account_id, domain, task_list, metadata_state, decision_status ) where metadata_state = 'Open' and decision_status = 'Pending'\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-06T19:01:00.059-0600","updated":"2016-12-06T19:01:00.059-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51708/comment/114149","id":"114149","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"This is fixed in the commit:\r\n\r\n  https://github.com/eucalyptus/eucalyptus/commit/2891e127118c2b13ae86aae7cb92e236eec0782d\r\n\r\nTo verify check that the next index is present:\r\n\r\n{code}\r\n#\r\n#\r\n# psql -h /var/lib/eucalyptus/db/data/ -p 8777 eucalyptus_shared\r\npsql (9.2.15)\r\nType \"help\" for help.\r\n\r\neucalyptus_shared=# \\dt\r\nNo relations found.\r\neucalyptus_shared=# \\d eucalyptus_simpleworkflow.swf_workflow_execution;\r\n       Table \"eucalyptus_simpleworkflow.swf_workflow_execution\"\r\n           Column            |            Type             | Modifiers \r\n-----------------------------+-----------------------------+-----------\r\n id                          | character varying(255)      | not null\r\n creation_timestamp          | timestamp without time zone | \r\n last_update_timestamp       | timestamp without time zone | \r\n metadata_perm_uuid          | character varying(255)      | not null\r\n version                     | integer                     | \r\n metadata_display_name       | character varying(255)      | \r\n metadata_last_state         | character varying(255)      | \r\n metadata_state              | character varying(255)      | \r\n metadata_state_change_stack | text                        | \r\n metadata_account_id         | character varying(255)      | \r\n metadata_unique_name        | character varying(300)      | not null\r\n metadata_user_id            | character varying(255)      | \r\n metadata_user_name          | character varying(255)      | \r\n cancel_requested            | boolean                     | not null\r\n child_policy                | character varying(255)      | not null\r\n close_status                | character varying(255)      | \r\n close_timestamp             | timestamp without time zone | \r\n decision_status             | character varying(255)      | \r\n decision_timestamp          | timestamp without time zone | not null\r\n domain                      | character varying(256)      | not null\r\n domain_uuid                 | character varying(255)      | not null\r\n exec_start_to_close_timeout | integer                     | not null\r\n latest_activity_timestamp   | timestamp without time zone | \r\n latest_execution_context    | text                        | \r\n retention_timestamp         | timestamp without time zone | \r\n task_list                   | character varying(256)      | not null\r\n task_start_to_close_timeout | integer                     | \r\n timeout_timestamp           | timestamp without time zone | \r\n workflow_id                 | character varying(256)      | not null\r\n domain_id                   | character varying(255)      | not null\r\n workflow_type_id            | character varying(255)      | not null\r\nIndexes:\r\n    \"swf_workflow_execution_pkey\" PRIMARY KEY, btree (id)\r\n    \"uk_1lj0p6a4n6qh0rjcy9iterhwn\" UNIQUE CONSTRAINT, btree (metadata_unique_name)\r\n    \"uk_2oda16s60q89nlxtjm6lcvut1\" UNIQUE CONSTRAINT, btree (metadata_perm_uuid)\r\n    \"swf_workflow_execution_open_pending_idx\" btree (metadata_account_id, domain, task_list, metadata_state, decision_status) WHERE metadata_state::text = 'Open'::text AND decision_status::text = 'Pending'::text\r\nForeign-key constraints:\r\n    \"fk_euqliv5juu0mq80k06793j223\" FOREIGN KEY (domain_id) REFERENCES eucalyptus_simpleworkflow.swf_domain(id)\r\n    \"fk_kqkvgrptavtjubx5udchq05u4\" FOREIGN KEY (workflow_type_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_type(id)\r\nReferenced by:\r\n    TABLE \"eucalyptus_simpleworkflow.swf_activity_task\" CONSTRAINT \"fk_198cxihke48o6oa4rttq4uwdl\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_execution(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_workflow_execution_tags\" CONSTRAINT \"fk_1lwug06ncq0cqjppbqcgh8upw\" FOREIGN KEY (workflowexecution_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_execu\r\ntion(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_workflow_history_event\" CONSTRAINT \"fk_73vhred9p2gukkayb7snsgxam\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_execu\r\ntion(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_timer\" CONSTRAINT \"fk_t09qm736p1nlnjtg4acfc5672\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_execution(id)\r\n{code}\r\n\r\ncheck for the \"swf_workflow_execution_open_pending_idx\" index.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T17:59:53.791-0600","updated":"2016-12-08T17:59:53.791-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51708/comment/116804","id":"116804","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.4.0-0.25734.119.20170117git96ba726.el7}}\r\n\r\n*Steps*\r\n\r\n# Created federated setup with two Eucalyptus clouds\r\n#* [hspencer-240-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/240/]\r\n#* [hspencer-243-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/243/]\r\n#* {code}\r\n[root@d-02 ~]# euca-describe-regions\r\nREGION\tdrake\thttp://ec2.d-14.autoqa.qa1.eucalyptus-systems.com:8773/\r\nREGION\tfuture\thttp://ec2.c-29.autoqa.qa1.eucalyptus-systems.com:8773/\r\n{code}\r\n# SSH'd into the Cloud Controller, and checked the PostgresDB for an index entry pertaining to {{swf_workflow_execution_open_pending_idx}}:\r\n{code}\r\n[root@d-02 ~]# psql -h /var/lib/eucalyptus/db/data/ -p 8777 eucalyptus_shared\r\npsql (9.2.18)\r\nType \"help\" for help.\r\n\r\neucalyptus_shared=# \\dt\r\nNo relations found.\r\neucalyptus_shared=# \\d eucalyptus_simpleworkflow.swf_workflow_execution;\r\n       Table \"eucalyptus_simpleworkflow.swf_workflow_execution\"\r\n           Column            |            Type             | Modifiers\r\n-----------------------------+-----------------------------+-----------\r\n id                          | character varying(255)      | not null\r\n creation_timestamp          | timestamp without time zone |\r\n last_update_timestamp       | timestamp without time zone |\r\n metadata_perm_uuid          | character varying(255)      | not null\r\n version                     | integer                     |\r\n metadata_display_name       | character varying(255)      |\r\n metadata_last_state         | character varying(255)      |\r\n metadata_state              | character varying(255)      |\r\n metadata_state_change_stack | text                        |\r\n metadata_account_id         | character varying(255)      |\r\n metadata_unique_name        | character varying(300)      | not null\r\n metadata_user_id            | character varying(255)      |\r\n metadata_user_name          | character varying(255)      |\r\n cancel_requested            | boolean                     | not null\r\n child_policy                | character varying(255)      | not null\r\n close_status                | character varying(255)      |\r\n close_timestamp             | timestamp without time zone |\r\n decision_status             | character varying(255)      |\r\n decision_timestamp          | timestamp without time zone | not null\r\n domain                      | character varying(256)      | not null\r\n domain_uuid                 | character varying(255)      | not null\r\n exec_start_to_close_timeout | integer                     | not null\r\n latest_activity_timestamp   | timestamp without time zone |\r\n latest_execution_context    | text                        |\r\n retention_timestamp         | timestamp without time zone |\r\n task_list                   | character varying(256)      | not null\r\n task_start_to_close_timeout | integer                     |\r\n timeout_timestamp           | timestamp without time zone |\r\n workflow_id                 | character varying(256)      | not null\r\n domain_id                   | character varying(255)      | not null\r\n workflow_type_id            | character varying(255)      | not null\r\nIndexes:\r\n    \"swf_workflow_execution_pkey\" PRIMARY KEY, btree (id)\r\n    \"uk_1lj0p6a4n6qh0rjcy9iterhwn\" UNIQUE CONSTRAINT, btree (metadata_unique_name)\r\n    \"uk_2oda16s60q89nlxtjm6lcvut1\" UNIQUE CONSTRAINT, btree (metadata_perm_uuid)\r\n    \"swf_workflow_execution_open_pending_idx\" btree (metadata_account_id, domain, task_list, metadata_state, decision_status) WHERE metadata_state::text = 'Open'::text AN\r\nD decision_status::text = 'Pending'::text\r\nForeign-key constraints:\r\n    \"fk_euqliv5juu0mq80k06793j223\" FOREIGN KEY (domain_id) REFERENCES eucalyptus_simpleworkflow.swf_domain(id)\r\n    \"fk_kqkvgrptavtjubx5udchq05u4\" FOREIGN KEY (workflow_type_id) REFERENCES eucalyptus_simpleworkflow.swf_workflow_type(id)\r\nReferenced by:\r\n    TABLE \"eucalyptus_simpleworkflow.swf_activity_task\" CONSTRAINT \"fk_198cxihke48o6oa4rttq4uwdl\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpleworkflow\r\n.swf_workflow_execution(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_workflow_execution_tags\" CONSTRAINT \"fk_1lwug06ncq0cqjppbqcgh8upw\" FOREIGN KEY (workflowexecution_id) REFERENCES eucalyptus_simpl\r\neworkflow.swf_workflow_execution(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_workflow_history_event\" CONSTRAINT \"fk_73vhred9p2gukkayb7snsgxam\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpl\r\neworkflow.swf_workflow_execution(id)\r\n    TABLE \"eucalyptus_simpleworkflow.swf_timer\" CONSTRAINT \"fk_t09qm736p1nlnjtg4acfc5672\" FOREIGN KEY (workflow_execution_id) REFERENCES eucalyptus_simpleworkflow.swf_wor\r\nkflow_execution(id)\r\n{code}\r\n# Confirmed index is present:\r\n{code}\r\n    \"swf_workflow_execution_open_pending_idx\" btree (metadata_account_id, domain, task_list, metadata_state, decision_status) WHERE metadata_state::text = 'Open'::text AN\r\nD decision_status::text = 'Pending'::text\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-01T09:53:27.927-0600","updated":"2017-02-01T09:53:27.927-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51708/comment/119328","id":"119328","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"body":"Moving 4.4.0 Issues from Release Pending to Resolved","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"created":"2017-03-15T23:15:17.841-0500","updated":"2017-03-15T23:15:17.841-0500"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13008/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}