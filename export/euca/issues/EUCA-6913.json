{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"22406","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/22406","key":"EUCA-6913","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6913/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2013-07-08T17:21:46.353-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2013-07-09T15:26:54.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10602","id":"10602","description":"Eucalyptus 3.3.0","name":"3.3.0","archived":false,"released":true,"releaseDate":"2013-06-18"}],"issuelinks":[{"id":"19070","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/19070","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"22471","key":"EUCA-6947","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/22471","fields":{"summary":"EBS-backed instances fail to attach non-root EBS volumes when restarting the instance","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-03-24T16:46:56.873-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"description":"Open-iSCSI login timeout was lowered from its default value of 15 seconds to 5 seconds in the 3.3 release. It was modified to accommodate multiple path failures within a reasonable amount of time (imposed by other timeouts). However it seems that initiator hosts can take longer than 5 seconds to login to Equallogic stacked setup using the group IP.  On the client side (NC/SC) the attempt to login times out as expected. \r\n{noformat}\r\n# time iscsiadm -m node -T iqn.2001-05.com.equallogic:0-8a0906-45541cf08-0470000015051db3-vol-test -p 10.107.6.3 -l\r\nLogging in to [iface: default, target: iqn.2001-05.com.equallogic:0-8a0906-45541cf08-0470000015051db3-vol-test, portal: 10.107.6.3,3260] (multiple)\r\niscsiadm: Could not login to [iface: default, target: iqn.2001-05.com.equallogic:0-8a0906-45541cf08-0470000015051db3-vol-test, portal: 10.107.6.3,3260].\r\niscsiadm: initiator reported error (11 - iSCSI PDU timed out)\r\niscsiadm: Could not log into all portals\r\n\r\nreal\t0m5.530s\r\nuser\t0m0.001s\r\nsys\t0m0.001s\r\n{noformat}\r\n\r\n\\\\ \r\nFew observations that led to conclusion that the timeout value was insufficient:\r\n# Equallogic logs show that the initiator host disconnected during login process \r\n{noformat}\r\neucagrp> \r\n101814:1225:eucamem1:MgmtExec: 8-Jul-2013 14:54:36.651226:targetAttr.cc:532:ERROR:7.4.3:iSCSI login to target '10.107.6.1:3260, iqn.2001-05.com.equallogic:0-8a0906-45541cf08-0470000015051db3-vol-test' from initiator '10.107.105.75:41170, iqn.1994-05.com.redhat:3fa265c12a85' failed for the following reason:\r\n\tInitiator disconnected from target during login.\r\n{noformat}\r\n# Timing the operation showed that login to Equallogic stacked setup takes nearly 7 seconds in the new datacenter. \r\n{noformat}\r\n# time iscsiadm -m node -T iqn.2001-05.com.equallogic:0-8a0906-26941cf08-f6e0000010451db3-vol-test1 -p 10.107.6.3 -l\r\nLogging in to [iface: default, target: iqn.2001-05.com.equallogic:0-8a0906-26941cf08-f6e0000010451db3-vol-test1, portal: 10.107.6.3,3260] (multiple)\r\nLogin to [iface: default, target: iqn.2001-05.com.equallogic:0-8a0906-26941cf08-f6e0000010451db3-vol-test1, portal: 10.107.6.3,3260] successful.\r\n\r\nreal\t0m7.807s\r\nuser\t0m0.002s\r\nsys\t0m0.002s\r\n{noformat}\r\n# Bumping up the timeout value seemed to resolve the issue\r\n\r\n\\\\ \r\nIdeally the login timeout should be a configurable property in Eucalyptus. This may not be a trivial change for 3.3.1 and should probably be targeted for 3.4. \r\n\r\nBumping up the timeout to a higher value in the iscsi connection scripts could be a potential fix for 3.3.1. If faced with this issue in the field, the same fix could be employed i.e. increase the timeout value in {{$EUCALYPTUS/usr/share/eucalyptus/connect_iscsitarget_main.pl}} by changing the below line on all NCs and SCs\r\n\r\n{code}\r\n#$LOGIN_TIMEOUT = 5;\r\n$LOGIN_TIMEOUT = 12;\r\n{code}\r\n\r\nCustomer facing teams should be informed about this issue, symptoms, short term fix and the long term solution. May be a KB article would help too?\r\n\r\n\r\n\r\n ","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Equallogic stacked setup - iscsi login timeout","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"customfield_12100":"0|i025ev:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2014-03-07T10:18:32.838-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["swathi(swathi)","vasya(vasya)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6913/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/22406/comment/64138","id":"64138","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"body":"[~tjcramer], short term issue fix for this issue is to bump up the timeout in the pl script and this fix was in pushed to a previous release (3.3.1 I think). I've not seen any bugs related to this issue after the fix. The long term solution would be to make the wait time configurable and it'll need changes in the CLC and NC at the least. I don't think this is a candidate for 4.0.0 and should be pushed into the backlog for a later release. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-03-07T16:09:52.126-0600","updated":"2014-03-07T16:09:52.126-0600"}],"maxResults":1,"total":1,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}