{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"23882","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23882","key":"EUCA-7580","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15501","id":"15501","description":"Eucalyptus 4.1.2","name":"4.1.2","archived":false,"released":true,"releaseDate":"2015-07-30"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"resolutiondate":"2015-06-16T14:04:46.743-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7580/watchers","watchCount":6,"isWatching":false},"created":"2013-09-13T13:25:53.473-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":["AWSCompat-PM"],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10602","id":"10602","description":"Eucalyptus 3.3.0","name":"3.3.0","archived":false,"released":true,"releaseDate":"2013-06-18"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/13700","id":"13700","description":"Eucalyptus 3.4.2","name":"3.4.2","archived":false,"released":true,"releaseDate":"2014-02-24"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:32:28.241-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"description":"When running euca-detach-volume followed immediately by euca-delete-volume, Client.VolumeInUse is not returned.  When testing this on AWS, Client.VolumeInUse is returned.\r\n\r\n*Eucalyptus*\r\n\r\n{code}\r\n$ euca-detach-volume vol-BE874296; euca-delete-volume vol-BE874296\r\nATTACHMENT\tvol-BE874296\ti-B6A4408A\t/dev/sdd\tdetaching\t2013-09-13T15:46:24.938Z\r\neuca-delete-volume: error (DeleteVolumeType): Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,Z1yIYw1xC5EjWs6uQRFJZwQI/Yr8NhsI7G0ysRqdcSWlVA0/5LHPrldyErRImvtHZsbDc6/GRiSZw2n5KRJpf3w/xNbA8C/2JFTu2kjTDXmYVvUrXdgrb+vSouxfLGtxr3PoOV9cH32xCDahRlurs8E5hzdCZXM0Oh58MvZn6TY9JPMCSLctomoSumCtk5dONKFN46y80G1un4gAH6A6Boj2h1hDQgJfePdZBwsfTzPM4pX2AbBnEM3qyssowmVTPqv2fcBr7uItDiUlhj83X2NeRMOfpu2MrjBN7HGdkfL9JJS/dnK32aQTWqm5oubYFnfVC8lNq1sGh70WGtp4iA==:status=detaching:attachTime=2013-09-13 08:46:24.938\r\n{code}\r\n\r\n*AWS*\r\n\r\n{code}\r\n$ ec2-detach-volume vol-e4c72da7;ec2-delete-volume vol-e4c72da7\r\nATTACHMENT\tvol-e4c72da7\ti-f469f497\t/dev/xvde\tdetaching\t2013-09-13T16:00:31+0000\r\nClient.VolumeInUse: Volume vol-e4c72da7 is currently attached to i-f469f497\r\n{code}\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Client.VolumeInUse Not Returned When Following Detach Immediately With Delete","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i01hkv:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_1563106_*|*_5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_424156154_*|*_10001_*:*_2_*:*_54959014022","customfield_10001":"2015-06-16T14:03:57.523-0500","customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","mmunn1(mmunn1)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23882/comment/53244","id":"53244","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Verbose Debugging*\n\n*Eucalyptus*\n\n{code}\n$ euca-detach-volume vol-BE874296; euca-delete-volume vol-BE874296 --debug\nATTACHMENT\tvol-BE874296\ti-B6A4408A\t/dev/sdd\tdetaching\t2013-09-13T18:18:15.149Z\n2013-09-13 11:23:30,424 DEBUG   DeleteVolume parsed arguments: {'userregion': None, 'url': None, 'VolumeId': 'vol-BE874296', 'shell_configfile': '', 'deprecated_sec_key': None, 'deprecated_key_id': None, 'show_empty_fields': False, 'key_id': None, 'secret_key': None}\n2013-09-13 11:23:30,424 DEBUG   Config searching regions for option 'ec2-url'\n2013-09-13 11:23:30,424 DEBUG   Config   section 'aws:us-east-1'\n2013-09-13 11:23:30,424 INFO    Config option 'ec2-url' = 'https://ec2.us-east-1.amazonaws.com/'\n2013-09-13 11:23:30,424 DEBUG   Config searching regions for option 'verify-ssl'\n2013-09-13 11:23:30,424 DEBUG   Config   section 'aws:us-east-1'\n2013-09-13 11:23:30,424 DEBUG   Config   section 'aws:*'\n2013-09-13 11:23:30,424 INFO    Config option 'verify-ssl' = 'true'\n2013-09-13 11:23:30,428 INFO    DeleteVolume parameters: {'Action': 'DeleteVolume', 'Version': '2013-02-01', 'VolumeId': 'vol-BE874296'}\n2013-09-13 11:23:30,428 INFO    Eucalyptus sending request (attempt 1 of 3)\n2013-09-13 11:23:30,430 DEBUG   EC2CompatibleQuerySigV2Auth string to sign: 'POST\\n10.104.1.216:8773\\n/services/Eucalyptus\\nAWSAccessKeyId=L4836KVYWMJCXT4T6Q6B9&Action=DeleteVolume&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2013-09-13T18%3A23%3A30Z&Version=2013-02-01&VolumeId=vol-BE874296'\n2013-09-13 11:23:30,430 DEBUG   EC2CompatibleQuerySigV2Auth b64-encoded signature: oIr36Vr+Jt+xERZuCWXFPr95ENr5khBGuHST3aJXXBg=\n2013-09-13 11:23:30,430 DEBUG   EC2CompatibleQuerySigV2Auth converting params to POST data\n2013-09-13 11:23:30,442 DEBUG   Eucalyptus request method: POST\n2013-09-13 11:23:30,442 DEBUG   Eucalyptus request url:    http://10.104.1.216:8773/services/Eucalyptus\n2013-09-13 11:23:30,443 DEBUG   Eucalyptus request header: Content-Length: 239\n2013-09-13 11:23:30,443 DEBUG   Eucalyptus request header: Content-Type: application/x-www-form-urlencoded\n2013-09-13 11:23:30,443 DEBUG   Eucalyptus request header: Host: 10.104.1.216:8773\n2013-09-13 11:23:30,443 DEBUG   Eucalyptus request header: User-Agent: euca2ools/3.0.0 (CPython 2.6.6; Linux 2.6.32-358.6.2.el6.x86_64; x86_64) requestbuilder/0.1.0-beta2 requests/1.1.0\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   AWSAccessKeyId: L4836KVYWMJCXT4T6Q6B9\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   Action: DeleteVolume\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   Signature: oIr36Vr+Jt+xERZuCWXFPr95ENr5khBGuHST3aJXXBg=\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   SignatureMethod: HmacSHA256\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   SignatureVersion: 2\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   Timestamp: 2013-09-13T18:23:30Z\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   Version: 2013-02-01\n2013-09-13 11:23:30,444 DEBUG   Eucalyptus request data:   VolumeId: vol-BE874296\n2013-09-13 11:23:30,563 DEBUG   Eucalyptus response time: 0.118 seconds\n2013-09-13 11:23:30,564 ERROR   Eucalyptus response status: 406\n2013-09-13 11:23:30,564 DEBUG   Eucalyptus response header: content-length: 3441\n2013-09-13 11:23:30,564 DEBUG   Eucalyptus response header: content-type: application/xml; charset=UTF-8\n2013-09-13 11:23:30,564 DEBUG   DeleteVolume -- response content --\n<?xml version=\"1.0\"?><Response><Errors><Error><Code>DeleteVolumeType</Code><Message>Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,YuWFdyijzGGuxL9jDp14labhpdtN6MxVL0QCsNpvEP07qRUwrwWKPeDGdrYAmEYYkrvJ8gBcGaCzRvWgokD0tlEUhiXdICN6Jru9cAKD5fP4bXd8YvkoIUYUEg6lEkYZtUfO4ecHM2E1iTcWf7OE1b7884trSGM8y7A7ZG2mPiXlZLYmiJcSjmmW1IxRuywxW+LT/hiTNOhthelyfbKAK1zejZpoEl7SzQY81W2YEeyU98bqQcdEAJFX7InW0Em4+KUsltHX6MDMqjqepYzb6geEAzn42gCzB1S2xENS9WxrUAqMSXoxV1Kw/0CjFciws0PutC6lDrejMVoOs5ZkjA==:status=detaching:attachTime=2013-09-13 11:18:15.149</Message></Error></Errors><RequestID>java.lang.IllegalStateException: Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,YuWFdyijzGGuxL9jDp14labhpdtN6MxVL0QCsNpvEP07qRUwrwWKPeDGdrYAmEYYkrvJ8gBcGaCzRvWgokD0tlEUhiXdICN6Jru9cAKD5fP4bXd8YvkoIUYUEg6lEkYZtUfO4ecHM2E1iTcWf7OE1b7884trSGM8y7A7ZG2mPiXlZLYmiJcSjmmW1IxRuywxW+LT/hiTNOhthelyfbKAK1zejZpoEl7SzQY81W2YEeyU98bqQcdEAJFX7InW0Em4+KUsltHX6MDMqjqepYzb6geEAzn42gCzB1S2xENS9WxrUAqMSXoxV1Kw/0CjFciws0PutC6lDrejMVoOs5ZkjA==:status=detaching:attachTime=2013-09-13 11:18:15.149\njava.lang.IllegalStateException: Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,YuWFdyijzGGuxL9jDp14labhpdtN6MxVL0QCsNpvEP07qRUwrwWKPeDGdrYAmEYYkrvJ8gBcGaCzRvWgokD0tlEUhiXdICN6Jru9cAKD5fP4bXd8YvkoIUYUEg6lEkYZtUfO4ecHM2E1iTcWf7OE1b7884trSGM8y7A7ZG2mPiXlZLYmiJcSjmmW1IxRuywxW+LT/hiTNOhthelyfbKAK1zejZpoEl7SzQY81W2YEeyU98bqQcdEAJFX7InW0Em4+KUsltHX6MDMqjqepYzb6geEAzn42gCzB1S2xENS9WxrUAqMSXoxV1Kw/0CjFciws0PutC6lDrejMVoOs5ZkjA==:status=detaching:attachTime=2013-09-13 11:18:15.149\n\tat com.eucalyptus.blockstorage.VolumeManager$2.apply(VolumeManager.java:233)\n\tat com.eucalyptus.blockstorage.VolumeManager$2.apply(VolumeManager.java:217)\n\tat com.eucalyptus.entities.Entities$TransactionalFunction.apply(Entities.java:1030)\n\tat com.eucalyptus.blockstorage.VolumeManager.DeleteVolume(VolumeManager.java:262)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:606)\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:127)\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\n\tat org.mule.model.seda.SedaService$ComponentStageWorker.run(SedaService.java:533)\n\tat org.mule.work.WorkerContext.run(WorkerContext.java:310)\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\n\tat java.lang.Thread.run(Thread.java:724)\n</RequestID></Response>\n2013-09-13 11:23:30,564 DEBUG   DeleteVolume -- end of response content --\n2013-09-13 11:23:30,565 INFO    DeleteVolume result: failure\neuca-delete-volume: error (DeleteVolumeType): Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,YuWFdyijzGGuxL9jDp14labhpdtN6MxVL0QCsNpvEP07qRUwrwWKPeDGdrYAmEYYkrvJ8gBcGaCzRvWgokD0tlEUhiXdICN6Jru9cAKD5fP4bXd8YvkoIUYUEg6lEkYZtUfO4ecHM2E1iTcWf7OE1b7884trSGM8y7A7ZG2mPiXlZLYmiJcSjmmW1IxRuywxW+LT/hiTNOhthelyfbKAK1zejZpoEl7SzQY81W2YEeyU98bqQcdEAJFX7InW0Em4+KUsltHX6MDMqjqepYzb6geEAzn42gCzB1S2xENS9WxrUAqMSXoxV1Kw/0CjFciws0PutC6lDrejMVoOs5ZkjA==:status=detaching:attachTime=2013-09-13 11:18:15.149\nTraceback (most recent call last):\n  File \"/usr/bin/euca-delete-volume\", line 6, in <module>\n    euca2ools.commands.euca.deletevolume.DeleteVolume.run()\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/command.py\", line 288, in run\n    cmd.handle_cli_exception(err)\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/command.py\", line 285, in run\n    result = cmd.main()\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/request.py\", line 182, in main\n    response = self.send()\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/request.py\", line 134, in send\n    return self.handle_server_error(err)\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/request.py\", line 130, in send\n    data=self.body)\n  File \"/usr/lib/python2.6/site-packages/requestbuilder/service.py\", line 234, in send_request\n    self.handle_http_error(response)\n  File \"/usr/lib/python2.6/site-packages/euca2ools/commands/euca/__init__.py\", line 205, in handle_http_error\n    raise AWSError(response)\neuca2ools.exceptions.AWSError: (406, 'Not Acceptable', 'DeleteVolumeType', 'Volume is currently attached: VmVolumeAttachment:volumeId=vol-BE874296:device=/dev/sdd:remoteDevice=sc://vol-BE874296,YuWFdyijzGGuxL9jDp14labhpdtN6MxVL0QCsNpvEP07qRUwrwWKPeDGdrYAmEYYkrvJ8gBcGaCzRvWgokD0tlEUhiXdICN6Jru9cAKD5fP4bXd8YvkoIUYUEg6lEkYZtUfO4ecHM2E1iTcWf7OE1b7884trSGM8y7A7ZG2mPiXlZLYmiJcSjmmW1IxRuywxW+LT/hiTNOhthelyfbKAK1zejZpoEl7SzQY81W2YEeyU98bqQcdEAJFX7InW0Em4+KUsltHX6MDMqjqepYzb6geEAzn42gCzB1S2xENS9WxrUAqMSXoxV1Kw/0CjFciws0PutC6lDrejMVoOs5ZkjA==:status=detaching:attachTime=2013-09-13 11:18:15.149')\n{code}\n\n*AWS*\n\n{code}\n$ ec2-detach-volume vol-e4c72da7;ec2-delete-volume vol-e4c72da7 --debug -v\nATTACHMENT\tvol-e4c72da7\ti-f469f497\t/dev/xvde\tdetaching\t2013-09-13T18:18:29+0000\nSetting User-Agent to [ec2-api-tools 1.6.6.0]\nSetting User-Agent to [ec2-api-tools 1.6.6.0]\n------------------------------[ REQUEST ]-------------------------------\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\n  xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n  <soap:Header>\n    <wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\">\n      <wsu:Timestamp wsu:Id=\"Timestamp-310285359\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n        <wsu:Created xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">2013-09-13T18:24:09.917Z</wsu:Created>\n        <wsu:Expires xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">2013-09-13T18:29:09.917Z</wsu:Expires>\n      </wsu:Timestamp>\n      <wsse:BinarySecurityToken\n        EncodingType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\"\n        ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\"\n        wsu:Id=\"CertId-1523501\"\n        xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">MIICeDCCAeGgAwIBAgIGANNolQ59MA0GCSqGSIb3DQEBBQUAMFMxCzAJBgNVBAYTAlVTMRMwEQYDVQQKEwpBbWF6b24uY29tMQwwCgYDVQQLEwNBV1MxITAfBgNVBAMTGEFXUyBMaW1pdGVkLUFzc3VyYW5jZSBDQTAeFw0xMTEyMjQxNzI4MjVaFw0xMjEyMjMxNzI4MjVaMFMxCzAJBgNVBAYTAlVTMRMwEQYDVQQKEwpBbWF6b24uY29tMRcwFQYDVQQLEw5BV1MtRGV2ZWxvcGVyczEWMBQGA1UEAxMNMXdqNjI2b21mNXI3ajCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA0ZeYyErvPOm93oKgrb0FAggAJRY3fypO639jLcj7vw2BfWzgFp7JZflV2w1gCZx09erSO8HTp6rrNovDZ1/XnDqsUZ3IOjRvxD/XI/nIz4rDB1QfChrpDWISj00DcNJ7sC1X5Ak4ZbpXlEcI6PrjB3qAP6rbBiKu23WOnGmyeLkCAwEAAaNXMFUwDgYDVR0PAQH/BAQDAgWgMBYGA1UdJQEB/wQMMAoGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFFmrDoKt08EkSfGgnL7H4hGdm1+DMA0GCSqGSIb3DQEBBQUAA4GBAGKnrmvlQ24TstFb2BDtRgcYv3Pq3D7yrrO/9ARpfPQAdSFa63XDtx3eKpG62YquaUSen0Cbjkyl/Hrrskfy66fJLMuUIjtJbT+8TIGtNuBSWwJ5PsTGeNgDB/XRoA5X/V/+B3TXBebUphBk0JUdkB8WYXQVEHOP+NE7VLc966Bx</wsse:BinarySecurityToken>\n      <ds:Signature Id=\"Signature-160974589\" xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\">\n        <ds:SignedInfo>\n          <ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/>\n          <ds:SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/>\n          <ds:Reference URI=\"#Timestamp-310285359\">\n            <ds:Transforms>\n              <ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/>\n            </ds:Transforms>\n            <ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/>\n            <ds:DigestValue>t8V2UQhtZjlAZJABzhKYycRg+vM=</ds:DigestValue>\n          </ds:Reference>\n          <ds:Reference URI=\"#id-828756248\">\n            <ds:Transforms>\n              <ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/>\n            </ds:Transforms>\n            <ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/>\n            <ds:DigestValue>VNvC4CZ/e/dQvOYJThSRwcv1R+o=</ds:DigestValue>\n          </ds:Reference>\n        </ds:SignedInfo>\n        <ds:SignatureValue>\nJMeHwRd/NGhxKe1wt3gwmNhbGSHbkTnTCbQl3+4gjA2tzUg4/phRzkoBZz3yTS0T6pq3H2MKlZhM\nTNf8BxcyOrV5mpgbnX+UWSatFLSxotKk67dfRfkGCuZ0u+9jnWtWAdLQypDQxQDaSPAkMiDvk8hX\nHFY0q92qLMOC87lgV/c=\n</ds:SignatureValue>\n        <ds:KeyInfo Id=\"KeyId-825310734\">\n          <wsse:SecurityTokenReference wsu:Id=\"STRId-1033311210\"\n            xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n            <wsse:Reference URI=\"#CertId-1523501\"\n              ValueType=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3\" xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"/>\n          </wsse:SecurityTokenReference>\n        </ds:KeyInfo>\n      </ds:Signature>\n    </wsse:Security>\n  </soap:Header>\n  <soap:Body wsu:Id=\"id-828756248\"\n    xmlns:ns1=\"http://ec2.amazonaws.com/doc/2012-12-01/\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n    <ns1:DeleteVolume>\n      <ns1:volumeId>vol-e4c72da7</ns1:volumeId>\n    </ns1:DeleteVolume>\n  </soap:Body>\n</soap:Envelope>\n\n------------------------------------------------------------------------\nClient.VolumeInUse: Volume vol-e4c72da7 is currently attached to i-f469f497\ncom.amazon.aes.webservices.client.Jec2SoapFaultException: SOAP Fault[code=Client.VolumeInUse, str='Volume vol-e4c72da7 is currently attached to i-f469f497']\n\tat com.amazon.aes.webservices.client.Jec2Impl.UnwrapException(Jec2Impl.java:334)\n\tat com.amazon.aes.webservices.client.Jec2Impl.deleteVolume(Jec2Impl.java:2724)\n\tat com.amazon.aes.webservices.client.cmd.DeleteVolume.invokeOnline(DeleteVolume.java:49)\n\tat com.amazon.aes.webservices.client.cmd.BaseCmd.invoke(BaseCmd.java:1037)\n\tat com.amazon.aes.webservices.client.cmd.DeleteVolume.main(DeleteVolume.java:59)\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-13T13:27:25.925-0500","updated":"2013-09-13T13:27:25.925-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23882/comment/66200","id":"66200","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Reproduced this on Eucalyptus 3.4.2:\r\n{code}\r\n$ euca-delete-volume vol-9C014652 --region account1-user01@euca-delete-volume: error (DeleteVolumeType): Volume is currently attached: VmVolumeAttachment:volumeId=vol-9C014652:device=/dev/sde:remoteDevice=sc://vol-9C014652,Os/fMaAUzoq69Fic9Of6XlJAz+NkLLFHo5AwuvC5EFr+uqb+l+7DSo0rMG8I1Xuw5SZDhH1v8tairV74q81MiL9ejSlAiC+Ocxz0Z8QvlWtUpOdgzxjEu3qkYhK2//byoWvVsCeCE014WuEJ4bOrw+no0w+2PzydXZo6qSyxt3gKstKfOo3FWGBPLTeMklxPWy0i98PHDCcVT5voNqmCXJas6VLM4pqh6HFhbkwkY4Ebnmr9APPTiGF8XpKYTsRhF8SOub6HET35iLHFwIBrEGmlS5Bqe+X172Y+JUPcG1rgbhImRj5d0iSOjPNYp0bWc/Y0V+J89ck+rWGDFAmuDQ==:status=attached:attachTime=2014-04-06 15:35:35.627\r\n{code}\r\n\r\nAWS behavior is still the same:\r\n{code}\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 delete-volume --volume-id vol-a34e99ef --profile harold-work\r\n\r\nA client error (VolumeInUse) occurred when calling the DeleteVolume operation: Volume vol-a34e99ef is currently attached to i-0777cd24\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 delete-volume --volume-id vol-a34e99ef --profile harold-work --debug\r\n2014-04-06 22:54:20,467 - awscli.clidriver - DEBUG - CLI version: aws-cli/1.3.4 Python/2.7.4 Darwin/13.2.0, botocore version: 0.38.0\r\n2014-04-06 22:54:20,468 - botocore.service - DEBUG - Creating service object for: ec2\r\n2014-04-06 22:54:20,639 - botocore.hooks - DEBUG - Event service-data-loaded.ec2: calling handler <function signature_overrides at 0x10d2271b8>\r\n2014-04-06 22:54:20,639 - botocore.hooks - DEBUG - Event service-created: calling handler <function register_retries_for_service at 0x10d226f50>\r\n2014-04-06 22:54:20,639 - botocore.handlers - DEBUG - Registering retry handlers for service: Service(ec2)\r\n2014-04-06 22:54:20,639 - botocore.service - DEBUG - Creating operation objects for: Service(ec2)\r\n2014-04-06 22:54:20,651 - botocore.hooks - DEBUG - Event building-command-table.ec2: calling handler <functools.partial object at 0x10d66b890>\r\n2014-04-06 22:54:20,652 - awscli.customizations.removals - DEBUG - Removing operation: import-instance\r\n2014-04-06 22:54:20,652 - awscli.customizations.removals - DEBUG - Removing operation: import-volume\r\n2014-04-06 22:54:20,652 - botocore.operation - DEBUG - Creating parameter objects for: Operation:DeleteVolume\r\n2014-04-06 22:54:20,653 - awscli.clidriver - DEBUG - OrderedDict([(u'dry-run', <awscli.arguments.BooleanArgument object at 0x10db81610>), (u'no-dry-run', <awscli.arguments.BooleanArgument object at 0x10db81650>), (u'volume-id', <awscli.arguments.CLIArgument object at 0x10db81690>)])\r\n2014-04-06 22:54:20,653 - botocore.hooks - DEBUG - Event building-argument-table.ec2.delete-volume: calling handler <function _rename_arg at 0x10d675140>\r\n2014-04-06 22:54:20,653 - botocore.hooks - DEBUG - Event building-argument-table.ec2.delete-volume: calling handler <function _rename_arg at 0x10d6751b8>\r\n2014-04-06 22:54:20,653 - botocore.hooks - DEBUG - Event building-argument-table.ec2.delete-volume: calling handler <functools.partial object at 0x10d66b940>\r\n2014-04-06 22:54:20,653 - botocore.hooks - DEBUG - Event building-argument-table.ec2.delete-volume: calling handler <function unify_paging_params at 0x10d5db6e0>\r\n2014-04-06 22:54:20,654 - botocore.hooks - DEBUG - Event operation-args-parsed.ec2.delete-volume: calling handler <functools.partial object at 0x10dad8fc8>\r\n2014-04-06 22:54:20,654 - botocore.hooks - DEBUG - Event load-cli-arg.ec2.delete-volume: calling handler <function uri_param at 0x10d5bef50>\r\n2014-04-06 22:54:20,654 - botocore.hooks - DEBUG - Event process-cli-arg.ec2.delete-volume: calling handler <awscli.argprocess.ParamShorthand object at 0x10d673290>\r\n2014-04-06 22:54:20,655 - awscli.arguments - DEBUG - Unpacked value of \"vol-a34e99ef\" for parameter \"volume_id\": vol-a34e99ef\r\n2014-04-06 22:54:20,655 - botocore.credentials - INFO - Found credentials in config file.\r\n2014-04-06 22:54:20,655 - botocore.hooks - DEBUG - Event creating-endpoint.ec2: calling handler <function maybe_switch_to_sigv4 at 0x10d227140>\r\n2014-04-06 22:54:20,761 - botocore.operation - DEBUG - Operation:DeleteVolume called with kwargs: {u'volume_id': u'vol-a34e99ef'}\r\n2014-04-06 22:54:20,762 - botocore.endpoint - DEBUG - Making request for Operation:DeleteVolume (verify_ssl=True) with params: {u'VolumeId': u'vol-a34e99ef'}\r\n2014-04-06 22:54:20,762 - botocore.auth - DEBUG - Calculating signature using v2 auth.\r\n2014-04-06 22:54:20,763 - botocore.auth - DEBUG - String to sign: POST\r\nec2.us-east-1.amazonaws.com\r\n/\r\nAWSAccessKeyId=XXXXXXXXXXXX&Action=DeleteVolume&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2014-04-07T03%3A54%3A20.762539&Version=2014-02-01&VolumeId=vol-a34e99ef\r\n2014-04-06 22:54:20,772 - botocore.endpoint - DEBUG - Sending http request: <PreparedRequest [POST]>\r\n2014-04-06 22:54:20,772 - botocore.vendored.requests.packages.urllib3.connectionpool - INFO - Starting new HTTPS connection (1): ec2.us-east-1.amazonaws.com\r\n2014-04-06 22:54:21,110 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"POST / HTTP/1.1\" 400 None\r\n2014-04-06 22:54:21,111 - botocore.response - DEBUG - Response Headers:\r\ntransfer-encoding: chunked\r\ndate: Mon, 07 Apr 2014 03:54:25 GMT\r\ncneonction: close\r\nserver: AmazonEC2\r\n2014-04-06 22:54:21,111 - botocore.response - DEBUG - Response Body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<Response><Errors><Error><Code>VolumeInUse</Code><Message>Volume vol-a34e99ef is currently attached to i-0777cd24</Message></Error></Errors><RequestID>a74118fd-59f2-400d-a5b5-8977c144efeb</RequestID></Response>\r\n2014-04-06 22:54:21,112 - botocore.hooks - DEBUG - Event needs-retry.ec2.DeleteVolume: calling handler <botocore.retryhandler.RetryHandler object at 0x10dab5ad0>\r\n2014-04-06 22:54:21,112 - botocore.retryhandler - DEBUG - No retry needed.\r\n2014-04-06 22:54:21,112 - botocore.hooks - DEBUG - Event after-call.ec2.DeleteVolume: calling handler <awscli.errorhandler.ErrorHandler object at 0x10d6732d0>\r\n2014-04-06 22:54:21,113 - awscli.errorhandler - DEBUG - HTTP Response Code: 400\r\n2014-04-06 22:54:21,113 - awscli.clidriver - DEBUG - Exception caught in main()\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 187, in main\r\n    return command_table[parsed_args.command](remaining, parsed_args)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 332, in __call__\r\n    return command_table[parsed_args.operation](remaining, parsed_globals)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 439, in __call__\r\n    self._operation_object, call_parameters, parsed_globals)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 527, in invoke\r\n    **parameters)\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/operation.py\", line 74, in call\r\n    parsed=response[1])\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/session.py\", line 632, in emit\r\n    return self._events.emit(event_name, **kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/hooks.py\", line 150, in emit\r\n    response = handler(**kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/errorhandler.py\", line 75, in __call__\r\n    http_status_code=http_response.status_code)\r\nClientError: A client error (VolumeInUse) occurred when calling the DeleteVolume operation: Volume vol-a34e99ef is currently attached to i-0777cd24\r\n2014-04-06 22:54:21,121 - awscli.clidriver - DEBUG - Exiting with rc 255\r\n\r\nA client error (VolumeInUse) occurred when calling the DeleteVolume operation: Volume vol-a34e99ef is currently attached to i-0777cd24\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-06T23:04:50.667-0500","updated":"2014-04-06T23:06:40.936-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23882/comment/87872","id":"87872","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer] I am not seeing this issue in 4.1.2;\r\n{code}\r\n[mmunn:/root/source]euca-describe-instances\r\nRESERVATION\tr-7d3bed6b\t823720075215\tdefault\r\nINSTANCE\ti-68c37f09\temi-9fa8da9d\t10.111.77.95\t10.111.77.103\trunning\t\t0\t\tm1.small\t2015-06-15T14:49:59.113Z\tone\t\t\t\tmonitoring-enabled\t10.111.77.95\t10.111.77.103\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-068e4553\t\t\t\tx86_64\r\nBLOCKDEVICE\t/dev/sdf\tvol-7678ebfd\t2015-06-16T18:59:10.205Z\tfalse\t\t\r\nTAG\tinstance\ti-68c37f09\teuca:node\t10.111.5.82\r\n[mmunn:/root/source]euca-detach-volume vol-7678ebfd; euca-delete-volume vol-7678ebfd\r\nATTACHMENT\tvol-7678ebfd\ti-68c37f09\t/dev/sdf\tdetaching\t2015-06-16T18:59:10.205Z\r\neuca-delete-volume: error (VolumeInUse): Volume is currently attached to: i-68c37f09\r\n[mmunn:/root/source]\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-16T14:03:57.523-0500","updated":"2015-06-16T14:03:57.523-0500"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7580/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}