{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"37465","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465","key":"EUCA-11201","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"customfield_10311":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@264a6f65[id=128,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 10,goal=<null>,startDate=2015-09-09T20:38:52.383Z,endDate=2015-10-02T20:38:00.000Z,completeDate=2015-11-03T02:34:19.117Z,sequence=128]"],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2015-10-26T16:00:56.680-0500","customfield_10308":null,"customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11201/watchers","watchCount":5,"isWatching":false},"created":"2015-07-30T06:23:09.366-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15500","id":"15500","description":"Eucalyptus 4.1.1","name":"4.1.1","archived":false,"released":true,"releaseDate":"2015-05-11"}],"customfield_11901":null,"issuelinks":[{"id":"32312","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/32312","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"37018","key":"EUCA-11046","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37018","fields":{"summary":"Running 40 ELBs make CLC very slow ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"32313","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/32313","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"37173","key":"EUCA-11127","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37173","fields":{"summary":"ILL: Evaluate ELB limits on LoadBalancer","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:24:53.452-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"description":"Inspecting a system which was running hundreds of ELB instances found it using up lots of CPU time in an otherwise steady state.  Close inspection reveals that threads belonging to the LoadBalancingBackend are the primary cause.\r\n\r\nh2. LoadBalancingBackend usage snapshots\r\nThe following output shows:\r\n# The number of threads\r\n# The aggregate CPU time of their corresponding LWP processes as measured by the kernel\r\nEach line is a snapshot taken every 30 seconds.\r\n{code}\r\n17 58.9  \"LoadBalancingBackend.#####\"\r\n19 63.1  \"LoadBalancingBackend.#####\"\r\n16 57.7  \"LoadBalancingBackend.#####\"\r\n20 59.4  \"LoadBalancingBackend.#####\"\r\n28 93.8  \"LoadBalancingBackend.#####\"\r\n23 72.4  \"LoadBalancingBackend.#####\"\r\n26 87  \"LoadBalancingBackend.#####\"\r\n25 66.4  \"LoadBalancingBackend.#####\"\r\n28 65.9  \"LoadBalancingBackend.#####\"\r\n24 53.3  \"LoadBalancingBackend.#####\"\r\n24 53.2  \"LoadBalancingBackend.#####\"\r\n20 43.5  \"LoadBalancingBackend.#####\"\r\n101 210.5  \"LoadBalancingBackend.#####\"\r\n80 135.3  \"LoadBalancingBackend.#####\"\r\n23 59.4  \"LoadBalancingBackend.#####\"\r\n25 61.5  \"LoadBalancingBackend.#####\"\r\n21 56.2  \"LoadBalancingBackend.#####\"\r\n23 66.6  \"LoadBalancingBackend.#####\"\r\n21 59  \"LoadBalancingBackend.#####\"\r\n20 70.4  \"LoadBalancingBackend.#####\"\r\n19 58.6  \"LoadBalancingBackend.#####\"\r\n22 63.1  \"LoadBalancingBackend.#####\"\r\n22 58.8  \"LoadBalancingBackend.#####\"\r\n106 329.1  \"LoadBalancingBackend.#####\"\r\n101 189.4  \"LoadBalancingBackend.#####\"\r\n28 88.1  \"LoadBalancingBackend.#####\"\r\n21 75.8  \"LoadBalancingBackend.#####\"\r\n21 97.7  \"LoadBalancingBackend.#####\"\r\n22 81.9  \"LoadBalancingBackend.#####\"\r\n26 86.1  \"LoadBalancingBackend.#####\"\r\n23 79.5  \"LoadBalancingBackend.#####\"\r\n20 77.7  \"LoadBalancingBackend.#####\"\r\n27 125.6  \"LoadBalancingBackend.#####\"\r\n21 79.2  \"LoadBalancingBackend.#####\"\r\n122 325.8  \"LoadBalancingBackend.#####\"\r\n95 186.4  \"LoadBalancingBackend.#####\"\r\n27 79.1  \"LoadBalancingBackend.#####\"\r\n28 78.6  \"LoadBalancingBackend.#####\"\r\n25 76.6  \"LoadBalancingBackend.#####\"\r\n31 86.1  \"LoadBalancingBackend.#####\"\r\n{code}\r\n\r\nh2. JStack Analysis\r\nNext, we looked at the jstack output for the corresponding time frames with the following command.  This parses out the cruft and leaves only thread names and stack frames which are appliction related.\r\n{code}\r\n # prepare summaries\r\n awk '/tmp\\/euca-ps-/{cmd=\"ls $(basename $(dirname \"$5\"))/*-jstack.log\";cmd | getline dirname;close(cmd)}/LoadBalancingBackend/{print $0,dirname > dirname\".summary\"}' ps-java-logs\r\n # run the summaries\r\n for f in */*.summary; do awk '{print $4}' $f | xargs -i cat {}  | awk '/nid=0x/ && /LoadBalancingBackend/ {print;for(getline line;length(gensub(\"[ \\t]*\",\"\",\"g\",line))>0;getline line) print line; }'  | egrep -v java.util\\|org.mule\\|java.lang >> $f;done\r\n{code}\r\n\r\nh2. Stack Frame Review\r\nWith that, a simple count of stack frame occurrences suggests the following hot spots. (NOTE: All stack frames are from ELB threads ONLY)\r\n{code}\r\n     27     at com.eucalyptus.loadbalancing.activities.LoadBalancerAutoScalingGroup$LoadBalancerAutoScalingGroupRelationView.<init>(LoadBalancerAutoScalingGroup.java:206)\r\n     27     at com.eucalyptus.loadbalancing.activities.LoadBalancerAutoScalingGroup.onLoad(LoadBalancerAutoScalingGroup.java:71)\r\n     28     at com.eucalyptus.loadbalancing.LoadBalancer.onLoad(LoadBalancer.java:134)\r\n     30     at com.eucalyptus.loadbalancing.LoadBalancers.lookupBackendInstance(LoadBalancers.java:395)\r\n     33     at com.eucalyptus.loadbalancing.backend.LoadBalancingBackendService.putServoStates(LoadBalancingBackendService.java:447)\r\n     44     at com.eucalyptus.auth.policy.PolicyEngineImpl.evaluateResourceAuthorization(PolicyEngineImpl.java:368)\r\n     46     at com.eucalyptus.entities.Entities.maybeDefinitelyExample(Entities.java:568)\r\n     46     at com.eucalyptus.entities.Entities.uniqueResult(Entities.java:532)\r\n     47     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics$1.apply(LoadBalancerCwatchMetrics.java:191)\r\n     50     at com.eucalyptus.auth.Permissions.isAuthorized(Permissions.java:165)\r\n     50     at com.eucalyptus.auth.policy.PolicyEngineImpl.evaluateAuthorization(PolicyEngineImpl.java:216)\r\n     50     at com.eucalyptus.util.RestrictedTypes$6.apply(RestrictedTypes.java:589)\r\n     50     at com.eucalyptus.util.RestrictedTypes$6.apply(RestrictedTypes.java:605)\r\n     80     at com.eucalyptus.loadbalancing.LoadBalancer$LoadBalancerEntityTransform.apply(LoadBalancer.java:694)\r\n     96     at com.eucalyptus.entities.Entities.maybePrimaryKey(Entities.java:603)\r\n     96     at com.eucalyptus.entities.Entities.uniqueResult(Entities.java:528)\r\n    105     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics$1.apply(LoadBalancerCwatchMetrics.java:190)\r\n    152     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics$1.apply(LoadBalancerCwatchMetrics.java:182)\r\n    152     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics.getDataAndClear(LoadBalancerCwatchMetrics.java:182)\r\n    152     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics.maybeReport(LoadBalancerCwatchMetrics.java:154)\r\n    153     at com.eucalyptus.loadbalancing.LoadBalancerCwatchMetrics.addMetric(LoadBalancerCwatchMetrics.java:111)\r\n    159     at com.eucalyptus.loadbalancing.backend.LoadBalancingBackendService.putServoStates(LoadBalancingBackendService.java:531)\r\n{code}\r\n\r\nh2. Attached files\r\n# loadbalancingbackend.summary -- filtered jstack output\r\n# loadbalancingbackend-counts.summary -- stackframe counts\r\n# euca-ps-*-jstack.log -- jstack output\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/25113","id":"25113","filename":"euca-ps-elb.zip","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=grze","name":"grze","key":"grze","accountId":"557058:6ade0063-5050-44b6-a7e3-ca6b0e294d74","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue"},"displayName":"grze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-30T06:23:59.465-0500","size":2814470,"mimeType":"application/zip","content":"https://eucalyptus.atlassian.net/secure/attachment/25113/euca-ps-elb.zip"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/25115","id":"25115","filename":"loadbalancingbackend.summary","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=grze","name":"grze","key":"grze","accountId":"557058:6ade0063-5050-44b6-a7e3-ca6b0e294d74","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue"},"displayName":"grze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-30T06:24:07.306-0500","size":1955304,"mimeType":"application/octet-stream","content":"https://eucalyptus.atlassian.net/secure/attachment/25115/loadbalancingbackend.summary"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/25114","id":"25114","filename":"loadbalancingbackend-counts.summary","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=grze","name":"grze","key":"grze","accountId":"557058:6ade0063-5050-44b6-a7e3-ca6b0e294d74","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue"},"displayName":"grze","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-30T06:24:05.288-0500","size":20282,"mimeType":"application/octet-stream","content":"https://eucalyptus.atlassian.net/secure/attachment/25114/loadbalancingbackend-counts.summary"}],"aggregatetimeestimate":null,"summary":"Threads from LoadBalancingBackend.##### consuming substantial amounts of CPU","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=grze","name":"grze","key":"grze","accountId":"557058:6ade0063-5050-44b6-a7e3-ca6b0e294d74","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue"},"displayName":"grze","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=grze","name":"grze","key":"grze","accountId":"557058:6ade0063-5050-44b6-a7e3-ca6b0e294d74","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/920290d2dd6ce93765911a9d9f4d4e25?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgrze%26avatarId%3D16202%26noRedirect%3Dtrue"},"displayName":"grze","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i001zb:","customfield_10000":"3_*:*_1_*:*_130233_*|*_10000_*:*_1_*:*_35317538_*|*_10001_*:*_1_*:*_4069031082_*|*_10003_*:*_1_*:*_2154882586_*|*_10006_*:*_1_*:*_0","customfield_10001":"2015-07-30T12:25:20.589-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["grze(grze)","spark(spark)","vasya(vasya)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11201/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465/comment/89806","id":"89806","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~grze] Was this tested on 4.1? There's substantial changes in 4.2, related to ELB's resource usage. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-07-30T12:25:20.589-0500","updated":"2015-07-30T12:25:20.589-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465/comment/91809","id":"91809","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"There was a fix that reduces ELB's transactions when a large # of ELBs are present. There are also new properties that controls the amount of transactions (hence CPU load). In the recent testing, up to 500 ELBs were running without errors (EUCA-11127)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-09-15T18:31:08.213-0500","updated":"2015-09-15T18:31:08.213-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465/comment/93358","id":"93358","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~spark], do you refer to new services.loadbalancing.worker.* properties or something else were added to control CPU usage?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-10-09T19:32:52.587-0500","updated":"2015-10-09T19:32:52.587-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465/comment/93361","id":"93361","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~vasya] I think we're ok to mark this as resolved, since we ran scale testing of ELBs. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-10-09T20:04:05.273-0500","updated":"2015-10-09T20:04:05.273-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37465/comment/93380","id":"93380","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Have not see any significant CPU load on set up with 30 running ELBs.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-10-10T17:05:50.798-0500","updated":"2015-10-10T17:05:50.798-0500"}],"maxResults":5,"total":5,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}