{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"49003","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49003","key":"EUCA-12788","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/19100","id":"19100","description":"Eucalyptus 4.4.2","name":"4.4.2","archived":false,"released":true,"releaseDate":"2017-08-30"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@6c27beaf[id=151,rapidViewId=118,state=CLOSED,name=5.0 Sprint 4,goal=,startDate=2017-05-19T17:08:06.223Z,endDate=2017-06-09T17:08:00.000Z,completeDate=2017-06-13T20:28:29.061Z,sequence=151]"],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2017-08-09T14:58:20.160-0500","customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12788/watchers","watchCount":5,"isWatching":false},"created":"2016-09-28T14:51:42.260-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-06-02T19:07:47.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"}],"issuelinks":[{"id":"52800","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/52800","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"59402","key":"EUCA-13419","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/59402","fields":{"summary":"DNS nameserver reverse lookup nameservers off by one","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-08-09T14:58:20.189-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10005","id":"10005","name":"DNS"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"A customer with multiple UFS servers noticed that stopping the DNS service on a UFS server didn't remove the NS record when they queried the CLC for NS records.  I have reproduced what they are seeing in the PRC.\r\n\r\nCreate a cloud with an additional UFS server and you will have two DNS services running.  In this cloud, 10.104.10.43 is the CLC and 10.104.1.186 is an additional UFS host.\r\n\r\n{noformat}\r\nSERVICE  dns                   API_10.104.1.186  API_10.104.1.186.dns             enabled  \r\nSERVICE  dns                   API_10.104.10.43  API_10.104.10.43.dns             enabled  \r\n{noformat}\r\n\r\nQuery the NS records for this domain.\r\n\r\n{noformat}\r\n[root@odc-f-01 ~]# dig -t ns ibanez.trevor.cs.prc.eucalyptus-systems.com @10.104.10.43 +short\r\nns1.ibanez.trevor.cs.prc.eucalyptus-systems.com.\r\nns2.ibanez.trevor.cs.prc.eucalyptus-systems.com.\r\n\r\n[root@odc-f-01 ~]# dig +short ns2.ibanez.trevor.cs.prc.eucalyptus-systems.com\r\n10.104.10.43\r\n\r\n[root@odc-f-01 ~]# dig +short ns1.ibanez.trevor.cs.prc.eucalyptus-systems.com\r\n10.104.1.186\r\n{noformat}\r\n\r\nStop the DNS service on the additional UFS host.\r\n\r\n{noformat}\r\nSERVICE  dns                   API_10.104.1.186  API_10.104.1.186.dns             stopped  \r\nSERVICE  dns                   API_10.104.10.43  API_10.104.10.43.dns             enabled \r\n{noformat}\r\n\r\nQuery the NS records again and you can see that it is still reporting both ns1 and ns1, even though ns1 has been stopped.\r\n\r\n{noformat}\r\n[root@odc-f-01 ~]# dig -t ns ibanez.trevor.cs.prc.eucalyptus-systems.com @10.104.10.43 +short\r\nns1.ibanez.trevor.cs.prc.eucalyptus-systems.com.\r\nns2.ibanez.trevor.cs.prc.eucalyptus-systems.com.\r\n{noformat}\r\n\r\nThe customer ran into this issue when upgrading and they were wondering if they should stop DNS on the UFS during a RHEL 7 upgrade in order for it to be removed.  This shows that, even though the DNS service is stopped, the NS record isn't removed.  They would like to have this changed so that the NS record is removed when the DNS service is stopped.","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Remove NS record when DNS service is stopped","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=trevorw","name":"trevorw","key":"trevorw","accountId":"557058:09b6a9d7-07cc-4e99-a47e-c7916bf8fa67","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Trevor Williams","active":true,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=trevorw","name":"trevorw","key":"trevorw","accountId":"557058:09b6a9d7-07cc-4e99-a47e-c7916bf8fa67","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/481ed8973044192169acfec4aaf56a8f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Trevor Williams","active":true,"timeZone":"America/New_York"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i03xnj:","customfield_10000":"3_*:*_1_*:*_236416757_*|*_10000_*:*_1_*:*_695466337_*|*_10001_*:*_1_*:*_20658426619_*|*_10003_*:*_1_*:*_5626088217_*|*_10006_*:*_1_*:*_0","customfield_10001":"2016-09-29T16:28:27.837-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["gholms(gholms)","hspencer(hspencer)","sjones(sjones)","trevorw(trevorw)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49003/comment/110917","id":"110917","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"body":"Will that make a difference when there are still glue records still pointed at it?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-29T16:28:27.837-0500","updated":"2016-09-29T16:28:27.837-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49003/comment/122903","id":"122903","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"We now include only enabled dns services in nameserver responses:\r\n\r\n{code}\r\n# \r\n# euserv-describe-services --filter service-type=dns\r\nSERVICE  dns  API_10.111.1.27   API_10.111.1.27.dns   enabled  \r\nSERVICE  dns  API_10.111.5.148  API_10.111.5.148.dns  enabled  \r\n# \r\n# \r\n# euctl system.dns.dnsdomain\r\nsystem.dns.dnsdomain = b-27.autoqa.qa1.eucalyptus-systems.com\r\n# \r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n# \r\n# \r\n# dig @10.111.1.27 ns1.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.1.27\r\n# dig @10.111.1.27 ns2.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.5.148\r\n# \r\n# \r\n# dig @10.111.5.148 ns1.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.1.27\r\n# dig @10.111.5.148 ns2.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.5.148\r\n# \r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns \r\n\r\n; <<>> DiG 9.9.4-RedHat-9.9.4-38.el7_3.3 <<>> @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns\r\n; (1 server found)\r\n;; global options: +cmd\r\n;; Got answer:\r\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 37486\r\n;; flags: qr aa rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 3\r\n\r\n;; OPT PSEUDOSECTION:\r\n; EDNS: version: 0, flags:; udp: 4096\r\n;; QUESTION SECTION:\r\n;b-27.autoqa.qa1.eucalyptus-systems.com.\tIN NS\r\n\r\n;; ANSWER SECTION:\r\nb-27.autoqa.qa1.eucalyptus-systems.com.\t60 IN NS ns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\nb-27.autoqa.qa1.eucalyptus-systems.com.\t60 IN NS ns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n\r\n;; ADDITIONAL SECTION:\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com. 60 IN A 10.111.1.27\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com. 60 IN A 10.111.5.148\r\n\r\n;; Query time: 13 msec\r\n;; SERVER: 10.111.1.27#53(10.111.1.27)\r\n;; WHEN: Sun Jun 04 11:03:38 PDT 2017\r\n;; MSG SIZE  rcvd: 135\r\n\r\n# \r\n# \r\n# euserv-modify-service -s STOPPED API_10.111.1.27.dns\r\n# \r\n# \r\n# dig @10.111.5.148 b-27.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n# \r\n# \r\n# dig @10.111.5.148 ns2.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.5.148\r\n# \r\n# \r\n# dig @10.111.5.148 ns1.b-27.autoqa.qa1.eucalyptus-systems.com +short\r\n10.111.1.27\r\n# \r\n# \r\n# dig @10.111.5.148 b-27.autoqa.qa1.eucalyptus-systems.com ns \r\n\r\n; <<>> DiG 9.9.4-RedHat-9.9.4-38.el7_3.3 <<>> @10.111.5.148 b-27.autoqa.qa1.eucalyptus-systems.com ns\r\n; (1 server found)\r\n;; global options: +cmd\r\n;; Got answer:\r\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 65080\r\n;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 2\r\n\r\n;; OPT PSEUDOSECTION:\r\n; EDNS: version: 0, flags:; udp: 4096\r\n;; QUESTION SECTION:\r\n;b-27.autoqa.qa1.eucalyptus-systems.com.\tIN NS\r\n\r\n;; ANSWER SECTION:\r\nb-27.autoqa.qa1.eucalyptus-systems.com.\t60 IN NS ns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n\r\n;; ADDITIONAL SECTION:\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com. 60 IN A 10.111.5.148\r\n\r\n;; Query time: 13 msec\r\n;; SERVER: 10.111.5.148#53(10.111.5.148)\r\n;; WHEN: Sun Jun 04 11:05:35 PDT 2017\r\n;; MSG SIZE  rcvd: 101\r\n\r\n# \r\n# \r\n# euserv-modify-service -s DISABLED API_10.111.1.27.dns --region admin@localhost\r\n# \r\n# \r\n# euserv-describe-services --filter service-type=dns\r\nSERVICE  dns  API_10.111.1.27   API_10.111.1.27.dns   enabled  \r\nSERVICE  dns  API_10.111.5.148  API_10.111.5.148.dns  enabled  \r\n# \r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns  +short\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n# \r\n# \r\n# euserv-modify-service -s STOPPED API_10.111.5.148.dns \r\n# \r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns \r\n\r\n; <<>> DiG 9.9.4-RedHat-9.9.4-38.el7_3.3 <<>> @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns\r\n; (1 server found)\r\n;; global options: +cmd\r\n;; Got answer:\r\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 35460\r\n;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 2\r\n\r\n;; OPT PSEUDOSECTION:\r\n; EDNS: version: 0, flags:; udp: 4096\r\n;; QUESTION SECTION:\r\n;b-27.autoqa.qa1.eucalyptus-systems.com.\tIN NS\r\n\r\n;; ANSWER SECTION:\r\nb-27.autoqa.qa1.eucalyptus-systems.com.\t60 IN NS ns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n\r\n;; ADDITIONAL SECTION:\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com. 60 IN A 10.111.1.27\r\n\r\n;; Query time: 9 msec\r\n;; SERVER: 10.111.1.27#53(10.111.1.27)\r\n;; WHEN: Sun Jun 04 11:09:20 PDT 2017\r\n;; MSG SIZE  rcvd: 101\r\n\r\n# \r\n# \r\n# euserv-modify-service -s DISABLED API_10.111.5.148.dns \r\n# \r\n# \r\n# dig @10.111.1.27 b-27.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.b-27.autoqa.qa1.eucalyptus-systems.com.\r\nns2.b-27.autoqa.qa1.eucalyptus-systems.com.\r\n# \r\n# \r\n{code}\r\n\r\nwhen a nameserver is stopped the lookup for the A record will still succeed but NS query will exclude the nameserver and additional data from the response.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-06-05T12:10:11.964-0500","updated":"2017-06-05T12:10:11.964-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49003/comment/126306","id":"126306","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.4.2-0.25939.65.20170804git4e99b23.el7}}\r\n\r\n*Steps*\r\n\r\n# Deployed multi-UFS Eucalyptus 4.4 cloud running VPC networking mode - [hspencer-857-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/857/]\r\n# Confirmed DNS service settings:\r\n{code}\r\n[root@b-36 ~]# euserv-describe-services --filter service-type=dns\r\nSERVICE  dns  API_10.111.1.125  API_10.111.1.125.dns  enabled\r\nSERVICE  dns  API_10.111.1.178  API_10.111.1.178.dns  enabled\r\n[root@b-36 ~]# euctl system.dns.dnsdomain\r\nsystem.dns.dnsdomain = d-36.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n# Confirm NS resolution worked correctly:\r\n{code}\r\neuca-prod-1-82:~ haroldspencerjr$ dig @10.111.1.125 d-36.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.d-36.autoqa.qa1.eucalyptus-systems.com.\r\nns2.d-36.autoqa.qa1.eucalyptus-systems.com.\r\n{code}\r\n# Shutdown eucalyptus-cloud service on ns2.d-36.autoqa.qa1.eucalyptus-systems.com (10.111.1.178):\r\n{code}\r\n[root@g-05-06 ~]# systemctl status eucalyptus-cloud.service\r\n● eucalyptus-cloud.service - Eucalyptus cloud web services\r\n   Loaded: loaded (/usr/lib/systemd/system/eucalyptus-cloud.service; enabled; vendor preset: disabled)\r\n   Active: active (running) since Wed 2017-08-09 12:14:22 PDT; 33min ago\r\n Main PID: 14078 (eucalyptus-clou)\r\n   CGroup: /system.slice/eucalyptus-cloud.service\r\n           ├─14078 eucalyptus-cloud -Xss2000k\r\n           └─14473 eucalyptus-cloud -Xss2000k\r\n\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: Detected Interfaces\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: _________________________________________________________\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em1.107 -- [/10.107.101.178/16 [/10.107.255.255]]\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em1.107 -- /10.107.101.178\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em2 -- [/10.113.1.178/16 [/10.113.255.255]]\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em2 -- /10.113.1.178\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em1 -- [/10.111.1.178/16 [/10.111.255.255]]\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: em1 -- /10.111.1.178\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: lo -- [/127.0.0.1/8 [null]]\r\nAug 09 12:16:30 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: lo -- /127.0.0.1\r\n\r\n[root@g-05-06 ~]# systemctl stop eucalyptus-cloud.service\r\n[root@g-05-06 ~]# systemctl status eucalyptus-cloud.service\r\n● eucalyptus-cloud.service - Eucalyptus cloud web services\r\n   Loaded: loaded (/usr/lib/systemd/system/eucalyptus-cloud.service; enabled; vendor preset: disabled)\r\n   Active: inactive (dead) since Wed 2017-08-09 12:49:07 PDT; 6s ago\r\n Main PID: 14078 (code=exited, status=0/SUCCESS)\r\n\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Th...de9f87\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO SHUTDOWN:eucalyptus-loadbalancing-ephemeralconfigurati...ool...\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Th...46b276\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO SHUTDOWN:eucalyptus-loadbalancing-ephemeralconfigurati...ool...\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Th...d40461\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO SHUTDOWN:eucalyptus-imagingbackend-ephemeralconfigurat...ool...\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Th...449b34\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 INFO SHUTDOWN:eucalyptus-eucalyptus-ephemeralconfiguration-...ool...\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[14078]: 2017-08-09 12:49:07 14078 INFO Service shut down cleanly.\r\nAug 09 12:49:07 g-05-06.qa1.eucalyptus-systems.com systemd[1]: Stopped Eucalyptus cloud web services.\r\nHint: Some lines were ellipsized, use -l to show in full.\r\n{code}\r\n# Tested NS lookup again to confirm only ns1.d-36.autoqa.qa1.eucalyptus-systems.com would show:\r\n{code}\r\neuca-prod-1-82:~ haroldspencerjr$ dig @10.111.1.125 d-36.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.d-36.autoqa.qa1.eucalyptus-systems.com.\r\n{code}\r\n# Restarted eucalyptus-cloud.service on ns2.d-36.autoqa.qa1.eucalyptus-systems.com:\r\n{code}\r\n[root@g-05-06 ~]# systemctl start eucalyptus-cloud.service\r\n[root@g-05-06 ~]# systemctl status eucalyptus-cloud.service\r\n● eucalyptus-cloud.service - Eucalyptus cloud web services\r\n   Loaded: loaded (/usr/lib/systemd/system/eucalyptus-cloud.service; enabled; vendor preset: disabled)\r\n   Active: active (running) since Wed 2017-08-09 12:49:36 PDT; 3s ago\r\n Main PID: 16311 (eucalyptus-clou)\r\n   CGroup: /system.slice/eucalyptus-cloud.service\r\n           ├─16311 eucalyptus-cloud -Xss2000k\r\n           └─16314 eucalyptus-cloud -Xss2000k\r\n\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com systemd[1]: Started Eucalyptus cloud web services.\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com systemd[1]: Starting Eucalyptus cloud web services...\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[16311]: 2017-08-09 12:49:36 INFO ulimit: resource=7 soft=65535 hard=65535\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[16311]: 2017-08-09 12:49:36 INFO ulimit: resource=6 soft=-1 hard=-1\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[16311]: 2017-08-09 12:49:36 INFO ulimit: resource=6 soft=-1 hard=-1\r\nAug 09 12:49:36 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[16311]: 2017-08-09 12:49:36 16314 INFO User did not set heap size. Setting it automatic... bytes\r\nAug 09 12:49:37 g-05-06.qa1.eucalyptus-systems.com eucalyptus-cloud[16311]: 2017-08-09 12:49:37 INFO Returning Bootstrapper instance.\r\nHint: Some lines were ellipsized, use -l to show in full.\r\n{code}\r\n# Once service reached ENABLED state, ran the NS lookup again to confirm both nameservers displayed:\r\n{code}\r\n[root@b-36 ~]# euserv-describe-services --filter service-type=dns\r\nSERVICE  dns  API_10.111.1.125  API_10.111.1.125.dns  enabled\r\nSERVICE  dns  API_10.111.1.178  API_10.111.1.178.dns  notready\r\n[root@b-36 ~]# euserv-describe-services --filter service-type=dns\r\nSERVICE  dns  API_10.111.1.125  API_10.111.1.125.dns  enabled\r\nSERVICE  dns  API_10.111.1.178  API_10.111.1.178.dns  enabled\r\n\r\neuca-prod-1-82:~ haroldspencerjr$ dig @10.111.1.125 d-36.autoqa.qa1.eucalyptus-systems.com ns +short\r\nns1.d-36.autoqa.qa1.eucalyptus-systems.com.\r\nns2.d-36.autoqa.qa1.eucalyptus-systems.com.\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-08-09T14:58:20.172-0500","updated":"2017-08-09T14:58:20.172-0500"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12788/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}