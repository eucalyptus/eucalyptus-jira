{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"39667","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667","key":"EUCA-11791","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2015-12-01T13:19:20.051-0600","customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11791/watchers","watchCount":2,"isWatching":false},"created":"2015-12-01T02:13:21.503-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16401","id":"16401","description":"Eucalyptus 4.2.1","name":"4.2.1","archived":false,"released":true,"releaseDate":"2015-12-07"}],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2015-12-01T13:20:02.118-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"After upgrade CC is not going to ENABLED state. It's sometimes NOTREADY and sometimes is in DISABLED state:\r\n{noformat}\r\nSERVICE\tcluster           \tPARTI00   \tCC_178               \tNOTREADY\t109 \thttp://10.111.1.178:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_178/\r\n{noformat}\r\n\r\n{noformat}\r\nSERVICE\tcluster           \tPARTI00   \tCC_178               \tDISABLED\t136 \thttp://10.111.1.178:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_178/\r\n{noformat}\r\n\r\ncloud-output.log on CLC has something like this (see attached log for detail):\r\n{noformat}\r\nY action=ENABLE id=836 startTime=Mon Nov 30 23:42:13 PST 2015\r\n                          |   com.eucalyptus.component.Faults$CheckException: Failed to call enable() on cluster ServiceConfiguration cluster arn:euca:eucalyptus:PARTI00:cluste\r\nr:CC_178/ 10.111.1.178:8774:/axis2/services/EucalyptusCC:host-local:DISABLED because of: java.util.concurrent.ExecutionException: org.hibernate.exception.SQLGrammarException: c\r\nould not extract ResultSet\r\n                          | Caused by: com.eucalyptus.component.ServiceRegistrationException: Failed to call enable() on cluster ServiceConfiguration cluster arn:euca:eucalyptu\r\ns:PARTI00:cluster:CC_178/ 10.111.1.178:8774:/axis2/services/EucalyptusCC:host-local:DISABLED because of: java.util.concurrent.ExecutionException: org.hibernate.exception.SQLGra\r\nmmarException: could not extract ResultSet\r\n                          | Caused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: org.hibernate.exception.SQLGrammarException: could not extract Resul\r\ntSet\r\n                          | Caused by: java.util.concurrent.ExecutionException: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n                          | Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n                          | Caused by: org.postgresql.util.PSQLException: ERROR: column attachment2_.id does not exist\r\n                          |   Position: 4267\r\n                          |\r\n                          | - arn:euca:bootstrap:PARTI00:node:10.111.5.57/ ------------\r\n                          |   TRANSITION arn:euca:bootstrap:PARTI00:node:10.111.5.57/ #840 READY_CHECK ActiveTransition name=READY_CHECK from=NOTREADY/false to=DISABLED/false e\r\nrror=NOTREADY action=CHECK id=840 startTime=Mon Nov 30 23:42:25 PST 2015\r\n                          |   com.eucalyptus.component.Faults$CheckException: Failed to lookup ENABLED service of type ClusterController in partition Partition:name=PARTI00:cc-\r\ncert-serial=97727949745261:nc-cert-serial=97730129674606\r\n                          | Caused by: java.util.NoSuchElementException: Failed to lookup ENABLED service of type ClusterController in partition Partition:name=PARTI00:cc-cert-\r\nserial=97727949745261:nc-cert-serial=97730129674606\r\n                          |\r\n                          | - arn:euca:eucalyptus:PARTI00:cluster:CC_178/ ------------\r\n                          |   TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_178/ #841 READY_CHECK ActiveTransition name=READY_CHECK from=NOTREADY/false to=DISABLED/false error=NOTREADY action=CHECK id=841 startTime=Mon Nov 30 23:42:25 PST 2015\r\n                          |   com.eucalyptus.component.Faults$CheckException: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n                          | Caused by: java.util.concurrent.ExecutionException: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n                          | Caused by: org.hibernate.exception.SQLGrammarException: could not extract ResultSet\r\n                          | Caused by: org.postgresql.util.PSQLException: ERROR: column attachment2_.id does not exist\r\n                          |   Position: 4267\r\n                          |\r\n                          | - arn:euca:bootstrap:PARTI00:node:10.111.5.57/ ------------\r\n                          |   TRANSITION arn:euca:bootstrap:PARTI00:node:10.111.5.57/ #854 READY_CHECK ActiveTransition name=READY_CHECK from=NOTREADY/false to=DISABLED/false error=NOTREADY action=CHECK id=854 startTime=Mon Nov 30 23:42:43 PST 2015\r\n                          |   com.eucalyptus.component.Faults$CheckException: Failed to lookup ENABLED service of type ClusterController in partition Partition:name=PARTI00:cc-cert-serial=97727949745261:nc-cert-serial=97730129674606\r\n{noformat}\r\n\r\nAs a result eucanetd on NC also not being able to update network info from GNI files,\r\n{noformat}\r\n2015-12-01 00:10:52  WARN | Invalid network mode provided: cannot validate XML\r\n2015-12-01 00:10:52 ERROR | could not validate GNI after XML parse: check network config\r\n2015-12-01 00:10:52 ERROR | could not initialize global network info data structures from XML input\r\n2015-12-01 00:10:53  INFO | update triggered due to file update (//var/lib/eucalyptus/eucanetd_global_network_info.xml)\r\n2015-12-01 00:10:53  WARN | invalid network mode ''\r\n2015-12-01 00:10:53  WARN | Invalid network mode provided: cannot validate XML\r\n2015-12-01 00:10:53 ERROR | could not validate GNI after XML parse: check network config\r\n2015-12-01 00:10:53 ERROR | could not initialize global network info data structures from XML input\r\n2015-12-01 00:10:53  INFO | update triggered due to file update (//var/lib/eucalyptus/eucanetd_global_network_info.xml)\r\n2015-12-01 00:10:53  WARN | invalid network mode ''\r\n2015-12-01 00:10:53  WARN | Invalid network mode provided: cannot validate XML\r\n2015-12-01 00:10:53 ERROR | could not validate GNI after XML parse: check network config\r\n2015-12-01 00:10:53 ERROR | could not initialize global network info data structures from XML input\r\n{noformat}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/26904","id":"26904","filename":"clc_cc_sc_ws_ufs1.tar.gz","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T02:14:52.691-0600","size":14550255,"mimeType":"application/x-gzip","content":"https://eucalyptus.atlassian.net/secure/attachment/26904/clc_cc_sc_ws_ufs1.tar.gz"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/26905","id":"26905","filename":"nc1.tar.gz","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T02:14:36.127-0600","size":2528252,"mimeType":"application/x-gzip","content":"https://eucalyptus.atlassian.net/secure/attachment/26905/nc1.tar.gz"}],"aggregatetimeestimate":null,"summary":"CC is NOTREADY after upgrade 4.0.2 -> 4.1.2 -> 4.2.1","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i03jc7:","customfield_10000":"6_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_39958561","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-12-01T10:07:52.242-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["shaon(shaon)","sjones(sjones)"],"customfield_10116":null,"environment":"CLC/UFS/WS/SC/CC - 10.111.1.178\r\nNC - 10.111.5.57\r\n\r\nNetworking mode: EDGE\r\nNetapp","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11791/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96357","id":"96357","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"It looks like an upgrade to 4.2.0 was performed first but failed due to the known issues in that release?:\r\n\r\n{code}\r\n2015-11-30 22:55:37 #                           UPGRADE INFORMATION\r\n2015-11-30 22:55:37 #================================================================================\r\n2015-11-30 22:55:37 # Old Version:              4.1.2       \r\n2015-11-30 22:55:37 # New Version:              4.2.0       \r\n2015-11-30 22:55:37 # Upgrade keys:             false              using:                \r\n2015-11-30 22:55:37 # Upgrade configuration:    false              using:                \r\n2015-11-30 22:55:37 # Upgrade database:         true               using: upgrade_db     \r\n2015-11-30 22:55:37 # Same version:             false              using:                \r\n2015-11-30 22:55:37 # Start upgrading: db\r\n2015-11-30 22:55:37 Upgrade command: //usr/sbin/eucalyptus-cloud -u eucalyptus -h / --upgrade  --upgrade-old-version=4.1.2 --upgrade-old-dir=/var/lib/eucalyptus/upgrade/eucalyptus.backup.1448952870\r\n2015-11-30 22:55:37 Upgrading your database...\r\n2015-11-30 22:55:37 INFO ulimit: resource=7 soft=65536 hard=65536\r\n2015-11-30 22:55:37 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-11-30 22:55:37 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-11-30 22:55:37 INFO 0832 User did not set heap size. Setting it automatically to 4GB base on total memory of 7428812800 bytes\r\n2015-11-30 22:56:18 INFO Executing Pre-Shutdown Hooks...\r\n2015-11-30 22:56:18 INFO Executing Shutdown Hooks...\r\n2015-11-30 22:56:18 INFO Executing Post-Shutdown Hooks...\r\n2015-11-30 22:56:18 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@1008c0fb\r\n2015-11-30 22:56:18 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-11-30 22:56:18 INFO ulimit: resource=7 soft=65536 hard=65536\r\n2015-11-30 22:56:18 INFO ulimit: resource=6 soft=28219 hard=28219\r\n2015-11-30 22:56:18 INFO ulimit: resource=6 soft=-1 hard=-1\r\n2015-11-30 22:56:18 INFO 0832 User did not set heap size. Setting it automatically to 4GB base on total memory of 7428812800 bytes\r\n2015-11-30 22:57:20 INFO Executing Pre-Shutdown Hooks...\r\n2015-11-30 22:57:20 INFO Executing Pre-Shutdown Hook: com.eucalyptus.bootstrap.Hosts$HostMembershipBootstrapper$1$1@5fb93727\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hooks...\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@72053223\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@234460ca\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@40c0370a\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@6de22e89\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@448cf7d7\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@6b32936d\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@1470d664\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@6aa3e70d\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@507524a7\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@15e9b94d\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@c85e92e\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@242acdc1\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@34b65adc\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@5fe66822\r\n2015-11-30 22:57:20 INFO Executing Shutdown Hook: com.eucalyptus.component.BasicService$1@8b4b9b0\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hooks...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@13c8eb66\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.SYSTEM Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@6bd67faf\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.bootstrap Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@4f58f178\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.bootstrap:EphemeralConfiguration:arn:euca:bootstrap:Topology::external/ Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@540fea97\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.bootstrap:Hosts Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@60f28a9e\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.bootstrap:Hosts:normal-pool Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@536abccb\r\n2015-11-30 22:57:20 INFO SHUTDOWN:Eucalyptus.bootstrap:Hosts:oob-pool Stopping thread pool...\r\n2015-11-30 22:57:20 INFO Executing Post-Shutdown Hook: PostgresqlBootstrapper$2@490de36\r\n2015-11-30 22:57:21 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@105ba0ee\r\n2015-11-30 22:57:21 INFO SHUTDOWN:Eucalyptus.bootstrap:DeferredPropertiesBootstrapper Stopping thread pool...\r\n2015-11-30 22:57:21 INFO Executing Post-Shutdown Hook: com.eucalyptus.system.Threads$ThreadPool$1@44498387\r\n2015-11-30 22:57:21 INFO SHUTDOWN:Eucalyptus.bootstrap:Futures Stopping thread pool...\r\n2015-11-30 22:57:22 ERROR 0581 Service exit with a return value of 1.\r\n{code}\r\n\r\nspecifically:\r\n\r\n{code}\r\nMon Nov 30 22:57:20 2015 ERROR [Upgrades:main] [com.eucalyptus.upgrade.Upgrades$UpgradeBootstrapper.load(Upgrades.java):433] org.hibernate.exception.ConstraintViolationException: could not execute statement\r\norg.hibernate.exception.ConstraintViolationException: could not execute statement\r\n\tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:129)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:136)\r\n\tat org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:58)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3067)\r\n\tat org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3509)\r\n\tat org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)\r\n\tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:377)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:369)\r\n\tat org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:286)\r\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:339)\r\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)\r\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1234)\r\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:404)\r\n\tat org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)\r\n\tat org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)\r\n\tat org.hibernate.ejb.TransactionImpl.commit(TransactionImpl.java:75)\r\n\tat com.eucalyptus.entities.Entities$CascadingTx$TxState.commit(Entities.java:1226)\r\n\tat com.eucalyptus.entities.Entities$CascadingTx.commit(Entities.java:1112)\r\n\tat com.eucalyptus.entities.TransactionResource.commit(TransactionResource.java:56)\r\n\tat com.eucalyptus.compute.common.internal.address.AllocatedAddressEntity$AllocatedAddressEntity420Upgrade.apply(AllocatedAddressEntity.java:459)\r\n\tat com.eucalyptus.compute.common.internal.address.AllocatedAddressEntity$AllocatedAddressEntity420Upgrade.apply(AllocatedAddressEntity.java:380)\r\n\tat com.eucalyptus.upgrade.Upgrades$UpgradeState$13.call(Upgrades.java:925)\r\n\tat com.eucalyptus.upgrade.Upgrades$UpgradeState.callAndLog(Upgrades.java:1039)\r\n\tat com.eucalyptus.upgrade.Upgrades$UpgradeBootstrapper.load(Upgrades.java:423)\r\n\tat com.eucalyptus.bootstrap.Bootstrap$Stage.load(Bootstrap.java:306)\r\n\tat com.eucalyptus.bootstrap.SystemBootstrapper$2.apply(SystemBootstrapper.java:232)\r\n\tat com.eucalyptus.bootstrap.SystemBootstrapper$2.apply(SystemBootstrapper.java:228)\r\n\tat com.eucalyptus.bootstrap.SystemBootstrapper.runSystemStages(SystemBootstrapper.java:287)\r\n\tat com.eucalyptus.bootstrap.SystemBootstrapper.load(SystemBootstrapper.java:228)\r\nCaused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint \"uk_r165nl545vks5p0miwvks5yb9\"\r\n  Detail: Key (metadata_unique_name)=(10.111.30.116) already exists.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2161)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1890)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)\r\n\tat org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:560)\r\n\tat org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:417)\r\n\tat org.postgresql.jdbc2.AbstractJdbc2Statement.executeUpdate(AbstractJdbc2Statement.java:363)\r\n\tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:133)\r\n\t... 27 more\r\n{code}\r\n\r\nThe reason the cluster controller is not enabling is due to an error on polling VMs which I think is due to the above upgrade failure:\r\n\r\n{code}\r\nTue Dec 1 00:06:34 2015 DEBUG [org.hibernate.SQL:Eucalyptus.bootstrap:Callbacks:class com.eucalyptus.util.async.Callbacks$BasicCallbackProcessor.class java.util.concurrent.ThreadPoolExecutor$Worker#85] select this_.id as id1_15_1_, this_.creation_timestamp as creation2_15_1_, this_.last_update_timestamp as last3_15_1_, this_.metadata_perm_uuid as metadata4_15_1_, this_.version as version5_15_1_, this_.metadata_display_name as metadata6_15_1_, this_.metadata_last_state as metadata7_15_1_, this_.metadata_state as metadata8_15_1_, this_.metadata_state_change_stack as metadata9_15_1_, this_.metadata_account_id as metadat10_15_1_, this_.metadata_unique_name as metadat11_15_1_, this_.metadata_user_id as metadat12_15_1_, this_.metadata_user_name as metadat13_15_1_, this_.metadata_vm_architecture as metadat14_15_1_, this_.metadata_vm_nameorarn as metadat15_15_1_, this_.metadata_vm_iam_instance_profile_id as metadat16_15_1_, this_.metadata_vm_iam_role_arn as metadat17_15_1_, this_.kernel_id as kernel77_15_1_, this_.metadata_vm_kernel_image_id as metadat18_15_1_, this_.machineImage_id as machine78_15_1_, this_.metadata_vm_machine_image_id as metadat19_15_1_, this_.metadata_vm_monitoring as metadat20_15_1_, this_.metadata_vm_platform as metadat21_15_1_, this_.ramdisk_id as ramdisk79_15_1_, this_.metadata_vm_ramdisk_image_id as metadat22_15_1_, this_.metadata_vm_sshkey as metadat23_15_1_, this_.metadata_vpc_subnet as metadat80_15_1_, this_.metadata_vpc_subnet_id as metadat24_15_1_, this_.metadata_vm_user_data as metadat25_15_1_, this_.metadata_vm_virtualization_type as metadat26_15_1_, this_.metadata_vm_type_id as metadat81_15_1_, this_.metadata_vpc as metadat82_15_1_, this_.metadata_vpc_id as metadat27_15_1_, this_.metadata_vm_expiration as metadat28_15_1_, this_.metadata_vm_launch_index as metadat29_15_1_, this_.metadata_vm_launch_time as metadat30_15_1_, this_.metadata_vm_mac_address as metadat31_15_1_, this_.metadata_vm_private_address as metadat32_15_1_, this_.metadata_vm_private_dns as metadat33_15_1_, this_.metadata_vm_public_address as metadat34_15_1_, this_.metadata_vm_public_dns as metadat35_15_1_, this_.metadata_vm_private_addressing as metadat36_15_1_, this_.metadata_vm_network_index as metadat83_15_1_, this_.metadata_vm_cluster_name as metadat37_15_1_, this_.metadata_vm_partition_name as metadat38_15_1_, this_.metadata_vm_placement as metadat39_15_1_, this_.metadata_vm_private_networking as metadat40_15_1_, this_.metadata_vm_bundle_bucket as metadat41_15_1_, this_.metadata_vm_bundle_error_code as metadat42_15_1_, this_.metadata_vm_bundle_error_msg as metadat43_15_1_, this_.metadata_vm_bundle_policy as metadat44_15_1_, this_.metadata_vm_bundle_prefix as metadat45_15_1_, this_.metadata_vm_bundle_progress as metadat46_15_1_, this_.metadata_vm_bundle_start_time as metadat47_15_1_, this_.metadata_vm_bundle_state as metadat48_15_1_, this_.metadata_vm_bundle_update_time as metadat49_15_1_, this_.metadata_vm_createimage_error_code as metadat50_15_1_, this_.metadata_vm_createimage_error_msg as metadat51_15_1_, this_.metadata_vm_createimage_image_id as metadat52_15_1_, this_.metadata_vm_createimage_no_reboot as metadat53_15_1_, this_.metadata_vm_createimage_progress as metadat54_15_1_, this_.metadata_vm_createimage_start_time as metadat55_15_1_, this_.metadata_vm_createimage_state as metadat56_15_1_, this_.metadata_vm_createimage_update_time as metadat57_15_1_, this_.metadata_vm_guest_state as metadat58_15_1_, this_.metadata_instance_status as metadat59_15_1_, this_.metadata_vm_migration_dest_host as metadat60_15_1_, this_.metadata_vm_migration_state_timer as metadat61_15_1_, this_.metadata_vm_migration_source_host as metadat62_15_1_, this_.metadata_vm_migration_state as metadat63_15_1_, this_.metadata_vm_password_data as metadat64_15_1_, this_.metadata_vm_pending as metadat65_15_1_, this_.metadata_reachability_status as metadat66_15_1_, this_.metadata_vm_reason as metadat67_15_1_, this_.metadata_vm_service_tag as metadat68_15_1_, this_.metadata_instance_unreachable_timestamp as metadat69_15_1_, this_.metadata_vm_zombie as metadat70_15_1_, this_.metadata_vm_block_bytes as metadat71_15_1_, this_.metadata_vm_network_bytes as metadat72_15_1_, this_.metadata_vm_client_token as metadat73_15_1_, this_.metadata_vm_instance_id as metadat74_15_1_, this_.metadata_vm_reservation_id as metadat75_15_1_, this_.metadata_vm_client_token_unique as metadat76_15_1_, attachment2_.vminstance_id as vminsta14_15_3_, attachment2_.id as id1_21_3_, attachment2_.id as id1_21_0_, attachment2_.creation_timestamp as creation2_21_0_, attachment2_.last_update_timestamp as last3_21_0_, attachment2_.metadata_perm_uuid as metadata4_21_0_, attachment2_.version as version5_21_0_, attachment2_.metadata_vm_volume_attach_time as metadata6_21_0_, attachment2_.metadata_vm_volume_at_startup as metadata7_21_0_, attachment2_.metadata_vm_vol_delete_on_terminate as metadata8_21_0_, attachment2_.metadata_vm_volume_device as metadata9_21_0_, attachment2_.metadata_vm_volume_is_root_device as metadat10_21_0_, attachment2_.metadata_vm_volume_remote_device as metadat11_21_0_, attachment2_.metadata_vm_volume_status as metadat12_21_0_, attachment2_.vminstance_id as vminsta14_21_0_, attachment2_.metadata_vm_volume_id as metadat13_21_0_ from eucalyptus_cloud.metadata_instances this_ left outer join eucalyptus_cloud.metadata_instances_volume_attachments attachment2_ on this_.id=attachment2_.vminstance_id where (1=1) and not this_.metadata_state in (?, ?, ?) and this_.id in (?, ?, ?)\r\nTue Dec 1 00:06:34 2015 DEBUG [org.hibernate.engine.jdbc.spi.SqlExceptionHelper:Eucalyptus.bootstrap:Callbacks:class com.eucalyptus.util.async.Callbacks$BasicCallbackProcessor.class java.util.concurrent.ThreadPoolExecutor$Worker#85] could not extract ResultSet [n/a]\r\norg.postgresql.util.PSQLException: ERROR: column attachment2_.id does not exist\r\n  Position: 4267\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2161)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1890)\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:255)\r\n{code}\r\n\r\nI think the fix for EUCA-11623 would address the upgrade failure, but you'd have to upgrade to 4.2.1 rather than 4.2.0 to see that fix. To upgrade to 4.2.0 as a first step you would need to perform the manual workarounds that were previously identified for that release.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T10:07:52.242-0600","updated":"2015-12-01T10:07:52.242-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96363","id":"96363","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones], yeah, I did an upgrade to 4.2.0 to ensure that the failure is still reproducible with this setup and it goes away with 4.2.1. I guess I should have downgraded first. Anyway, if downgrade now and then upgrade, it should work, correct?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T11:23:39.356-0600","updated":"2015-12-01T11:23:39.356-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96365","id":"96365","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~shaon], downgrading and restoring the old (pre 4.2.0) database and then upgrading should work.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T11:39:06.163-0600","updated":"2015-12-01T11:39:06.163-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96369","id":"96369","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~shaon], to clarify, a manual database restore is required in this case due to the sequence of events which as I understand them were:\r\n\r\n# upgrade software to 4.2.0 and attempt database upgrade (4.1.2 - 4.2.0) which fails\r\n# upgrade software to 4.2.1 and attempt database upgrade (4.2.0 - 4.2.1) which is successful\r\n\r\nthe problem is that this skipped the 4.2.0 upgrade since there was no successful database upgrade when that version of the software was installed. The \"successful\" upgrade with 4.2.1 installed meant that database was not fully upgraded but the changes were not rolled back (as there was no failure for this part of the upgrade) meaning a manual restore is necessary.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T12:11:11.874-0600","updated":"2015-12-01T12:11:11.874-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96371","id":"96371","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"Tested upgrading from 4.1.2 to 4.2.1, worked fine. All components are enabled.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T13:19:20.060-0600","updated":"2015-12-01T13:19:20.060-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39667/comment/96372","id":"96372","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~sjones]","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-01T13:20:02.118-0600","updated":"2015-12-01T13:20:02.118-0600"}],"maxResults":6,"total":6,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}