{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"32606","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606","key":"EUCA-10004","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@30823e46[id=83,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 6,goal=<null>,startDate=2014-10-15T21:01:31.173Z,endDate=2014-11-04T22:01:00.000Z,completeDate=2014-11-06T16:40:34.661Z,sequence=83]"],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2015-01-22T03:00:38.008-0600","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10004/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2014-09-22T15:32:16.982-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2014-10-21T18:23:22.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":["4.1-vpc"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"issuelinks":[{"id":"28612","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28612","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"33708","key":"TOOLS-530","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33708","fields":{"summary":"euca-run-instances uses inconsistent layout for subnet and security group options","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"updated":"2015-05-08T17:00:42.456-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"description":"On AWS, when launching instances with VPC options, Network interfaces need to be created, which contains VPC subnet information as well as the security group information. See the code below:\r\n\r\nnetwork_interface = NetworkInterfaceSpecification(\r\n                         subnet_id=vpc_subnet,\r\n                         groups=securitygroup_ids,\r\n                         associate_public_ip_address=associate_public_ip_address,\r\n                     )\r\n\r\nWhen using this NetworkIntefaceSpecification, AWS API no longer accepts the security_group_ids attribute directly from the 'run_instances' call; in fact, when trying to directly use the 'security_group_ids' attribute would result in the error below:\r\n\r\nNetwork interfaces and an instance-level security groups may not be specified on the same request\r\n\r\n\r\nHowever, on Eucalyptus, when launching instances, it appears that the 'security_group_ids' attribute is the only way to specify the security group information. When the security group information specified via Network interfaces, as seen above, the security group on the instances always results in 'default' on Eucalyptus.\r\n\r\nTo address this issue, Eucalyptus needs to match the behavior of AWS so that when Network Interfaces are specified for instances, ignore the 'security_group_ids' attribute on the 'run_instance' call, and instead, obtain the security groups from the Network Interfaces.\r\n\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/22001","id":"22001","filename":"TestEC2VPCSecurityGroupsInstancesAttributes.groovy","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-21T18:35:29.632-0500","size":17476,"mimeType":"application/octet-stream","content":"https://eucalyptus.atlassian.net/secure/attachment/22001/TestEC2VPCSecurityGroupsInstancesAttributes.groovy"}],"summary":"Eucalyptus does not read the security group information when Network interfaces are specified at instance launch time","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kyolee","name":"kyolee","key":"kyolee","accountId":"557058:b64cc631-43b8-4df2-bdce-93d4da9b2097","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue"},"displayName":"Kyo Lee","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kyolee","name":"kyolee","key":"kyolee","accountId":"557058:b64cc631-43b8-4df2-bdce-93d4da9b2097","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue"},"displayName":"Kyo Lee","active":false,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_89403009_*|*_10000_*:*_1_*:*_262819093_*|*_10001_*:*_1_*:*_2164560275_*|*_10003_*:*_1_*:*_7982518664_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i02y2f:","customfield_10001":"2014-10-21T18:38:39.356-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["dshekhawat(dshekhawat)","kyolee(kyolee)","sjones(sjones)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/76733","id":"76733","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kyolee","name":"kyolee","key":"kyolee","accountId":"557058:b64cc631-43b8-4df2-bdce-93d4da9b2097","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue"},"displayName":"Kyo Lee","active":false,"timeZone":"America/Los_Angeles"},"body":"FYI, due to this issue, currently all VPC instances, launched using the user console, would run with the 'default' security group only at the moment.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kyolee","name":"kyolee","key":"kyolee","accountId":"557058:b64cc631-43b8-4df2-bdce-93d4da9b2097","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2e79a9bccb40460b7300d8cdaa567c8a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkyolee%26avatarId%3D11105%26noRedirect%3Dtrue"},"displayName":"Kyo Lee","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-09-25T16:43:37.474-0500","updated":"2014-09-25T16:43:37.474-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/78055","id":"78055","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"We now return an AWS/EC2 compatible error when a network interface specific parameter is present in a run instances request along with the equivalent instance parameter.\r\n\r\nSecurity groups for an instance are now kept synchronized with the security groups for the primary network interface for VPC instances.\r\n\r\nA test for issues addressed by this bug is attached.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-21T18:38:39.356-0500","updated":"2014-10-21T18:38:39.356-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/82009","id":"82009","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Hi [~sjones],\r\n\r\nI tried to launch an instance with security group specified as instance parameter and also same security group used as part of network interface in RunInstance call:\r\n\r\n{code}\r\n# euca-run-instances -k sshlogin -a :0:subnet-8ef0a118:\"My ENI\"::sg-f9362c4c -s subnet-8ef0a118 -g sg-f9362c4c emi-5576769a\r\n\r\nRESERVATION\tr-f72ced9c\t001380115566\tdefault\r\nINSTANCE\ti-968ddb8c\temi-5576769a\t172.16.145.163\t172.31.0.80\tpending\tsshlogin\t0\t\tm1.small\t2015-01-16T12:02:02.274Z\tcloud41\t\t\t\tmonitoring-disabled\t172.16.145.163\t172.31.0.80\tvpc-86f5ccad\tsubnet-8ef0a118\tinstance-store\t\t\t\t\thvm\t\t\tsg-f9362c4c\t\tx86_64\r\nNETWORKINTERFACE\teni-6dbbf44c\tsubnet-8ef0a118\tvpc-86f5ccad\t001380115566\tin-use\t172.31.0.80\teuca-172-31-0-80.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-01-16T12:02:02.282Z\tfalse\r\nASSOCIATION\t172.16.145.163\teucalyptus\t172.31.0.80\r\nGROUP\tsg-f9362c4c\tdefault\r\nPRIVATEIPADDRESS\t172.31.0.80\teuca-172-31-0-80.eucalyptus.internal\tprimary\r\n{code}\r\n\r\nAs can be seen, I was able to launch a new instance successfully. With this fix I was expecting an error marked as {{InvalidParameterCombination}}\r\n\r\nFollowing are my packages:\r\n\r\n{code}\r\neuca2ools-3.2.0-0.0.1640.14.20150108git94c0859.el6.noarch\r\neucanetd-4.1.0-0.0.22966.320.20150110git5285308.el6.x86_64\r\neucalyptus-4.1.0-0.0.22966.320.20150110git5285308.el6.x86_64\r\neucalyptus-admin-tools-4.1.0-0.0.22966.320.20150110git5285308.el6.noarch\r\neucalyptus-common-java-4.1.0-0.0.22966.320.20150110git5285308.el6.x86_64\r\neucalyptus-cloud-4.1.0-0.0.22966.320.20150110git5285308.el6.x86_64\r\neucalyptus-service-image-0.1-0.14.6.150106git0e74004.el6.x86_64\r\neucalyptus-common-java-libs-4.1.0-0.0.22966.320.20150110git5285308.el6.x86_64\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-01-16T06:07:22.523-0600","updated":"2015-01-16T06:08:40.669-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/82013","id":"82013","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dshekhawat], you'd have to run with the --debug option to see what euca2ools is sending to the service, there were tools changes (TOOLS-530) related to this issue.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-16T10:39:19.199-0600","updated":"2015-01-16T10:39:19.199-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/82317","id":"82317","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Hi [~sjones],\r\n\r\nplease see below the output with {{--debug}} option. I am wondering what is causing the system to not respond back with an error or am I on the wrong track with regards to what the fix here is suppose to accomplish ?\r\n\r\nMy understanding was that if I have same security group specified at instance level and also at the NetworkInterface level I would get a conflict causing the system to return {{InvalidParameterCombination}}\r\n\r\n{code}\r\n[root@c-06 dshekhawat]# euca-run-instances -k sshlogin -a :0:subnet-5bdca743:\"My ENI\"::sg-31d4f8ca -s subnet-5bdca743 -g sg-31d4f8ca -z two emi-b81fef38 --debug\r\n2015-01-21 07:19:39,409 DEBUG   RunInstances parsed arguments: {'secondary_count': None, 'user_data': None, 'iam_profile': None, 'Placement.GroupName': None, 'EbsOptimized': None, 'RamdiskId': None, 'subnet': 'subnet-5bdca743', 'group': ['sg-31d4f8ca'], 'Monitoring.Enabled': None, 'ImageId': 'emi-b81fef38', 'KeyName': 'sshlogin', 'ClientToken': None, 'user_data_file': None, 'InstanceType': None, 'AddressingType': None, 'BlockDeviceMapping': [], 'secondary_address': None, 'user_data_force': None, 'InstanceInitiatedShutdownBehavior': None, 'NetworkInterface': [{'SubnetId': 'subnet-5bdca743', 'DeviceIndex': 0, 'SecurityGroupId': ['sg-31d4f8ca'], 'Description': 'My ENI'}], 'show_empty_fields': False, 'KernelId': None, 'count': '1', 'security_token': None, 'url': None, 'Placement.Tenancy': None, 'Placement.AvailabilityZone': 'two', 'private_ip_address': None, 'key_id': None, 'secret_key': None, 'DisableApiTermination': None, 'region': None}\r\n2015-01-21 07:19:39,409 INFO    Config finding global option default-region\r\n2015-01-21 07:19:39,409 INFO    Config   novalue for default-region\r\n2015-01-21 07:19:39,410 INFO    Config finding global option max-retries\r\n2015-01-21 07:19:39,410 INFO    Config   novalue for max-retries\r\n2015-01-21 07:19:39,410 INFO    Config finding global option timeout\r\n2015-01-21 07:19:39,410 INFO    Config   novalue for timeout\r\n2015-01-21 07:19:39,410 DEBUG   RunInstances built network interface from CLI options: {'SubnetId': 'subnet-5bdca743', 'DeviceIndex': 0, 'SecurityGroupId': ['sg-31d4f8ca']}\r\n2015-01-21 07:19:39,413 INFO    RunInstances parameters: {'NetworkInterface.1.SecurityGroupId.1': 'sg-31d4f8ca', 'NetworkInterface.1.Description': 'My ENI', 'NetworkInterface.2.DeviceIndex': '0', 'NetworkInterface.1.SubnetId': 'subnet-5bdca743', 'MinCount': '1', 'NetworkInterface.2.SecurityGroupId.1': 'sg-31d4f8ca', 'ImageId': 'emi-b81fef38', 'KeyName': 'sshlogin', 'Version': '2014-06-15', 'NetworkInterface.2.SubnetId': 'subnet-5bdca743', 'MaxCount': '1', 'Action': 'RunInstances', 'Placement.AvailabilityZone': 'two', 'NetworkInterface.1.DeviceIndex': '0'}\r\n2015-01-21 07:19:39,414 INFO    EC2 sending request (attempt 1 of 3)\r\n2015-01-21 07:19:39,414 DEBUG   QuerySigV2Auth string to sign: 'POST\\ncompute.c-06.autoqa.qa1.eucalyptus-systems.com:8773\\n/\\nAWSAccessKeyId=AKI1DGMBBVMY56PB8YEK&Action=RunInstances&ImageId=emi-b81fef38&KeyName=sshlogin&MaxCount=1&MinCount=1&NetworkInterface.1.Description=My%20ENI&NetworkInterface.1.DeviceIndex=0&NetworkInterface.1.SecurityGroupId.1=sg-31d4f8ca&NetworkInterface.1.SubnetId=subnet-5bdca743&NetworkInterface.2.DeviceIndex=0&NetworkInterface.2.SecurityGroupId.1=sg-31d4f8ca&NetworkInterface.2.SubnetId=subnet-5bdca743&Placement.AvailabilityZone=two&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2015-01-21T15%3A19%3A39Z&Version=2014-06-15'\r\n2015-01-21 07:19:39,415 DEBUG   QuerySigV2Auth b64-encoded signature: 7Y4zc0ZH3AXP8HSO1JPI55VjKWxNLC1kPaIXiqIz678=\r\n2015-01-21 07:19:39,415 DEBUG   QuerySigV2Auth converting params to POST data\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request method: POST\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request url:    http://compute.c-06.autoqa.qa1.eucalyptus-systems.com:8773/\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request header: Content-Length: 593\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request header: Content-Type: application/x-www-form-urlencoded\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request header: Host: compute.c-06.autoqa.qa1.eucalyptus-systems.com:8773\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request header: User-Agent: euca2ools/3.2.0-pre1-65-gb4d4d07 (CPython 2.6.6; Linux 2.6.32-504.3.3.el6.x86_64; x86_64) requestbuilder/0.2.3 requests/1.1.0\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   AWSAccessKeyId: AKI1DGMBBVMY56PB8YEK\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   Action: RunInstances\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   ImageId: emi-b81fef38\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   KeyName: sshlogin\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   MaxCount: 1\r\n2015-01-21 07:19:39,420 DEBUG   EC2 request data:   MinCount: 1\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.1.Description: My ENI\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.1.DeviceIndex: 0\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.1.SecurityGroupId.1: sg-31d4f8ca\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.1.SubnetId: subnet-5bdca743\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.2.DeviceIndex: 0\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.2.SecurityGroupId.1: sg-31d4f8ca\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   NetworkInterface.2.SubnetId: subnet-5bdca743\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   Placement.AvailabilityZone: two\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   Signature: 7Y4zc0ZH3AXP8HSO1JPI55VjKWxNLC1kPaIXiqIz678=\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   SignatureMethod: HmacSHA256\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   SignatureVersion: 2\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   Timestamp: 2015-01-21T15:19:39Z\r\n2015-01-21 07:19:39,421 DEBUG   EC2 request data:   Version: 2014-06-15\r\n2015-01-21 07:19:40,487 DEBUG   EC2 response time: 1.065 seconds\r\n2015-01-21 07:19:40,487 INFO    EC2 response status: 200\r\n2015-01-21 07:19:40,487 DEBUG   EC2 response header: content-length: 2771\r\n2015-01-21 07:19:40,487 DEBUG   EC2 response header: content-type: application/xml; charset=UTF-8\r\n2015-01-21 07:19:40,487 DEBUG   RunInstances -- response content --\r\n<RunInstancesResponse xmlns=\"http://ec2.amazonaws.com/doc/2014-06-15/\"><requestId>65ecb0d3-f3cb-49a0-8c96-abe0c729c1fd</requestId><reservationId>r-ca08184d</reservationId><ownerId>778100406974</ownerId><groupSet><item><groupId>sg-31d4f8ca</groupId><groupName>default</groupName></item></groupSet><instancesSet><item><instanceId>i-fb9b839d</instanceId><imageId>emi-b81fef38</imageId><instanceState><code>0</code><name>pending</name></instanceState><privateDnsName>euca-172-31-16-55.eucalyptus.internal</privateDnsName><dnsName>euca-10-116-45-23.eucalyptus.c-06.autoqa.qa1.eucalyptus-systems.com</dnsName><reason>NORMAL:  -- []</reason><keyName>sshlogin</keyName><amiLaunchIndex>0</amiLaunchIndex><productCodes/><instanceType>m1.small</instanceType><launchTime>2015-01-21T15:19:40.387Z</launchTime><placement><availabilityZone>two</availabilityZone></placement><monitoring><state>disabled</state></monitoring><subnetId>subnet-5bdca743</subnetId><vpcId>vpc-facaa464</vpcId><privateIpAddress>172.31.16.55</privateIpAddress><ipAddress>10.116.45.23</ipAddress><groupSet><item><groupId>sg-31d4f8ca</groupId><groupName>default</groupName></item></groupSet><architecture>x86_64</architecture><rootDeviceType>instance-store</rootDeviceType><rootDeviceName>/dev/sda1</rootDeviceName><blockDeviceMapping/><virtualizationType>hvm</virtualizationType><tagSet/><networkInterfaceSet><item><networkInterfaceId>eni-d56ad00e</networkInterfaceId><subnetId>subnet-5bdca743</subnetId><vpcId>vpc-facaa464</vpcId><description>My ENI</description><ownerId>778100406974</ownerId><status>in-use</status><macAddress>d0:0d:d5:6a:d0:0e</macAddress><privateIpAddress>172.31.16.55</privateIpAddress><privateDnsName>euca-172-31-16-55.eucalyptus.internal</privateDnsName><sourceDestCheck>true</sourceDestCheck><groupSet><item><groupId>sg-31d4f8ca</groupId><groupName>default</groupName></item></groupSet><attachment><attachmentId>eni-attach-b0165888</attachmentId><deviceIndex>0</deviceIndex><status>attached</status><attachTime>2015-01-21T15:19:40.399Z</attachTime><deleteOnTermination>true</deleteOnTermination></attachment><association><publicIp>10.116.45.23</publicIp><publicDnsName>euca-10-116-45-23.eucalyptus.c-06.autoqa.qa1.eucalyptus-systems.com</publicDnsName><ipOwnerId>eucalyptus</ipOwnerId></association><privateIpAddressesSet><item><privateIpAddress>172.31.16.55</privateIpAddress><privateDnsName>euca-172-31-16-55.eucalyptus.internal</privateDnsName><primary>true</primary><association><publicIp>10.116.45.23</publicIp><publicDnsName>euca-10-116-45-23.eucalyptus.c-06.autoqa.qa1.eucalyptus-systems.com</publicDnsName><ipOwnerId>eucalyptus</ipOwnerId></association></item></privateIpAddressesSet></item></networkInterfaceSet><iamInstanceProfile/></item></instancesSet></RunInstancesResponse>\r\n2015-01-21 07:19:40,489 DEBUG   RunInstances -- end of response content --\r\nRESERVATION\tr-ca08184d\t778100406974\tdefault\r\nINSTANCE\ti-fb9b839d\temi-b81fef38\teuca-10-116-45-23.eucalyptus.c-06.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-16-55.eucalyptus.internal\tpending\tsshlogin\t0\t\tm1.small\t2015-01-21T15:19:40.387Z\ttwo\tmonitoring-disabled\t10.116.45.23\t172.31.16.55\tvpc-facaa464\tsubnet-5bdca743\tinstance-store\t\t\t\thvm\t\t\tsg-31d4f8ca\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-d56ad00e\tsubnet-5bdca743\tvpc-facaa464\t778100406974\tin-use\t172.31.16.55\teuca-172-31-16-55.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-01-21T15:19:40.399Z\ttrue\r\nASSOCIATION\t10.116.45.23\teucalyptus\t172.31.16.55\r\nGROUP\tsg-31d4f8ca\tdefault\r\nPRIVATEIPADDRESS\t172.31.16.55\teuca-172-31-16-55.eucalyptus.internal\tprimary\r\n\r\n[root@c-06 dshekhawat]# euca-describe-instances i-fb9b839d\r\nRESERVATION\tr-ca08184d\t778100406974\tdefault\r\nINSTANCE\ti-fb9b839d\temi-b81fef38\teuca-10-116-45-23.eucalyptus.c-06.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-16-55.eucalyptus.internal\trunning\tsshlogin\t0\t\tm1.small\t2015-01-21T15:19:40.387Z\ttwo\tmonitoring-disabled\t10.116.45.23\t172.31.16.55\tvpc-facaa464\tsubnet-5bdca743\tinstance-store\t\t\t\thvm\t\t\tsg-31d4f8ca\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-d56ad00e\tsubnet-5bdca743\tvpc-facaa464\t778100406974\tin-use\t172.31.16.55\teuca-172-31-16-55.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-01-21T15:19:40.399Z\ttrue\r\nASSOCIATION\t10.116.45.23\teucalyptus\t172.31.16.55\r\nGROUP\tsg-31d4f8ca\tdefault\r\nPRIVATEIPADDRESS\t172.31.16.55\teuca-172-31-16-55.eucalyptus.internal\tprimary\r\n{code}\r\n\r\nPackages:\r\n\r\n{code}\r\n[root@c-06 dshekhawat]# rpm -qa | grep euca\r\neucalyptus-common-java-4.1.0-0.0.23033.359.20150120gite287799.el6.x86_64\r\neuca2ools-3.2.0-0.0.1648.15.20150115gitb4d4d07.el6.noarch\r\neucalyptus-4.1.0-0.0.23033.359.20150120gite287799.el6.x86_64\r\neucalyptus-common-java-libs-4.1.0-0.0.23033.359.20150120gite287799.el6.x86_64\r\neucanetd-4.1.0-0.0.23033.359.20150120gite287799.el6.x86_64\r\neucalyptus-enterprise-storage-san-netapp-libs-4.1.0-0.0.4914.366.20150120gitf20bb5b.el6.x86_64\r\neucaconsole-4.1.0-0.0.5151.316.20150119gitd88a6d1.el6.noarch\r\neucalyptus-service-image-0.1-0.14.6.150106git0e74004.el6.x86_64\r\neucalyptus-admin-tools-4.1.0-0.0.23033.359.20150120gite287799.el6.noarch\r\neucalyptus-cloud-4.1.0-0.0.23033.359.20150120gite287799.el6.x86_64\r\n{code}\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-01-21T09:23:29.622-0600","updated":"2015-01-21T09:23:29.622-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/82323","id":"82323","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dshekhawat], euca2ools is now sending the request with the security groups as part of the network interface:\r\n\r\n{code}\r\n2015-01-21 07:19:39,410 DEBUG   RunInstances built network interface from CLI options: {'SubnetId': 'subnet-5bdca743', 'DeviceIndex': 0, 'SecurityGroupId': ['sg-31d4f8ca']}2015-01-21 07:19:39,413 INFO    RunInstances parameters: {'NetworkInterface.1.SecurityGroupId.1': 'sg-31d4f8ca', 'NetworkInterface.1.Description': 'My ENI', 'NetworkInterface.2.DeviceIndex': '0', 'NetworkInterface.1.SubnetId': 'subnet-5bdca743', 'MinCount': '1', 'NetworkInterface.2.SecurityGroupId.1': 'sg-31d4f8ca', 'ImageId': 'emi-b81fef38', 'KeyName': 'sshlogin', 'Version': '2014-06-15', 'NetworkInterface.2.SubnetId': 'subnet-5bdca743', 'MaxCount': '1', 'Action': 'RunInstances', 'Placement.AvailabilityZone': 'two', 'NetworkInterface.1.DeviceIndex': '0'}\r\n{code}\r\n\r\nIt is sufficient to verify that when you run an (VPC) instance with specified security groups that those groups are used by the instance.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-21T10:39:08.806-0600","updated":"2015-01-21T10:39:08.806-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32606/comment/82403","id":"82403","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Thanks [~sjones], it is now clear what the intended behaviour should be. The euca2ools have formatted the request in NetworkInterface spec for both security groups and hence it worked.\r\n\r\nApproving the fix. Packages used to verify the issue:\r\n\r\n{code}\r\n# rpm -qa | grep euca\r\neuca2ools-3.2.0-0.0.1648.15.20150115gitb4d4d07.el6.noarch\r\neucalyptus-admin-tools-4.1.0-0.0.23039.364.20150120gitc561880.el6.noarch\r\neucalyptus-cloud-4.1.0-0.0.23039.364.20150120gitc561880.el6.x86_64\r\neucalyptus-4.1.0-0.0.23039.364.20150120gitc561880.el6.x86_64\r\neucalyptus-common-java-libs-4.1.0-0.0.23039.364.20150120gitc561880.el6.x86_64\r\neucanetd-4.1.0-0.0.23039.364.20150120gitc561880.el6.x86_64\r\neucalyptus-enterprise-storage-san-netapp-libs-4.1.0-0.0.4920.370.20150120gitc768a20.el6.x86_64\r\neucalyptus-service-image-0.1-0.14.6.150106git0e74004.el6.x86_64\r\neucalyptus-common-java-4.1.0-0.0.23039.364.20150120gitc561880.el6.x86_64\r\neucaconsole-4.1.0-0.0.5159.317.20150121git1c11b06.el6.noarch\r\n{code}\r\n\r\nPlease let me know if there are any questions.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-01-22T03:00:38.021-0600","updated":"2015-01-22T03:00:38.021-0600"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10004/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}