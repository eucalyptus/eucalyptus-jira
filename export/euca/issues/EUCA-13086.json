{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"52821","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/52821","key":"EUCA-13086","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18601","id":"18601","description":"Eucalyptus 4.4.1","name":"4.4.1","archived":false,"released":true,"releaseDate":"2017-05-09"}],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@678738b7[id=147,rapidViewId=118,state=CLOSED,name=4.4.0 Sprint 8,goal=,startDate=2017-02-22T05:18:20.467Z,endDate=2017-03-15T10:18:00.000Z,completeDate=2017-03-16T03:45:47.155Z,sequence=147]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2017-04-24T23:43:02.690-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13086/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2017-01-05T22:33:05.695-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-03-13T01:06:50.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-04-24T23:43:02.705-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"description":"I noticed that some automated tests are failing in their clean-up routines because the NAT GWs in 'failed' state do not transition to delet(ed/ing) upon request to delete them (within the test's default timeout of 180 seconds). \r\nI tested a similar case against AWS and noticed that NATGWs in the 'failed' state do transition to 'deleted' upon request. \r\n\r\nEuca:\r\n{code}\r\nIn [54]: gw = user.ec2.get_nat_gateway('nat-73d79e0e604423d8c')\r\n[2017-01-05 20:23:01,077][DEBUG][EC2ops(admin:testrunner)]: describe_nat_gateways({'NatGatewayIds': ['nat-73d79e0e604423d8c'], 'MaxResults': 1000})\r\n\r\nIn [55]: user.ec2.show_nat_gateways(gw)\r\n[2017-01-05 20:23:03,692][INFO][EC2ops(admin:testrunner)]: \r\n+-------------------------------------------------------------------------------------+\r\n| NatGateWayID: nat-73d79e0e604423d8c                                                 |\r\n+-------------------------------------------------------------------------------------+\r\n|  NatGatewayAddresses:  NetworkInterfaceId  AllocationId       PrivateIp             |\r\n|                        eni-68b1bdb3        eipalloc-259e9546  172.6.2.201           |\r\n|                                                                                     |\r\n|  VpcId:               vpc-3ca75f09                                                  |\r\n|  FailureMessage:      Elastic IP address [eipalloc-259e9546] is already associated  |\r\n|  FailureCode:         Resource.AlreadyAssociated                                    |\r\n|  State:               failed                                                        |\r\n|  SubnetId:            subnet-53532c33                                               |\r\n|  DeleteTime:          2017-01-06 03:38:19.708000+00:00                              |\r\n|  CreateTime:          2017-01-06 03:38:11.013000+00:00                              |\r\n+-------------------------------------------------------------------------------------+\r\n\r\n\r\n\r\nIn [56]: user.ec2.boto3.client.delete_nat_gateway(NatGatewayId=gw.get('NatGatewayId'))\r\nOut[56]: \r\n{u'NatGatewayId': 'nat-73d79e0e604423d8c',\r\n 'ResponseMetadata': {'HTTPHeaders': {'content-length': '211',\r\n   'content-type': 'application/xml; charset=UTF-8'},\r\n  'HTTPStatusCode': 200,\r\n  'RequestId': '9db3bcfd-253c-4f0c-b951-856abb23b679',\r\n  'RetryAttempts': 0}}\r\n\r\nIn [57]: gw = user.ec2.get_nat_gateway('nat-73d79e0e604423d8c')\r\n[2017-01-05 20:23:18,691][DEBUG][EC2ops(admin:testrunner)]: describe_nat_gateways({'NatGatewayIds': ['nat-73d79e0e604423d8c'], 'MaxResults': 1000})\r\n\r\nIn [58]: user.ec2.show_nat_gateways(gw)\r\n[2017-01-05 20:23:23,073][INFO][EC2ops(admin:testrunner)]: \r\n+-------------------------------------------------------------------------------------+\r\n| NatGateWayID: nat-73d79e0e604423d8c                                                 |\r\n+-------------------------------------------------------------------------------------+\r\n|  NatGatewayAddresses:  NetworkInterfaceId  AllocationId       PrivateIp             |\r\n|                        eni-68b1bdb3        eipalloc-259e9546  172.6.2.201           |\r\n|                                                                                     |\r\n|  VpcId:               vpc-3ca75f09                                                  |\r\n|  FailureMessage:      Elastic IP address [eipalloc-259e9546] is already associated  |\r\n|  FailureCode:         Resource.AlreadyAssociated                                    |\r\n|  State:               failed                                                        |\r\n|  SubnetId:            subnet-53532c33                                               |\r\n|  DeleteTime:          2017-01-06 03:38:19.708000+00:00                              |\r\n|  CreateTime:          2017-01-06 03:38:11.013000+00:00                              |\r\n+-------------------------------------------------------------------------------------+\r\n\r\n\r\n\r\nIn [59]: gw.update()\r\n\r\nIn [60]: user.ec2.show_nat_gateways(gw)\r\n[2017-01-05 20:23:32,015][INFO][EC2ops(admin:testrunner)]: \r\n+-------------------------------------------------------------------------------------+\r\n| NatGateWayID: nat-73d79e0e604423d8c                                                 |\r\n+-------------------------------------------------------------------------------------+\r\n|  NatGatewayAddresses:  NetworkInterfaceId  AllocationId       PrivateIp             |\r\n|                        eni-68b1bdb3        eipalloc-259e9546  172.6.2.201           |\r\n|                                                                                     |\r\n|  VpcId:               vpc-3ca75f09                                                  |\r\n|  FailureMessage:      Elastic IP address [eipalloc-259e9546] is already associated  |\r\n|  FailureCode:         Resource.AlreadyAssociated                                    |\r\n|  State:               failed                                                        |\r\n|  SubnetId:            subnet-53532c33                                               |\r\n|  DeleteTime:          2017-01-06 03:38:19.708000+00:00                              |\r\n|  CreateTime:          2017-01-06 03:38:11.013000+00:00                              |\r\n{code}\r\n\r\n\r\nAWS...\r\n\r\n{code}\r\nIn [41]: gw = awsuser.ec2.get_nat_gateway('nat-xxxx669b537c0d521')\r\n\r\nIn [42]: gw\r\nOut[42]: \r\n{u'CreateTime': datetime.datetime(2017, 1, 6, 1, 23, 54, 342000, tzinfo=tzutc()),\r\n u'DeleteTime': datetime.datetime(2017, 1, 6, 1, 25, 30, 439000, tzinfo=tzutc()),\r\n u'FailureCode': 'Resource.AlreadyAssociated',\r\n u'FailureMessage': 'Elastic IP address [eipalloc-36e1a90c] is already associated',\r\n u'NatGatewayAddresses': [{u'AllocationId': 'eipalloc-36e1axxx',\r\n   u'NetworkInterfaceId': 'eni-f62d54f8',\r\n   u'PrivateIp': '10.10.10.14'}],\r\n u'NatGatewayId': 'nat-xxxx669b537c0d521',\r\n u'State': 'failed',\r\n u'SubnetId': 'subnet-0b2cd353',\r\n u'VpcId': 'vpc-5bb22c3e'}\r\n\r\nIn [43]: awsuser.ec2.boto3.client.delete_nat_gateway(NatGatewayId=gw.get('NatGatewayId'))\r\nOut[43]: \r\n{u'NatGatewayId': 'nat-xxxx669b537c0d521',\r\n 'ResponseMetadata': {'HTTPHeaders': {'content-type': 'text/xml;charset=UTF-8',\r\n   'date': 'Fri, 06 Jan 2017 01:35:41 GMT',\r\n   'server': 'AmazonEC2',\r\n   'transfer-encoding': 'chunked',\r\n   'vary': 'Accept-Encoding'},\r\n  'HTTPStatusCode': 200,\r\n  'RequestId': 'aaa1c383-5696-4b2b-afbb-a94d721-----',\r\n  'RetryAttempts': 0}}\r\n\r\nIn [44]: gw = awsuser.ec2.get_nat_gateway('nat-0f9f669b537c0d521')\r\n\r\nIn [45]: gw\r\nOut[45]: \r\n{u'CreateTime': datetime.datetime(2017, 1, 6, 1, 23, 54, 342000, tzinfo=tzutc()),\r\n u'DeleteTime': datetime.datetime(2017, 1, 6, 1, 25, 30, 439000, tzinfo=tzutc()),\r\n u'FailureCode': 'Resource.AlreadyAssociated',\r\n u'FailureMessage': 'Elastic IP address [eipalloc-36e1a90c] is already associated',\r\n u'NatGatewayAddresses': [{u'AllocationId': 'eipalloc-36e1a90c',\r\n   u'NetworkInterfaceId': 'eni-f62d54f8',\r\n   u'PrivateIp': '10.10.10.14'}],\r\n u'NatGatewayId': 'nat-0f9f669b537c0d521',\r\n u'State': 'deleted',\r\n u'SubnetId': 'subnet-0b2cd353',\r\n u'VpcId': 'vpc-5bb22c3e'}\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"NatGateways in 'failed' state do not transition to 'deleted' upon request to delete them","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i041c7:","customfield_10000":"3_*:*_1_*:*_7720471_*|*_10000_*:*_1_*:*_63160193_*|*_10002_*:*_1_*:*_369104_*|*_10001_*:*_1_*:*_5682331731_*|*_10003_*:*_1_*:*_3664615542_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2017-01-06T16:06:09.529-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["dmitrii(dmitrii)","mclark(mclark)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/52821/comment/115239","id":"115239","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"No resources are used up in 'failed' state.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-01-06T16:06:09.529-0600","updated":"2017-01-06T16:06:09.529-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/52821/comment/115548","id":"115548","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Correction... \r\nNoting that the ENI(s) and EIP(s) associated with failed gateways may not immediately be available for deletion. \r\nAutomated tests are showing that some small amount of time may be needed before the system allows the ENIs, and EIPs to be deleted. Not sure on the time needed but in the tests I see it succeed in under 1 minute. \r\nNot sure if this is also be the case for 'deleted' NATGWs  in general (ie GWs which were not in failed state). \r\nThanks, \r\n-M\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-11T20:10:27.587-0600","updated":"2017-01-11T20:16:21.594-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/52821/comment/121049","id":"121049","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified a NATGW in failed state transitions to deleted per delete request. \r\n{code}\r\nIn [211]: ngw = user.ec2.get_nat_gateway('nat-0021c4a21c8f4e897')\r\n[2017-04-24 21:41:22,541][DEBUG][EC2ops(admin:testrunner)]: describe_nat_gateways({'NatGatewayIds': ['nat-0021c4a21c8f4e897'], 'MaxResults': 1000})\r\n\r\nIn [212]: user.ec2.show_nat_gateways(ngw)\r\n[2017-04-24 21:41:26,776][INFO][EC2ops(admin:testrunner)]: \r\n+-------------------------------------------------------------------------------------+\r\n| NatGateWayID: nat-0021c4a21c8f4e897                                                 |\r\n+-------------------------------------------------------------------------------------+\r\n|  NatGatewayAddresses:  NetworkInterfaceId  AllocationId       PrivateIp             |\r\n|                        eni-0b05c23f        eipalloc-c1c5089d  172.31.200.153        |\r\n|                                                                                     |\r\n|  VpcId:               vpc-9e33cd72                                                  |\r\n|  FailureMessage:      Elastic IP address [eipalloc-c1c5089d] is already associated  |\r\n|  FailureCode:         Resource.AlreadyAssociated                                    |\r\n|  State:               failed                                                        |\r\n|  SubnetId:            subnet-17ab987d                                               |\r\n|  DeleteTime:          2017-04-25 04:41:01.373000+00:00                              |\r\n|  CreateTime:          2017-04-25 04:40:52.914000+00:00                              |\r\n+-------------------------------------------------------------------------------------+\r\n\r\n\r\n\r\nIn [213]: user.ec2.boto3.client.delete_nat_gateway(NatGatewayId=ngw.get('NatGatewayId'))\r\nOut[213]: \r\n{u'NatGatewayId': 'nat-0021c4a21c8f4e897',\r\n 'ResponseMetadata': {'HTTPHeaders': {'content-length': '211',\r\n   'content-type': 'application/xml; charset=UTF-8'},\r\n  'HTTPStatusCode': 200,\r\n  'RequestId': '8ea10de9-71f2-4983-bec5-a035eb160adb',\r\n  'RetryAttempts': 0}}\r\n\r\nIn [214]: ngw = user.ec2.get_nat_gateway('nat-0021c4a21c8f4e897')\r\n[2017-04-24 21:41:46,227][DEBUG][EC2ops(admin:testrunner)]: describe_nat_gateways({'NatGatewayIds': ['nat-0021c4a21c8f4e897'], 'MaxResults': 1000})\r\n\r\nIn [215]: user.ec2.show_nat_gateways(ngw)\r\n[2017-04-24 21:41:50,101][INFO][EC2ops(admin:testrunner)]: \r\n+-------------------------------------------------------------------------------------+\r\n| NatGateWayID: nat-0021c4a21c8f4e897                                                 |\r\n+-------------------------------------------------------------------------------------+\r\n|  NatGatewayAddresses:  NetworkInterfaceId  AllocationId       PrivateIp             |\r\n|                        eni-0b05c23f        eipalloc-c1c5089d  172.31.200.153        |\r\n|                                                                                     |\r\n|  VpcId:               vpc-9e33cd72                                                  |\r\n|  FailureMessage:      Elastic IP address [eipalloc-c1c5089d] is already associated  |\r\n|  FailureCode:         Resource.AlreadyAssociated                                    |\r\n|  State:               deleted                                                       |\r\n|  SubnetId:            subnet-17ab987d                                               |\r\n|  DeleteTime:          2017-04-25 04:41:01.373000+00:00                              |\r\n|  CreateTime:          2017-04-25 04:40:52.914000+00:00                              |\r\n+-------------------------------------------------------------------------------------+\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-24T23:43:02.701-0500","updated":"2017-04-24T23:43:02.701-0500"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13086/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}