{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"24672","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672","key":"EUCA-7860","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@2ea81a8c[id=67,rapidViewId=37,state=CLOSED,name=4.1.0 Sprint 2,goal=<null>,startDate=2014-07-22T15:49:23.013Z,endDate=2014-08-11T15:49:00.000Z,completeDate=2014-08-18T21:57:24.120Z,sequence=67]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2015-01-28T07:31:21.382-0600","customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7860/watchers","watchCount":6,"isWatching":false},"lastViewed":null,"created":"2013-10-11T15:59:05.260-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2014-07-28T21:40:41.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":["4.1-compute","AWSCompat-PM","BDM-4.1"],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"issuelinks":[{"id":"28883","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28883","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"34482","key":"EUCA-10502","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34482","fields":{"summary":"EBS-backed Instance block device \"ephemeral\" not formatted to ext3","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"24058","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/24058","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"28928","key":"EUCA-9132","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/28928","fields":{"summary":"Instances Ephemeral Storage is not formatted ext3","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:02:31.118-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"The following block device mapping is present for an HVM image with ephemeral at /dev/vdb and no swap:\r\n{code}\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/\r\nami\r\nemi\r\nephemeral\r\nephemeral0\r\nroot\r\nswap\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral\r\nsda2\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0\r\nsda2\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/root\r\n/dev/sda1\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/ami\r\nsda1\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/emi\r\nsda1\r\n[root@euca-172-16-0-155 ~]# curl http://169.254.169.254/latest/meta-data/block-device-mapping/swap/\r\nsda3\r\n[root@euca-172-16-0-155 ~]# ll /dev/vd*\r\nbrw-rw----. 1 root disk 252,  0 Oct 11 06:47 /dev/vda\r\nbrw-rw----. 1 root disk 252,  1 Oct 10 15:17 /dev/vda1\r\nbrw-rw----. 1 root disk 252,  2 Oct 11 06:47 /dev/vda2\r\nbrw-rw----. 1 root disk 252, 16 Oct 11 06:50 /dev/vdb\r\n[root@euca-172-16-0-155 ~]#\r\n{code}","customfield_13200":null,"customfield_11300":"EUCA-9687","customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Block Device Mapping metadata incorrect in HVM image","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_533721_*|*_10000_*:*_1_*:*_249476436_*|*_10001_*:*_1_*:*_24966588218_*|*_10003_*:*_1_*:*_15710137764_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i014m7:","customfield_10001":"2014-04-11T12:31:10.452-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","shaon(shaon)","vasya(vasya)","viglesias(viglesias)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7860/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672/comment/66694","id":"66694","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Confirmed this behavior in 4.0.  Looks like there was _some_ patch put in, but not fully complete.\r\n\r\nVersion of Eucalyptus:  4.0.0-0.0.867.20140411git0cd00881.el6.x86_64\r\n\r\n*Eucalyptus Behavior for HVM instance store-backed EMI*\r\n\r\n{code}\r\n[root@odc-d-31 ~]# euca-describe-images emi-2d8fd091\r\nIMAGE\temi-2d8fd091\t408181979667/trusty-x86_64-hvm\t408181979667\tavailable\tprivate\tx86_64\tmachine\r\n\r\n[root@odc-d-31 ~]# euca-describe-instances\r\nRESERVATION\tr-e912dcad\t408181979667\tdefault\r\nINSTANCE\ti-91b16494\temi-2d8fd091\t10.104.6.230\t172.18.0.119\trunning\teuca-admin\t0\t\tm1.xlarge\t2014-04-11T15:50:24.171Z\tGiftOfGab2\t\t\t\tmonitoring-disabled\t10.104.6.230\t172.18.0.119\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-3331a047\r\nTAG\tinstance\ti-91b16494\teuca:node\t10.104.1.188\r\n\r\n[root@odc-d-31 ~]# ssh -i euca-admin.priv ubuntu@10.104.6.230\r\nubuntu@ip-172-18-0-119:~$ curl http://169.254.169.254/latest/meta-data\r\nami-id\r\nami-launch-index\r\nami-manifest-path\r\nblock-device-mapping/\r\nhostname\r\ninstance-id\r\ninstance-type\r\nlocal-hostname\r\nlocal-ipv4\r\nmac\r\nplacement/\r\npublic-hostname\r\npublic-ipv4\r\npublic-keys/\r\nreservation-id\r\nsecurity-groups\r\nubuntu@ip-172-18-0-119:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/\r\nami\r\nemi\r\nephemeral\r\nephemeral0\r\nroot\r\nswap\r\nubuntu@ip-172-18-0-119:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/root\r\n/dev/sda1\r\nubuntu@ip-172-18-0-119:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral\r\nsda2\r\nubuntu@ip-172-18-0-119:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/swap\r\nsda3\r\n\r\nubuntu@ip-172-18-0-119:~$ ls /dev/vd*\r\n/dev/vda  /dev/vda1  /dev/vdb\r\n\r\nubuntu@ip-172-18-0-119:~$ dmesg | grep vda\r\n[    0.401344]  vda: vda1\r\n[    1.768343] EXT4-fs (vda1): mounted filesystem with ordered data mode. Opts: (null)\r\n[    1.984014] EXT4-fs (vda1): re-mounted. Opts: (null)\r\n[   29.550244] EXT4-fs (vda1): resizing filesystem from 360448 to 576256 blocks\r\n[   29.550334] EXT4-fs (vda1): resized filesystem to 576256\r\n\r\nubuntu@ip-172-18-0-119:~$ dmesg | grep vdb\r\n[    0.417780]  vdb: unknown partition table\r\n{code}\r\n\r\n*AWS Behavior for HVM instance store-backed AMI*\r\n\r\n{code}\r\n$ aws ec2 describe-images --image-ids ami-994b5ef0 --profile harold-work --output text\r\nIMAGES\tx86_64\tAmazon Linux AMI x86_64 HVM S3\txen\tami-994b5ef0\tamzn-ami-us-east-1/amzn-ami-hvm-2014.03.rc-1.x86_64.manifest.xml\tamazon\tmachine\tamzn-ami-hvm-2014.03.rc-1.x86_64-s3\t137112412989\tTrue\tinstance-store\tsimple\tavailable\thvm\r\n\r\n$ ssh -i .ec2/euca-work-keypairs/harold-euca.pem ec2-user@ec2-54-83-27-18.compute-1.amazonaws.com\r\n[ec2-user@ip-10-65-4-19 ~]$ curl http://169.254.169.254/latest/meta-data/\r\nami-id\r\nami-launch-index\r\nami-manifest-path\r\nblock-device-mapping/\r\nhostname\r\ninstance-action\r\ninstance-id\r\ninstance-type\r\nlocal-hostname\r\nlocal-ipv4\r\nmac\r\nmetrics/\r\nnetwork/\r\nplacement/\r\nprofile\r\npublic-hostname\r\npublic-ipv4\r\npublic-keys/\r\nreservation-id\r\nsecurity-groups\r\n[ec2-user@ip-10-65-4-19 ~]$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/\r\nami\r\nephemeral0\r\nroot\r\n[ec2-user@ip-10-65-4-19 ~]$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/root\r\n/dev/sda1\r\nec2-user@ip-10-65-4-19 ~]$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0\r\nsdb\r\n\r\n[ec2-user@ip-10-65-4-19 ~]$ ls /dev/xvd*\r\n/dev/xvda  /dev/xvda1  /dev/xvdb\r\n[ec2-user@ip-10-65-4-19 ~]$ dmesg | grep vda\r\n[    1.091662] blkfront: xvda: flush diskcache: enabled; persistent grants: disabled; indirect descriptors: disabled;\r\n[    1.103762]  xvda: xvda1\r\n[    1.316512] EXT4-fs (xvda1): mounted filesystem with ordered data mode. Opts: (null)\r\n[    1.330328] EXT4-fs (xvda1): mounted filesystem with ordered data mode. Opts: (null)\r\n[    1.335715] dracut: Mounted root filesystem /dev/xvda1\r\n[    5.736831] EXT4-fs (xvda1): re-mounted. Opts: (null)\r\nec2-user@ip-10-65-4-19 ~]$ dmesg | grep vdb\r\n[    1.110676] blkfront: xvdb: flush diskcache: enabled; persistent grants: disabled; indirect descriptors: disabled;\r\n[    1.120367]  xvdb: unknown partition table\r\n[    1.120598] xvdb: detected capacity change from 0 to 32204390400\r\n[    5.752039] EXT4-fs (xvdb): mounted filesystem with ordered data mode. Opts: (null)\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-11T12:31:10.452-0500","updated":"2014-04-11T12:31:10.452-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672/comment/74497","id":"74497","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"I've implemented the following naming scheme for instance stored images:\r\nblock-device-mapping/emi -> sda1\r\nblock-device-mapping/ami -> sda1\r\nblock-device-mapping/root -> /dev/sda1\r\nin addition to that for PV images\r\nblock-device-mapping/ephemeral0 -> sda2\r\nblock-device-mapping/swap -> sda3\r\nand for HVM images\r\nblock-device-mapping/ephemeral0 -> sdb","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-07-30T12:35:05.808-0500","updated":"2014-07-30T12:35:05.808-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672/comment/74498","id":"74498","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in 403cc41f55a1d1f8b58f9aae9e0b3e14422d2096","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-07-30T12:35:43.627-0500","updated":"2014-07-30T12:35:43.627-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672/comment/82709","id":"82709","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified. Here is the test results:\r\n\r\nWith PV image:\r\n{noformat}\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/\r\nami\r\nemi\r\nephemeral0\r\nroot\r\nswap\r\n\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/emi\r\nsda1\r\n\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/ami\r\nsda1\r\n\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/root\r\n/dev/sda1\r\n\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0\r\nsda2\r\n\r\n# curl http://169.254.169.254/latest/meta-data/block-device-mapping/swap\r\nsda3\r\n{noformat}\r\n\r\nWith HVM instance-store image,\r\n{noformat}\r\n$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/\r\nami\r\nemi\r\nephemeral0\r\nroot\r\n\r\n$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/emi\r\nsda\r\n\r\n$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ami\r\nsda\r\n\r\n$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/root\r\n/dev/sda\r\n\r\n$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0\r\nsdb\r\n{noformat}\r\n\r\nHowever, for HVM instance-store backed instance, the {{root}} does not show a partition number. Please revert back if this is not expected.\r\n\r\n\r\nInstalled Packages:\r\n{noformat}\r\nName        : eucalyptus                   Relocations: (not relocatable)\r\nVersion     : 4.1.0                             Vendor: Eucalyptus Systems, Inc.\r\nRelease     : 0.0.23044.7.20150126gite363faa.el6   Build Date: Mon 26 Jan 2015 09:42:26 PM PST\r\nInstall Date: Tue 27 Jan 2015 03:57:26 AM PST      Build Host: ip-172-16-20-98\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-28T07:31:21.396-0600","updated":"2015-01-28T07:31:21.396-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24672/comment/82733","id":"82733","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~shaon],\r\n\r\nI also tested EBS-backed instances (since they are HVM images) as well. I wanted to share with you my results.  The only issue I found related to EUCA-10502, which I linked to this ticket.  Results are below:\r\n\r\n_EBS-backed instance launched without block-device-mapping_\r\n{code}\r\n# euca-run-instances -k admin-hspencer1 -t m1.large emi-1bb60055 -z two --region admin-hspencer@group1\r\n\r\nubuntu@euca-10-111-52-194:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/; echo\r\nami\r\nemi\r\nroot\r\nubuntu@euca-10-111-52-194:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ami; echo\r\nsda\r\nubuntu@euca-10-111-52-194:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/emi; echo\r\nsda\r\nubuntu@euca-10-111-52-194:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/root; echo\r\n/dev/sda\r\n{code}\r\n\r\n_EBS-backed instance with block-device-mapping of \"/dev/sdc=ephemeral0\"_\r\n{code}\r\n# euca-run-instances -k admin-hspencer1 -t m1.large emi-1bb60055 -z two --block-device-mapping=/dev/sdc=ephemeral0 --region admin-hspencer@group1\r\n\r\nubuntu@euca-10-111-52-182:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/; echo\r\nami\r\nemi\r\nephemeral0\r\nroot\r\nubuntu@euca-10-111-52-182:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ami; echo\r\nsda\r\nubuntu@euca-10-111-52-182:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/emi; echo\r\nsda\r\nubuntu@euca-10-111-52-182:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0; echo\r\nsdc\r\nubuntu@euca-10-111-52-182:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/root; echo\r\n/dev/sda\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-28T12:02:44.651-0600","updated":"2015-01-28T12:09:44.199-0600"}],"maxResults":5,"total":5,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}