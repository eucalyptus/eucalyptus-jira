{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"33982","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982","key":"EUCA-10271","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@1832cf4c[id=92,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 9,goal=<null>,startDate=2014-12-19T17:39:04.067Z,endDate=2015-01-23T17:39:00.000Z,completeDate=2015-02-02T18:43:16.138Z,sequence=92]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2015-01-21T20:34:33.632-0600","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10271/watchers","watchCount":2,"isWatching":false},"created":"2014-12-23T14:22:08.020-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{repository={count=4, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":4,\"lastUpdated\":\"2015-01-19T17:40:53.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":4,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":["AWSCompat-PM"],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"issuelinks":[{"id":"28585","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28585","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"34194","key":"EUCA-10359","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34194","fields":{"summary":"Cloudformation:  AWS::EC2::SubnetNetworkAclAssociation Property Error Not Returned When Stack Fails","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"28347","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28347","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"33181","key":"EUCA-10114","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33181","fields":{"summary":"NetworkAclEntry has no default for Egress","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"28580","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28580","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"34185","key":"EUCA-10352","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34185","fields":{"summary":"Odd \"InternalFailure\" Error when Deploying Cloudformation Stack on VPC","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"28802","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28802","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"34393","key":"EUCA-10447","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34393","fields":{"summary":"Cloudformation with VPC:  Duplicate Egress/Ingress Rules Not Handled the Same Way As AWS","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"28579","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28579","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"34075","key":"EUCA-10310","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34075","fields":{"summary":"VPC: Public IP confusion when Cloudformation template with VPC is Used.","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:03:59.893-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nAfter verifying EUCA-10114, the cloudformation stack was deleted.  The deletion failed stating the following issue:\r\n{code}\r\n# euform-describe-stacks UbuntuVividVPCStack --region tessai-group2@group2\r\nSTACK\tUbuntuVividVPCStack\tDELETE_FAILED\tThe following resource(s) failed to delete: [RouteTable2RT02RouteSet21, SecurityGroup2DefaultSG2Ingress20].\tCloudformation generated by VisualOps\t2014-12-23T19:56:15.320Z\r\n{code}\r\nLooking at the events associated with the two resources, it seems to be related to a database issue:\r\n{code}\r\n# euform-describe-stack-events UbuntuVividVPCStack --region tessai-group2@group2 | grep SecurityGroup2DefaultSG2Ingress20\r\nEVENT\tUbuntuVividVPCStack\t3dfc9d91-9189-4c2a-bae0-f2204ba8cbab\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T20:03:18.858Z\tDELETE_FAILED\tThe following resource(s) failed to delete: [RouteTable2RT02RouteSet21, SecurityGroup2DefaultSG2Ingress20].\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-DELETE_FAILED-1419364939522\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T20:02:19.522Z\tDELETE_FAILED\tRow was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.eucalyptus.network.NetworkGroup#8aef81a94a7825bb014a78b8cc181fec]\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-DELETE_IN_PROGRESS-1419364932437\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T20:02:12.437Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_COMPLETE-1419364609340\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T19:56:49.340Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_IN_PROGRESS-1419364606031\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T19:56:46.031Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_IN_PROGRESS-1419364600854\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\t\t2014-12-23T19:56:40.854Z\tCREATE_IN_PROGRESS\r\n{code}\r\n{code}\r\n# euform-describe-stack-events UbuntuVividVPCStack --region tessai-group2@group2 | grep RouteTable2RT02RouteSet21\r\nEVENT\tUbuntuVividVPCStack\t3dfc9d91-9189-4c2a-bae0-f2204ba8cbab\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T20:03:18.858Z\tDELETE_FAILED\tThe following resource(s) failed to delete: [RouteTable2RT02RouteSet21, SecurityGroup2DefaultSG2Ingress20].\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-DELETE_FAILED-1419364938545\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T20:02:18.545Z\tDELETE_FAILED\tError updating route-table 'rtb-e72fced9' for arn:aws:euare::804704720152:\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-DELETE_IN_PROGRESS-1419364931819\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T20:02:11.819Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_COMPLETE-1419364598945\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T19:56:38.945Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_IN_PROGRESS-1419364594295\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T19:56:34.295Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_IN_PROGRESS-1419364591717\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\t\t2014-12-23T19:56:31.717Z\tCREATE_IN_PROGRESS\r\n{code}\r\n\r\n*Signs*\r\n\r\n* Output from DescribeStackResources\r\n{code}\r\n# euform-describe-stack-resources -n UbuntuVividVPCStack --region tessai-group2@group2\r\nRESOURCE\tNetworkAcl2DefaultACL\tacl-08ae964d\tAWS::EC2::NetworkAcl\t\tDELETE_COMPLETE\r\nRESOURCE\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-9609b9ba\tAWS::EC2::SubnetNetworkAclAssociation\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\tAWS::EC2::SecurityGroupIngress\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\tAWS::EC2::Route\t\tDELETE_FAILED\r\nRESOURCE\tInternetGateway2Internetgateway\tigw-69d89ece\tAWS::EC2::InternetGateway\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT0\trtb-e72fced9\tAWS::EC2::RouteTable\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG\tsg-14adcdea\tAWS::EC2::SecurityGroup\t\tDELETE_COMPLETE\r\nRESOURCE\tSubnet2subnet0\tsubnet-1d5d7cbd\tAWS::EC2::Subnet\t\tDELETE_COMPLETE\r\nRESOURCE\tNetworkInterface2host0eni0\teni-2ec2e0b8\tAWS::EC2::NetworkInterface\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\tAWS::EC2::SecurityGroupIngress\t\tDELETE_FAILED\r\nRESOURCE\tAttachInternetGateway\tUbuntuVividVPCStack-AttachInternetGateway-ZGJ275X7QV7CB\tAWS::EC2::VPCGatewayAttachment\t\tDELETE_COMPLETE\r\nRESOURCE\tVPC2vpc\tvpc-de9bbba2\tAWS::EC2::VPC\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2Egress20-FDLJ1EBTQOZIE\tAWS::EC2::SecurityGroupEgress\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT02AssociationSet22\trtbassoc-0e4a6c90\tAWS::EC2::SubnetRouteTableAssociation\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2IpPermissionsEgress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2IpPermissionsEgress20-JNXDUPA9PWIPF\tAWS::EC2::SecurityGroupEgress\t\tDELETE_COMPLETE\r\nRESOURCE\tInstance2host0\ti-283e8554\tAWS::EC2::Instance\t\tDELETE_COMPLETE\r\n{code}\r\n* Output from DescribeStackEvents\r\n{code}\r\n# euform-describe-stack-events UbuntuVividVPCStack --region tessai-group2@group2\r\nEVENT\tUbuntuVividVPCStack\t3dfc9d91-9189-4c2a-bae0-f2204ba8cbab\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T20:03:18.858Z\tDELETE_FAILED\tThe following resource(s) failed to delete: [RouteTable2RT02RouteSet21, SecurityGroup2DefaultSG2Ingress20].\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-DELETE_COMPLETE-1419364996124\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T20:03:16.124Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-DELETE_IN_PROGRESS-1419364992804\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T20:03:12.804Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-DELETE_COMPLETE-1419364989789\tAWS::EC2::Subnet\tSubnet2subnet0\tsubnet-1d5d7cbd\t2014-12-23T20:03:09.789Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-DELETE_COMPLETE-1419364988930\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T20:03:08.930Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-DELETE_IN_PROGRESS-1419364985576\tAWS::EC2::Subnet\tSubnet2subnet0\tsubnet-1d5d7cbd\t2014-12-23T20:03:05.576Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-DELETE_IN_PROGRESS-1419364985320\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T20:03:05.320Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-DELETE_COMPLETE-1419364982463\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T20:03:02.463Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-DELETE_IN_PROGRESS-1419364979083\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T20:02:59.083Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-DELETE_COMPLETE-1419364976996\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T20:02:56.996Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-DELETE_COMPLETE-1419364947789\tAWS::EC2::RouteTable\tRouteTable2RT0\trtb-e72fced9\t2014-12-23T20:02:27.789Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-DELETE_COMPLETE-1419364947371\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\tigw-69d89ece\t2014-12-23T20:02:27.371Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-DELETE_COMPLETE-1419364946776\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\tacl-08ae964d\t2014-12-23T20:02:26.776Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-DELETE_IN_PROGRESS-1419364943877\tAWS::EC2::RouteTable\tRouteTable2RT0\trtb-e72fced9\t2014-12-23T20:02:23.877Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-DELETE_IN_PROGRESS-1419364943497\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\tigw-69d89ece\t2014-12-23T20:02:23.497Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-DELETE_IN_PROGRESS-1419364942896\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\tacl-08ae964d\t2014-12-23T20:02:22.896Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissionsEgress20-DELETE_COMPLETE-1419364940539\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2IpPermissionsEgress20-JNXDUPA9PWIPF\t2014-12-23T20:02:20.539Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissions22-DELETE_COMPLETE-1419364940037\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\t2014-12-23T20:02:20.037Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-DELETE_FAILED-1419364939522\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T20:02:19.522Z\tDELETE_FAILED\tRow was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.eucalyptus.network.NetworkGroup#8aef81a94a7825bb014a78b8cc181fec]\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Egress20-DELETE_COMPLETE-1419364939068\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2Egress20-FDLJ1EBTQOZIE\t2014-12-23T20:02:19.068Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-DELETE_FAILED-1419364938545\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T20:02:18.545Z\tDELETE_FAILED\tError updating route-table 'rtb-e72fced9' for arn:aws:euare::804704720152:\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02AssociationSet22-DELETE_COMPLETE-1419364938102\tAWS::EC2::SubnetRouteTableAssociation\tRouteTable2RT02AssociationSet22\trtbassoc-0e4a6c90\t2014-12-23T20:02:18.102Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL2AssociationSet20-DELETE_COMPLETE-1419364937592\tAWS::EC2::SubnetNetworkAclAssociation\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-9609b9ba\t2014-12-23T20:02:17.592Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tAttachInternetGateway-DELETE_COMPLETE-1419364936749\tAWS::EC2::VPCGatewayAttachment\tAttachInternetGateway\tUbuntuVividVPCStack-AttachInternetGateway-ZGJ275X7QV7CB\t2014-12-23T20:02:16.749Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissionsEgress20-DELETE_IN_PROGRESS-1419364933078\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2IpPermissionsEgress20-JNXDUPA9PWIPF\t2014-12-23T20:02:13.078Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissions22-DELETE_IN_PROGRESS-1419364932738\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\t2014-12-23T20:02:12.738Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-DELETE_IN_PROGRESS-1419364932437\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T20:02:12.437Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Egress20-DELETE_IN_PROGRESS-1419364932111\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2Egress20-FDLJ1EBTQOZIE\t2014-12-23T20:02:12.111Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-DELETE_IN_PROGRESS-1419364931819\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T20:02:11.819Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02AssociationSet22-DELETE_IN_PROGRESS-1419364931509\tAWS::EC2::SubnetRouteTableAssociation\tRouteTable2RT02AssociationSet22\trtbassoc-0e4a6c90\t2014-12-23T20:02:11.509Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL2AssociationSet20-DELETE_IN_PROGRESS-1419364931226\tAWS::EC2::SubnetNetworkAclAssociation\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-9609b9ba\t2014-12-23T20:02:11.226Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-DELETE_IN_PROGRESS-1419364930950\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T20:02:10.950Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tAttachInternetGateway-DELETE_IN_PROGRESS-1419364930688\tAWS::EC2::VPCGatewayAttachment\tAttachInternetGateway\tUbuntuVividVPCStack-AttachInternetGateway-ZGJ275X7QV7CB\t2014-12-23T20:02:10.688Z\tDELETE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\t910d29e0-37b9-4d59-b46f-c91841c308bd\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T20:02:08.296Z\tDELETE_IN_PROGRESS\tUser Initiated\r\nEVENT\tUbuntuVividVPCStack\t658b5462-e72e-46cc-b6ee-94e0059d96cf\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T19:57:45.134Z\tCREATE_COMPLETE\tComplete!\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_COMPLETE-1419364662242\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:42.242Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364660826\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:40.826Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364659422\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:39.422Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364658041\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:38.041Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364656322\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:36.322Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364620740\tAWS::EC2::Instance\tInstance2host0\ti-283e8554\t2014-12-23T19:57:00.740Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInstance2host0-CREATE_IN_PROGRESS-1419364617827\tAWS::EC2::Instance\tInstance2host0\t\t2014-12-23T19:56:57.827Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_COMPLETE-1419364615022\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T19:56:55.022Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1419364613685\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T19:56:53.685Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1419364611866\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T19:56:51.866Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissionsEgress20-CREATE_COMPLETE-1419364610900\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2IpPermissionsEgress20-JNXDUPA9PWIPF\t2014-12-23T19:56:50.900Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissions22-CREATE_COMPLETE-1419364610109\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\t2014-12-23T19:56:50.109Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_COMPLETE-1419364609340\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T19:56:49.340Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Egress20-CREATE_COMPLETE-1419364608611\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2Egress20-FDLJ1EBTQOZIE\t2014-12-23T19:56:48.612Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1419364608061\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T19:56:48.061Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissionsEgress20-CREATE_IN_PROGRESS-1419364607475\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2IpPermissionsEgress20-JNXDUPA9PWIPF\t2014-12-23T19:56:47.475Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissions22-CREATE_IN_PROGRESS-1419364606675\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\t2014-12-23T19:56:46.675Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_IN_PROGRESS-1419364606031\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\tSecurityGroup2DefaultSG2Ingress20\t2014-12-23T19:56:46.031Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Egress20-CREATE_IN_PROGRESS-1419364605554\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividVPCStack-SecurityGroup2DefaultSG2Egress20-FDLJ1EBTQOZIE\t2014-12-23T19:56:45.554Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1419364604737\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-2ec2e0b8\t2014-12-23T19:56:44.737Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02AssociationSet22-CREATE_COMPLETE-1419364603693\tAWS::EC2::SubnetRouteTableAssociation\tRouteTable2RT02AssociationSet22\trtbassoc-0e4a6c90\t2014-12-23T19:56:43.693Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL2AssociationSet20-CREATE_COMPLETE-1419364602946\tAWS::EC2::SubnetNetworkAclAssociation\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-9609b9ba\t2014-12-23T19:56:42.946Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissionsEgress20-CREATE_IN_PROGRESS-1419364602240\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\t\t2014-12-23T19:56:42.240Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2IpPermissions22-CREATE_IN_PROGRESS-1419364601559\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\t\t2014-12-23T19:56:41.559Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Ingress20-CREATE_IN_PROGRESS-1419364600854\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\t\t2014-12-23T19:56:40.854Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG2Egress20-CREATE_IN_PROGRESS-1419364600205\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\t\t2014-12-23T19:56:40.205Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1419364599319\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\t\t2014-12-23T19:56:39.319Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02AssociationSet22-CREATE_IN_PROGRESS-1419364599003\tAWS::EC2::SubnetRouteTableAssociation\tRouteTable2RT02AssociationSet22\trtbassoc-0e4a6c90\t2014-12-23T19:56:39.003Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_COMPLETE-1419364598945\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T19:56:38.945Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL2AssociationSet20-CREATE_IN_PROGRESS-1419364598578\tAWS::EC2::SubnetNetworkAclAssociation\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-9609b9ba\t2014-12-23T19:56:38.578Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_IN_PROGRESS-1419364594295\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\tUbuntuVividVPCStack-RouteTable2RT02RouteSet21-9C6SSBLLMGRAQ\t2014-12-23T19:56:34.295Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02AssociationSet22-CREATE_IN_PROGRESS-1419364593432\tAWS::EC2::SubnetRouteTableAssociation\tRouteTable2RT02AssociationSet22\t\t2014-12-23T19:56:33.432Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL2AssociationSet20-CREATE_IN_PROGRESS-1419364593046\tAWS::EC2::SubnetNetworkAclAssociation\tNetworkAcl2DefaultACL2AssociationSet20\t\t2014-12-23T19:56:33.046Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_COMPLETE-1419364592668\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T19:56:32.668Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT02RouteSet21-CREATE_IN_PROGRESS-1419364591717\tAWS::EC2::Route\tRouteTable2RT02RouteSet21\t\t2014-12-23T19:56:31.717Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_IN_PROGRESS-1419364590304\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T19:56:30.304Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-CREATE_COMPLETE-1419364588733\tAWS::EC2::Subnet\tSubnet2subnet0\tsubnet-1d5d7cbd\t2014-12-23T19:56:28.733Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_IN_PROGRESS-1419364588421\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T19:56:28.421Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-CREATE_COMPLETE-1419364588136\tAWS::EC2::RouteTable\tRouteTable2RT0\trtb-e72fced9\t2014-12-23T19:56:28.136Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-CREATE_COMPLETE-1419364587309\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\tacl-08ae964d\t2014-12-23T19:56:27.309Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-CREATE_IN_PROGRESS-1419364586892\tAWS::EC2::Subnet\tSubnet2subnet0\tsubnet-1d5d7cbd\t2014-12-23T19:56:26.892Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_IN_PROGRESS-1419364586457\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T19:56:26.457Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-CREATE_IN_PROGRESS-1419364586173\tAWS::EC2::RouteTable\tRouteTable2RT0\trtb-e72fced9\t2014-12-23T19:56:26.173Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-CREATE_IN_PROGRESS-1419364585914\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\tacl-08ae964d\t2014-12-23T19:56:25.914Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tAttachInternetGateway-CREATE_COMPLETE-1419364585110\tAWS::EC2::VPCGatewayAttachment\tAttachInternetGateway\tUbuntuVividVPCStack-AttachInternetGateway-ZGJ275X7QV7CB\t2014-12-23T19:56:25.110Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-CREATE_IN_PROGRESS-1419364584985\tAWS::EC2::Subnet\tSubnet2subnet0\tsubnet-1d5d7cbd\t2014-12-23T19:56:24.985Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_IN_PROGRESS-1419364584509\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\tsg-14adcdea\t2014-12-23T19:56:24.509Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-CREATE_IN_PROGRESS-1419364584124\tAWS::EC2::RouteTable\tRouteTable2RT0\trtb-e72fced9\t2014-12-23T19:56:24.124Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-CREATE_IN_PROGRESS-1419364583755\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\tacl-08ae964d\t2014-12-23T19:56:23.755Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tAttachInternetGateway-CREATE_IN_PROGRESS-1419364583310\tAWS::EC2::VPCGatewayAttachment\tAttachInternetGateway\tUbuntuVividVPCStack-AttachInternetGateway-ZGJ275X7QV7CB\t2014-12-23T19:56:23.310Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSubnet2subnet0-CREATE_IN_PROGRESS-1419364582836\tAWS::EC2::Subnet\tSubnet2subnet0\t\t2014-12-23T19:56:22.836Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tSecurityGroup2DefaultSG-CREATE_IN_PROGRESS-1419364582463\tAWS::EC2::SecurityGroup\tSecurityGroup2DefaultSG\t\t2014-12-23T19:56:22.463Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tRouteTable2RT0-CREATE_IN_PROGRESS-1419364582119\tAWS::EC2::RouteTable\tRouteTable2RT0\t\t2014-12-23T19:56:22.119Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tNetworkAcl2DefaultACL-CREATE_IN_PROGRESS-1419364581782\tAWS::EC2::NetworkAcl\tNetworkAcl2DefaultACL\t\t2014-12-23T19:56:21.782Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tAttachInternetGateway-CREATE_IN_PROGRESS-1419364581433\tAWS::EC2::VPCGatewayAttachment\tAttachInternetGateway\t\t2014-12-23T19:56:21.433Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-CREATE_COMPLETE-1419364579636\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T19:56:19.636Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-CREATE_IN_PROGRESS-1419364579190\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T19:56:19.190Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-CREATE_COMPLETE-1419364578526\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\tigw-69d89ece\t2014-12-23T19:56:18.526Z\tCREATE_COMPLETE\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-CREATE_IN_PROGRESS-1419364578223\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T19:56:18.223Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-CREATE_IN_PROGRESS-1419364578051\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\tigw-69d89ece\t2014-12-23T19:56:18.051Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-CREATE_IN_PROGRESS-1419364577629\tAWS::EC2::VPC\tVPC2vpc\tvpc-de9bbba2\t2014-12-23T19:56:17.630Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-CREATE_IN_PROGRESS-1419364577378\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\tigw-69d89ece\t2014-12-23T19:56:17.378Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tVPC2vpc-CREATE_IN_PROGRESS-1419364576790\tAWS::EC2::VPC\tVPC2vpc\t\t2014-12-23T19:56:16.790Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\tInternetGateway2Internetgateway-CREATE_IN_PROGRESS-1419364576592\tAWS::EC2::InternetGateway\tInternetGateway2Internetgateway\t\t2014-12-23T19:56:16.592Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividVPCStack\t7471e8b6-582b-4bed-8fc1-ac853629a7d0\tAWS::CloudFormation::Stack\tUbuntuVividVPCStack\tarn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\t2014-12-23T19:56:15.781Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up account on [Group #2 cloud for 4.1 verification tests|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-TypeofDeployments]\r\n# Applied the following IAM access policy to a non-admin user:\r\n{code}\r\n# euare-grouplistpolicies -g Testers -v --region admin-hspencer2@group2\r\ncfn-euca10231-vpc\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419017345024\",\r\n      \"Action\": [\r\n        \"ec2:AuthorizeSecurityGroupEgress\",\r\n        \"ec2:AuthorizeSecurityGroupIngress\",\r\n        \"ec2:CreateKeyPair\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:CreateSecurityGroup\",\r\n        \"ec2:DescribeInstances\",\r\n        \"ec2:DescribeKeyPairs\",\r\n        \"ec2:DescribeSecurityGroups\",\r\n        \"ec2:CreateVpc\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:DescribeVpcs\",\r\n        \"ec2:DeleteVpc\",\r\n        \"ec2:CreateSubnet\",\r\n        \"ec2:DeleteSubnet\",\r\n        \"ec2:DeleteSecurityGroup\",\r\n        \"ec2:CreateRouteTable\",\r\n        \"ec2:CreateRoute\",\r\n        \"ec2:DeleteRouteTable\",\r\n        \"ec2:DeleteRoute\",\r\n        \"ec2:AllocateAddress\",\r\n        \"ec2:AssociateAddress\",\r\n        \"ec2:AssociateRouteTable\",\r\n        \"ec2:AttachInternetGateway\",\r\n        \"ec2:AttachNetworkInterface\",\r\n        \"ec2:CreateInternetGateway\",\r\n        \"ec2:CreateNetworkAcl\",\r\n        \"ec2:CreateNetworkAclEntry\",\r\n        \"ec2:CreateNetworkInterface\",\r\n        \"ec2:DeleteInternetGateway\",\r\n        \"ec2:DeleteNetworkAcl\",\r\n        \"ec2:DeleteNetworkAclEntry\",\r\n        \"ec2:DeleteNetworkInterface\",\r\n        \"ec2:DescribeAddresses\",\r\n        \"ec2:DescribeInternetGateways\",\r\n        \"ec2:DescribeNetworkAcls\",\r\n        \"ec2:DescribeNetworkInterfaceAttribute\",\r\n        \"ec2:DescribeNetworkInterfaces\",\r\n        \"ec2:DescribeRouteTables\",\r\n        \"ec2:DescribeSubnets\",\r\n        \"ec2:DetachInternetGateway\",\r\n        \"ec2:DetachNetworkInterface\",\r\n        \"ec2:DisassociateAddress\",\r\n        \"ec2:DisassociateRouteTable\",\r\n        \"ec2:ModifyNetworkInterfaceAttribute\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:ReleaseAddress\",\r\n        \"ec2:ReplaceNetworkAclAssociation\",\r\n        \"ec2:ReplaceNetworkAclEntry\",\r\n        \"ec2:ReplaceRoute\",\r\n        \"ec2:ReplaceRouteTableAssociation\",\r\n        \"ec2:ResetNetworkInterfaceAttribute\",\r\n        \"ec2:RevokeSecurityGroupEgress\",\r\n        \"ec2:RevokeSecurityGroupIngress\",\r\n        \"ec2:TerminateInstances\",\r\n        \"ec2:RunInstances\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n# Deployed CF stack using the following CF template:\r\n{code}\r\n# cat cfn-euca10114-template.json\r\n{\r\n    \"AWSTemplateFormatVersion\": \"2010-09-09\",\r\n    \"Description\": \"Cloudformation generated by VisualOps\",\r\n    \"Parameters\": {\r\n        \"KeyPair2DefaultKP\": {\r\n            \"Default\": \"clc\",\r\n            \"Description\": \"\",\r\n            \"Type\": \"String\"\r\n        }\r\n    },\r\n    \"Resources\": {\r\n        \"AttachInternetGateway\": {\r\n            \"Properties\": {\r\n                \"InternetGatewayId\": {\r\n                    \"Ref\": \"InternetGateway2Internetgateway\"\r\n                },\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::VPCGatewayAttachment\"\r\n        },\r\n        \"Instance2host0\": {\r\n            \"Properties\": {\r\n                \"ImageId\": \"emi-b02d0b96\",\r\n                \"InstanceType\": \"m1.xlarge\",\r\n                \"KeyName\": {\r\n                    \"Ref\": \"KeyPair2DefaultKP\"\r\n                },\r\n                \"Monitoring\": \"true\",\r\n                \"NetworkInterfaces\": [\r\n                    {\r\n                        \"DeviceIndex\": \"0\",\r\n                        \"NetworkInterfaceId\": {\r\n                            \"Ref\": \"NetworkInterface2host0eni0\"\r\n                        }\r\n                    }\r\n                ],\r\n                \"Tags\": [\r\n                         {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}}\r\n                ]\r\n            },\r\n            \"Type\": \"AWS::EC2::Instance\"\r\n        },\r\n        \"InternetGateway2Internetgateway\": {\r\n            \"Properties\": {},\r\n            \"Type\": \"AWS::EC2::InternetGateway\"\r\n        },\r\n        \"NetworkAcl2DefaultACL\": {\r\n            \"Properties\": {\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::NetworkAcl\"\r\n        },\r\n        \"NetworkAcl2DefaultACL2AssociationSet20\": {\r\n            \"Properties\": {\r\n                \"NetworkAclId\": {\r\n                    \"Ref\": \"NetworkAcl2DefaultACL\"\r\n                },\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SubnetNetworkAclAssociation\"\r\n        },\r\n        \"NetworkInterface2host0eni0\": {\r\n            \"Properties\": {\r\n                \"GroupSet\": [\r\n                    {\r\n                        \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                    }\r\n                ],\r\n                \"PrivateIpAddresses\": [\r\n                    {\r\n                        \"Primary\": true,\r\n                        \"PrivateIpAddress\": \"10.0.0.4\"\r\n                    }\r\n                ],\r\n                \"SourceDestCheck\": true,\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::NetworkInterface\"\r\n        },\r\n        \"RouteTable2RT0\": {\r\n            \"Properties\": {\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::RouteTable\"\r\n        },\r\n        \"RouteTable2RT02AssociationSet22\": {\r\n            \"Properties\": {\r\n                \"RouteTableId\": {\r\n                    \"Ref\": \"RouteTable2RT0\"\r\n                },\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\"\r\n        },\r\n        \"RouteTable2RT02RouteSet21\": {\r\n            \"Properties\": {\r\n                \"DestinationCidrBlock\": \"0.0.0.0/0\",\r\n                \"GatewayId\": {\r\n                    \"Ref\": \"InternetGateway2Internetgateway\"\r\n                },\r\n                \"RouteTableId\": {\r\n                    \"Ref\": \"RouteTable2RT0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::Route\"\r\n        },\r\n        \"SecurityGroup2DefaultSG\": {\r\n            \"Properties\": {\r\n                \"GroupDescription\": \"default VPC security group\",\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroup\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2Egress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"0\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"-1\",\r\n                \"ToPort\": \"65535\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupEgress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2Ingress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"22\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"tcp\",\r\n                \"ToPort\": \"22\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupIngress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2IpPermissions22\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"22\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"tcp\",\r\n                \"ToPort\": \"22\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupIngress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2IpPermissionsEgress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"0\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"-1\",\r\n                \"ToPort\": \"65535\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupEgress\"\r\n        },\r\n        \"Subnet2subnet0\": {\r\n            \"Properties\": {\r\n                \"AvailabilityZone\": \"one\",\r\n                \"CidrBlock\": \"10.0.0.0/24\",\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::Subnet\"\r\n        },\r\n        \"VPC2vpc\": {\r\n            \"Properties\": {\r\n                \"CidrBlock\": \"10.0.0.0/16\",\r\n                \"InstanceTenancy\": \"default\"\r\n            },\r\n            \"Type\": \"AWS::EC2::VPC\"\r\n        }\r\n    }\r\n}\r\n{code}\r\n{code}\r\n# euform-create-stack --template-file cfn-euca10114-template.json --parameter \"KeyPair2DefaultKP=tessai\" UbuntuVividVPCStack --region tessai-group2@group2\r\narn:aws:cloudformation::804704720152:stack/UbuntuVividVPCStack/5a711955-e1ce-44e9-a0dd-58ff82f1cf15\r\n{code}\r\n# Confirmed stack completed successfully\r\n{code}\r\n# euform-describe-stacks UbuntuVividVPCStack --region tessai-group2@group2\r\nSTACK\tUbuntuVividVPCStack\tCREATE_COMPLETE\tComplete!\tCloudformation generated by VisualOps\t2014-12-23T19:56:15.320Z\r\n{code}\r\n# Deleted Cloudformation Stack; waited a few minutes then checked the status\r\n{code}\r\n# euform-delete-stack UbuntuVividVPCStack --region tessai-group2@group2\r\n# euform-describe-stacks UbuntuVividVPCStack --region tessai-group2@group2\r\nSTACK\tUbuntuVividVPCStack\tDELETE_FAILED\tThe following resource(s) failed to delete: [RouteTable2RT02RouteSet21, SecurityGroup2DefaultSG2Ingress20].\tCloudformation generated by VisualOps\t2014-12-23T19:56:15.320Z\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Routing Table and Security Group Fail to Delete After Successful Cloudformation Deployment on VPC-enabled Cloud","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_3_*:*_173964017_*|*_10000_*:*_1_*:*_1314018130_*|*_10001_*:*_2_*:*_6177576_*|*_10003_*:*_4_*:*_573814456_*|*_10006_*:*_2_*:*_459971452","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i030tr:","customfield_10001":"2015-01-09T01:26:53.837-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["hspencer(hspencer)","sjones(sjones)"],"customfield_10116":null,"environment":"* [Group #2 Cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-TypeofDeployments] for 4.1 Verifications","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10271/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/80966","id":"80966","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"In order to delete the leftover resources, 'euform-delete-stack' has to be ran again using the CF stack name.\r\n{code}\r\n# euform-delete-stack UbuntuVividVPCStack --region tessai-group2@group2\r\n# euform-describe-stacks UbuntuVividVPCStack --region tessai-group2@group2\r\nSTACK\tUbuntuVividVPCStack\tDELETE_IN_PROGRESS\tUser Initiated\tCloudformation generated by VisualOps\t2014-12-23T19:56:15.320Z\r\n# euform-describe-stacks UbuntuVividVPCStack --region tessai-group2@group2\r\n#\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-12-23T15:31:15.113-0600","updated":"2014-12-23T15:31:15.113-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/81446","id":"81446","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Fix by adding retries for delete activities and updating the EC2 service to allow for concurrent modification of security groups and route tables.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-09T01:26:53.837-0600","updated":"2015-01-09T01:26:53.837-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/81834","id":"81834","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones]/[~tony]:\r\n\r\nTested this and it failed.  However it failed differently this time.  Used the same  template, but stack failed to deploy.  Following error was seen in stack events:\r\n{code}\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2IpPermissions22-CREATE_FAILED-1421259458562\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\t\t2015-01-14T18:17:38.562Z\tCREATE_FAILED\tCluster response includes _return=false:Receiver error (InternalFailure): Error while committing the transaction\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2IpPermissionsEgress20-CREATE_FAILED-1421259458496\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\t\t2015-01-14T18:17:38.496Z\tCREATE_FAILED\tRow was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.eucalyptus.network.NetworkGroup#8aef81a94ae4e7ff014ae9aa26500519]\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2Egress20-CREATE_IN_PROGRESS-1421259458478\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividStackV2-SecurityGroup2DefaultSG2Egress20-VBLTTNSIS27OU\t2015-01-14T18:17:38.478Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2Ingress20-CREATE_FAILED-1421259458237\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\t\t2015-01-14T18:17:38.237Z\tCREATE_FAILED\tCluster response includes _return=false:Receiver error (InternalFailure): Error while committing the transaction\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Applied following IAM access policy to group of given account:\r\n{code}\r\n# euare-grouplistpolicies -g Testers -v --region admin-hspencer2@group2\r\neuca10271-routetable-secgroup\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419017345024\",\r\n      \"Action\": [\r\n        \"ec2:AuthorizeSecurityGroupEgress\",\r\n        \"ec2:AuthorizeSecurityGroupIngress\",\r\n        \"ec2:CreateKeyPair\",\r\n        \"ec2:DeleteKeyPair\",\r\n        \"ec2:ImportKeyPair\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:CreateSecurityGroup\",\r\n        \"ec2:DescribeInstances\",\r\n        \"ec2:DescribeKeyPairs\",\r\n        \"ec2:DescribeSecurityGroups\",\r\n        \"ec2:CreateVpc\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:DescribeVpcs\",\r\n        \"ec2:DeleteVpc\",\r\n        \"ec2:CreateSubnet\",\r\n        \"ec2:DeleteSubnet\",\r\n        \"ec2:DeleteSecurityGroup\",\r\n        \"ec2:CreateRouteTable\",\r\n        \"ec2:CreateRoute\",\r\n        \"ec2:DeleteRouteTable\",\r\n        \"ec2:DeleteRoute\",\r\n        \"ec2:AllocateAddress\",\r\n        \"ec2:AssociateAddress\",\r\n        \"ec2:AssociateRouteTable\",\r\n        \"ec2:AttachInternetGateway\",\r\n        \"ec2:AttachNetworkInterface\",\r\n        \"ec2:CreateInternetGateway\",\r\n        \"ec2:CreateNetworkAcl\",\r\n        \"ec2:CreateNetworkAclEntry\",\r\n        \"ec2:CreateNetworkInterface\",\r\n        \"ec2:DeleteInternetGateway\",\r\n        \"ec2:DeleteNetworkAcl\",\r\n        \"ec2:DeleteNetworkAclEntry\",\r\n        \"ec2:DeleteNetworkInterface\",\r\n        \"ec2:DescribeAddresses\",\r\n        \"ec2:DescribeInternetGateways\",\r\n        \"ec2:DescribeNetworkAcls\",\r\n        \"ec2:DescribeNetworkInterfaceAttribute\",\r\n        \"ec2:DescribeNetworkInterfaces\",\r\n        \"ec2:DescribeRouteTables\",\r\n        \"ec2:DescribeSubnets\",\r\n        \"ec2:DetachInternetGateway\",\r\n        \"ec2:DetachNetworkInterface\",\r\n        \"ec2:DisassociateAddress\",\r\n        \"ec2:DisassociateRouteTable\",\r\n        \"ec2:ModifyNetworkInterfaceAttribute\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:ReleaseAddress\",\r\n        \"ec2:ReplaceNetworkAclAssociation\",\r\n        \"ec2:ReplaceNetworkAclEntry\",\r\n        \"ec2:ReplaceRoute\",\r\n        \"ec2:ReplaceRouteTableAssociation\",\r\n        \"ec2:ResetNetworkInterfaceAttribute\",\r\n        \"ec2:RevokeSecurityGroupEgress\",\r\n        \"ec2:RevokeSecurityGroupIngress\",\r\n        \"ec2:TerminateInstances\",\r\n        \"ec2:RunInstances\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n{code}\r\n# euare-grouplistusers -g Testers --region admin-hspencer2@group2\r\narn:aws:iam::804231923627:group/Testers\r\n   users\r\n   arn:aws:iam::804231923627:user/tessai\r\n{code}\r\n# Import keypair:\r\n{code}\r\n# ssh-keygen -t rsa -f tessai-group2\r\n# euca-import-keypair -f tessai-group2.pub tessai --region tessai-group2@group2\r\nKEYPAIR\ttessai\t08:6e:68:10:34:db:6d:b5:99:34:25:76:5a:5e:91:14\r\n{code}\r\n# Using the following cloudformation template, create a stack:\r\n{code}\r\n# cat cfn-euca10271-template.json\r\n{\r\n    \"AWSTemplateFormatVersion\": \"2010-09-09\",\r\n    \"Description\": \"Cloudformation generated by VisualOps\",\r\n    \"Parameters\": {\r\n        \"KeyPair2DefaultKP\": {\r\n            \"Default\": \"clc\",\r\n            \"Description\": \"\",\r\n            \"Type\": \"String\"\r\n        }\r\n    },\r\n    \"Resources\": {\r\n        \"AttachInternetGateway\": {\r\n            \"Properties\": {\r\n                \"InternetGatewayId\": {\r\n                    \"Ref\": \"InternetGateway2Internetgateway\"\r\n                },\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::VPCGatewayAttachment\"\r\n        },\r\n        \"Instance2host0\": {\r\n            \"Properties\": {\r\n                \"ImageId\": \"emi-e26c03c3\",\r\n                \"InstanceType\": \"m1.xlarge\",\r\n                \"KeyName\": {\r\n                    \"Ref\": \"KeyPair2DefaultKP\"\r\n                },\r\n                \"Monitoring\": \"true\",\r\n                \"NetworkInterfaces\": [\r\n                    {\r\n                        \"DeviceIndex\": \"0\",\r\n                        \"NetworkInterfaceId\": {\r\n                            \"Ref\": \"NetworkInterface2host0eni0\"\r\n                        }\r\n                    }\r\n                ],\r\n                \"Tags\": [\r\n                         {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}}\r\n                ]\r\n            },\r\n            \"Type\": \"AWS::EC2::Instance\"\r\n        },\r\n        \"InternetGateway2Internetgateway\": {\r\n            \"Properties\": {},\r\n            \"Type\": \"AWS::EC2::InternetGateway\"\r\n        },\r\n        \"NetworkAcl2DefaultACL\": {\r\n            \"Properties\": {\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::NetworkAcl\"\r\n        },\r\n        \"NetworkAcl2DefaultACL2AssociationSet20\": {\r\n            \"Properties\": {\r\n                \"NetworkAclId\": {\r\n                    \"Ref\": \"NetworkAcl2DefaultACL\"\r\n                },\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SubnetNetworkAclAssociation\"\r\n        },\r\n        \"NetworkInterface2host0eni0\": {\r\n            \"Properties\": {\r\n                \"GroupSet\": [\r\n                    {\r\n                        \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                    }\r\n                ],\r\n                \"PrivateIpAddresses\": [\r\n                    {\r\n                        \"Primary\": true,\r\n                        \"PrivateIpAddress\": \"10.0.0.4\"\r\n                    }\r\n                ],\r\n                \"SourceDestCheck\": true,\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::NetworkInterface\"\r\n        },\r\n        \"RouteTable2RT0\": {\r\n            \"Properties\": {\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::RouteTable\"\r\n        },\r\n        \"RouteTable2RT02AssociationSet22\": {\r\n            \"Properties\": {\r\n                \"RouteTableId\": {\r\n                    \"Ref\": \"RouteTable2RT0\"\r\n                },\r\n                \"SubnetId\": {\r\n                    \"Ref\": \"Subnet2subnet0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SubnetRouteTableAssociation\"\r\n        },\r\n        \"RouteTable2RT02RouteSet21\": {\r\n            \"Properties\": {\r\n                \"DestinationCidrBlock\": \"0.0.0.0/0\",\r\n                \"GatewayId\": {\r\n                    \"Ref\": \"InternetGateway2Internetgateway\"\r\n                },\r\n                \"RouteTableId\": {\r\n                    \"Ref\": \"RouteTable2RT0\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::Route\"\r\n        },\r\n        \"SecurityGroup2DefaultSG\": {\r\n            \"Properties\": {\r\n                \"GroupDescription\": \"default VPC security group\",\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroup\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2Egress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"0\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"-1\",\r\n                \"ToPort\": \"65535\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupEgress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2Ingress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"22\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"tcp\",\r\n                \"ToPort\": \"22\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupIngress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2IpPermissions22\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"22\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"tcp\",\r\n                \"ToPort\": \"22\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupIngress\"\r\n        },\r\n        \"SecurityGroup2DefaultSG2IpPermissionsEgress20\": {\r\n            \"Properties\": {\r\n                \"CidrIp\": \"0.0.0.0/0\",\r\n                \"FromPort\": \"0\",\r\n                \"GroupId\": {\r\n                    \"Ref\": \"SecurityGroup2DefaultSG\"\r\n                },\r\n                \"IpProtocol\": \"-1\",\r\n                \"ToPort\": \"65535\"\r\n            },\r\n            \"Type\": \"AWS::EC2::SecurityGroupEgress\"\r\n        },\r\n        \"Subnet2subnet0\": {\r\n            \"Properties\": {\r\n                \"AvailabilityZone\": \"one\",\r\n                \"CidrBlock\": \"10.0.0.0/24\",\r\n                \"Tags\": [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ],\r\n                \"VpcId\": {\r\n                    \"Ref\": \"VPC2vpc\"\r\n                }\r\n            },\r\n            \"Type\": \"AWS::EC2::Subnet\"\r\n        },\r\n        \"VPC2vpc\": {\r\n            \"Properties\": {\r\n                \"CidrBlock\": \"10.0.0.0/16\",\r\n                \"InstanceTenancy\": \"default\"\r\n            },\r\n            \"Type\": \"AWS::EC2::VPC\"\r\n        }\r\n    }\r\n}\r\n{code}\r\n{code}\r\n# euform-create-stack UbuntuVividStackV2 --parameter \"KeyPair2DefaultKP=tessai\" --template-file cfn-euca10271-template.json --region tessai-group2@group2\r\narn:aws:cloudformation::804231923627:stack/UbuntuVividStackV2/5cda4fc8-49f8-45b5-985c-6552968ccf1a\r\n[root@euca-172-17-231-236 ~]# euform-describe-stacks --region tessai-group2@group2\r\n{code}\r\n# Notice the stack deployment failure and vague error in stack events:\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tUbuntuVividStackV2\tROLLBACK_COMPLETE\t\tCloudformation generated by VisualOps\t2015-01-14T18:17:22.338Z\r\n\r\n# euform-describe-stack-events UbuntuVividStackV2 --region tessai-group2@group2\r\nEVENT\tUbuntuVividStackV2\td1c7eb50-0c2d-4f78-ba12-16ee8fff55b6\tAWS::CloudFormation::Stack\tUbuntuVividStackV2\tarn:aws:cloudformation::804231923627:stack/UbuntuVividStackV2/5cda4fc8-49f8-45b5-985c-6552968ccf1a\t2015-01-14T18:18:21.209Z\tROLLBACK_COMPLETE\r\nEVENT\tUbuntuVividStackV2\tVPC2vpc-DELETE_COMPLETE-1421259500790\tAWS::EC2::VPC\tVPC2vpc\tvpc-2281fbf2\t2015-01-14T18:18:20.790Z\tDELETE_COMPLETE\r\nEVENT\tUbuntuVividStackV2\tVPC2vpc-DELETE_IN_PROGRESS-1421259499342\tAWS::EC2::VPC\tVPC2vpc\tvpc-2281fbf2\t2015-01-14T18:18:19.342Z\tDELETE_IN_PROGRESS\r\n....\r\nEVENT\tUbuntuVividStackV2\t42eafd13-d1a4-494c-9abd-dd6f623f4895\tAWS::CloudFormation::Stack\tUbuntuVividStackV2\tarn:aws:cloudformation::804231923627:stack/UbuntuVividStackV2/5cda4fc8-49f8-45b5-985c-6552968ccf1a\t2015-01-14T18:17:40.199Z\tCREATE_FAILED\tThe following resource(s) failed to create: [SecurityGroup2DefaultSG2Egress20, SecurityGroup2DefaultSG2Ingress20, SecurityGroup2DefaultSG2IpPermissions22, SecurityGroup2DefaultSG2IpPermissionsEgress20, NetworkInterface2host0eni0].\r\nEVENT\tUbuntuVividStackV2\tNetworkInterface2host0eni0-CREATE_IN_PROGRESS-1421259459335\tAWS::EC2::NetworkInterface\tNetworkInterface2host0eni0\teni-5e5d416c\t2015-01-14T18:17:39.335Z\tCREATE_IN_PROGRESS\r\n\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2IpPermissions22-CREATE_FAILED-1421259458562\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2IpPermissions22\t\t2015-01-14T18:17:38.562Z\tCREATE_FAILED\tCluster response includes _return=false:Receiver error (InternalFailure): Error while committing the transaction\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2IpPermissionsEgress20-CREATE_FAILED-1421259458496\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2IpPermissionsEgress20\t\t2015-01-14T18:17:38.496Z\tCREATE_FAILED\tRow was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.eucalyptus.network.NetworkGroup#8aef81a94ae4e7ff014ae9aa26500519]\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2Egress20-CREATE_IN_PROGRESS-1421259458478\tAWS::EC2::SecurityGroupEgress\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividStackV2-SecurityGroup2DefaultSG2Egress20-VBLTTNSIS27OU\t2015-01-14T18:17:38.478Z\tCREATE_IN_PROGRESS\r\nEVENT\tUbuntuVividStackV2\tSecurityGroup2DefaultSG2Ingress20-CREATE_FAILED-1421259458237\tAWS::EC2::SecurityGroupIngress\tSecurityGroup2DefaultSG2Ingress20\t\t2015-01-14T18:17:38.237Z\tCREATE_FAILED\tCluster response includes _return=false:Receiver error (InternalFailure): Error while committing the transaction\r\n{code}\r\n\r\nThis was tested on [Group #2 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-Group#2]\r\n\r\n*Note*\r\n\r\nThis same template (with the except of different AMI and availability zone) was used on AWS, and deployed just fine.\r\n{code}\r\n$ diff cfn-ubuntu-vivid-visualops-template.json cfn-euca10271-template.json\r\n25,26c25,26\r\n<                 \"ImageId\": \"ami-94b5c7fc\",\r\n<                 \"InstanceType\": \"m3.medium\",\r\n---\r\n>                 \"ImageId\": \"emi-e26c03c3\",\r\n>                 \"InstanceType\": \"m1.xlarge\",\r\n181c181\r\n<                 \"AvailabilityZone\": \"us-east-1b\",\r\n---\r\n>                 \"AvailabilityZone\": \"one\",\r\n{code}\r\n{code}\r\n$ aws cloudformation create-stack --parameters ParameterKey=KeyPair2DefaultKP,ParameterValue=harold-euca --template-body file:///Users/haroldspencerjr/cfn-ubuntu-vivid-visualops-template.json --stack-name UbuntuVividStack --profile harold-work\r\narn:aws:cloudformation:us-east-1:048212016277:stack/UbuntuVividStack/fc836d50-9c17-11e4-9ca6-500150b34c44\r\n\r\n$ aws cloudformation describe-stacks --profile harold-workSTACKS\t2015-01-14T18:05:56.315Z\tCloudformation generated by VisualOps\tFalse\tarn:aws:cloudformation:us-east-1:048212016277:stack/UbuntuVividStack/fc836d50-9c17-11e4-9ca6-500150b34c44\tUbuntuVividStack\tCREATE_COMPLETE\tNone\r\nPARAMETERS\tKeyPair2DefaultKP\tharold-euca\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T12:34:42.241-0600","updated":"2015-01-14T12:34:42.241-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/81840","id":"81840","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], create resource behaviour was not changed for this issue as the originally reported failure was for stack deletion. Please open a separate issue for the create error (which looks like it is an EC2 failure). I think the create issue would not occur every time a stack is created, so verification of this issue may not be blocked by the create failure.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T12:53:20.088-0600","updated":"2015-01-14T12:53:20.088-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/81845","id":"81845","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nOk.  I will try again, and report back.  Thanks.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T13:56:37.187-0600","updated":"2015-01-14T13:56:37.187-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/81846","id":"81846","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nI raised EUCA-10352 per your request.  I used a different template (the one in EUCA-10310) to confirm that routing table and security group were deleted after a successful deployment.  The DELETION_FAILED issue is due to the multiple public IP allocation (mentioned in EUCA-10310).\r\n\r\n*Steps*\r\n\r\n# Applied following IAM access policy to group of given account:\r\n{code}\r\n# euare-grouplistpolicies -g Testers -v --region admin-hspencer2@group2\r\neuca10271-routetable-secgroup\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419017345024\",\r\n      \"Action\": [\r\n        \"ec2:AuthorizeSecurityGroupEgress\",\r\n        \"ec2:AuthorizeSecurityGroupIngress\",\r\n        \"ec2:CreateKeyPair\",\r\n        \"ec2:DeleteKeyPair\",\r\n        \"ec2:ImportKeyPair\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:CreateSecurityGroup\",\r\n        \"ec2:DescribeInstances\",\r\n        \"ec2:DescribeKeyPairs\",\r\n        \"ec2:DescribeSecurityGroups\",\r\n        \"ec2:CreateVpc\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:DescribeVpcs\",\r\n        \"ec2:DeleteVpc\",\r\n        \"ec2:CreateSubnet\",\r\n        \"ec2:DeleteSubnet\",\r\n        \"ec2:DeleteSecurityGroup\",\r\n        \"ec2:CreateRouteTable\",\r\n        \"ec2:CreateRoute\",\r\n        \"ec2:DeleteRouteTable\",\r\n        \"ec2:DeleteRoute\",\r\n        \"ec2:AllocateAddress\",\r\n        \"ec2:AssociateAddress\",\r\n        \"ec2:AssociateRouteTable\",\r\n        \"ec2:AttachInternetGateway\",\r\n        \"ec2:AttachNetworkInterface\",\r\n        \"ec2:CreateInternetGateway\",\r\n        \"ec2:CreateNetworkAcl\",\r\n        \"ec2:CreateNetworkAclEntry\",\r\n        \"ec2:CreateNetworkInterface\",\r\n        \"ec2:DeleteInternetGateway\",\r\n        \"ec2:DeleteNetworkAcl\",\r\n        \"ec2:DeleteNetworkAclEntry\",\r\n        \"ec2:DeleteNetworkInterface\",\r\n        \"ec2:DescribeAddresses\",\r\n        \"ec2:DescribeInternetGateways\",\r\n        \"ec2:DescribeNetworkAcls\",\r\n        \"ec2:DescribeNetworkInterfaceAttribute\",\r\n        \"ec2:DescribeNetworkInterfaces\",\r\n        \"ec2:DescribeRouteTables\",\r\n        \"ec2:DescribeSubnets\",\r\n        \"ec2:DetachInternetGateway\",\r\n        \"ec2:DetachNetworkInterface\",\r\n        \"ec2:DisassociateAddress\",\r\n        \"ec2:DisassociateRouteTable\",\r\n        \"ec2:ModifyNetworkInterfaceAttribute\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:ReleaseAddress\",\r\n        \"ec2:ReplaceNetworkAclAssociation\",\r\n        \"ec2:ReplaceNetworkAclEntry\",\r\n        \"ec2:ReplaceRoute\",\r\n        \"ec2:ReplaceRouteTableAssociation\",\r\n        \"ec2:ResetNetworkInterfaceAttribute\",\r\n        \"ec2:RevokeSecurityGroupEgress\",\r\n        \"ec2:RevokeSecurityGroupIngress\",\r\n        \"ec2:TerminateInstances\",\r\n        \"ec2:RunInstances\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n{code}\r\n# euare-grouplistusers -g Testers --region admin-hspencer2@group2\r\narn:aws:iam::804231923627:group/Testers\r\n   users\r\n   arn:aws:iam::804231923627:user/tessai\r\n{code}\r\n# Import keypair:\r\n{code}\r\n# ssh-keygen -t rsa -f tessai-group2\r\n# euca-import-keypair -f tessai-group2.pub tessai --region tessai-group2@group2\r\nKEYPAIR\ttessai\t08:6e:68:10:34:db:6d:b5:99:34:25:76:5a:5e:91:14\r\n{code}\r\n# Using the following cloudformation template, create a stack:\r\n{code}\r\n# cat cfn-ubuntu-docker-vpc.json\r\n{\r\n\r\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n    \"Description\" : \"Cloudformation Example => Run instance with userdata in security group\",\r\n\r\n    \"Parameters\": {\r\n        \"UbuntuImageId\": {\r\n            \"Description\":\"Ubuntu Image id\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"False\"\r\n        },\r\n\r\n        \"UserKeyPair\": {\r\n            \"Description\":\"User Key Pair\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"False\"\r\n        }\r\n    },\r\n\r\n    \"Resources\" : {\r\n        \"DockerVPC\": {\r\n            \"Type\": \"AWS::EC2::VPC\",\r\n            \"Properties\" : {\r\n                \"CidrBlock\" : \"10.0.0.0/16\",\r\n                \"EnableDnsSupport\" : \"True\",\r\n                \"EnableDnsHostnames\" : \"True\",\r\n                \"InstanceTenancy\" : \"default\",\r\n                \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"}} ]\r\n            }\r\n        },\r\n\r\n        \"DockerSubnet\": {\r\n            \"Type\" : \"AWS::EC2::Subnet\",\r\n            \"Properties\" : {\r\n                \"VpcId\" : { \"Ref\" : \"DockerVPC\" },\r\n                \"CidrBlock\" : \"10.0.0.0/24\",\r\n                \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ]\r\n            }\r\n        },\r\n\r\n        \"DockerInternetGateway\" : {\r\n            \"Type\" : \"AWS::EC2::InternetGateway\",\r\n            \"Properties\" : {\r\n                \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ]\r\n            }\r\n        },\r\n\r\n        \"DockerAttachGateway\" : {\r\n            \"Type\" : \"AWS::EC2::VPCGatewayAttachment\",\r\n            \"Properties\" : {\r\n                \"VpcId\" : { \"Ref\" : \"DockerVPC\" },\r\n                \"InternetGatewayId\" : { \"Ref\" : \"DockerInternetGateway\" }\r\n            }\r\n        },\r\n\r\n        \"DockerRouteTable\": {\r\n            \"Type\" : \"AWS::EC2::RouteTable\",\r\n            \"Properties\" : {\r\n                \"VpcId\" : { \"Ref\" : \"DockerVPC\" },\r\n                \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ]\r\n            }\r\n        },\r\n\r\n        \"DockerRoute\" : {\r\n            \"Type\" : \"AWS::EC2::Route\",\r\n            \"DependsOn\" : \"DockerAttachGateway\",\r\n            \"Properties\" : {\r\n                \"RouteTableId\" : { \"Ref\" : \"DockerRouteTable\" },\r\n                \"DestinationCidrBlock\" : \"0.0.0.0/0\",\r\n                \"GatewayId\" : { \"Ref\" : \"DockerInternetGateway\" }\r\n            }\r\n        },\r\n\r\n        \"DockerSubnetRouteTableAssocaiation\" : {\r\n            \"Type\" : \"AWS::EC2::SubnetRouteTableAssociation\",\r\n            \"Properties\" : {\r\n                \"SubnetId\" : { \"Ref\" : \"DockerSubnet\" },\r\n                \"RouteTableId\" : { \"Ref\" : \"DockerRouteTable\" }\r\n            }\r\n        },\r\n\r\n        \"DockerNetworkAcl\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAcl\",\r\n            \"Properties\" : {\r\n                \"VpcId\" : {\"Ref\" : \"DockerVPC\"},\r\n                \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ]\r\n            }\r\n        },\r\n\r\n        \"InboundSSHNetworkAclEntry\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAclEntry\",\r\n            \"Properties\" : {\r\n                \"NetworkAclId\" : {\"Ref\" : \"DockerNetworkAcl\"},\r\n                \"RuleNumber\" : \"101\",\r\n                \"Protocol\" : \"6\",\r\n                \"RuleAction\" : \"allow\",\r\n                \"Egress\" : \"false\",\r\n                \"CidrBlock\" : \"0.0.0.0/0\",\r\n                \"PortRange\" : {\"From\" : \"22\", \"To\" : \"22\"}\r\n            }\r\n        },\r\n\r\n        \"InboundResponsePortsNetworkAclEntry\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAclEntry\",\r\n            \"Properties\" : {\r\n                \"NetworkAclId\" : {\"Ref\" : \"DockerNetworkAcl\"},\r\n                \"RuleNumber\" : \"102\",\r\n                \"Protocol\" : \"6\",\r\n                \"RuleAction\" : \"allow\",\r\n                \"Egress\" : \"false\",\r\n                \"CidrBlock\" : \"0.0.0.0/0\",\r\n                \"PortRange\" : {\"From\" : \"1024\", \"To\" : \"65535\"}\r\n            }\r\n        },\r\n\r\n        \"OutBoundHTTPNetworkAclEntry\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAclEntry\",\r\n            \"Properties\" : {\r\n                \"NetworkAclId\" : {\"Ref\" : \"DockerNetworkAcl\"},\r\n                \"RuleNumber\" : \"100\",\r\n                \"Protocol\" : \"6\",\r\n                \"RuleAction\" : \"allow\",\r\n                \"Egress\" : \"true\",\r\n                \"CidrBlock\" : \"0.0.0.0/0\",\r\n                \"PortRange\" : {\"From\" : \"80\", \"To\" : \"80\"}\r\n            }\r\n        },\r\n\r\n        \"OutBoundHTTPSNetworkAclEntry\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAclEntry\",\r\n            \"Properties\" : {\r\n                \"NetworkAclId\" : {\"Ref\" : \"DockerNetworkAcl\"},\r\n                \"RuleNumber\" : \"101\",\r\n                \"Protocol\" : \"6\",\r\n                \"RuleAction\" : \"allow\",\r\n                \"Egress\" : \"true\",\r\n                \"CidrBlock\" : \"0.0.0.0/0\",\r\n                \"PortRange\" : {\"From\" : \"443\", \"To\" : \"443\"}\r\n            }\r\n        },\r\n\r\n        \"OutboundResponsePortsNetworkAclEntry\" : {\r\n            \"Type\" : \"AWS::EC2::NetworkAclEntry\",\r\n            \"Properties\" : {\r\n                \"NetworkAclId\" : {\"Ref\" : \"DockerNetworkAcl\"},\r\n                \"RuleNumber\" : \"102\",\r\n                \"Protocol\" : \"6\",\r\n                \"RuleAction\" : \"allow\",\r\n                \"Egress\" : \"true\",\r\n                \"CidrBlock\" : \"0.0.0.0/0\",\r\n                \"PortRange\" : {\"From\" : \"1024\", \"To\" : \"65535\"}\r\n            }\r\n        },\r\n\r\n        \"SubnetNetworkAclAssociation\" : {\r\n            \"Type\" : \"AWS::EC2::SubnetNetworkAclAssociation\",\r\n            \"Properties\" : {\r\n                \"SubnetId\" : { \"Ref\" : \"DockerSubnet\" },\r\n                \"NetworkAclId\" : { \"Ref\" : \"DockerNetworkAcl\" }\r\n            }\r\n        },\r\n\r\n        \"DockerIPAddress\" : {\r\n            \"Type\" : \"AWS::EC2::EIP\",\r\n            \"DependsOn\" : \"DockerAttachGateway\",\r\n            \"Properties\" : {\r\n                \"Domain\" : \"vpc\",\r\n                \"InstanceId\" : { \"Ref\" : \"DockerInstance\" }\r\n            }\r\n        },\r\n\r\n        \"DockerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n                \"Properties\": {\r\n                    \"GroupDescription\" : \"Security Group with Ingress Rule for DockerInstance\",\r\n                    \"VpcId\" : {\"Ref\" : \"DockerVPC\"},\r\n                    \"SecurityGroupIngress\" : [\r\n                        {\r\n                            \"IpProtocol\" : \"tcp\",\r\n                            \"FromPort\" : \"22\",\r\n                            \"ToPort\" : \"22\",\r\n                            \"CidrIp\" : \"0.0.0.0/0\"\r\n                        }\r\n                    ]\r\n                }\r\n        },\r\n\r\n        \"DockerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n                \"Properties\": {\r\n                    \"ImageId\" : { \"Ref\":\"UbuntuImageId\" },\r\n                    \"InstanceType\" : \"m1.xlarge\",\r\n                    \"UserData\" : { \"Fn::Base64\" : \"#include https://get.docker.io\" },\r\n                    \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ],\r\n                    \"NetworkInterfaces\" : [{\r\n                        \"GroupSet\" : [{ \"Ref\" : \"DockerSecurityGroup\" }],\r\n                        \"AssociatePublicIpAddress\" : \"true\",\r\n                        \"DeviceIndex\"  : \"0\",\r\n                        \"SubnetId\"  : { \"Ref\" : \"DockerSubnet\" }\r\n                    }],\r\n                    \"KeyName\" : { \"Ref\" : \"UserKeyPair\" }\r\n            }\r\n        }\r\n    },\r\n\r\n    \"Outputs\" : {\r\n        \"InstanceId\" : {\r\n            \"Description\" : \"InstanceId of the newly created EC2 instance\",\r\n            \"Value\" : { \"Ref\" : \"DockerInstance\" }\r\n        },\r\n        \"AZ\" : {\r\n            \"Description\" : \"Availability Zone of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"DockerInstance\", \"AvailabilityZone\" ] }\r\n        },\r\n        \"PublicIP\" : {\r\n            \"Description\" : \"Public IP address of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"DockerInstance\", \"PublicIp\" ] }\r\n        }\r\n    }\r\n}\r\n{code}\r\n{code}\r\n# euform-create-stack --template-file cfn-ubuntu-docker-vpc.json --parameter \"UbuntuImageId=emi-e26c03c3\" --parameter \"UserKeyPair=tessai\" DockerStack --region tessai-group2@group2\r\narn:aws:cloudformation::804231923627:stack/DockerStack/4813bf04-0105-4e99-ab7e-61fb41836ce4\r\n{code}\r\n# Confirmed that stack completed successfully\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tDockerStack\tCREATE_COMPLETE\tComplete!\tCloudformation Example => Run instance with userdata in security group\t2015-01-14T20:07:41.904Z\r\nOUTPUT\tInstanceId\ti-53290d85\r\nOUTPUT\tAZ\tone\r\nOUTPUT\tPublicIP\t10.116.45.197\r\n\r\n# euca-describe-route-tables --region tessai-group2@group2\r\nROUTETABLE\trtb-42e8baf0\tvpc-11ec481e\r\nROUTE\tlocal\tactive\t10.0.0.0/16\tCreateRouteTable\r\nASSOCIATION\trtbassoc-6f15bcf9\t\tmain\r\nROUTETABLE\trtb-729e28a6\tvpc-11ec481e\r\nROUTE\tlocal\tactive\t10.0.0.0/16\tCreateRouteTable\r\nROUTE\tigw-d8782611\tactive\t0.0.0.0/0\tCreateRoute\r\nASSOCIATION\trtbassoc-08e97421\tsubnet-045e3c39\r\nTAG\troute-table\trtb-729e28a6\tApplication\tarn:aws:cloudformation::804231923627:stack/DockerStack/4813bf04-0105-4e99-ab7e-61fb41836ce4\r\nTAG\troute-table\trtb-729e28a6\taws:cloudformation:logical-id\tDockerRouteTable\r\nTAG\troute-table\trtb-729e28a6\taws:cloudformation:stack-id\tarn:aws:cloudformation::804231923627:stack/DockerStack/4813bf04-0105-4e99-ab7e-61fb41836ce4\r\nTAG\troute-table\trtb-729e28a6\taws:cloudformation:stack-name\tDockerStack\r\nROUTETABLE\trtb-d05e0fb8\tvpc-fef51b69\r\nROUTE\tlocal\tactive\t172.31.0.0/16\tCreateRouteTable\r\nROUTE\tigw-33a4464a\tactive\t0.0.0.0/0\tCreateRouteTable\r\nASSOCIATION\trtbassoc-437355e1\t\tmain\r\n\r\n# euca-describe-groups --region tessai-group2@group2 | grep DockerStack\r\nGROUP\tsg-709be2fd\t804231923627\tDockerStack-DockerSecurityGroup-Q1IQ38U6MGZCM\tSecurity Group with Ingress Rule for DockerInstance\tvpc-11ec481e\r\nPERMISSION\t804231923627\tDockerStack-DockerSecurityGroup-Q1IQ38U6MGZCM\tALLOWS\ttcp\t22\t22\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nPERMISSION\t804231923627\tDockerStack-DockerSecurityGroup-Q1IQ38U6MGZCM\tALLOWS\t-1\t\t\tTO\tCIDR\t0.0.0.0/0\tegress\r\nTAG\tsecurity-group\tsg-709be2fd\taws:cloudformation:stack-id\tarn:aws:cloudformation::804231923627:stack/DockerStack/4813bf04-0105-4e99-ab7e-61fb41836ce4\r\nTAG\tsecurity-group\tsg-709be2fd\taws:cloudformation:stack-name\tDockerStack\r\n{code}\r\n# Delete stack, and confirm that routing table and security group were deleted:\r\n{code}\r\n# euform-delete-stack DockerStack --region tessai-group2@group2\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tDockerStack\tDELETE_FAILED\tThe following resource(s) failed to delete: [DockerIPAddress].\tCloudformation Example => Run instance with userdata in security group\t2015-01-14T20:07:41.904Z\r\nOUTPUT\tInstanceId\ti-53290d85\r\nOUTPUT\tAZ\tone\r\nOUTPUT\tPublicIP\t10.116.45.197\r\n\r\n# euca-describe-route-tables --region tessai-group2@group2\r\nROUTETABLE\trtb-d05e0fb8\tvpc-fef51b69\r\nROUTE\tlocal\tactive\t172.31.0.0/16\tCreateRouteTable\r\nROUTE\tigw-33a4464a\tactive\t0.0.0.0/0\tCreateRouteTable\r\nASSOCIATION\trtbassoc-437355e1\t\tmain\r\n\r\n# euca-describe-groups --region tessai-group2@group2 | grep DockerStack\r\n#\r\n{code}\r\n\r\n[~tony], \r\n\r\nThis was tested on [Group #2|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-Group#2].  \r\n\r\nEucalyptus version: 4.1.0-0.0.22975.327.20150113git527c000.el6\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-14T14:43:09.422-0600","updated":"2015-01-14T14:43:09.422-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/82214","id":"82214","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Reopening as when trying to reproduce EUCA-10352 I'm seeing stack deletion failures due to security group resources.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-19T22:30:53.012-0600","updated":"2015-01-19T22:30:53.012-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/82261","id":"82261","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"No longer seeing delete errors when using the IAM policy / template from EUCA-10352.\r\n\r\nhttps://eucalyptus.atlassian.net/browse/EUCA-10352?focusedCommentId=82120&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-82120","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-20T16:45:55.648-0600","updated":"2015-01-20T16:45:55.648-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33982/comment/82382","id":"82382","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nTested this out, and even though I ran into the issue mentioned in EUCA-10447, the routing tables and security groups were deleted successfully.  Therefore, this issue has been verified as fixed.\r\n\r\n*Steps*\r\n\r\n# On [Group #2 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-TypeofDeployments], applied following IAM access policy to a group under a given account:\r\n{code}\r\n# euare-grouplistpolicies -v -g Testers --region admin-hspencer2@group2\r\neuca10271-routetable-secgroup\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419017345024\",\r\n      \"Action\": [\r\n        \"ec2:AuthorizeSecurityGroupEgress\",\r\n        \"ec2:AuthorizeSecurityGroupIngress\",\r\n        \"ec2:CreateKeyPair\",\r\n        \"ec2:DeleteKeyPair\",\r\n        \"ec2:ImportKeyPair\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:CreateSecurityGroup\",\r\n        \"ec2:DescribeInstances\",\r\n        \"ec2:DescribeKeyPairs\",\r\n        \"ec2:DescribeSecurityGroups\",\r\n        \"ec2:CreateVpc\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:DescribeVpcs\",\r\n        \"ec2:DeleteVpc\",\r\n        \"ec2:CreateSubnet\",\r\n        \"ec2:DeleteSubnet\",\r\n        \"ec2:DeleteSecurityGroup\",\r\n        \"ec2:CreateRouteTable\",\r\n        \"ec2:CreateRoute\",\r\n        \"ec2:DeleteRouteTable\",\r\n        \"ec2:DeleteRoute\",\r\n        \"ec2:AllocateAddress\",\r\n        \"ec2:AssociateAddress\",\r\n        \"ec2:AssociateRouteTable\",\r\n        \"ec2:AttachInternetGateway\",\r\n        \"ec2:AttachNetworkInterface\",\r\n        \"ec2:CreateInternetGateway\",\r\n        \"ec2:CreateNetworkAcl\",\r\n        \"ec2:CreateNetworkAclEntry\",\r\n        \"ec2:CreateNetworkInterface\",\r\n        \"ec2:DeleteInternetGateway\",\r\n        \"ec2:DeleteNetworkAcl\",\r\n        \"ec2:DeleteNetworkAclEntry\",\r\n        \"ec2:DeleteNetworkInterface\",\r\n        \"ec2:DescribeAddresses\",\r\n        \"ec2:DescribeInternetGateways\",\r\n        \"ec2:DescribeNetworkAcls\",\r\n        \"ec2:DescribeNetworkInterfaceAttribute\",\r\n        \"ec2:DescribeNetworkInterfaces\",\r\n        \"ec2:DescribeRouteTables\",\r\n        \"ec2:DescribeSubnets\",\r\n        \"ec2:DetachInternetGateway\",\r\n        \"ec2:DetachNetworkInterface\",\r\n        \"ec2:DisassociateAddress\",\r\n        \"ec2:DisassociateRouteTable\",\r\n        \"ec2:ModifyNetworkInterfaceAttribute\",\r\n        \"ec2:ModifyVpcAttribute\",\r\n        \"ec2:ReleaseAddress\",\r\n        \"ec2:ReplaceNetworkAclAssociation\",\r\n        \"ec2:ReplaceNetworkAclEntry\",\r\n        \"ec2:ReplaceRoute\",\r\n        \"ec2:ReplaceRouteTableAssociation\",\r\n        \"ec2:ResetNetworkInterfaceAttribute\",\r\n        \"ec2:RevokeSecurityGroupEgress\",\r\n        \"ec2:RevokeSecurityGroupIngress\",\r\n        \"ec2:TerminateInstances\",\r\n        \"ec2:RunInstances\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n{code}\r\n# euare-grouplistusers -g Testers --region admin-hspencer2@group2\r\narn:aws:iam::804231923627:group/Testers\r\n   users\r\n   arn:aws:iam::804231923627:user/tessai\r\n{code}\r\n# After bundling, uploading and registering an [Ubuntu Cloud Image|http://images.objectstorage.cloud.qa1.eucalyptus-systems.com:8773/trusty-server-cloudimg-amd64-disk1-20150115.img], and creating a keypair, used the template mentioned in this ticket and created a Cloudformation stack:\r\n{code}\r\n# euform-create-stack UbuntuVividStackV2 --parameter \"KeyPair2DefaultKP=tessai\" --template-file cfn-euca10271-template.json --region tessai-group2@group2\r\narn:aws:cloudformation::804231923627:stack/UbuntuVividStackV2/52b91ba0-ca3f-4c23-8a58-0f6a7b1e6ece\r\n{code}\r\n# Stack fails to deploy due to issue mentioned in EUCA-10447, however, once the rollback is complete, its observed that all resources have been deleted successfully (which was the original issue raised with this ticket):\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tUbuntuVividStackV2\tROLLBACK_COMPLETE\t\tCloudformation generated by VisualOps\t2015-01-22T01:18:59.425Z\r\n\r\n# euform-describe-stack-resources -n UbuntuVividStackV2 --region tessai-group2@group2\r\nRESOURCE\tSecurityGroup2DefaultSG2Egress20\tUbuntuVividStackV2-SecurityGroup2DefaultSG2Egress20-EAVOI0IUCP01R\tAWS::EC2::SecurityGroupEgress\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT02AssociationSet22\trtbassoc-73f1cdf9\tAWS::EC2::SubnetRouteTableAssociation\t\tDELETE_COMPLETE\r\nRESOURCE\tInternetGateway2Internetgateway\tigw-4402d305\tAWS::EC2::InternetGateway\t\tDELETE_COMPLETE\r\nRESOURCE\tNetworkInterface2host0eni0\teni-ec7960aa\tAWS::EC2::NetworkInterface\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT02RouteSet21\tUbuntuVividStackV2-RouteTable2RT02RouteSet21-2H86UJQBY82JR\tAWS::EC2::Route\t\tDELETE_COMPLETE\r\nRESOURCE\tVPC2vpc\tvpc-c4e6fb3b\tAWS::EC2::VPC\t\tDELETE_COMPLETE\r\nRESOURCE\tNetworkAcl2DefaultACL\tacl-a61905fe\tAWS::EC2::NetworkAcl\t\tDELETE_COMPLETE\r\nRESOURCE\tRouteTable2RT0\trtb-120ea3be\tAWS::EC2::RouteTable\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2Ingress20\t\tAWS::EC2::SecurityGroupIngress\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2IpPermissions22\tSecurityGroup2DefaultSG2IpPermissions22\tAWS::EC2::SecurityGroupIngress\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG2IpPermissionsEgress20\t\tAWS::EC2::SecurityGroupEgress\t\tDELETE_COMPLETE\r\nRESOURCE\tSecurityGroup2DefaultSG\tsg-93087bde\tAWS::EC2::SecurityGroup\t\tDELETE_COMPLETE\r\nRESOURCE\tSubnet2subnet0\tsubnet-81cefa86\tAWS::EC2::Subnet\t\tDELETE_COMPLETE\r\nRESOURCE\tAttachInternetGateway\tUbuntuVividStackV2-AttachInternetGateway-K0LINVN6YVXJ9\tAWS::EC2::VPCGatewayAttachment\t\tDELETE_COMPLETE\r\nRESOURCE\tNetworkAcl2DefaultACL2AssociationSet20\taclassoc-5e367f55\tAWS::EC2::SubnetNetworkAclAssociation\t\tDELETE_COMPLETE\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-21T20:34:33.645-0600","updated":"2015-01-21T20:34:33.645-0600"}],"maxResults":9,"total":9,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}