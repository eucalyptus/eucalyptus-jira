{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"21130","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21130","key":"EUCA-6064","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10602","id":"10602","description":"Eucalyptus 3.3.0","name":"3.3.0","archived":false,"released":true,"releaseDate":"2013-06-18"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2013-05-08T08:12:24.112-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6064/watchers","watchCount":2,"isWatching":false},"created":"2013-05-06T21:36:40.641-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10300":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10602","id":"10602","description":"Eucalyptus 3.3.0","name":"3.3.0","archived":false,"released":true,"releaseDate":"2013-06-18"}],"customfield_11901":null,"issuelinks":[{"id":"17903","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/17903","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"21201","key":"EUCA-6116","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21201","fields":{"summary":"cannot detach volume after migrating instance with volume attached ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"updated":"2013-05-10T06:52:58.154-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Hi All,\r\n\r\nTrying to detach an EBS volume from a running instance, it seems to logout from the iSCSI session but there are errors in nc.log as well as the volume is shown as \"attached on the CLC when euca-describe-volumes is run, please see below\r\n\r\n{code}\r\n2013-05-06 19:29:02 DEBUG 000032092 doDetachVolume           handlers.c:2908                   | [i-CF7D3EDF][vol-64D43D61] volume detaching (localDev=/dev/vdb force=0 grab_inst_sem=1)\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89750 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89750 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f896c0 locking\r\n2013-05-06 19:29:02 TRACE 000032092 lock_hypervisor_conn     handlers.c:693                    | process check for libvirt succeeded\r\n2013-05-06 19:29:02 TRACE 000032092 lock_hypervisor_conn     handlers.c:733                    | thread check for libvirt succeeded\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89750 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f897e0 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f897e0 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89750 unlocking\r\n2013-05-06 19:29:02 DEBUG 000032092 get_iscsi_target         iscsi.c:272                       | invoking `//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/get_iscsitarget.pl /,,,,frVBHQqp28V8jYQKu47Qj8GB9+kA+94re7dD7W1HJEoMsEuX0M7v5unu3I1VDii/bAG0H1MtCQT160ADB45Ibysyl3HDoW8PjOacQtlRt8yGyWmc+i5UVEHnD/IKFj91j/VGcVQwiRkZ5Bp1kVeDb1yRNyRfZINBXnX07JbQsVBMJsx5MDgAx+PhYeHo7zC6RIYn1s8XMmjXnLBIcW7by++Oz8tsaDctmnPkCOHw3bzFyt2jLf+3ewR5GUqBfqLV6XsTc34ROqSK2ZWJTJ9K44Wu9E3B6i3yKJnDhrVgLsLdtCTMux6TgXqkBvG52DDj3ZwW0ZVy6mYIeMDSpK2ZqA==,,10.104.1.150,iqn.2009-06.com.eucalyptus.cloud33:store1`\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f91f10 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f91f10 unlocking\r\n2013-05-06 19:29:02 DEBUG 000032092 get_iscsi_target         iscsi.c:277                       | get storage script returned: 0, stdout: '/dev/disk/by-id/scsi-1IET_00010001', stderr: ''\r\n2013-05-06 19:29:02 TRACE 000032092 system_output            misc.c:879                        | [euca_rootwrap getstats.pl]\r\n2013-05-06 19:29:02 EXTRE 000032092 fp2str                   misc.c:835                        | enlarged buf to 512\r\n2013-05-06 19:29:02 EXTRE 000032092 fp2str                   misc.c:847                        | read 0 characters so far (max=512, last=yes)\r\n2013-05-06 19:29:02 TRACE 000032092 getstat_generate         sensor.c:315                      | getstats.pl output:\r\n\r\n2013-05-06 19:29:02 DEBUG 000032092 sensor_refresh_resources sensor.c:1852                     | polled statistics for 0 instance(s)\r\n2013-05-06 19:29:02 DEBUG 000032092 sensor_refresh_resources sensor.c:1872                     | unable to get metrics for instance i-CF7D3EDF (OK if it was terminated---should soon expire from the cache)\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 DEBUG 000032092 sensor_expire_cache_entr sensor.c:538                      | invoked\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f896c0 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89750 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f897e0 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f897e0 unlocking\r\n2013-05-06 19:29:02 TRACE 000032092 get_xpath_content        xml.c:817                         | searching for '/domain/devices/disk/target[@dev]/@dev' in '/var/lib/eucalyptus/instances/work/JKNGWXBONBRB9YYBRE2H3/i-CF7D3EDF/instance-libvirt.xml'\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 TRACE 000032092 get_xpath_content        xml.c:817                         | searching for '/disk/target[@dev]/@dev' in '/var/lib/eucalyptus/instances/work/JKNGWXBONBRB9YYBRE2H3/i-CF7D3EDF/vol-64D43D61-libvirt.xml'\r\n2013-05-06 19:29:02 TRACE 000032092 error_handler            xml.c:592                         | ERROR from XML2/XSLT {I/O warning : failed to load external entity \"/var/lib/eucalyptus/instances/work/JKNGWXBONBRB9YYBRE2H3/i-CF7D3EDF/vol-64D43D61-libvirt.xml\"}\r\n2013-05-06 19:29:02 DEBUG 000032092 get_xpath_content        xml.c:843                         | failed to parse XML in '/var/lib/eucalyptus/instances/work/JKNGWXBONBRB9YYBRE2H3/i-CF7D3EDF/vol-64D43D61-libvirt.xml'\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f89480 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89480 unlocking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f89750 unlocking\r\n2013-05-06 19:29:02 TRACE 000032092 doDetachVolume           handlers_default.c:1305           | [i-CF7D3EDF][vol-64D43D61] Disconnecting EBS volume to local host\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f899b0 locking\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f899b0 unlocking\r\n2013-05-06 19:29:02 TRACE 000032092 get_service_url          handlers.c:315                    | Found enabled service URI for service type storage as http://10.104.1.150:8773/services/Storage\r\n2013-05-06 19:29:02 TRACE 000032092 doDetachVolume           handlers_default.c:1307           | [i-CF7D3EDF][vol-64D43D61] Using SC Url: http://10.104.1.150:8773/services/Storage\r\n2013-05-06 19:29:02 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:436                   | Disconnecting an EBS volume\r\n2013-05-06 19:29:02 TRACE 000032092 deserialize_volume       ebs_utils.c:286                   | Parsed volume: vol-64D43D61\r\n2013-05-06 19:29:02 TRACE 000032092 deserialize_volume       ebs_utils.c:289                   | Parse token: mY2i8h2wPSs5IiDzSMjUrK5PVA3ViwtakJadANDWdRwwvR4r7WMQjoHlUTnlOX4VQO4TN3qAuLHZcEPp\r\n2013-05-06 19:29:02 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:444                   | Requesting volume lock\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f969f0 locking\r\n2013-05-06 19:29:02 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:448                   | Got volume lock\r\n2013-05-06 19:29:02 DEBUG 000032092 cleanup_volume_attachmen ebs_utils.c:528                   | [vol-64D43D61] attempting to disconnect iscsi target\r\n2013-05-06 19:29:02 TRACE 000032092 disconnect_iscsi_target  iscsi.c:245                       | invoking `//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/disconnect_iscsitarget.pl /,,,,frVBHQqp28V8jYQKu47Qj8GB9+kA+94re7dD7W1HJEoMsEuX0M7v5unu3I1VDii/bAG0H1MtCQT160ADB45Ibysyl3HDoW8PjOacQtlRt8yGyWmc+i5UVEHnD/IKFj91j/VGcVQwiRkZ5Bp1kVeDb1yRNyRfZINBXnX07JbQsVBMJsx5MDgAx+PhYeHo7zC6RIYn1s8XMmjXnLBIcW7by++Oz8tsaDctmnPkCOHw3bzFyt2jLf+3ewR5GUqBfqLV6XsTc34ROqSK2ZWJTJ9K44Wu9E3B6i3yKJnDhrVgLsLdtCTMux6TgXqkBvG52DDj3ZwW0ZVy6mYIeMDSpK2ZqA==,,10.104.1.150,iqn.2009-06.com.eucalyptus.cloud33:store1 norescan`\r\n2013-05-06 19:29:02 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f91f10 locking\r\n2013-05-06 19:29:03 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f91f10 unlocking\r\n2013-05-06 19:29:03 DEBUG 000032092 disconnect_iscsi_target  iscsi.c:250                       | disconnect script returned: 0, stdout: '', stderr: ''\r\n2013-05-06 19:29:03 TRACE 000032092 cleanup_volume_attachmen ebs_utils.c:536                   | Calling scClientCall with url: http://10.104.1.150:8773/services/Storage and token mY2i8h2wPSs5IiDzSMjUrK5PVA3ViwtakJadANDWdRwwvR4r7WMQjoHlUTnlOX4VQO4TN3qAuLHZcEPp\r\n2013-05-06 19:29:03 TRACE 000032092 scClientCall             storage-controller.c:129          | invoked: scOps=UnexportVolume scURL=http://10.104.1.150:8773/services/Storage timeout=20\r\n2013-05-06 19:29:03 TRACE 000005616 scClientCall             storage-controller.c:162          | Configuring and Initializing WS-SEC for SC Client\r\n2013-05-06 19:29:03 TRACE 000005616 scClientCall             storage-controller.c:169          | \tscOps=UnexportVolume ppid=32092 client calling 'UnexportVolume'\r\n2013-05-06 19:29:03 TRACE 000005616 scClientCall             storage-controller.c:208          | Calling Unexport Volume Stub\r\n2013-05-06 19:29:04 ERROR 000005616 scUnexportVolumeStub     sc-client-marshal-adb.c:372       | operation on 10.104.1.150 could not be invoked (check SC host, port, and credentials)\r\n2013-05-06 19:29:04 TRACE 000005616 scClientCall             storage-controller.c:215          | \tscOps=UnexportVolume ppid=32092 done calling 'UnexportVolume' with exit code '-1'\r\n2013-05-06 19:29:04 DEBUG 000032092 scClientCall             storage-controller.c:277          | \tdone scOps=UnexportVolume clientrc=1 opFail=0\r\n2013-05-06 19:29:04 ERROR 000032092 cleanup_volume_attachmen ebs_utils.c:539                   | ERROR unexporting volume vol-64D43D61\r\n2013-05-06 19:29:04 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:451                   | cleanup_volume_attachment returned: 1\r\n2013-05-06 19:29:04 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:454                   | Releasing volume lock\r\n2013-05-06 19:29:04 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f969f0 unlocking\r\n2013-05-06 19:29:04 TRACE 000032092 disconnect_ebs_volume    ebs_utils.c:457                   | Released volume lock\r\n2013-05-06 19:29:04 ERROR 000032092 doDetachVolume           handlers_default.c:1310           | [i-CF7D3EDF][vol-64D43D61] failed to disconnect iscsi target\r\n2013-05-06 19:29:04 DEBUG 000032092 doDetachVolume           handlers_default.c:1322           | [i-CF7D3EDF][vol-64D43D61] remote device string: ,,,frVBHQqp28V8jYQKu47Qj8GB9+kA+94re7dD7W1HJEoMsEuX0M7v5unu3I1VDii/bAG0H1MtCQT160ADB45Ibysyl3HDoW8PjOacQtlRt8yGyWmc+i5UVEHnD/IKFj91j/VGcVQwiRkZ5Bp1kVeDb1yRNyRfZINBXnX07JbQsVBMJsx5MDgAx+PhYeHo7zC6RIYn1s8XMmjXnLBIcW7by++Oz8tsaDctmnPkCOHw3bzFyt2jLf+3ewR5GUqBfqLV6XsTc34ROqSK2ZWJTJ9K44Wu9E3B6i3yKJnDhrVgLsLdtCTMux6TgXqkBvG52DDj3ZwW0ZVy6mYIeMDSpK2ZqA==,,10.104.1.150,iqn.2009-06.com.eucalyptus.cloud33:store1\r\n2013-05-06 19:29:04 ERROR 000032092 ncDetachVolumeMarshal    server-marshal.c:852              | [i-CF7D3EDF][vol-64D43D61] failed error=1\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_prolaag              ipc.c:371                         | 0x7f9742f89750 locking\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_prolaag              ipc.c:371                         | 0x7f9742f896c0 locking\r\n2013-05-06 19:29:05 TRACE 000032122 lock_hypervisor_conn     handlers.c:693                    | process check for libvirt succeeded\r\n2013-05-06 19:29:05 TRACE 000032122 lock_hypervisor_conn     handlers.c:733                    | thread check for libvirt succeeded\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_verhogen             ipc.c:436                         | 0x7f9742f896c0 unlocking\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_prolaag              ipc.c:371                         | 0x7f9742f897e0 locking\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_verhogen             ipc.c:436                         | 0x7f9742f897e0 unlocking\r\n2013-05-06 19:29:05 EXTRE 000032122 sem_verhogen             ipc.c:436                         | 0x7f9742f89750 unlocking\r\n2013-05-06 19:29:07 TRACE 000032092 doDescribeResource       handlers.c:2818                   | updating service state infos\r\n2013-05-06 19:29:07 TRACE 000032092 updateServiceStateInfo   handlers.c:375                    | Updating NC's topology/service state info: pMeta: userId=eucalyptus correlationId=(null)\r\n2013-05-06 19:29:07 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f899b0 locking\r\n2013-05-06 19:29:07 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f899b0 unlocking\r\n2013-05-06 19:29:07 TRACE 000032092 updateServiceStateInfo   handlers.c:404                    | Updating VBR localhost config sc url to: http://10.104.1.150:8773/services/Storage\r\n2013-05-06 19:29:07 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f96d90 locking\r\n2013-05-06 19:29:07 EXTRE 000032092 sem_verhogen             ipc.c:436                         | 0x7f9742f96d90 unlocking\r\n2013-05-06 19:29:07 EXTRE 000032092 sem_prolaag              ipc.c:371                         | 0x7f9742f899b0 locking\r\n2013-05-06 19:29:07 TRACE 000032092 printNCServiceStateInfo  handlers.c:328                    | Printing 5 services\r\n2013-05-06 19:29:07 TRACE 000032092 printNCServiceStateInfo  handlers.c:330                    | Service - cluster-01 cloud33 cluster http://10.104.1.150:8774/axis2/services/EucalyptusCC\r\n2013-05-06 19:29:07 TRACE 000032092 printNCServiceStateInfo  handlers.c:330                    | Service - 10.104.1.150 eucalyptus dns http://10.104.1.150:8773/services/Dns\r\n2013-05-06 19:29:07 TRACE 000032092 printNCServiceStateInfo  handlers.c:330                    | Service - 10.104.1.150 eucalyptus eucalyptus http://10.104.1.150:8773/services/Eucalyptus\r\n2013-05-06 19:29:07 TRACE 000032092 printNCServiceStateInfo  handlers.c:330                    | Service - sc-01 cloud33 storage http://10.104.1.150:8773/services/Storage\r\n{code}\r\n\r\nIf you have any question please let us know.\r\n\r\nCheers!\r\nDeependra","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"cannot detach EBS volume from an instance","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"customfield_12100":"0|i020zb:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"10000_*:*_1_*:*_124543485_*|*_6_*:*_1_*:*_0","customfield_10001":"2013-05-07T13:16:11.419-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dshekhawat(dshekhawat)","dmitrii(dmitrii)","zhill(zhill)"],"customfield_10116":null,"customfield_10117":null,"environment":"git commit ID 5d2a5e2d6a3cce14ddbf075949944585016b8af5 , freshly setup","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6064/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21130/comment/44956","id":"44956","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Could [~zhill] comment on this, please?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-05-07T13:16:11.419-0500","updated":"2013-05-07T13:16:11.419-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21130/comment/45074","id":"45074","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"OK. So I applied this commit on my setup https://github.com/eucalyptus/eucalyptus/commit/60494e29d3c0ee9b233d884f2d6879d273fbe09d , and freshly installed it again. Now I can detach the volume without any issue.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2013-05-08T06:23:20.566-0500","updated":"2013-05-08T06:23:20.566-0500"}],"maxResults":2,"total":2,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}