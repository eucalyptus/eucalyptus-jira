{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"46436","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436","key":"EUCA-12616","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2016-08-01T13:03:24.677-0500","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12616/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2016-07-29T23:43:11.088-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"}],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2016-08-01T13:03:24.695-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11503","id":"11503","name":"IAM"}],"timeoriginalestimate":null,"description":"*Eucalyptus Version*\r\n\r\n{{4.3.0-0.25028.367.20160718git860ea5c.el7}}\r\n\r\n*Signs*\r\n\r\nUsing the following IAM policy testing quotas:\r\n{code}\r\n{\r\n \"Statement\": [\r\n   {\r\n     \"Action\": [\"*\" ],\r\n     \"Effect\": \"Limit\",\r\n     \"Resource\": \"*\",\r\n     \"Condition\": { \"NumericLessThanEquals\":{\"s3:quota-buckettotalsize\": \"25\"}}\r\n   }\r\n ]\r\n}\r\n{code}\r\nA user (user 2) wasn't able to create buckets using AWS CLI.  However, another user (user 1) with an IAM policy that allowed all actions was able to create a bucket.\r\n\r\n_User 2 Experience_\r\n{code}\r\n[root@g-12-12 ~]# euare-userlistpolicies -u eng-test2 --region eng-test1@ -v\r\nbucket-total-size-25\r\n{\r\n \"Statement\": [\r\n   {\r\n     \"Action\": [\"*\" ],\r\n     \"Effect\": \"Limit\",\r\n     \"Resource\": \"*\",\r\n     \"Condition\": { \"NumericLessThanEquals\":{\"s3:quota-buckettotalsize\": \"25\"}}\r\n   }\r\n ]\r\n}\r\n\r\n[root@g-12-12 ~]# aws --endpoint-url http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://bucket-eng-test --profile eng-test2 --debug\r\n2016-07-29 21:40:19,708 - MainThread - awscli.clidriver - DEBUG - CLI version: aws-cli/1.10.51 Python/2.7.5 Linux/3.10.0-327.22.2.el7.x86_64 botocore/1.4.41\r\n2016-07-29 21:40:19,708 - MainThread - awscli.clidriver - DEBUG - Arguments entered to CLI: ['--endpoint-url', 'http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/', 's3', 'mb', 's3://bucket-eng-test', '--profile', 'eng-test2', '--debug']\r\n2016-07-29 21:40:19,709 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function add_scalar_parsers at 0x34ece60>\r\n2016-07-29 21:40:19,709 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function inject_assume_role_provider_cache at 0x3255500>\r\n2016-07-29 21:40:19,709 - MainThread - botocore.hooks - DEBUG - Event building-command-table.s3: calling handler <function add_waiters at 0x34fb1b8>\r\n2016-07-29 21:40:19,710 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.custom.s3.anonymous: calling handler <function uri_param at 0x307ec08>\r\n2016-07-29 21:40:19,711 - MainThread - botocore.hooks - DEBUG - Event building-command-table.mb: calling handler <function add_waiters at 0x34fb1b8>\r\n2016-07-29 21:40:19,711 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.custom.mb.paths: calling handler <function uri_param at 0x307ec08>\r\n2016-07-29 21:40:19,712 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: assume-role\r\n2016-07-29 21:40:19,712 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: shared-credentials-file\r\n2016-07-29 21:40:19,712 - MainThread - botocore.credentials - INFO - Found credentials in shared credentials file: ~/.aws/credentials\r\n2016-07-29 21:40:19,720 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /usr/lib/python2.7/site-packages/botocore/data/endpoints.json\r\n2016-07-29 21:40:19,746 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /usr/lib/python2.7/site-packages/botocore/data/s3/2006-03-01/service-2.json\r\n2016-07-29 21:40:19,785 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-29 21:40:19,789 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x2d9d5f0>\r\n2016-07-29 21:40:19,789 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2d97cf8>\r\n2016-07-29 21:40:19,792 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-29 21:40:19,793 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-29 21:40:19,794 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-29 21:40:19,796 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x2d9d5f0>\r\n2016-07-29 21:40:19,796 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2d97cf8>\r\n2016-07-29 21:40:19,800 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-29 21:40:19,801 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-29 21:40:19,801 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-29 21:40:19,803 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x2d9d5f0>\r\n2016-07-29 21:40:19,803 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2d97cf8>\r\n2016-07-29 21:40:19,806 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-29 21:40:19,807 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-29 21:40:19,808 - MainThread - awscli.customizations.s3.s3handler - DEBUG - Using a multipart threshold of 8388608 and a part size of 8388608\r\n2016-07-29 21:40:19,808 - MainThread - awscli.customizations.s3.executor - DEBUG - Using max queue size for s3 tasks of: 1000\r\n2016-07-29 21:40:19,808 - MainThread - awscli.customizations.s3.s3handler - DEBUG - Using a multipart threshold of 8388608 and a part size of 8388608\r\n2016-07-29 21:40:19,808 - MainThread - awscli.customizations.s3.executor - DEBUG - Using max queue size for s3 tasks of: 2\r\n2016-07-29 21:40:19,809 - MainThread - awscli.customizations.s3.executor - DEBUG - Using a threadpool size of: 10\r\n2016-07-29 21:40:19,813 - MainThread - awscli.customizations.s3.executor - DEBUG - Submitting task: <awscli.customizations.s3.tasks.BasicTask object at 0x3d954d0>\r\n2016-07-29 21:40:19,813 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,813 - Thread-5 - awscli.customizations.s3.executor - DEBUG - Worker thread invoking task: <awscli.customizations.s3.tasks.BasicTask object at 0x3d954d0>\r\n2016-07-29 21:40:19,814 - Thread-5 - botocore.hooks - DEBUG - Event before-parameter-build.s3.CreateBucket: calling handler <function validate_bucket_name at 0x2ddc140>\r\n2016-07-29 21:40:19,813 - Thread-6 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,814 - Thread-5 - botocore.hooks - DEBUG - Event before-parameter-build.s3.CreateBucket: calling handler <bound method S3RegionRedirector.redirect_from_cache of <botocore.utils.S3RegionRedirector object at 0x3c8b2d0>>\r\n2016-07-29 21:40:19,815 - Thread-5 - botocore.hooks - DEBUG - Event before-call.s3.CreateBucket: calling handler <function add_expect_header at 0x2ddc578>\r\n2016-07-29 21:40:19,815 - Thread-5 - botocore.hooks - DEBUG - Event before-call.s3.CreateBucket: calling handler <bound method S3RegionRedirector.set_request_url of <botocore.utils.S3RegionRedirector object at 0x3c8b2d0>>\r\n2016-07-29 21:40:19,815 - Thread-5 - botocore.endpoint - DEBUG - Making request for OperationModel(name=CreateBucket) (verify_ssl=True) with params: {'body': '', 'url': u'http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/bucket-eng-test', 'headers': {'User-Agent': 'aws-cli/1.10.51 Python/2.7.5 Linux/3.10.0-327.22.2.el7.x86_64 botocore/1.4.41'}, 'context': {'client_region': 'us-east-1', 'signing': {'bucket': u'bucket-eng-test'}, 'has_streaming_input': False, 'client_config': <botocore.config.Config object at 0x3c79b10>}, 'query_string': {}, 'url_path': u'/bucket-eng-test', 'method': u'PUT'}\r\n2016-07-29 21:40:19,815 - Thread-5 - botocore.hooks - DEBUG - Event request-created.s3.CreateBucket: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x3c79a10>>\r\n2016-07-29 21:40:19,816 - Thread-5 - botocore.auth - DEBUG - Calculating signature using hmacv1 auth.\r\n2016-07-29 21:40:19,816 - Thread-5 - botocore.auth - DEBUG - HTTP request method: PUT\r\n2016-07-29 21:40:19,816 - Thread-5 - botocore.auth - DEBUG - StringToSign:\r\nPUT\r\n\r\n\r\nSat, 30 Jul 2016 04:40:19 GMT\r\n/bucket-eng-test\r\n2016-07-29 21:40:19,823 - Thread-5 - botocore.endpoint - DEBUG - Sending http request: <PreparedRequest [PUT]>\r\n2016-07-29 21:40:19,813 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,823 - Thread-7 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,824 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,824 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,824 - Thread-8 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,825 - Thread-5 - botocore.vendored.requests.packages.urllib3.connectionpool - INFO - Starting new HTTP connection (1): s3.d-30.autoqa.qa1.eucalyptus-systems.com\r\n2016-07-29 21:40:19,824 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,825 - Thread-9 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,825 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,826 - Thread-10 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,826 - Thread-11 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,826 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,826 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,826 - Thread-12 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,826 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,827 - Thread-13 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,827 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-29 21:40:19,827 - Thread-14 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,827 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-5, started daemon 139948544153344)>\r\n2016-07-29 21:40:19,900 - Thread-5 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /bucket-eng-test HTTP/1.1\" 403 254\r\n2016-07-29 21:40:19,902 - Thread-5 - botocore.parsers - DEBUG - Response headers: {'content-length': '254', 'server': 'Eucalyptus/4.3.0', 'connection': 'close', 'x-amz-request-id': '08afff00-a671-450b-92e5-3e05c7f04352', 'date': 'Sat, 30 Jul 2016 04:40:19 GMT', 'content-type': 'application/xml'}\r\n2016-07-29 21:40:19,902 - Thread-5 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>AccessDenied</Code><Message>Access Denied</Message><Resource>bucket-eng-test</Resource><RequestId>08afff00-a671-450b-92e5-3e05c7f04352</RequestId></Error>\r\n2016-07-29 21:40:19,902 - Thread-5 - botocore.hooks - DEBUG - Event needs-retry.s3.CreateBucket: calling handler <botocore.retryhandler.RetryHandler object at 0x3bc22d0>\r\n2016-07-29 21:40:19,902 - Thread-5 - botocore.retryhandler - DEBUG - No retry needed.\r\n2016-07-29 21:40:19,903 - Thread-5 - botocore.hooks - DEBUG - Event needs-retry.s3.CreateBucket: calling handler <bound method S3RegionRedirector.redirect_from_error of <botocore.utils.S3RegionRedirector object at 0x3c8b2d0>>\r\n2016-07-29 21:40:19,903 - Thread-5 - botocore.hooks - DEBUG - Event after-call.s3.CreateBucket: calling handler <function enhance_error_msg at 0x34ecb90>\r\n2016-07-29 21:40:19,903 - Thread-5 - awscli.customizations.s3.tasks - DEBUG - An error occurred () when calling the CreateBucket operation:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/awscli/customizations/s3/tasks.py\", line 95, in _execute_task\r\n    getattr(filename, filename.operation_name)(**kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/awscli/customizations/s3/fileinfo.py\", line 145, in make_bucket\r\n    self.client.create_bucket(**params)\r\n  File \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 278, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 572, in _make_api_call\r\n    raise ClientError(parsed_response, operation_name)\r\nClientError: An error occurred () when calling the CreateBucket operation:\r\n2016-07-29 21:40:19,905 - Thread-5 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-29 21:40:19,905 - Thread-1 - awscli.customizations.s3.executor - DEBUG - Received print task: PrintTask(message=u'make_bucket failed: s3://bucket-eng-test/ An error occurred () when calling the CreateBucket operation: ', error=True, total_parts=None, warning=None)\r\nmake_bucket failed: s3://bucket-eng-test/ An error occurred () when calling the CreateBucket operation:\r\n2016-07-29 21:40:19,941 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-5, stopped daemon 139948544153344)>\r\n2016-07-29 21:40:19,941 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-6, stopped daemon 139948535760640)>\r\n2016-07-29 21:40:19,941 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-6, stopped daemon 139948535760640)>\r\n2016-07-29 21:40:19,941 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-7, stopped daemon 139948527367936)>\r\n2016-07-29 21:40:19,941 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-7, stopped daemon 139948527367936)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-8, stopped daemon 139948518975232)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-8, stopped daemon 139948518975232)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-9, stopped daemon 139948510582528)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-9, stopped daemon 139948510582528)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-10, stopped daemon 139948502189824)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-10, stopped daemon 139948502189824)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-11, stopped daemon 139948019676928)>\r\n2016-07-29 21:40:19,942 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-11, stopped daemon 139948019676928)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-12, stopped daemon 139948011284224)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-12, stopped daemon 139948011284224)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-13, stopped daemon 139948002891520)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-13, stopped daemon 139948002891520)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-14, stopped daemon 139947994498816)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-14, stopped daemon 139947994498816)>\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for result thread.\r\n2016-07-29 21:40:19,943 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for IO thread.\r\n2016-07-29 21:40:19,944 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for result thread to shutdown.\r\n\r\n2016-07-29 21:40:19,944 - Thread-1 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in print thread, shutting down print thread.\r\n2016-07-29 21:40:19,944 - Thread-2 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in IO thread, shutting down.\r\n2016-07-29 21:40:19,944 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for IO thread to shutdown.\r\n2016-07-29 21:40:19,944 - MainThread - awscli.customizations.s3.executor - DEBUG - All threads have been shutdown.\r\n{code}\r\n\r\n_User 1 Experience_\r\n{code}\r\n[root@g-12-12 ~]# euare-grouplistusers -g Admins --region eng-admin@\r\narn:aws:iam::000423915653:group/Admins\r\n   users\r\n   arn:aws:iam::000423915653:user/eng-test1\r\n[root@g-12-12 ~]# euare-grouplistpolicies -g Admins --region eng-admin@ -v\r\nallow-all\r\n{\r\n  \"Version\":\"2011-04-01\",\r\n  \"Statement\":[{\r\n    \"Sid\":\"1\",\r\n    \"Effect\":\"Allow\",\r\n    \"Action\":\"*\",\r\n    \"Resource\":\"*\",\r\n  }]\r\n}\r\n\r\n[root@g-12-12 ~]# aws --endpoint-url http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://bucket-testing --profile eng-test1\r\nmake_bucket: s3://bucket-testing/\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"IAM \"Limit\" policy doesn't handle wildcard for \"Action\" element","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_220813610","customfield_12100":"0|i03vpb:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2016-08-01T11:18:08.456-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["hspencer(hspencer)","sjones(sjones)","vasya(vasya)"],"customfield_10116":null,"environment":"[hspencer-4554|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Master/4554/]","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107537","id":"107537","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"I also tried the following IAM quota:\r\n\r\n{code}\r\n[root@g-12-12 ~]# euare-userlistpolicies -u eng-test2 --region eng-test1@ -v\r\nbucket-total-size-25\r\n{\r\n \"Statement\": [\r\n   {\r\n     \"Action\": [\r\n        \"s3:*\"\r\n      ],\r\n     \"Effect\": \"Limit\",\r\n     \"Resource\": \"*\",\r\n     \"Condition\": { \"NumericLessThanEquals\":{\"s3:quota-buckettotalsize\": \"25\"}}\r\n   }\r\n ]\r\n}\r\n{code}\r\n\r\nResult was the same:\r\n{code}\r\n...\r\n2016-07-31 18:54:38,817 - Thread-5 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>AccessDenied</Code><Message>Access Denied</Message><Resource>bucket-eng-test</Resource><RequestId>793d4b21-b65a-4f4d-85a5-2244104ac3f2</RequestId></Error>\r\n...\r\n{code}\r\nFull debug thread below:\r\n{code}\r\n[[root@g-12-12 ~]#  aws --endpoint-url http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://bucket-eng-test --profile eng-test2\r\nmake_bucket failed: s3://bucket-eng-test/ An error occurred () when calling the CreateBucket operation:\r\n\r\n[root@g-12-12 ~]#  aws --endpoint-url http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://bucket-eng-test --profile eng-test2 --debug\r\n2016-07-31 18:54:38,654 - MainThread - awscli.clidriver - DEBUG - CLI version: aws-cli/1.10.51 Python/2.7.5 Linux/3.10.0-327.22.2.el7.x86_64 botocore/1.4.41\r\n2016-07-31 18:54:38,654 - MainThread - awscli.clidriver - DEBUG - Arguments entered to CLI: ['--endpoint-url', 'http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/', 's3', 'mb', 's3://bucket-eng-test', '--profile', 'eng-test2', '--debug']\r\n2016-07-31 18:54:38,654 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function add_scalar_parsers at 0x2a6ee60>\r\n2016-07-31 18:54:38,654 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function inject_assume_role_provider_cache at 0x27d7500>\r\n2016-07-31 18:54:38,654 - MainThread - botocore.hooks - DEBUG - Event building-command-table.s3: calling handler <function add_waiters at 0x2a7d1b8>\r\n2016-07-31 18:54:38,655 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.custom.s3.anonymous: calling handler <function uri_param at 0x2600c08>\r\n2016-07-31 18:54:38,655 - MainThread - botocore.hooks - DEBUG - Event building-command-table.mb: calling handler <function add_waiters at 0x2a7d1b8>\r\n2016-07-31 18:54:38,656 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.custom.mb.paths: calling handler <function uri_param at 0x2600c08>\r\n2016-07-31 18:54:38,656 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: assume-role\r\n2016-07-31 18:54:38,656 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: shared-credentials-file\r\n2016-07-31 18:54:38,656 - MainThread - botocore.credentials - INFO - Found credentials in shared credentials file: ~/.aws/credentials\r\n2016-07-31 18:54:38,657 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /usr/lib/python2.7/site-packages/botocore/data/endpoints.json\r\n2016-07-31 18:54:38,671 - MainThread - botocore.loaders - DEBUG - Loading JSON file: /usr/lib/python2.7/site-packages/botocore/data/s3/2006-03-01/service-2.json\r\n2016-07-31 18:54:38,705 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-31 18:54:38,709 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x231f5f0>\r\n2016-07-31 18:54:38,709 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2319cf8>\r\n2016-07-31 18:54:38,712 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-31 18:54:38,714 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-31 18:54:38,714 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-31 18:54:38,716 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x231f5f0>\r\n2016-07-31 18:54:38,716 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2319cf8>\r\n2016-07-31 18:54:38,719 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-31 18:54:38,719 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-31 18:54:38,720 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: s3\r\n2016-07-31 18:54:38,721 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_post at 0x231f5f0>\r\n2016-07-31 18:54:38,721 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.s3: calling handler <function add_generate_presigned_url at 0x2319cf8>\r\n2016-07-31 18:54:38,724 - MainThread - botocore.client - DEBUG - The s3 config key is not a dictionary type, ignoring its value of: None\r\n2016-07-31 18:54:38,725 - MainThread - botocore.endpoint - DEBUG - Setting s3 timeout as (60, 60)\r\n2016-07-31 18:54:38,725 - MainThread - awscli.customizations.s3.s3handler - DEBUG - Using a multipart threshold of 8388608 and a part size of 8388608\r\n2016-07-31 18:54:38,725 - MainThread - awscli.customizations.s3.executor - DEBUG - Using max queue size for s3 tasks of: 1000\r\n2016-07-31 18:54:38,725 - MainThread - awscli.customizations.s3.s3handler - DEBUG - Using a multipart threshold of 8388608 and a part size of 8388608\r\n2016-07-31 18:54:38,725 - MainThread - awscli.customizations.s3.executor - DEBUG - Using max queue size for s3 tasks of: 2\r\n2016-07-31 18:54:38,726 - MainThread - awscli.customizations.s3.executor - DEBUG - Using a threadpool size of: 10\r\n2016-07-31 18:54:38,729 - MainThread - awscli.customizations.s3.executor - DEBUG - Submitting task: <awscli.customizations.s3.tasks.BasicTask object at 0x33174d0>\r\n2016-07-31 18:54:38,729 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,729 - Thread-5 - awscli.customizations.s3.executor - DEBUG - Worker thread invoking task: <awscli.customizations.s3.tasks.BasicTask object at 0x33174d0>\r\n2016-07-31 18:54:38,731 - Thread-5 - botocore.hooks - DEBUG - Event before-parameter-build.s3.CreateBucket: calling handler <function validate_bucket_name at 0x235e140>\r\n2016-07-31 18:54:38,730 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,731 - Thread-5 - botocore.hooks - DEBUG - Event before-parameter-build.s3.CreateBucket: calling handler <bound method S3RegionRedirector.redirect_from_cache of <botocore.utils.S3RegionRedirector object at 0x320d2d0>>\r\n2016-07-31 18:54:38,730 - Thread-6 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,731 - Thread-5 - botocore.hooks - DEBUG - Event before-call.s3.CreateBucket: calling handler <function add_expect_header at 0x235e578>\r\n2016-07-31 18:54:38,731 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,732 - Thread-5 - botocore.hooks - DEBUG - Event before-call.s3.CreateBucket: calling handler <bound method S3RegionRedirector.set_request_url of <botocore.utils.S3RegionRedirector object at 0x320d2d0>>\r\n2016-07-31 18:54:38,731 - Thread-7 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,732 - Thread-5 - botocore.endpoint - DEBUG - Making request for OperationModel(name=CreateBucket) (verify_ssl=True) with params: {'body': '', 'url': u'http://s3.d-30.autoqa.qa1.eucalyptus-systems.com:8773/bucket-eng-test', 'headers': {'User-Agent': 'aws-cli/1.10.51 Python/2.7.5 Linux/3.10.0-327.22.2.el7.x86_64 botocore/1.4.41'}, 'context': {'client_region': 'us-east-1', 'signing': {'bucket': u'bucket-eng-test'}, 'has_streaming_input': False, 'client_config': <botocore.config.Config object at 0x31fbb10>}, 'query_string': {}, 'url_path': u'/bucket-eng-test', 'method': u'PUT'}\r\n2016-07-31 18:54:38,732 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,732 - Thread-5 - botocore.hooks - DEBUG - Event request-created.s3.CreateBucket: calling handler <bound method RequestSigner.handler of <botocore.signers.RequestSigner object at 0x31fba10>>\r\n2016-07-31 18:54:38,733 - Thread-5 - botocore.auth - DEBUG - Calculating signature using hmacv1 auth.\r\n2016-07-31 18:54:38,733 - Thread-5 - botocore.auth - DEBUG - HTTP request method: PUT\r\n2016-07-31 18:54:38,732 - Thread-8 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,733 - Thread-5 - botocore.auth - DEBUG - StringToSign:\r\nPUT\r\n\r\n\r\nMon, 01 Aug 2016 01:54:38 GMT\r\n/bucket-eng-test\r\n2016-07-31 18:54:38,740 - Thread-5 - botocore.endpoint - DEBUG - Sending http request: <PreparedRequest [PUT]>\r\n2016-07-31 18:54:38,733 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,733 - Thread-9 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,741 - Thread-10 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,741 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,742 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,742 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,742 - Thread-5 - botocore.vendored.requests.packages.urllib3.connectionpool - INFO - Starting new HTTP connection (1): s3.d-30.autoqa.qa1.eucalyptus-systems.com\r\n2016-07-31 18:54:38,742 - Thread-12 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,742 - Thread-11 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,743 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,743 - Thread-13 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,743 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for worker thread (priority: 11)\r\n2016-07-31 18:54:38,743 - Thread-14 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,743 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-5, started daemon 139669481735936)>\r\n2016-07-31 18:54:38,816 - Thread-5 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /bucket-eng-test HTTP/1.1\" 403 254\r\n2016-07-31 18:54:38,817 - Thread-5 - botocore.parsers - DEBUG - Response headers: {'content-length': '254', 'server': 'Eucalyptus/4.3.0', 'connection': 'close', 'x-amz-request-id': '793d4b21-b65a-4f4d-85a5-2244104ac3f2', 'date': 'Mon, 01 Aug 2016 01:54:38 GMT', 'content-type': 'application/xml'}\r\n2016-07-31 18:54:38,817 - Thread-5 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>AccessDenied</Code><Message>Access Denied</Message><Resource>bucket-eng-test</Resource><RequestId>793d4b21-b65a-4f4d-85a5-2244104ac3f2</RequestId></Error>\r\n2016-07-31 18:54:38,818 - Thread-5 - botocore.hooks - DEBUG - Event needs-retry.s3.CreateBucket: calling handler <botocore.retryhandler.RetryHandler object at 0x31442d0>\r\n2016-07-31 18:54:38,818 - Thread-5 - botocore.retryhandler - DEBUG - No retry needed.\r\n2016-07-31 18:54:38,818 - Thread-5 - botocore.hooks - DEBUG - Event needs-retry.s3.CreateBucket: calling handler <bound method S3RegionRedirector.redirect_from_error of <botocore.utils.S3RegionRedirector object at 0x320d2d0>>\r\n2016-07-31 18:54:38,818 - Thread-5 - botocore.hooks - DEBUG - Event after-call.s3.CreateBucket: calling handler <function enhance_error_msg at 0x2a6eb90>\r\n2016-07-31 18:54:38,819 - Thread-5 - awscli.customizations.s3.tasks - DEBUG - An error occurred () when calling the CreateBucket operation:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.7/site-packages/awscli/customizations/s3/tasks.py\", line 95, in _execute_task\r\n    getattr(filename, filename.operation_name)(**kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/awscli/customizations/s3/fileinfo.py\", line 145, in make_bucket\r\n    self.client.create_bucket(**params)\r\n  File \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 278, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/usr/lib/python2.7/site-packages/botocore/client.py\", line 572, in _make_api_call\r\n    raise ClientError(parsed_response, operation_name)\r\nClientError: An error occurred () when calling the CreateBucket operation:\r\n2016-07-31 18:54:38,840 - Thread-5 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in worker thread, shutting down worker thread.\r\n2016-07-31 18:54:38,840 - Thread-1 - awscli.customizations.s3.executor - DEBUG - Received print task: PrintTask(message=u'make_bucket failed: s3://bucket-eng-test/ An error occurred () when calling the CreateBucket operation: ', error=True, total_parts=None, warning=None)\r\nmake_bucket failed: s3://bucket-eng-test/ An error occurred () when calling the CreateBucket operation:\r\n2016-07-31 18:54:38,857 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-5, stopped daemon 139669481735936)>\r\n2016-07-31 18:54:38,857 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-6, stopped daemon 139669473343232)>\r\n2016-07-31 18:54:38,857 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-6, stopped daemon 139669473343232)>\r\n2016-07-31 18:54:38,857 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-7, stopped daemon 139669464950528)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-7, stopped daemon 139669464950528)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-8, stopped daemon 139669115238144)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-8, stopped daemon 139669115238144)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-9, stopped daemon 139669106845440)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-9, stopped daemon 139669106845440)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-10, stopped daemon 139669098452736)>\r\n2016-07-31 18:54:38,858 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-10, stopped daemon 139669098452736)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-11, stopped daemon 139669090060032)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-11, stopped daemon 139669090060032)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-12, stopped daemon 139669081667328)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-12, stopped daemon 139669081667328)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-13, stopped daemon 139669073274624)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-13, stopped daemon 139669073274624)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for thread to shutdown: <Worker(Thread-14, stopped daemon 139669064881920)>\r\n2016-07-31 18:54:38,859 - MainThread - awscli.customizations.s3.executor - DEBUG - Thread has been shutdown: <Worker(Thread-14, stopped daemon 139669064881920)>\r\n2016-07-31 18:54:38,860 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for result thread.\r\n2016-07-31 18:54:38,860 - MainThread - awscli.customizations.s3.executor - DEBUG - Queueing end sentinel for IO thread.\r\n\r\n2016-07-31 18:54:38,860 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for result thread to shutdown.\r\n2016-07-31 18:54:38,860 - Thread-1 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in print thread, shutting down print thread.\r\n2016-07-31 18:54:38,860 - Thread-2 - awscli.customizations.s3.executor - DEBUG - Shutdown request received in IO thread, shutting down.\r\n2016-07-31 18:54:38,860 - MainThread - awscli.customizations.s3.executor - DEBUG - Waiting for IO thread to shutdown.\r\n2016-07-31 18:54:38,861 - MainThread - awscli.customizations.s3.executor - DEBUG - All threads have been shutdown.\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-31T20:54:30.317-0500","updated":"2016-07-31T20:56:25.630-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107601","id":"107601","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"A user policy would be expected to restrict each user to the specified limit. It is expected that some users will be able to create buckets and other not if some users are under their quota and others have exceeded theirs.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T11:18:08.456-0500","updated":"2016-08-01T11:18:08.456-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107602","id":"107602","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], do you have User 1 and User 2 in the same account? Does this account have a quota?\r\n[~sjones], are you saying this is expected behavior?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T12:00:22.437-0500","updated":"2016-08-01T12:00:22.437-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107603","id":"107603","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vasya], user1 and user2 are in the same account, however the quota is on the user (user2), not the account.  In addition, there haven't been any buckets uploaded with any objects thats owned by the account.  Hope this helps.  Let me know if you need more information.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T12:09:52.602-0500","updated":"2016-08-01T12:09:52.602-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107604","id":"107604","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I was able to create buckets using a user with either the \"\\*\" or \"s3:\\*\" actions on a limit statement (so both example quota policies given). \r\n\r\nTo verify I configured the aws cli to use signature version 3:\r\n\r\n{code}\r\naws configure set default.s3.signature_version s3\r\n{code}\r\n\r\nand added a policy to the user allowing any s3 action:\r\n\r\n{code}\r\n{\r\n  \"Statement\":[{\r\n    \"Effect\":\"Allow\",\r\n    \"Action\":\"s3:*\",\r\n    \"Resource\": \"*\"\r\n  }]\r\n}\r\n{code}\r\n\r\n[~vasya], I don't think the mentioned policies would prevent bucket creation due to quota, I was just noting that it is expected for user policies to have different results based on the user.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T12:11:30.933-0500","updated":"2016-08-01T12:15:19.978-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107605","id":"107605","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones], is there something wrong with my policy?  I am not getting the same behavior that you are describing - even after I set {{aws configure set default.s3.signature_version s3}}.  *Note* User 1 was able to create a bucket just fine without setting that AWS CLI flag.  \r\n\r\nWhat version of Eucalyptus are you using?  I am using {{4.3.0-0.25028.367.20160718git860ea5c.el7}}\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T12:17:52.404-0500","updated":"2016-08-01T12:18:57.447-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107606","id":"107606","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], the limit policies you attached work for me. Does the user have permission to create buckets?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T12:26:59.372-0500","updated":"2016-08-01T12:26:59.372-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46436/comment/107607","id":"107607","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Confirm that this was not a bug.  The issue was around understanding how \"Limit\" policies evaluated actions.  Using the policy below, I was able to confirm quotas were working.\r\n\r\n{code}\r\n[root@g-12-12 ~]# euare-userlistpolicies -u eng-test2 --region eng-test1@ -v\r\nbucket-total-size-25\r\n{\r\n \"Statement\": [\r\n   {\r\n      \"Action\": \"s3:*\",\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n   },\r\n   {\r\n     \"Action\": [\r\n        \"s3:PutObject\",\r\n        \"s3:PutObjectAcl\",\r\n        \"s3:PutObjectVersionAcl\"\r\n      ],\r\n     \"Effect\": \"Limit\",\r\n     \"Resource\": \"*\",\r\n     \"Condition\": { \"NumericLessThanEquals\":{\"s3:quota-buckettotalsize\": \"25\"}}\r\n   }\r\n ]\r\n}\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-08-01T13:03:24.692-0500","updated":"2016-08-01T13:03:24.692-0500"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12616/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}