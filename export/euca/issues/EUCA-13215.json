{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54601","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54601","key":"EUCA-13215","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@5a2c92c4[id=149,rapidViewId=118,state=CLOSED,name=5.0 Sprint 2,goal=,startDate=2017-04-06T19:05:14.391Z,endDate=2017-04-27T19:05:00.000Z,completeDate=2017-05-01T19:25:11.414Z,sequence=149]","com.atlassian.greenhopper.service.sprint.Sprint@3fd369b2[id=150,rapidViewId=118,state=CLOSED,name=5.0 Sprint 3,goal=,startDate=2017-04-28T19:35:18.297Z,endDate=2017-05-18T19:35:00.000Z,completeDate=2017-05-19T17:08:06.071Z,sequence=150]","com.atlassian.greenhopper.service.sprint.Sprint@10d8ea57[id=151,rapidViewId=118,state=CLOSED,name=5.0 Sprint 4,goal=,startDate=2017-05-19T17:08:06.223Z,endDate=2017-06-09T17:08:00.000Z,completeDate=2017-06-13T20:28:29.061Z,sequence=151]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13215/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2017-02-09T11:39:07.355-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"issuelinks":[{"id":"48900","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/48900","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"49703","key":"EUCA-12870","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49703","fields":{"summary":"Add retry and recycling to ELB workflows","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"updated":"2017-05-19T12:08:15.738-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\n_Eucalyptus Version_\r\n{{4.4.0-0.25788.147.20170202git6e5a63d.el7}}\r\n\r\nAn ELB+ASG stack deployed nn a Eucalyptus VPC cloud with multiple availability zones:\r\n{code}\r\n[root@h-04 ~]# euca-describe-availability-zones --region devops-admin@\r\nAVAILABILITYZONE\tblack-dollar\tavailable\r\nAVAILABILITYZONE\tblack-market\tavailable\r\nAVAILABILITYZONE\tport-of-miami\tavailable\r\n{code}\r\nfails to maintain consistent ELB service if instances are terminated in the ASG backend instances.\r\n\r\n*Steps*\r\n\r\n# _Stack setup (using linked {{cfn-elb-multiaz-accesslog-cloudwatch-vpc-template.json}} template)_\r\n{code}\r\n[root@h-04 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tNginxStack\tCREATE_COMPLETE\t\tCloudFormation template to deploy a 3 availability zone ELB, Nginx deployment on Eucalyptus VPC cloud\t2017-02-08T20:23:00.741Z\r\nPARAMETER\tImageId\t\temi-63ef779d\r\nPARAMETER\tKeyName\t\tdevops-admin\r\nPARAMETER\tEndPoint\t\thttp://cloudformation.e-32.autoqa.qa1.eucalyptus-systems.com:8773/\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nPARAMETER\tMinSize\t\t3\r\nPARAMETER\tMaxSize\t\t6\r\nOUTPUT\tAccessLogBucket\tnginxstack-s3loggingbucket-ipx6qpuaimhll\r\nOUTPUT\tELBURL\thttp://NginxStac-NginxELB-VMK9J20VXXDCI-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com\r\n\r\n[root@h-04 ~]# euca-describe-instances --region devops-admin@\r\nRESERVATION\tr-ca113a66\t000727120439\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nINSTANCE\ti-2fd3649e\temi-63ef779d\teuca-10-116-152-12.eucalyptus.e-32.autoqa.qa1.eucalyptus-systems.com\teuca-10-0-1-170.eucalyptus.internal\trunning\tdevops-admin\t0\t\tm1.medium\t2017-02-08T20:23:24.619Z\tblack-market\t\t\t\tmonitoring-enabled\t10.116.152.12\t10.0.1.170\tvpc-63631833\tsubnet-fc9bf177\tinstance-store\t\t\t\t\thvm\t\t3ca7b8ea-528e-47d1-b47d-2d273eca15f7_black-market_1\tsg-492df46b\t\t\tx86_64\r\nNETWORKINTERFACE\teni-d06c8304\tsubnet-fc9bf177\tvpc-63631833\t000727120439\tin-use\t10.0.1.170\teuca-10-0-1-170.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-fdf4f792\t0\tattached\t2017-02-08T20:23:24.622Z\ttrue\r\nASSOCIATION\t10.116.152.12\t\t10.0.1.170\r\nGROUP\tsg-492df46b\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nPRIVATEIPADDRESS\t10.0.1.170\teuca-10-0-1-170.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-2fd3649e\tName\tNginxStack\r\nTAG\tinstance\ti-2fd3649e\taws:autoscaling:groupName\tNginxStack-AutoScalingGroup-8HUAPGXKJVKR1\r\nTAG\tinstance\ti-2fd3649e\taws:cloudformation:logical-id\tAutoScalingGroup\r\nTAG\tinstance\ti-2fd3649e\taws:cloudformation:stack-id\tarn:aws:cloudformation::000727120439:stack/NginxStack/162fb566-ba22-4854-a7e0-8575490f2a22\r\nTAG\tinstance\ti-2fd3649e\taws:cloudformation:stack-name\tNginxStack\r\nRESERVATION\tr-7278665f\t000727120439\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nINSTANCE\ti-d4a9fd7e\temi-63ef779d\teuca-10-116-152-252.eucalyptus.e-32.autoqa.qa1.eucalyptus-systems.com\teuca-10-0-0-37.eucalyptus.internal\trunning\tdevops-admin\t0\t\tm1.medium\t2017-02-08T20:23:24.586Z\tblack-dollar\t\t\t\tmonitoring-enabled\t10.116.152.252\t10.0.0.37\tvpc-63631833\tsubnet-2cf448a7\tinstance-store\t\t\t\t\thvm\t\t2cf5f61d-504c-4f1a-a62c-1a94bdbd836f_black-dollar_1\tsg-492df46b\t\t\tx86_64\r\nNETWORKINTERFACE\teni-407a7a3f\tsubnet-2cf448a7\tvpc-63631833\t000727120439\tin-use\t10.0.0.37\teuca-10-0-0-37.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-3fc75688\t0\tattached\t2017-02-08T20:23:24.589Z\ttrue\r\nASSOCIATION\t10.116.152.252\t\t10.0.0.37\r\nGROUP\tsg-492df46b\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nPRIVATEIPADDRESS\t10.0.0.37\teuca-10-0-0-37.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-d4a9fd7e\tName\tNginxStack\r\nTAG\tinstance\ti-d4a9fd7e\taws:autoscaling:groupName\tNginxStack-AutoScalingGroup-8HUAPGXKJVKR1\r\nTAG\tinstance\ti-d4a9fd7e\taws:cloudformation:logical-id\tAutoScalingGroup\r\nTAG\tinstance\ti-d4a9fd7e\taws:cloudformation:stack-id\tarn:aws:cloudformation::000727120439:stack/NginxStack/162fb566-ba22-4854-a7e0-8575490f2a22\r\nTAG\tinstance\ti-d4a9fd7e\taws:cloudformation:stack-name\tNginxStack\r\nRESERVATION\tr-122c9163\t000727120439\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nINSTANCE\ti-ca9d7135\temi-63ef779d\teuca-10-116-152-24.eucalyptus.e-32.autoqa.qa1.eucalyptus-systems.com\teuca-10-0-2-129.eucalyptus.internal\trunning\tdevops-admin\t0\t\tm1.medium\t2017-02-08T20:23:24.519Z\tport-of-miami\t\t\t\tmonitoring-enabled\t10.116.152.24\t10.0.2.129\tvpc-63631833\tsubnet-ce10d7bd\tinstance-store\t\t\t\t\thvm\t\t06d3a787-5c2a-44f2-94ad-633d9014325d_port-of-miami_1\tsg-492df46b\t\t\tx86_64\r\nNETWORKINTERFACE\teni-fb45d721\tsubnet-ce10d7bd\tvpc-63631833\t000727120439\tin-use\t10.0.2.129\teuca-10-0-2-129.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-acf6ffe6\t0\tattached\t2017-02-08T20:23:24.521Z\ttrue\r\nASSOCIATION\t10.116.152.24\t\t10.0.2.129\r\nGROUP\tsg-492df46b\tNginxStack-InstanceSecurityGroup-ACEZ8FPLCN9AE\r\nPRIVATEIPADDRESS\t10.0.2.129\teuca-10-0-2-129.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-ca9d7135\tName\tNginxStack\r\nTAG\tinstance\ti-ca9d7135\taws:autoscaling:groupName\tNginxStack-AutoScalingGroup-8HUAPGXKJVKR1\r\nTAG\tinstance\ti-ca9d7135\taws:cloudformation:logical-id\tAutoScalingGroup\r\nTAG\tinstance\ti-ca9d7135\taws:cloudformation:stack-id\tarn:aws:cloudformation::000727120439:stack/NginxStack/162fb566-ba22-4854-a7e0-8575490f2a22\r\nTAG\tinstance\ti-ca9d7135\taws:cloudformation:stack-name\tNginxStack\r\n\r\n[root@h-04 ~]# eulb-describe-lbs --region devops-admin@ --show-long\r\nLOAD_BALANCER\tNginxStac-NginxELB-VMK9J20VXXDCI\tNginxStac-NginxELB-VMK9J20VXXDCI-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com\t\t\t{interval=90,target=HTTP:80/,timeout=60,healthy-threshold=3,unhealthy-threshold=7}\tblack-market,black-dollar,port-of-miami\tsubnet-fc9bf177,subnet-2cf448a7,subnet-ce10d7bd\tvpc-63631833\ti-2fd3649e,i-c1c660a1,i-1b2184df\t{protocol=HTTP,lb-port=80,instance-port=80}\t\t\t\t\t{owner-alias=000727120439,group-name=NginxStack-LoadBalancerSecurityGroup-PPNUYKKBFH9HB}\t{sg-2a213686}\t2017-02-08T20:23:11.535Z\tinternet-facing\r\n{code}\r\n# _In separate terminal, start while loop to curl against ELB DNS URL_\r\n{code}\r\n$ while true; do curl -I http://NginxStac-NginxELB-VMK9J20VXXDCI-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com; sleep 1; done\r\n...\r\n{code}\r\n# _Terminate a couple of instances in the ASG_\r\n{code}\r\n[root@h-04 ~]# euca-terminate-instances i-ca9d7135 i-d4a9fd7e --region devops-admin@\r\nINSTANCE\ti-ca9d7135\trunning\tshutting-down\r\nINSTANCE\ti-d4a9fd7e\trunning\tshutting-down\r\n{code}\r\n# _Observe service interruption from ELB viewpoint via curl_\r\n{code}\r\n...\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:07:32 GMT\r\nContent-Type: text/html\r\nContent-Length: 416632\r\nLast-Modified: Wed, 08 Feb 2017 20:25:30 GMT\r\nETag: \"589b7eba-65b78\"\r\nAccept-Ranges: bytes\r\n\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:07:33 GMT\r\nContent-Type: text/html\r\nContent-Length: 416424\r\nLast-Modified: Wed, 08 Feb 2017 20:25:18 GMT\r\nETag: \"589b7eae-65aa8\"\r\nAccept-Ranges: bytes\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nHTTP/1.1 503 Service Unavailable\r\nContent-Length: 0\r\nConnection: close\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:07:52 GMT\r\nContent-Type: text/html\r\nContent-Length: 416424\r\nLast-Modified: Wed, 08 Feb 2017 20:25:18 GMT\r\nETag: \"589b7eae-65aa8\"\r\nAccept-Ranges: bytes\r\n\r\nHTTP/1.1 503 Service Unavailable\r\nContent-Length: 0\r\nConnection: close\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:08:14 GMT\r\nContent-Type: text/html\r\nContent-Length: 416424\r\nLast-Modified: Wed, 08 Feb 2017 20:25:18 GMT\r\nETag: \"589b7eae-65aa8\"\r\nAccept-Ranges: bytes\r\n\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:08:16 GMT\r\nContent-Type: text/html\r\nContent-Length: 416424\r\nLast-Modified: Wed, 08 Feb 2017 20:25:18 GMT\r\nETag: \"589b7eae-65aa8\"\r\nAccept-Ranges: bytes\r\n\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Thu, 09 Feb 2017 16:08:17 GMT\r\nContent-Type: text/html\r\nContent-Length: 416424\r\nLast-Modified: Wed, 08 Feb 2017 20:25:18 GMT\r\nETag: \"589b7eae-65aa8\"\r\nAccept-Ranges: bytes\r\n...\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39103","id":"39103","filename":"017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_35.161.129.70_4eija5eq.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T22:43:28.359-0600","size":102670,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39103/017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_35.161.129.70_4eija5eq.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39104","id":"39104","filename":"017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_35.166.15.239_62wz29w3.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T22:43:28.409-0600","size":93817,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39104/017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_35.166.15.239_62wz29w3.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39105","id":"39105","filename":"017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_52.88.97.118_rb0ry5dv.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T22:43:28.482-0600","size":61224,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39105/017179026131_elasticloadbalancing_us-west-2_NginxMult-NginxELB-T9V2EOUSKWSO_20170210T0420Z_52.88.97.118_rb0ry5dv.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39106","id":"39106","filename":"cfn-aws-elb-multiaz-accesslog-cloudwatch-vpc-template.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T22:43:28.169-0600","size":19189,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39106/cfn-aws-elb-multiaz-accesslog-cloudwatch-vpc-template.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39100","id":"39100","filename":"cfn-elb-multiaz-accesslog-cloudwatch-vpc-template.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T11:34:17.057-0600","size":17745,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39100/cfn-elb-multiaz-accesslog-cloudwatch-vpc-template.json"}],"summary":"Unreliable ELB service when random ASG instances are terminated","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":null,"customfield_12100":"0|i043e5:","customfield_10001":"2017-02-09T15:11:48.794-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","spark(spark)"],"customfield_10117":null,"environment":"Eucalyptus VPC, multiple availability zones - [hspencer-400-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/400/]","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54601/comment/117403","id":"117403","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~hspencer] What is the expected behavior under this condition? ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T15:11:48.794-0600","updated":"2017-02-09T15:11:48.794-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54601/comment/117414","id":"117414","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark], I set the environment up on AWS and performed the same test.  All traffic returned with 200s - even when the instances were terminated and new ones were replacing them.  I had to change the CFN template a bit to run on AWS (I added a  bucket policy), and I added the access logs from the test run.  For the test, I was just running a while loop in a separate terminate that would call curl to query the ELB DNS name.  Let me know if you need any additional information.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-09T22:42:53.584-0600","updated":"2017-02-09T22:47:11.328-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54601/comment/117508","id":"117508","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"The issue is that in our ELB, a backend instance remains in the haproxy configuration until it's status become OutOfService (and it takes health_check_interval * unhealthy_thresholds defined in LB's health check setting). We may need to add \"option redispatch\" as the retry method in haproxy configuration. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-02-10T12:22:21.489-0600","updated":"2017-02-10T12:22:21.489-0600"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13215/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}