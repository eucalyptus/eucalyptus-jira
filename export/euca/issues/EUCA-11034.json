{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"36943","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943","key":"EUCA-11034","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15501","id":"15501","description":"Eucalyptus 4.1.2","name":"4.1.2","archived":false,"released":true,"releaseDate":"2015-07-30"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2015-07-27T11:11:20.383-0500","customfield_10704":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11034/watchers","watchCount":7,"isWatching":false},"lastViewed":null,"created":"2015-06-28T01:36:27.381-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=4, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":4,\"lastUpdated\":\"2015-09-02T15:37:07.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":4,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15500","id":"15500","description":"Eucalyptus 4.1.1","name":"4.1.1","archived":false,"released":true,"releaseDate":"2015-05-11"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15501","id":"15501","description":"Eucalyptus 4.1.2","name":"4.1.2","archived":false,"released":true,"releaseDate":"2015-07-30"}],"issuelinks":[{"id":"31306","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31306","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"36919","key":"EUCA-11019","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919","fields":{"summary":"euca-migrate-instances fails, breaks both NC if NC are registered on private network","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"33034","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/33034","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"38905","key":"EUCA-11550","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38905","fields":{"summary":"euca:node:migration:state and euca:node tags are invalid after migration","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2016-06-06T16:33:26.022-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Hi All,\r\n\r\nWe ran an instance from PV image (RHEL 6.5) the instance was running and accessible over SSH after imaging worker successfully completed the conversion. After that ran an instance migration on it and found that it failed to get migrated.\r\n\r\nThe source node controller:\r\n\r\n{code}\r\n2015-06-27 23:04:35 DEBUG 000013550 doDescribeInstances      | [i-482066eb] Extant (running) pub=10.104.15.122 vols=\r\n2015-06-27 23:04:38  INFO 000013550 doMigrateInstances       | migrating 1 instances\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | invoked (action=prepare instance[0].{id=i-482066eb src=10.105.10.10 dst=10.105.1.189) creds=present\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | [i-482066eb] proposed migration action 'prepare' (10.105.10.10 > 10.105.1.189) [creds=present]\r\n2015-06-27 23:04:38 DEBUG 000013550 doMigrateInstances       | [i-482066eb] processing instance # 0 (10.105.10.10 > 10.105.1.189)\r\n2015-06-27 23:04:38  INFO 000013550 doMigrateInstances       | [i-482066eb] migration source preparing 10.105.10.10 > 10.105.1.189 [creds=present]\r\n2015-06-27 23:04:38 DEBUG 000013550 generate_migration_keys  | [i-482066eb] regeneration of migration credentials\r\n2015-06-27 23:04:38 DEBUG 000013550 generate_migration_keys  | [i-482066eb] executing migration key-generator: '//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/generate-migration-keys.sh 10.105.10.10 so1Dt7eP0vlIIsSp restart'\r\n2015-06-27 23:04:39 DEBUG 000013550 generate_migration_keys  | [i-482066eb] migration key generation succeeded\r\n2015-06-27 23:04:41 DEBUG 000013550 doDescribeResource       | Core status:   in-use 2 physical 4 over-committed no\r\n2015-06-27 23:04:41 DEBUG 000013550 doDescribeResource       | Memory status: in-use 512 physical 8048 over-committed no\r\n2015-06-27 23:04:41 DEBUG 000013550 doDescribeResource       | returning status=enabled cores=2/4 mem=7536/8048 disk=42/58 iqn=iqn.1994-05.com.redhat:b360faafe610\r\n2015-06-27 23:04:54 DEBUG 000013550 doDescribeInstances      | invoked userId=eucalyptus correlationId=UNSET epoch=33 services[0]{.name=10.104.1.217 .type=autoscalingbackend .uris[0]=http://10.104.1.217:8773/services/AutoScalingBackend}\r\n2015-06-27 23:04:54 DEBUG 000013550 doDescribeInstances      | [i-f34ec097] Teardown (terminated) pub=0.0.0.0 vols=\r\n2015-06-27 23:04:54 DEBUG 000013550 doDescribeInstances      | [i-482066eb] Extant (ready >10.105.1.189) pub=10.104.15.122 vols=\r\n2015-06-27 23:04:54  INFO 000013550 doMigrateInstances       | migrating 1 instances\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | invoked (action=rollback instance[0].{id=i-482066eb src=10.105.10.10 dst=10.105.1.189) creds=UNSET\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | [i-482066eb] proposed migration action 'rollback' (10.105.10.10 > 10.105.1.189) [creds=present]\r\n2015-06-27 23:04:54 DEBUG 000013550 doMigrateInstances       | [i-482066eb] processing instance # 0 (10.105.10.10 > 10.105.1.189)\r\n2015-06-27 23:04:54  INFO 000013550 doMigrateInstances       | [i-482066eb] rolling back migration (10.105.10.10 > 10.105.1.189) on source\r\n2015-06-27 23:04:54  INFO 000013550 migration_rollback       | [i-482066eb] starting migration rollback of instance on source 10.105.10.10\r\n2015-06-27 23:04:54  INFO 000013550 migration_rollback       | [i-482066eb] migration source rolled back\r\n{code}\r\n\r\nThe destination node controller:\r\n\r\n{code}\r\n2015-06-27 23:04:39  INFO 000015000 doMigrateInstances       | migrating 1 instances\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | invoked (action=prepare instance[0].{id=i-482066eb src=10.105.10.10 dst=10.105.1.189) creds=present\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | verifying 1 instance[s] for migration...\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | verifying instance # 0...\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | [i-482066eb] proposed migration action 'prepare' (10.105.10.10 > 10.105.1.189) [creds=present]\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | [i-482066eb] processing instance # 0 (10.105.10.10 > 10.105.1.189)\r\n2015-06-27 23:04:39  INFO 000015000 doMigrateInstances       | [i-482066eb] migration destination preparing 10.105.10.10 > 10.105.1.189 [creds=present]\r\n2015-06-27 23:04:39 DEBUG 000015000 doMigrateInstances       | [i-482066eb] authorizing migration source node 10.105.10.10\r\n2015-06-27 23:04:39 DEBUG 000015000 authorize_migration_keys | [i-482066eb] migration key authorization command: '//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/authorize-migration-keys.pl -a 10.105.10.10 so1Dt7eP0vlIIsSp'\r\n2015-06-27 23:04:39 DEBUG 000015000 authorize_migration_keys | [i-482066eb] migration key authorization/deauthorization succeeded\r\n2015-06-27 23:04:39 DEBUG 000015000 generate_migration_keys  | [i-482066eb] regeneration of migration credentials\r\n2015-06-27 23:04:39 DEBUG 000015000 generate_migration_keys  | [i-482066eb] executing migration key-generator: '//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/generate-migration-keys.sh 10.105.1.189 so1Dt7eP0vlIIsSp restart'\r\n2015-06-27 23:04:40 DEBUG 000015000 generate_migration_keys  | [i-482066eb] migration key generation succeeded\r\n2015-06-27 23:04:40  INFO 000015000 ensure_directories_exist | creating path /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb\r\n2015-06-27 23:04:40 DEBUG 000015000 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb' *.root 771\r\n2015-06-27 23:04:40 DEBUG 000015000 vbr_alloc_tree           | [i-482066eb] found 2 prereqs and 3 partitions/disks in the VBR\r\n2015-06-27 23:04:40 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 002|i-482066eb size=-1 vbr=(nil) cache=0 file=0\r\n2015-06-27 23:04:40 DEBUG 000015000 http_get_timeout         | downloading /tmp/http-reply-Law4hx\r\n2015-06-27 23:04:40 DEBUG 000015000 http_get_timeout         | from http://10.104.1.217:8773/services/objectstorage/5bc8e0-download-manifests-v2/DM-eki-8a1ebc35-r-b3dde78a?Expires=1435482223&AWSAccessKeyId=AKIENSOEH2MVOM1IMV9A&x-amz-security-token=ZXVjYQABC0rOMN7VyjoRUDNOlWlNF%2FfHXTWc0z0Q3jSUgc%2BAEtPLMLPXEsUo4IpoIl49GSj9JmMWVUve9e3b5AAg6iTG9HGsV2UANWwx0whC6ev2ra0kM4QjjmSoEtjGj9FEAQNSiOJIC5ug4J5aKE2Mxc1AI9Awyw8EwsvzRpbdr0iEpK%2BqVt5WAdgfqGY7RUURmnHeLRvA7KHCnXAx98uqJp7dN90Lv1Xsw1zaOwQry7M4x74LA7YhtuLTvA%3D%3D&Signature=VcYyKx9Vh9hVF7knW33A0tpUv3I%3D\r\n2015-06-27 23:04:40 DEBUG 000015000 http_get_timeout         | writing GET output to /tmp/http-reply-Law4hx\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | wrote 2408 bytes in 1 writes\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | saved image in /tmp/http-reply-Law4hx\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 003|eki-8a1ebc35-6cac3c96 size=4128944 vbr=0x7f0e260d6c08 cache=1 file=1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 004|eki-8a1ebc35-6cac3c96 size=4128944 vbr=0x7f0e260d6c08 cache=0 file=1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 004|eki-8a1ebc35-6cac3c96 artifact 003|eki-8a1ebc35-6cac3c96\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 002|i-482066eb artifact 004|eki-8a1ebc35-6cac3c96\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | downloading /tmp/http-reply-LdkEwQ\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | from http://10.104.1.217:8773/services/objectstorage/5bc8e0-download-manifests-v2/DM-eri-8064d98a-r-b3dde78a?Expires=1435482228&AWSAccessKeyId=AKISTOKUPJQRUHMCLT0I&x-amz-security-token=ZXVjYQABQsd5qdizOD%2B3%2FtDxNDiKshAxistXDuBYpq5Wu2%2Bf1OUG1MUMtWnaGCxFY%2BQNSut8tjdtBhHmBThZnyzcJAyiiNym9NDJZTNkD1qPx2t5R7HPjaR6M0ABdneR6z3iwfHKVux2gWr5JjvipyX1sFchTCKOFMaT9GjF9p%2FIrJ032aYKMunay1ZVaUwFJZOaTfx%2FozDOvFRi6B5m6cXBGLhwF0ue1KDG6tZqlVqmp9i7Hn67FPONGxXfXA%3D%3D&Signature=f1yaQzeJPXedOB7Le3okxiAtb0g%3D\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | writing GET output to /tmp/http-reply-LdkEwQ\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | wrote 2425 bytes in 1 writes\r\n2015-06-27 23:04:41 DEBUG 000015000 http_get_timeout         | saved image in /tmp/http-reply-LdkEwQ\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 005|eri-8064d98a-2ce8608b size=9429709 vbr=0x7f0e260d91b0 cache=1 file=1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 006|eri-8064d98a-2ce8608b size=9429709 vbr=0x7f0e260d91b0 cache=0 file=1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 006|eri-8064d98a-2ce8608b artifact 005|eri-8064d98a-2ce8608b\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 002|i-482066eb artifact 006|eri-8064d98a-2ce8608b\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 007|emi-52e3d05b-97afb4ae size=10842308096 vbr=0x7f0e260db758 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 008|emi-52e3d05b-97afb4ae size=10842308096 vbr=0x7f0e260db758 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 008|emi-52e3d05b-97afb4ae artifact 007|emi-52e3d05b-97afb4ae\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 009|prt-05632ext3-e41a3d5e size=5905580032 vbr=0x7f0e260d4660 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 010|prt-05632ext3-e41a3d5e size=5905580032 vbr=0x7f0e260d4660 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 010|prt-05632ext3-e41a3d5e artifact 009|prt-05632ext3-e41a3d5e\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 011|prt-00512swap-ac8d5670 size=536870912 vbr=0x7f0e260d20b8 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 012|prt-00512swap-ac8d5670 size=536870912 vbr=0x7f0e260d20b8 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 012|prt-00512swap-ac8d5670 artifact 011|prt-00512swap-ac8d5670\r\n2015-06-27 23:04:41 DEBUG 000015000 art_realloc_disk         | at realloc time old_size_bytes = 10842308096\r\n2015-06-27 23:04:41 DEBUG 000015000 art_alloc                | [i-482066eb] allocated artifact 013|dsk-b1837923 size=17284759040 vbr=0x7f0e260db758 cache=0 file=0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 013|dsk-b1837923 artifact 008|emi-52e3d05b-97afb4ae\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 013|dsk-b1837923 artifact 010|prt-05632ext3-e41a3d5e\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 013|dsk-b1837923 artifact 012|prt-00512swap-ac8d5670\r\n2015-06-27 23:04:41 DEBUG 000015000 art_add_dep              | [i-482066eb] added to artifact 002|i-482066eb artifact 013|dsk-b1837923\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] 002|i-482066eb -1 c=0 f=0 cr=(nil) vbr=(nil)\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t004|eki-8a1ebc35-6cac3c96 4128944 c=0 f=1 cr=0x7f0e1ca79780 vbr=0x7f0e260d6c08\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t003|eki-8a1ebc35-6cac3c96 4128944 c=1 f=1 cr=0x7f0e1ca7ac40 vbr=0x7f0e260d6c08\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t006|eri-8064d98a-2ce8608b 9429709 c=0 f=1 cr=0x7f0e1ca79780 vbr=0x7f0e260d91b0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t005|eri-8064d98a-2ce8608b 9429709 c=1 f=1 cr=0x7f0e1ca7ac40 vbr=0x7f0e260d91b0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t013|dsk-b1837923 17284759040 c=0 f=0 cr=0x7f0e1ca7c600 vbr=0x7f0e260db758\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t008|emi-52e3d05b-97afb4ae 10842308096 c=0 f=0 cr=0x7f0e1ca79780 vbr=0x7f0e260db758\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t\t007|emi-52e3d05b-97afb4ae 10842308096 c=0 f=0 cr=0x7f0e1ca7ac40 vbr=0x7f0e260db758\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t010|prt-05632ext3-e41a3d5e 5905580032 c=0 f=0 cr=0x7f0e1ca79780 vbr=0x7f0e260d4660\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t\t009|prt-05632ext3-e41a3d5e 5905580032 c=0 f=0 cr=0x7f0e1ca7a410 vbr=0x7f0e260d4660\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t012|prt-00512swap-ac8d5670 536870912 c=0 f=0 cr=0x7f0e1ca79780 vbr=0x7f0e260d20b8\r\n2015-06-27 23:04:41 DEBUG 000015000 art_print_tree           | [i-482066eb] \t\t\t011|prt-00512swap-ac8d5670 536870912 c=0 f=0 cr=0x7f0e1ca7a410 vbr=0x7f0e260d20b8\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 002|i-482066eb\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 004|eki-8a1ebc35-6cac3c96\r\n2015-06-27 23:04:41 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 004|eki-8a1ebc35-6cac3c96 (do_create=0 ret=1)\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 003|eki-8a1ebc35-6cac3c96\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/cache/eki-8a1ebc35-6cac3c96/blocks\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            |             to /dev/loop4 at offset 0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] found existing artifact 003|eki-8a1ebc35-6cac3c96 on try 1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 003|eki-8a1ebc35-6cac3c96 on try 1\r\n2015-06-27 23:04:41 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 004|eki-8a1ebc35-6cac3c96 (do_create=1 ret=1)\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eki-8a1ebc35-6cac3c96.blocks\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            |             to /dev/loop5 at offset 0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 004|eki-8a1ebc35-6cac3c96 on try 1\r\n2015-06-27 23:04:41  INFO 000015000 copy_creator             | [i-482066eb] copying/cloning blob eki-8a1ebc35-6cac3c96 to blob AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eki-8a1ebc35-6cac3c96\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             | copying data from '/var/lib/eucalyptus/instances/cache/eki-8a1ebc35-6cac3c96/blocks'\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             |                to '/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eki-8a1ebc35-6cac3c96.blocks'\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             |                of 258059 blocks (bs=16), seeking 0, skipping 0\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eki-8a1ebc35-6cac3c96.blocks' *.* 664\r\n2015-06-27 23:04:41 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eki-8a1ebc35-6cac3c96.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-kernel\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop4\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 004|eki-8a1ebc35-6cac3c96 on try 1\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop5\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 006|eri-8064d98a-2ce8608b\r\n2015-06-27 23:04:41 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 006|eri-8064d98a-2ce8608b (do_create=0 ret=1)\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 005|eri-8064d98a-2ce8608b\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/cache/eri-8064d98a-2ce8608b/blocks\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            |             to /dev/loop4 at offset 0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] found existing artifact 005|eri-8064d98a-2ce8608b on try 1\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 005|eri-8064d98a-2ce8608b on try 1\r\n2015-06-27 23:04:41 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 006|eri-8064d98a-2ce8608b (do_create=1 ret=1)\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eri-8064d98a-2ce8608b.blocks\r\n2015-06-27 23:04:41 DEBUG 000015000 diskutil_loop            |             to /dev/loop5 at offset 0\r\n2015-06-27 23:04:41 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 006|eri-8064d98a-2ce8608b on try 1\r\n2015-06-27 23:04:41  INFO 000015000 copy_creator             | [i-482066eb] copying/cloning blob eri-8064d98a-2ce8608b to blob AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eri-8064d98a-2ce8608b\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             | copying data from '/var/lib/eucalyptus/instances/cache/eri-8064d98a-2ce8608b/blocks'\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             |                to '/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eri-8064d98a-2ce8608b.blocks'\r\n2015-06-27 23:04:41  INFO 000015000 diskutil_dd2             |                of 9429709 blocks (bs=1), seeking 0, skipping 0\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eri-8064d98a-2ce8608b.blocks' *.* 664\r\n2015-06-27 23:04:51 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/eri-8064d98a-2ce8608b.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-ramdisk\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop4\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 006|eri-8064d98a-2ce8608b on try 1\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop5\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 013|dsk-b1837923\r\n2015-06-27 23:04:51 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 013|dsk-b1837923 (do_create=0 ret=1)\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 008|emi-52e3d05b-97afb4ae\r\n2015-06-27 23:04:51 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 008|emi-52e3d05b-97afb4ae (do_create=0 ret=1)\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 007|emi-52e3d05b-97afb4ae\r\n2015-06-27 23:04:51 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 007|emi-52e3d05b-97afb4ae (do_create=0 ret=1)\r\n2015-06-27 23:04:51 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 007|emi-52e3d05b-97afb4ae (do_create=1 ret=1)\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/emi-52e3d05b-97afb4ae.blocks\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_loop            |             to /dev/loop4 at offset 0\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 007|emi-52e3d05b-97afb4ae on try 1\r\n2015-06-27 23:04:51  INFO 000015000 imaging_creator          | [i-482066eb] skipping download of http://10.104.1.217:8773/services/objectstorage/5bc8e0-download-manifests-v2/DM-r-b3dde78a?Expires=1435482232&AWSAccessKeyId=AKICPVH0TNFROKNBI8VR&x-amz-security-token=ZXVjYQABLgU946RntyrbWsC1A4xTCrsAUBwy3p7nLxctbLiB5LD4ib3IRSUyzoT6nI%2B8qFOmJ%2B48y7Bdeyul9l4LeeR7Fv3AEQEaz0UxVfXzDgzs%2ByNSIVTbUvfJWLYW3T9YPYnZLKyqzlt964s7Cmjw3W283G8EnMJwmt3BceuuYYkkkjkYkuU7hjlfwt4t%2BQTQQC81nmKT6hjQ7D%2BybjVNPN2FTh1vNN3CZ0z%2FhQxAhd1LpCBUo8et%2FkWc8w%3D%3D&Signature=rJzm%2F1Cy303twvFOhw054yJkuHg%3D\r\n2015-06-27 23:04:51 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/emi-52e3d05b-97afb4ae.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda\r\n2015-06-27 23:04:51 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 007|emi-52e3d05b-97afb4ae on try 1\r\n2015-06-27 23:04:51 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 008|emi-52e3d05b-97afb4ae (do_create=1 ret=1)\r\n2015-06-27 23:04:51 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop4\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 008|emi-52e3d05b-97afb4ae (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/emi-52e3d05b-97afb4ae.blocks\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            |             to /dev/loop4 at offset 0\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] found existing artifact 008|emi-52e3d05b-97afb4ae on try 2\r\n2015-06-27 23:04:52 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/emi-52e3d05b-97afb4ae.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 008|emi-52e3d05b-97afb4ae on try 2\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 010|prt-05632ext3-e41a3d5e\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 010|prt-05632ext3-e41a3d5e (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 009|prt-05632ext3-e41a3d5e\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 009|prt-05632ext3-e41a3d5e (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 009|prt-05632ext3-e41a3d5e (do_create=1 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-05632ext3-e41a3d5e.blocks\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            |             to /dev/loop5 at offset 0\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 009|prt-05632ext3-e41a3d5e on try 1\r\n2015-06-27 23:04:52  INFO 000015000 partition_creator        | [i-482066eb] skipping formatting of prt-05632ext3-e41a3d5e\r\n2015-06-27 23:04:52 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-05632ext3-e41a3d5e.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda2\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 009|prt-05632ext3-e41a3d5e on try 1\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 010|prt-05632ext3-e41a3d5e (do_create=1 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop5\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 010|prt-05632ext3-e41a3d5e (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-05632ext3-e41a3d5e.blocks\r\n2015-06-27 23:04:52 DEBUG 000015000 diskutil_loop            |             to /dev/loop5 at offset 0\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] found existing artifact 010|prt-05632ext3-e41a3d5e on try 2\r\n2015-06-27 23:04:52 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-05632ext3-e41a3d5e.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda2\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 010|prt-05632ext3-e41a3d5e on try 2\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 012|prt-00512swap-ac8d5670\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 012|prt-00512swap-ac8d5670 (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 art_implement_tree       | [i-482066eb] implementing artifact 011|prt-00512swap-ac8d5670\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 011|prt-00512swap-ac8d5670 (do_create=0 ret=1)\r\n2015-06-27 23:04:52 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 011|prt-00512swap-ac8d5670 (do_create=1 ret=1)\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-00512swap-ac8d5670.blocks\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            |             to /dev/loop6 at offset 0\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 011|prt-00512swap-ac8d5670 on try 1\r\n2015-06-27 23:04:53  INFO 000015000 partition_creator        | [i-482066eb] skipping formatting of prt-00512swap-ac8d5670\r\n2015-06-27 23:04:53 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-00512swap-ac8d5670.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda3\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 011|prt-00512swap-ac8d5670 on try 1\r\n2015-06-27 23:04:53 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 012|prt-00512swap-ac8d5670 (do_create=1 ret=1)\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop6\r\n2015-06-27 23:04:53 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 012|prt-00512swap-ac8d5670 (do_create=0 ret=1)\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-00512swap-ac8d5670.blocks\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            |             to /dev/loop6 at offset 0\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] found existing artifact 012|prt-00512swap-ac8d5670 on try 2\r\n2015-06-27 23:04:53 DEBUG 000015000 update_vbr_with_backing_ | [i-482066eb] symlinked /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/prt-00512swap-ac8d5670.blocks to /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/link-to-vda3\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] implemented artifact 012|prt-00512swap-ac8d5670 on try 2\r\n2015-06-27 23:04:53 DEBUG 000015000 find_or_create_artifact  | [i-482066eb] checking work blobstore for 013|dsk-b1837923 (do_create=1 ret=1)\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-482066eb/dsk-b1837923.blocks\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_loop            |             to /dev/loop7 at offset 0\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] created a blob for an artifact 013|dsk-b1837923 on try 1\r\n2015-06-27 23:04:53 DEBUG 000015000 disk_expander            | [i-482066eb] mapping section 0 from /dev/loop4 [0-21176382]\r\n2015-06-27 23:04:53 ERROR 000015000 pruntf                   | bad return code from cmd 'LD_PRELOAD='' //usr/lib/eucalyptus/euca_rootwrap /sbin/parted --script /dev/loop4 unit s print 2>&1'\r\n2015-06-27 23:04:53 DEBUG 000015000 pruntf                   | Error: /dev/loop4: unrecognised disk label\r\n\r\n2015-06-27 23:04:53 ERROR 000015000 diskutil_get_parts       | cannot obtain partition information on device /dev/loop4\r\n2015-06-27 23:04:53 ERROR 000015000 disk_expander            | [i-482066eb] expected two partitions in EMI (boot and root), but found -1\r\n2015-06-27 23:04:53 ERROR 000015000 art_implement_tree       | [i-482066eb] failed to create artifact dsk-b1837923 (error=1, may retry) on try 1\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop7\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop4\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop5\r\n2015-06-27 23:04:53 DEBUG 000015000 diskutil_unloop          | detaching from loop device /dev/loop6\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] failed to implement artifact 013|dsk-b1837923 on try 1\r\n2015-06-27 23:04:53 ERROR 000015000 art_implement_tree       | [i-482066eb] failed to provision dependency dsk-b1837923 for artifact i-482066eb (error=1) on try 1\r\n2015-06-27 23:04:53 DEBUG 000015000 art_implement_tree       | [i-482066eb] failed to implement artifact 002|i-482066eb on try 1\r\n2015-06-27 23:04:53 ERROR 000015000 create_instance_backing  | [i-482066eb] failed to implement backing for instance\r\n2015-06-27 23:04:53 ERROR 000015000 doMigrateInstances       | [i-482066eb] failed to prepare images for migrating instance (error=1)\r\n2015-06-27 23:04:53 ERROR 000015000 doMigrateInstances       | [i-482066eb] setting instance to Teardown(cleaning) after destination failure to prepare for migration\r\n2015-06-27 23:04:53 DEBUG 000015000 change_state             | [i-482066eb] state change for instance: Unknown -> Teardown (Teardown)\r\n2015-06-27 23:04:53  INFO 000015000 doMigrateInstances       | [i-482066eb] no remaining active incoming migrations -- checking to see if there are any pending migrations\r\n2015-06-27 23:04:53  INFO 000015000 doMigrateInstances       | [i-482066eb] no remaining incoming or pending migrations -- deauthorizing all migration client keys\r\n2015-06-27 23:04:53 DEBUG 000015000 authorize_migration_keys | [UNSET] migration key authorization command: '//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/authorize-migration-keys.pl -D -r  '\r\n2015-06-27 23:04:54 DEBUG 000015000 authorize_migration_keys | [UNSET] migration key authorization/deauthorization succeeded\r\n2015-06-27 23:04:54 ERROR 000015000 ncMigrateInstancesMarsha | failed error=1\r\n{code}\r\n\r\nIt is strange to see the destination node controller complaining about the disk layout of the EMI:\r\n\r\n{code}\r\ntry 1\r\n2015-06-27 23:04:53 DEBUG 000015000 disk_expander            | [i-482066eb] mapping section 0 from /dev/loop4 [0-21176382]\r\n2015-06-27 23:04:53 ERROR 000015000 pruntf                   | bad return code from cmd 'LD_PRELOAD='' //usr/lib/eucalyptus/euca_rootwrap /sbin/parted --script /dev/loop4 unit s print 2>&1'\r\n2015-06-27 23:04:53 DEBUG 000015000 pruntf                   | Error: /dev/loop4: unrecognised disk label\r\n\r\n2015-06-27 23:04:53 ERROR 000015000 diskutil_get_parts       | cannot obtain partition information on device /dev/loop4\r\n2015-06-27 23:04:53 ERROR 000015000 disk_expander            | [i-482066eb] expected two partitions in EMI (boot and root), but found -1\r\n2015-06-27 23:04:53 ERROR 000015000 art_implement_tree       | [i-482066eb] failed to create artifact dsk-b1837923 (error=1, may retry) on try 1\r\n{code}\r\n\r\nBecause instance from same image (successfully converted by imaging worker) is running on the source node controller (accessible etc.) but on the destination node controller does not get migrated. We can still run instances from this image but cannot migrate them.\r\n\r\nAlso this isn't image specific because we also tried with the official Ubuntu Vivid image available here https://cloud-images.ubuntu.com/vivid/current/vivid-server-cloudimg-amd64.tar.gz and that too exhibits similar failure.\r\n\r\nPlease let me know if you have any questions, we have multiple environments available for access where this issue has been easily replicated today.\r\n\r\nCheers,\r\nDeependra\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Instance ran from PV image fails to get migrated","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"customfield_12100":"0|i03a3z:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_1861726510_*|*_10000_*:*_1_*:*_212923869_*|*_10003_*:*_1_*:*_465442695_*|*_10006_*:*_1_*:*_0","customfield_10001":"2015-06-30T09:00:51.640-0500","customfield_10200":null,"customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dshekhawat(dshekhawat)","shaon(shaon)","tony(tony)","zhill(zhill)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11034/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/88477","id":"88477","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Noticing this in Eucalyptus cloud running in HP Singapore innovation center.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-28T01:38:43.324-0500","updated":"2015-06-28T01:38:43.324-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/88478","id":"88478","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"I tried another migration and it failed with same error. This time I kept the files on the destination (MANUAL_INSTANCES_CLEANUP=1) and analysed the emi blocks:\r\n\r\nOn the destination:\r\n\r\n{code}\r\n# file /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks\r\n/var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks: data\r\n\r\n# losetup -f /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks\r\n\r\n# LD_PRELOAD='' /usr/lib/eucalyptus/euca_rootwrap /sbin/parted --script /dev/loop0 unit s print\r\nError: /dev/loop0: unrecognised disk label\r\n\r\n# ls -ltrh /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus 11G Jun 27 23:50 /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks\r\n{code}\r\n\r\nNow we have the same file on the source from which the instance was ran and following are the details:\r\n\r\n{code}\r\n# LD_PRELOAD='' /usr/lib/eucalyptus/euca_rootwrap /sbin/parted --script /dev/loop4 unit s print\r\nModel:  (file)\r\nDisk /dev/loop4: 2166847s\r\nSector size (logical/physical): 512B/512B\r\nPartition Table: msdos\r\n\r\nNumber  Start    End       Size      Type     File system  Flags\r\n 2      63s      204862s   204800s   primary  ext3\r\n 1      204863s  2166846s  1961984s  primary  ext4\r\n\r\n# file /var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/\r\n/var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/: directory\r\n\r\n# file /var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/blocks \r\n/var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/blocks: x86 boot sector; GRand Unified Bootloader, stage1 version 0x3, stage2 address 0x2000, stage2 segment 0x200, GRUB version 0.94; partition 1: ID=0x83, starthead 191, startsector 204863, 1961984 sectors; partition 2: ID=0x83, starthead 1, startsector 63, 204800 sectors, code offset 0x48\r\n\r\n# ls -ltrh /var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/blocks \r\n-rw-r----- 1 eucalyptus eucalyptus 1.1G Jun 27 23:33 /var/lib/eucalyptus/instances/cache/emi-96fb2e41-f312b2d9/blocks\r\n{code}\r\n\r\nThe content of the instance directory on the source:\r\n\r\n{code}\r\n# ls -ltrh\r\ntotal 20M\r\n-rw-r----- 1 eucalyptus eucalyptus   21 Jun 27 23:49 eki-a13a73a8-a669ea8e.sig\r\n-rw-rw-r-- 1 qemu       qemu       6.4M Jun 27 23:49 eki-a13a73a8-a669ea8e.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   96 Jun 27 23:49 link-to-kernel -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/eki-a13a73a8-a669ea8e.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:49 eki-a13a73a8-a669ea8e.lock\r\n-rw-r----- 1 eucalyptus eucalyptus   21 Jun 27 23:49 eri-597721a7-fcb49e2b.sig\r\n-rw-rw-r-- 1 qemu       qemu       5.9M Jun 27 23:50 eri-597721a7-fcb49e2b.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   96 Jun 27 23:50 link-to-ramdisk -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/eri-597721a7-fcb49e2b.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 eri-597721a7-fcb49e2b.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 emi-96fb2e41-f312b2d9.sig\r\n-rw-r----- 1 eucalyptus eucalyptus   11 Jun 27 23:50 emi-96fb2e41-f312b2d9.loopback\r\n-rw-r----- 1 eucalyptus eucalyptus  196 Jun 27 23:50 emi-96fb2e41-f312b2d9.dm\r\n-rw-r----- 1 eucalyptus eucalyptus   77 Jun 27 23:50 emi-96fb2e41-f312b2d9.deps\r\n-rw-r----- 1 eucalyptus eucalyptus   37 Jun 27 23:50 prt-08770ext3-24dd1d03.sig\r\n-rw-r----- 1 eucalyptus eucalyptus 8.6G Jun 27 23:50 prt-08770ext3-24dd1d03.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus   11 Jun 27 23:50 prt-08770ext3-24dd1d03.loopback\r\n-rw-r----- 1 eucalyptus eucalyptus  199 Jun 27 23:50 prt-08770ext3-24dd1d03.dm\r\n-rw-r----- 1 eucalyptus eucalyptus   79 Jun 27 23:50 prt-08770ext3-24dd1d03.deps\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   72 Jun 27 23:50 link-to-vda2 -> /dev/mapper/euca-AID5YDF0SC6PSSLWXTCIZ-i-17a6885a-prt-08770ext3-24dd1d03\r\n-rw-r----- 1 eucalyptus eucalyptus   36 Jun 27 23:50 prt-00512swap-ac8d5670.sig\r\n-rw-r----- 1 eucalyptus eucalyptus   11 Jun 27 23:50 prt-00512swap-ac8d5670.loopback\r\n-rw-r----- 1 eucalyptus eucalyptus  199 Jun 27 23:50 prt-00512swap-ac8d5670.dm\r\n-rw-r----- 1 eucalyptus eucalyptus   78 Jun 27 23:50 prt-00512swap-ac8d5670.deps\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   72 Jun 27 23:50 link-to-vda3 -> /dev/mapper/euca-AID5YDF0SC6PSSLWXTCIZ-i-17a6885a-prt-00512swap-ac8d5670\r\n-rw-r----- 1 eucalyptus eucalyptus  151 Jun 27 23:50 dsk-a7f1442a.sig\r\n-rw-r----- 1 eucalyptus eucalyptus   20 Jun 27 23:50 dsk-a7f1442a.hollow\r\n-rw-r----- 1 eucalyptus eucalyptus  11G Jun 27 23:50 dsk-a7f1442a.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus   11 Jun 27 23:50 dsk-a7f1442a.loopback\r\n-rw-r----- 1 eucalyptus eucalyptus   51 Jun 27 23:50 dsk-a7f1442a.dm\r\n-rw-r----- 1 eucalyptus eucalyptus   81 Jun 27 23:50 emi-96fb2e41-f312b2d9.refs\r\n-rw-r----- 1 eucalyptus eucalyptus   81 Jun 27 23:50 prt-08770ext3-24dd1d03.refs\r\n-rw-r----- 1 eucalyptus eucalyptus   81 Jun 27 23:50 prt-00512swap-ac8d5670.refs\r\n-rw-r----- 1 eucalyptus eucalyptus  328 Jun 27 23:50 dsk-a7f1442a.deps\r\n-rw-r----- 1 eucalyptus eucalyptus 512M Jun 27 23:50 prt-00512swap-ac8d5670.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   62 Jun 27 23:50 link-to-vda -> /dev/mapper/euca-AID5YDF0SC6PSSLWXTCIZ-i-17a6885a-dsk-a7f1442a\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 emi-96fb2e41-f312b2d9.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 prt-08770ext3-24dd1d03.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 prt-00512swap-ac8d5670.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 dsk-a7f1442a.lock\r\n-rw-r--r-- 1 eucalyptus eucalyptus 1.4K Jun 27 23:50 instance-libvirt.xml\r\n-rw------- 1 eucalyptus eucalyptus  44K Jun 27 23:50 console.log\r\n-rw-r----- 1 eucalyptus eucalyptus 1.1G Jun 27 23:54 emi-96fb2e41-f312b2d9.blocks\r\n-rw-rw---- 1 eucalyptus eucalyptus  11K Jun 27 23:58 instance.xml\r\n[root@odc-d-36 i-17a6885a]# file dsk-a7f1442a.blocks \r\ndsk-a7f1442a.blocks: data\r\n{code}\r\n\r\nThe contents on the destination after failure:\r\n\r\n{code}\r\n# ls -ltrh\r\ntotal 13M\r\n-rw-r----- 1 eucalyptus eucalyptus   21 Jun 27 23:50 eki-a13a73a8-a669ea8e.sig\r\n-rw-rw-r-- 1 eucalyptus eucalyptus 6.4M Jun 27 23:50 eki-a13a73a8-a669ea8e.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   96 Jun 27 23:50 link-to-kernel -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/eki-a13a73a8-a669ea8e.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 eki-a13a73a8-a669ea8e.lock\r\n-rw-r----- 1 eucalyptus eucalyptus   21 Jun 27 23:50 eri-597721a7-fcb49e2b.sig\r\n-rw-rw-r-- 1 eucalyptus eucalyptus 5.9M Jun 27 23:50 eri-597721a7-fcb49e2b.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   96 Jun 27 23:50 link-to-ramdisk -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/eri-597721a7-fcb49e2b.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 eri-597721a7-fcb49e2b.lock\r\n-rw-r----- 1 eucalyptus eucalyptus   21 Jun 27 23:50 emi-96fb2e41-97afb4ae.sig\r\n-rw-r----- 1 eucalyptus eucalyptus  11G Jun 27 23:50 emi-96fb2e41-97afb4ae.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   96 Jun 27 23:50 link-to-vda -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/emi-96fb2e41-97afb4ae.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus   37 Jun 27 23:50 prt-08770ext3-24dd1d03.sig\r\n-rw-r----- 1 eucalyptus eucalyptus 8.6G Jun 27 23:50 prt-08770ext3-24dd1d03.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   97 Jun 27 23:50 link-to-vda2 -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/prt-08770ext3-24dd1d03.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus   36 Jun 27 23:50 prt-00512swap-ac8d5670.sig\r\n-rw-r----- 1 eucalyptus eucalyptus 512M Jun 27 23:50 prt-00512swap-ac8d5670.blocks\r\nlrwxrwxrwx 1 eucalyptus eucalyptus   97 Jun 27 23:50 link-to-vda3 -> /var/lib/eucalyptus/instances/work/AID5YDF0SC6PSSLWXTCIZ/i-17a6885a/prt-00512swap-ac8d5670.blocks\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 emi-96fb2e41-97afb4ae.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 prt-08770ext3-24dd1d03.lock\r\n-rw-r----- 1 eucalyptus eucalyptus    0 Jun 27 23:50 prt-00512swap-ac8d5670.lock\r\n{code}\r\n\r\nIt is appearing that on the destination file {{emi-96fb2e41-97afb4ae.blocks}} is nothing but the copy of {{dsk-a7f1442a.blocks}} on source.\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-28T02:02:30.286-0500","updated":"2015-06-28T02:02:30.286-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/88558","id":"88558","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"This is not related to EUCA-10050\r\n\r\nAlso this was found in 4.1.2 as well. Systems are available in the lab environment to check out. It is easily reproducible. Marked as blocker as it affects the most basic use case. \r\n\r\nAlso it appears to be a regression in the code as this was working sometime back in 4.0 \r\n\r\n10.104.10.1 - Frontend\r\n10.104.10.4 - NC 1 \r\n10.104.10.5 - NC 2\r\n\r\nUsername - root\r\nPassword - <the common one>","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-29T23:42:28.218-0500","updated":"2015-06-29T23:42:28.218-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/88567","id":"88567","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"I have hit the same issue with precise image:\r\n\r\n{noformat}\r\n2015-06-30 06:52:46 DEBUG 000008727 diskutil_loop            |             to /dev/loop4 at offset 0\r\n2015-06-30 06:52:46 DEBUG 000008727 art_implement_tree       | [i-b6997e31] created a blob for an artifact 024|dsk-72f3f346 on try 1\r\n2015-06-30 06:52:46 DEBUG 000008727 disk_expander            | [i-b6997e31] mapping section 0 from /dev/loop0 [0-10690622]\r\n2015-06-30 06:52:46 ERROR 000008727 pruntf                   | bad return code from cmd 'LD_PRELOAD='' //usr/lib/eucalyptus/euca_rootwrap /sbin/parted --script /dev/loop0 unit s print 2>&1'\r\n2015-06-30 06:52:46 DEBUG 000008727 pruntf                   | Error: /dev/loop0: unrecognised disk label\r\n\r\n2015-06-30 06:52:46 ERROR 000008727 diskutil_get_parts       | cannot obtain partition information on device /dev/loop0\r\n2015-06-30 06:52:46 ERROR 000008727 disk_expander            | [i-b6997e31] expected two partitions in EMI (boot and root), but found -1\r\n2015-06-30 06:52:46 ERROR 000008727 art_implement_tree       | [i-b6997e31] failed to create artifact dsk-72f3f346 (error=1, may retry) on try 1\r\n2015-06-30 06:52:46 DEBUG 000008727 diskutil_unloop          | detaching from loop device /dev/loop4\r\n2015-06-30 06:52:46 DEBUG 000008727 diskutil_unloop          | detaching from loop device /dev/loop0\r\n2015-06-30 06:52:46 DEBUG 000008727 diskutil_unloop          | detaching from loop device /dev/loop1\r\n2015-06-30 06:52:46 DEBUG 000008727 diskutil_unloop          | detaching from loop device /dev/loop3\r\n2015-06-30 06:52:46 DEBUG 000008727 art_implement_tree       | [i-b6997e31] failed to implement artifact 024|dsk-72f3f346 on try 1\r\n2015-06-30 06:52:46 ERROR 000008727 art_implement_tree       | [i-b6997e31] failed to provision dependency dsk-72f3f346 for artifact i-b6997e31 (error=1) on try 1\r\n2015-06-30 06:52:46 DEBUG 000008727 art_implement_tree       | [i-b6997e31] failed to implement artifact 013|i-b6997e31 on try 1\r\n2015-06-30 06:52:46 ERROR 000008727 create_instance_backing  | [i-b6997e31] failed to implement backing for instance\r\n2015-06-30 06:52:46 ERROR 000008727 doMigrateInstances       | [i-b6997e31] failed to prepare images for migrating instance (error=1)\r\n2015-06-30 06:52:46 ERROR 000008727 doMigrateInstances       | [i-b6997e31] setting instance to Teardown(cleaning) after destination failure to prepare for migration\r\n2015-06-30 06:52:46 DEBUG 000008727 change_state             | [i-b6997e31] state change for instance: Unknown -> Teardown (Teardown)\r\n2015-06-30 06:52:46  INFO 000008727 doMigrateInstances       | [i-b6997e31] no remaining active incoming migrations -- checking to see if there are any pending migrations\r\n2015-06-30 06:52:46  INFO 000008727 doMigrateInstances       | [i-b6997e31] no remaining incoming or pending migrations -- deauthorizing all migration client keys\r\n2015-06-30 06:52:46 DEBUG 000008727 authorize_migration_keys | [UNSET] migration key authorization command: '//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/authorize-migration-keys.pl -D -r  '\r\n2015-06-30 06:52:47 DEBUG 000008727 authorize_migration_keys | [UNSET] migration key authorization/deauthorization succeeded\r\n2015-06-30 06:52:47 ERROR 000008727 ncMigrateInstancesMarsha | failed error=1\r\n{noformat}\r\n\r\nCC [~tony]","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T09:00:51.640-0500","updated":"2015-06-30T09:01:03.380-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/88648","id":"88648","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"I closed out EUCA-10050 because it is no longer accurate for 4.1+ codebase. The fix for HVM migration in 4.1.1 broke the PV case in a different way (EUCA-9887).\r\n\r\nThe current situation is:\r\n* The fix for HVM migration failing due to the image download failing after a time period (24 hrs) involved a way to not require a download at all. This makes HVM migration work.\r\n* That fix breaks PV migration because during the migration, KVM does not transfer the ERI and EKI data, so it must be downloaded from the object store. That part is explicitly skipped right now (4.1.x) and thus PV migration won't work.\r\n\r\n[~dmitrii] and I are working on solution possibilities and scoping it as this seems to be a backend/NC issue. Thanks everyone for the good debug and analysis. Once we have an idea of scope we'll update ownership of the ticket to reflect who is going to execute the fix.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-01T18:20:50.546-0500","updated":"2015-07-01T18:48:08.900-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/89571","id":"89571","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dmitrii] and I got the fix ready and it is pushed to maint-4.1 branch.\r\nEuca Commit: 38415109ce10a0bfb1500500bca7069e68e92997\r\n\r\n*I tested:*\r\nrun-instance with PV and HVM images, but no EBS yet.\r\nmigrate-instance with single instance\r\nmigrate-instance with source node/evacuation\r\n\r\nI did see some strange behavior when trying to migrate the imaging worker VM, but it's state on that setup was questionable due to several prior failed migration attempts during development. I manually started a new instance with the same EMI and was able to successfully migrate that instance.\r\n\r\n*Risks:*\r\nThere were some very slight changes in the run-instance path. No new logic, just had to move a bit of code to re-use it during migration (download manifest generation). I have tested this and it is behaving as expected.\r\n\r\n*Caveats/negative-testing:*\r\nMigration may fail for an instance if the ERI or EKI it depends upon has been deregistered since it was executed. The system should handle this like any other failed migration and in the case of a node evacuation the system will migrate all instances that can be migrated. But, the user notification path does not really allow for a clean notification at this time. This is not a change from previous behavior but can still be confusing. The CLC logs have clear messages indicating that a ERI/EKI cannot be updated with a manifest in that case.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-22T01:53:57.746-0500","updated":"2015-07-22T01:54:28.211-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943/comment/89668","id":"89668","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"Fix Verified.\r\n\r\nPV instances can be migrated.\r\n\r\nInstalled Packages\r\nName        : eucalyptus\r\nArch        : x86_64\r\nVersion     : 4.1.2\r\nRelease     : 0.0.23236.103.20150723git70ec677.el6\r\n\r\nTesting uncovered EUCA-11186","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2015-07-27T11:11:20.421-0500","updated":"2015-07-27T11:11:20.421-0500"}],"maxResults":7,"total":7,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}