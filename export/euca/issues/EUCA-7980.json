{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"24901","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901","key":"EUCA-7980","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2013-10-21T23:49:40.054-0500","customfield_10308":null,"customfield_10704":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11302","value":"VMWare ESXi 5.1","id":"11302"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7980/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2013-10-20T23:12:20.947-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":["regression"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-06-16T16:18:01.458-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11301","id":"11301","name":"Broker","description":"Broker-style component for interfacing hypervisors"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Running an paravirtualized instance with a vmtype using 1 30gb ephemeral disk. The image looks like it's ~1.5-2G. I'm seeing 1 30b partition on the primary block device at /dev/sda and then a 2nd disk by default at /dev/sdb of 30gb as well.  So far only noticed this with vmware, I tested with KVM using the same image, and instance type and did not see this issue. \r\nThanks,\r\n-M\r\n\r\n{code}\r\nroot@i:/mnt# df -kh\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda1       1.4G  1.4G     0 100% /\r\nudev            2.0G  2.0G     0 100% /dev\r\ntmpfs           791M  212K  791M   1% /run\r\nnone            5.0M     0  5.0M   0% /run/lock\r\nnone            2.0G     0  2.0G   0% /run/shm\r\n/dev/sda2        28G  173M   27G   1% /mnt\r\nroot@i:/mnt# ls /dev/sd*\r\n/dev/sda  /dev/sda1  /dev/sda2  /dev/sda3  /dev/sda4  /dev/sdb\r\nroot@i:/mnt# blockdev --getsize64 /dev/sdb\r\n30207377408\r\n\r\n{code}\r\n\r\n\r\n{code}\r\n[root@d-18 eucalyptus]# euca-describe-instances\r\nRESERVATION\tr-3A393E83\t457797652142\ttest\r\nINSTANCE\ti-21EE3FD8\temi-E2B23BDA\t10.111.103.0\t1.115.160.141\trunning\ttest\t0\t\tm3.2xlarge\t2013-10-21T02:07:34.992Z\tPARTI00\teki-E12C3E14\teri-8FEE3B65\t\tmonitoring-disabled\t10.111.103.0\t1.115.160.141\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\nTAG\tinstance\ti-21EE3FD8\teuca:node\t10.111.5.152\r\n\r\n[root@d-18 eucalyptus]# euca-describe-instance-types m3.2xlarge\r\nINSTANCETYPE\tName        CPUs  Memory (MB)  Disk (GB)\r\nINSTANCETYPE\tm3.2xlarge     4         4096         30\r\n\r\n[root@d-18 eucalyptus]# euca-describe-images emi-E2B23BDA\r\nIMAGE\temi-E2B23BDA\t457797652142/precise-server-cloudimg-amd64-ext3.img\t457797652142\tavailable\tpublic\ti386\tmachine\teki-E12C3E14\teri-8FEE3B65\t\tinstance-store\tparavirtualized\t\r\n\r\n[root@d-18 eucalyptus]# ls -lh /disk1/storage/eucalyptus/instances/bukkits/tmptffn0mk9wd/5a1db658-e594-4671-9610-6db4d0b50bb4 \r\n-rw-r--r-- 1 eucalyptus eucalyptus 1.4G Oct 18 20:42 /disk1/storage/eucalyptus/instances/bukkits/tmptffn0mk9wd/5a1db658-e594-4671-9610-6db4d0b50bb4\r\n\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Instances getting double ephemeral disk","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i02cbz:","customfield_10000":"3_*:*_1_*:*_4745169_*|*_10001_*:*_1_*:*_21095_*|*_10000_*:*_1_*:*_49244445_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_34628444","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2013-10-21T00:46:03.825-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["mclark(mclark)","vasya(vasya)","zhill(zhill)"],"environment":"GIT_HASH\tfdcb12c3a733faef836b8a8693d9e82801fac27e\r\nPARTI00.storage.blockstoragemanager\toverlay\r\n10.111.5.141\tCENTOS\t6.3\t64\tREPO\t[CLC SC00 WS UI CC00]\r\n10.111.5.144\tCENTOS\t6.3\t64\tREPO\t[UI]\r\n10.111.5.151\tVMWARE\tESXI-5.1\t64\tREPO\t[NC00]\r\n10.111.5.152\tVMWARE\tESXI-5.1\t64\tREPO\t[NC00]","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901/comment/56603","id":"56603","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"The VM config on esx is:\r\n{code}\r\ncat /vmfs/volumes/5261f8a5-a99d2308-b16d-e89a8f740fb2/i-21EE3FD8/i-21EE3FD8.vmx\r\n.encoding = \"UTF-8\"\r\nconfig.version = \"8\"\r\nvirtualHW.version = \"9\"\r\npciBridge0.present = \"TRUE\"\r\npciBridge4.present = \"TRUE\"\r\npciBridge4.virtualDev = \"pcieRootPort\"\r\npciBridge4.functions = \"8\"\r\npciBridge5.present = \"TRUE\"\r\npciBridge5.virtualDev = \"pcieRootPort\"\r\npciBridge5.functions = \"8\"\r\npciBridge6.present = \"TRUE\"\r\npciBridge6.virtualDev = \"pcieRootPort\"\r\npciBridge6.functions = \"8\"\r\npciBridge7.present = \"TRUE\"\r\npciBridge7.virtualDev = \"pcieRootPort\"\r\npciBridge7.functions = \"8\"\r\nvmci0.present = \"TRUE\"\r\nhpet0.present = \"TRUE\"\r\nnvram = \"i-21EE3FD8.nvram\"\r\nvirtualHW.productCompatibility = \"hosted\"\r\npowerType.powerOff = \"soft\"\r\npowerType.powerOn = \"hard\"\r\npowerType.suspend = \"hard\"\r\npowerType.reset = \"soft\"\r\ndisplayName = \"i-21EE3FD8\"\r\nextendedConfigFile = \"i-21EE3FD8.vmxf\"\r\nnumvcpus = \"4\"\r\nscsi0.present = \"TRUE\"\r\nscsi0.sharedBus = \"none\"\r\nscsi0.virtualDev = \"lsisas1068\"\r\nmemsize = \"4096\"\r\nscsi0:0.present = \"TRUE\"\r\nscsi0:0.fileName = \"i-21EE3FD8.vmdk\"\r\nscsi0:0.deviceType = \"scsi-hardDisk\"\r\nscsi0:1.present = \"TRUE\"\r\nscsi0:1.fileName = \"i-21EE3FD8-sda2.vmdk\"\r\nscsi0:1.deviceType = \"scsi-hardDisk\"\r\nethernet0.present = \"TRUE\"\r\nethernet0.virtualDev = \"e1000\"\r\nethernet0.wakeOnPcktRcv = \"FALSE\"\r\nethernet0.networkName = \"eucalyptus-portgroup-1fac7580-00522\"\r\nethernet0.addressType = \"static\"\r\nethernet0.address = \"D0:0D:21:EE:3F:D8\"\r\nguestOS = \"linux\"\r\nannotation = \"Eucalyptus instance i-21EE3FD8|0Acreated 2013-10-20T19:10:21|0Aby user AIDY9RE32LRUKDFTZGMJ5|0Aon esx node 10.111.5.152|0Aby broker 9da05731|0Arunning on node d-18.qa1.eucalyptus-systems.com|0Apart of cloud 1fac7580\"\r\nuuid.location = \"56 4d ca ce fa 5e d1 ae-eb f8 49 1b b1 db a3 a7\"\r\nuuid.bios = \"56 4d ca ce fa 5e d1 ae-eb f8 49 1b b1 db a3 a7\"\r\nvc.uuid = \"52 06 e2 54 48 4b fd 98-d7 67 bb dd 20 ae cc 56\"\r\nfloppy0.present = \"FALSE\"\r\nscsi0.pciSlotNumber = \"160\"\r\nethernet0.pciSlotNumber = \"32\"\r\nvmci0.id = \"-1311005785\"\r\nvmci0.pciSlotNumber = \"33\"\r\ntools.syncTime = \"FALSE\"\r\ncleanShutdown = \"FALSE\"\r\nreplay.supported = \"FALSE\"\r\nsched.swap.derivedName = \"/vmfs/volumes/5261f8a5-a99d2308-b16d-e89a8f740fb2/i-21EE3FD8/i-21EE3FD8-47d19444.vswp\"\r\nreplay.filename = \"\"\r\nscsi0:0.redo = \"\"\r\nscsi0:1.redo = \"\"\r\npciBridge0.pciSlotNumber = \"17\"\r\npciBridge4.pciSlotNumber = \"21\"\r\npciBridge5.pciSlotNumber = \"22\"\r\npciBridge6.pciSlotNumber = \"23\"\r\npciBridge7.pciSlotNumber = \"24\"\r\nscsi0.sasWWID = \"50 05 05 6e fa 5e d1 a0\"\r\nvmotion.checkpointFBSize = \"4194304\"\r\nsoftPowerOff = \"FALSE\"\r\nscsi0:2.fileName = \"i-21EE3FD8_2.vmdk\"\r\nscsi0:2.mode = \"independent-persistent\"\r\nscsi0:2.ctkEnabled = \"FALSE\"\r\nscsi0:2.deviceType = \"scsi-hardDisk\"\r\nscsi0:2.present = \"TRUE\"\r\nscsi0:2.redo = \"\"\r\n{code}\r\n\r\nI'm not sure if this is intentional or not. [~dmitrii] or [~vasya], is this intentional to have i-21EE3FD8.vmdk, i-21EE3FD8_2.vmdk, i-21EE3FD8_sda2.vmdk all attached to a m3.2xlarge instance in vmware?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T00:46:03.825-0500","updated":"2013-10-21T00:46:03.825-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901/comment/56604","id":"56604","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"For comparison m1.small using same 1.4g image. \r\n\r\n{code}\r\n[root@d-18 ~]# euca-describe-instance-types \r\nINSTANCETYPE\tName         CPUs  Memory (MB)  Disk (GB)\r\nINSTANCETYPE\tm1.small        1          256          5\r\n\r\nOn guest...\r\nroot@i:~# blockdev --getsize64 /dev/sda \r\n5473598976\r\nroot@i:~# blockdev --getsize64 /dev/sdb\r\n3363831808\r\nroot@i:~# df -h\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/sda1       1.4G  584M  725M  45% /\r\nudev            116M   12K  116M   1% /dev\r\ntmpfs            48M  212K   48M   1% /run\r\nnone            5.0M     0  5.0M   0% /run/lock\r\nnone            120M     0  120M   0% /run/shm\r\n/dev/sda2       3.1G   70M  2.9G   3% /mnt\r\n\r\nImage...\r\n[root@d-18 ~]# ll -h /disk1/storage/eucalyptus/var/lib/eucalyptus/bukkits/tmptffn0mk9wd/5a1db658-e594-4671-9610-6db4d0b50bb4\r\n-rw-r--r-- 1 eucalyptus eucalyptus 1.4G Oct 18 20:42 /disk1/storage/eucalyptus/var/lib/eucalyptus/bukkits/tmptffn0mk9wd/5a1db658-e594-4671-9610-6db4d0b50bb4\r\n\r\n{code}\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T01:40:34.794-0500","updated":"2013-10-21T01:40:34.794-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901/comment/56606","id":"56606","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like the problem may be around VSphereEndpoint.java:541 & 563.\r\n\r\nI think the broker is double-adding the ephemeral disk (the root partition disk). It looks like the addRootDevices() looks at the VBR and adds them all and then the addEphemeralDevices() is also looking at the VBR and finds the root disk as an \"ephemeral\" type disk and adds that as well (hence the -sda2.vmdk) designation because it is sda2 in primary disk layout.\r\n\r\nI think the intent is that the 'machine' device should be expanded to match the instance type requirement (30GB in this case) and overwrite the 'ephemeral' section, it looks like instead the broker is attaching all of them so instead of a single root FS of size 30G there is /dev/sda1 with the uploaded image size (1.4G) and an empty sda2 of 30G.\r\n\r\nIt looks like this was added for future multi-ephemeral support based on vm-type. Here is the broker_vbrs data for the i-2xxxx instance in question:\r\n{code}\r\nucalyptus_vmwarebroker=# select broker_vbrs.broker_vbr_id, broker_vbrs.broker_vbr_size,broker_vbrs.broker_vbr_format, broker_vbrs.broker_vbr_guest_device_name, broker_vbrs.broker_vbr_type from broker_instance_has_vbrs inner join broker_vbrs on broker_vbrs.id=broker_instance_has_vbrs.broker_vbr  where broker_instance_id = '8aef850d41cec2560141d93f5b902886';\r\n broker_vbr_id | broker_vbr_size | broker_vbr_format | broker_vbr_guest_device_name | broker_vbr_type\r\n---------------+-----------------+-------------------+------------------------------+-----------------\r\n none          |       536870912 | swap              | sda3                         | swap\r\n none          |     30207377408 | ext3              | sda2                         | ephemeral\r\n emi-E2B23BDA  |      1468006400 | none              | sda1                         | machine\r\n eki-E12C3E14  |               0 | none              | none                         | kernel\r\n eri-8FEE3B65  |               0 | none              | none                         | ramdisk{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T02:19:22.347-0500","updated":"2013-10-21T03:08:28.350-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901/comment/56622","id":"56622","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in 12cfc4b606bca275aa7d5190febe3a1fd4328700","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T14:12:31.638-0500","updated":"2013-10-21T14:12:31.638-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24901/comment/56684","id":"56684","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~vasya]!\r\nVerified fix. Tested. Vmware paravirt m3.2xlarge w/ 30g disk and ~1.5g image. Verified that the guest was using 1.5g in sda1, 27g in sda2, and the remainder in sda3, 4. Also verified with an hvm instance using m1.small w/ 5g disk. I verified that /dev/sda was 2g containing the registered image, and /dev/sdb held the remaining 3g ephemeral. \r\nI spot checked kvm with paravirt and hvm as well. \r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-21T23:49:40.080-0500","updated":"2013-10-21T23:49:40.080-0500"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7980/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}