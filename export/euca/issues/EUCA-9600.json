{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"30926","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30926","key":"EUCA-9600","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9600/watchers","watchCount":1,"isWatching":false},"created":"2014-06-27T00:45:47.415-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14203","id":"14203","description":"Eucalyptus 3.4.3","name":"3.4.3","archived":false,"released":true,"releaseDate":"2014-07-11"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-07-03T16:19:59.254-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10000","description":"This issue has not yet been validated, and is not currently being investigated.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Unconfirmed","id":"10000","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"description":"Opening to track/debug recent test failures creating concurrent volumes in different clusters from a single 12g snapshot. \r\nThis seems to be the cause of BFEBS windows churn test failures. Will add more info as a debug further. \r\nThanks, -M\r\n\r\nTo reproduce:\r\n-create 12g snapshot (ie a windows image) \r\n-Issue 2 create volume requests from this snapshot within a short interval (< 5 seconds?), 1 in each cluster. For my tests I used 2 clusters. \r\n-Monitor the state of the volumes. \r\n\r\nWhat I've noticed is only one of the clusters usually produces a successful volume, and both clusters have the potential to pass/fail (ie not limited to a single cluster). \r\n\r\nFrom the SC's cloud-error.log...\r\n{code}\r\nThu Jun 26 22:28:44 2014 ERROR [ShellSessionManager:pool-142-thread-5] [com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java):199] java.io.IOException: Pipe closed\r\njava.io.IOException: Pipe closed\r\n        at java.io.PipedInputStream.checkStateForReceive(PipedInputStream.java:261)\r\n        at java.io.PipedInputStream.receive(PipedInputStream.java:227)\r\n        at java.io.PipedOutputStream.write(PipedOutputStream.java:149)\r\n        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)\r\n        at sun.nio.cs.StreamEncoder.implFlushBuffer(StreamEncoder.java:291)\r\n        at sun.nio.cs.StreamEncoder.implFlush(StreamEncoder.java:295)\r\n        at sun.nio.cs.StreamEncoder.flush(StreamEncoder.java:141)\r\n        at java.io.OutputStreamWriter.flush(OutputStreamWriter.java:229)\r\n        at java.io.BufferedWriter.flush(BufferedWriter.java:254)\r\n        at com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java:191)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.execCommand(EquallogicProvider.java:321)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.volumeExists(EquallogicProvider.java:567)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.access$100(EquallogicProvider.java:109)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:183)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$LowPrioritySlowTask.call(EquallogicProvider.java:821)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.createVolume(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.common.SANManager.createVolume(SANManager.java:327)\r\n        at com.eucalyptus.blockstorage.BlockStorageController$VolumeCreator.run(BlockStorageController.java:1699)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:744)\r\nThu Jun 26 22:28:44 2014 ERROR [ShellSessionManager:pool-142-thread-5] [com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java):199] java.io.IOException: Pipe closed\r\njava.io.IOException: Pipe closed\r\n        at java.io.PipedInputStream.checkStateForReceive(PipedInputStream.java:261)\r\n        at java.io.PipedInputStream.receive(PipedInputStream.java:227)\r\n        at java.io.PipedOutputStream.write(PipedOutputStream.java:149)\r\n        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)\r\n        at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:282)\r\n        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)\r\n        at java.io.OutputStreamWriter.write(OutputStreamWriter.java:207)\r\n        at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)\r\n        at java.io.BufferedWriter.flush(BufferedWriter.java:253)\r\n        at com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java:191)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.execCommand(EquallogicProvider.java:321)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.access$200(EquallogicProvider.java:109)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:186)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$LowPrioritySlowTask.call(EquallogicProvider.java:821)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.createVolume(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.common.SANManager.createVolume(SANManager.java:327)\r\n        at com.eucalyptus.blockstorage.BlockStorageController$VolumeCreator.run(BlockStorageController.java:1699)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:744)\r\nThu Jun 26 22:28:44 2014 ERROR [ShellSessionManager:pool-142-thread-5] [com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java):199] java.io.IOException: Pipe closed\r\njava.io.IOException: Pipe closed\r\n        at java.io.PipedInputStream.checkStateForReceive(PipedInputStream.java:261)\r\n        at java.io.PipedInputStream.receive(PipedInputStream.java:227)\r\n        at java.io.PipedOutputStream.write(PipedOutputStream.java:149)\r\n        at sun.nio.cs.StreamEncoder.writeBytes(StreamEncoder.java:221)\r\n        at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:282)\r\n        at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:125)\r\n        at java.io.OutputStreamWriter.write(OutputStreamWriter.java:207)\r\n        at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)\r\n        at java.io.BufferedWriter.flush(BufferedWriter.java:253)\r\n        at com.eucalyptus.blockstorage.san.common.ShellSessionManager$1.runTask(ShellSessionManager.java:191)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.execCommand(EquallogicProvider.java:321)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.access$200(EquallogicProvider.java:109)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:189)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$2.doTask(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider$LowPrioritySlowTask.call(EquallogicProvider.java:821)\r\n        at com.eucalyptus.blockstorage.san.equallogic.EquallogicProvider.createVolume(EquallogicProvider.java:180)\r\n        at com.eucalyptus.blockstorage.san.common.SANManager.createVolume(SANManager.java:327)\r\n        at com.eucalyptus.blockstorage.BlockStorageController$VolumeCreator.run(BlockStorageController.java:1699)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:744)\r\nThu Jun 26 22:28:44 2014 ERROR [BlockStorageController:pool-142-thread-5] [com.eucalyptus.blockstorage.BlockStorageController$VolumeCreator.run(BlockStorageController.java):1704] com.eucalyptus.util.EucalyptusCloudException: Unable to create volume: vol-469B3FD9\r\n{code}\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Concurrent volume creations from a shared snapshot failing in Multi-cluster env","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i02sqn:","customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["mclark(mclark)"],"customfield_10116":null,"customfield_10117":null,"environment":"GIT_REPO\tgit+ssh://repo-euca@git.eucalyptus-systems.com/internal#maint/3.4/testing\r\nGIT_HASH\te471e76b16669a1ee78a83a527843050da16d348\r\n\r\n10.111.1.46\tCENTOS\t6.3\t64\tREPO\t[CLC WS]\r\n10.111.1.56\tCENTOS\t6.3\t64\tREPO\t[CC00 SC00]\r\n10.111.5.76\tCENTOS\t6.3\t64\tREPO\t[NC00]\r\n10.111.5.77\tCENTOS\t6.3\t64\tREPO\t[CC01 SC01]\r\n10.111.5.176\tCENTOS\t6.3\t64\tREPO\t[NC01]\r\n\r\nSAN_PROVIDER=EquallogicProvider","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9600/votes","votes":0,"hasVoted":false},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}