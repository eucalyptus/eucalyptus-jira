{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"15649","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15649","key":"EUCA-3477","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10400","value":"Premium","id":"10400"},"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2012-09-10T18:29:24.096-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3477/watchers","watchCount":4,"isWatching":false},"created":"2012-09-07T02:15:47.453-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10004","id":"10004","description":"Eucalyptus 3.0.2","name":"3.0.2","archived":false,"released":true,"releaseDate":"2012-04-25"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10201","id":"10201","description":"Eucalyptus 3.1.1","name":"3.1.1","archived":false,"released":true,"releaseDate":"2012-08-24"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:14:20.582-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"If you need to upgrade libvirt on an NC you also need to restart it. \r\n\r\nAs of libvirt 0.6.0, you could restart libvirt without affecting virtual machines:\r\nhttp://wiki.libvirt.org/page/FAQ#Will_restarting_the_libvirt_daemon_stop_my_virtual_machines.3F\r\n\r\nHowever, if you restart libvirt on a machine with running Eucalyptus instances, the NC assumes the instances are dead and marks them as terminated.\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Instances show as terminated after restart of libvirt","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tellis","name":"tellis","key":"tellis","accountId":"557058:6cad8ae9-8adf-4cd7-b92d-9e1b4769cbb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue"},"displayName":"Tom Ellis","active":false,"timeZone":"Europe/London"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tellis","name":"tellis","key":"tellis","accountId":"557058:6cad8ae9-8adf-4cd7-b92d-9e1b4769cbb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue"},"displayName":"Tom Ellis","active":false,"timeZone":"Europe/London"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01jxr:","customfield_10000":"10000_*:*_1_*:*_26746547_*|*_5_*:*_1_*:*_0_*|*_10007_*:*_1_*:*_290870113","customfield_10001":"2012-09-07T09:42:26.853-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["nurmi(nurmi)","hspencer(hspencer)","tellis(tellis)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3477/votes","votes":2,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15649/comment/31972","id":"31972","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tellis","name":"tellis","key":"tellis","accountId":"557058:6cad8ae9-8adf-4cd7-b92d-9e1b4769cbb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue"},"displayName":"Tom Ellis","active":false,"timeZone":"Europe/London"},"body":"Seems like there is a hard coded timeout of 5 attempts:\n\nnode/handlers.h:\n#define LIBVIRT_QUERY_RETRIES 5\n\nWe should detect service restarts or have a higher retry limit and/or make this option tunable.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tellis","name":"tellis","key":"tellis","accountId":"557058:6cad8ae9-8adf-4cd7-b92d-9e1b4769cbb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cf15001fac799ff8e3aad937512ca76?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtellis%26avatarId%3D10702%26noRedirect%3Dtrue"},"displayName":"Tom Ellis","active":false,"timeZone":"Europe/London"},"created":"2012-09-07T03:24:18.677-0500","updated":"2012-09-07T03:24:18.677-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15649/comment/32122","id":"32122","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"body":"In 3.1.1 and earlier, the NC depends on correct and stable running of libvirtd while the NC is running, leading to issues like the one described here if libvirtd is controlled manually.  With 3.1.2, the node controller will forceably restart the libvirt daemon if it is detected as down, and will forcably re-initiate connections to libvirtd when its connection is disrupted.  This behavior will resolve the stated issue, but it does mean that while an NC is running, libvirtd's lifecycle will not be manually controllable (since the NC will restart libvirtd anytime it is detected as not running). ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"created":"2012-09-10T18:29:24.110-0500","updated":"2012-09-10T18:29:24.110-0500"}],"maxResults":2,"total":2,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}