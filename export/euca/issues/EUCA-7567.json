{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"23881","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23881","key":"EUCA-7567","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2013-09-13T13:17:55.016-0500","customfield_10308":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7567/watchers","watchCount":2,"isWatching":false},"created":"2013-09-13T12:53:35.258-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"issuelinks":[],"assignee":null,"updated":"2014-06-16T16:17:37.454-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10400","id":"10400","name":"User Console"}],"timeoriginalestimate":null,"description":"This is an issue that affects automated testing. Css already changed within 3.4 development which required changing locators for almost every click in this test. We must come up with a solution that would enable this test to work even when css changes. One possible solution is to add id's or enable accessing elements by link text.\r\n\r\nSelenium test that adds rules to an empty security group:\r\n\r\n{code}\r\n\r\n    def test_ui_add_rules_to_security_group(self, group_description):\r\n        '''\r\n        Adds rules to empty group with prescribed description\r\n        '''\r\n        print\r\n        print \"Started Test: Add rules to a Security Group\"\r\n        self.click_element_by_link_text(\"Dashboard\")\r\n        self.verify_element_by_link_text(\"Launch new instance\")\r\n        print\r\n        print \"Test: Go to the Page Security Group\"\r\n        self.click_element_by_link_text(\"Network & Security\")\r\n        self.click_element_by_link_text(\"Security Groups\")\r\n        print\"Test: Checkbox the security group\"\r\n\r\n        if (self.get_text_by_xpath(\"//table[@id='sgroups']/tbody[2]/tr/td[3]\") == group_description):\r\n            self.click_element_by_xpath(\"//table[@id='sgroups']/tbody[2]/tr/td[3]\")\r\n\r\n        elif(self.get_text_by_xpath(\"//table[@id='sgroups']/tbody/tr/td[3]\") == group_description):\r\n            self.click_element_by_xpath(\"//table[@id='sgroups']/tbody/tr/td[3]\")\r\n\r\n\r\n        print \"Test: Add rules\"\r\n        self.click_element_by_id(\"more-actions-sgroups\")\r\n        self.click_element_by_link_text(\"Manage rules\")\r\n        print \"Adding TCP rule\"\r\n        print\r\n        self.select_text_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > div.form-row > #sgroup-template\", \"Custom TCP\")\r\n        self.set_keys_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row > #sgroup-port-option > #sgroup-ports\",\"0\")\r\n        self.set_keys_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row.sg-inline-options > #allow-ip\",\"0.0.0.0/0\")\r\n        self.click_element_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.section-button-bar > #sgroup-add-rule\")\r\n        print \"Adding ICMP rule\"\r\n        print\r\n        self.select_text_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > div.form-row > #sgroup-template\", \"Custom ICMP\")\r\n        self.set_keys_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row.sg-inline-options > #allow-ip\",\"0.0.0.0/0\")\r\n        self.click_element_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.section-button-bar > #sgroup-add-rule\")\r\n        print \"Adding HTTP rule\"\r\n        print\r\n        self.select_text_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > div.form-row > #sgroup-template\", \"HTTP (TCP port 80, for web servers)\")\r\n        self.set_keys_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row.sg-inline-options > #allow-ip\",\"0.0.0.0/0\")\r\n        self.click_element_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.section-button-bar > #sgroup-add-rule\")\r\n        print \"Adding SSH rule\"\r\n        time.sleep(30)\r\n        print\r\n        self.select_text_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > div.form-row > #sgroup-template\", \"SSH (TCP port 22, for terminal access)\")\r\n        time.sleep(3)\r\n        self.set_keys_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row > #sgroup-port-option > #sgroup-ports\",\"0\")\r\n        time.sleep(3)\r\n        self.click_element_by_css_selector(\"div.content-sections-wrapper > div.rules.content-section > #sgroup-more-rules > div.form-row.sg-inline-options > #sgroup-ip-check\")\r\n        time.sleep(3)\r\n        self.click_element_by_id(\"sgroup-add-btn\")\r\n        print\r\n        print \"Finished: Create Security Group\"\r\n        print\r\n        return 0\r\n{code}\r\n\r\n\r\nIf rules are added during security group creation, the locators are much simpler. Selenium test that creates a security group with rules:\r\n\r\n{code}\r\ndef test_ui_create_security_group(self):\r\n        print\r\n        print \"Started Test: Create Security Group\"\r\n        self.click_element_by_link_text(\"Dashboard\")\r\n        self.verify_element_by_link_text(\"Launch new instance\")\r\n        print\r\n        print \"Test: Go to the Page Security Group\"\r\n        self.click_element_by_css_selector(\"#dashboard-netsec-sgroup > span\")\r\n        self.click_element_by_id(\"table-sgroups-new\")\r\n        print\r\n        print \"Test: Create Security Group\"\r\n        self.set_keys_by_id(\"sgroup-name\", \"mywebservice\")\r\n        self.set_keys_by_id(\"sgroup-description\", \"Rules for my webservice. Generated by Selenium\")\r\n        print \"Click: LINK_TEXT -> Rules\"\r\n        self.click_element_by_link_text(\"Rules\")\r\n        print \"Select: ID -> sgroup-templete, TEXT -> SSH (TCP port 22, for terminal access)\"\r\n        self.select_text_by_id(\"sgroup-template\", \"SSH (TCP port 22, for terminal access)\")\r\n        self.set_keys_by_id(\"allow-ip\", \"0.0.0.0/0\")\r\n        print \"Click: ID -> sgroup-add-rule\"\r\n        self.click_element_by_id(\"sgroup-add-rule\")\r\n        self.verify_element_by_id(\"sgroup-rule-number-0\")\r\n        print \"Rule 0: \" + self.get_text_by_css_selector(\"ul.sg-rules-list > li\")\r\n        print \"Select: ID -> sgroup-templete, TEXT -> HTTP (TCP port 80, for web servers)\"\r\n        self.select_text_by_id(\"sgroup-template\", \"HTTP (TCP port 80, for web servers)\")\r\n        self.set_keys_by_id(\"allow-ip\", \"0.0.0.0/0\")\r\n        print \"Click: ID -> sgroup-add-rule\"\r\n        self.click_element_by_id(\"sgroup-add-rule\")\r\n        self.verify_element_by_id(\"sgroup-rule-number-1\")\r\n        print \"Rule 1: \" + self.get_text_by_xpath(\"//div[@id='sgroup-rules-list']/ul/li[2]\")\r\n        print \"Select: ID -> sgroup-templete, TEXT -> Custom ICMP\"\r\n        Select(self.driver.find_element_by_id(\"sgroup-template\")).select_by_visible_text(\"Custom ICMP\")\r\n        print \"Select: ID -> sgroup-type. TEXT -> All\"\r\n        self.select_text_by_id(\"sgroup-type\", \"All\")\r\n        self.set_keys_by_id(\"allow-ip\", \"0.0.0.0/0\")\r\n        print \"Click: ID -> sgroup-add-rule\"\r\n        self.click_element_by_id(\"sgroup-add-rule\")\r\n        self.verify_element_by_id(\"sgroup-rule-number-2\")\r\n        print \"Rule 2: \" + self.get_text_by_xpath(\"//div[@id='sgroup-rules-list']/ul/li[3]\")\r\n        self.click_element_by_id(\"sgroup-add-btn\")\r\n        print\r\n        print \"Finished: Create Security Group\"\r\n        print\r\n        return 0\r\n{code} ","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"\"Add more rules to security group\" elements can be accessed only via  long css locators ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"10000_*:*_1_*:*_1459793_*|*_5_*:*_1_*:*_0","customfield_12100":"0|i029t3:","customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["alice(alice)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23881/comment/53242","id":"53242","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"body":"Just saw that this dialog have been supplied with IDs! Neato!!!!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=alice","name":"alice","key":"alice","accountId":"557058:5b1ee660-a351-4b5c-b5b0-22efc33ccfe4","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2cf26ec8e139ffc4e70a1bf036738b53?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dalice%26avatarId%3D14400%26noRedirect%3Dtrue"},"displayName":"Alice Hubenko","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-13T13:17:36.062-0500","updated":"2013-09-13T13:17:36.062-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7567/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}