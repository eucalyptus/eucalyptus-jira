{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"19119","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119","key":"EUCA-4964","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12106","id":"12106","description":"Eucalyptus 3.3.1","name":"3.3.1","archived":false,"released":true,"releaseDate":"2013-08-27"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10401","value":"Standard","id":"10401"},"customfield_10104":[],"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2013-08-09T15:56:26.162-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4964/watchers","watchCount":14,"isWatching":false},"lastViewed":null,"created":"2013-02-11T18:22:34.594-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2013-07-25T17:34:37.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/11305","id":"11305","name":"3.2.2","archived":false,"released":true,"releaseDate":"2013-04-01"}],"issuelinks":[{"id":"15944","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/15944","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"19430","key":"DOC-746","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19430","fields":{"summary":"installation guide can have a note about virbr0","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811}}}},{"id":"18518","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/18518","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"21940","key":"EUCA-6577","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21940","fields":{"summary":"Instance creation fails: failed to remove device mapper device with 'dmsetup'","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-06-16T16:18:09.370-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"nc.log: http://bpaste.net/show/76728/\r\nnc conf: https://gist.github.com/anonymous/4758631/raw/c23b92a583c0ab46b4c8a1876a2111a1ffa7fd09/etceucalyptuseucalyptus.conf.txt\r\n\r\nWhen i start an instance, it errors out \"[i-4A3045A7] failed to clone/copy blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-4A3045A7/emi-37D63D9F-229550a1: 12 blobstore.c:2869 blockblob involved in operation has backing of unexpected size\"\r\n\r\nand then tears down the instance.\r\n\r\nI am available for contact dvanrood@internetbrands.com 24/7 for more information.","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"instance creation fails on blobstore.c","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01ua7:","customfield_10000":"3_*:*_1_*:*_1289130290_*|*_10000_*:*_1_*:*_7505502640_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_75082_*|*_5_*:*_1_*:*_2738355910_*|*_4_*:*_1_*:*_3920167670","customfield_10001":"2013-02-20T23:49:51.018-0600","customfield_10200":null,"customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["agrimm(agrimm)","genewitch(genewitch)","dmitrii(dmitrii)","pablo(pablo)","shaon(shaon)","lwade(lwade)","tjcramer(tjcramer)","viglesias(viglesias)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39534","id":"39534","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"so far i have cleared the cache and work directories and rebooted, and increased the size of the disk allotment. Neither helped, but increasing the disk size did change the error temporarily to \n\"[i-C0883DEE] failed to clone/copy blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-C0883DEE/emi-37D63D9F-229550a1: 7 blobstore.c:2988 one of the source blockblobs is too small for the map\"\n\nWhich is still in the same source file.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:25:26.196-0600","updated":"2013-02-11T18:25:26.196-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39535","id":"39535","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"emi was fetched using the emi fetch tool mentioned on the web console and the documentation, emi is centos6 including eki and eri.\n[root@cloud-box-01 ~]# euca-describe-availability-zones verbose\nAVAILABILITYZONE\tIB-HQ-01\t172.16.122.200 arn:euca:eucalyptus:IB-HQ-01:cluster:cc-122_200/\nAVAILABILITYZONE\t|- vm types\tfree / max   cpu   ram  disk\nAVAILABILITYZONE\t|- m1.small\t0007 / 0007   1    512     5\nAVAILABILITYZONE\t|- c1.medium\t0003 / 0003   2    512    10\nAVAILABILITYZONE\t|- m1.large\t0002 / 0002   2   1024    15\nAVAILABILITYZONE\t|- m1.xlarge\t0001 / 0001   2   2048    20\nAVAILABILITYZONE\t|- c1.xlarge\t0001 / 0001   8   8192    30\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:26:27.230-0600","updated":"2013-02-11T18:26:27.230-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39536","id":"39536","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"[root@cloud-box-01 ~]# euca-describe-services -E\nSERVICE\tcluster        \tIB-HQ-01       \tcc-122_200     \tENABLED   \t16  \thttp://172.16.122.200:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:IB-HQ-01:cluster:cc-122_200/\nSERVICE\tdns            \teucalyptus     \t172.16.122.210 \tENABLED   \t16  \thttp://172.16.122.210:8773/services/Dns \tarn:euca:eucalyptus::dns:172.16.122.210/\nSERVICE\tbootstrap      \tbootstrap      \t172.16.122.210 \tENABLED   \t16  \thttp://172.16.122.210:8773/services/Empyrean\tarn:euca:bootstrap:::172.16.122.210/\nSERVICE\tstorage        \tIB-HQ-01       \tsc-on-CLC      \tENABLED   \t16  \thttp://172.16.122.210:8773/services/Storage\tarn:euca:eucalyptus:IB-HQ-01:storage:sc-on-CLC/\nSERVICE\teucalyptus     \teucalyptus     \t172.16.122.210 \tENABLED   \t16  \thttp://172.16.122.210:8773/services/Eucalyptus\tarn:euca:eucalyptus:::172.16.122.210/\nSERVICE\twalrus         \twalrus         \twalrus-server  \tENABLED   \t16  \thttp://172.16.122.230:8773/services/Walrus\tarn:euca:bootstrap:walrus:walrus:walrus-server/\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:26:46.797-0600","updated":"2013-02-11T18:26:46.797-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39538","id":"39538","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"and finally, command to start:\n[root@cloud-box-01 ~]# euca-run-instances -g default -k rootkeypair -t c1.xlarge emi-37D63D9F --kernel eki-508134E4 --ramdisk eri-C60932E0","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:27:31.478-0600","updated":"2013-02-11T18:27:31.478-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39539","id":"39539","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"[root@cloud-box-01 ~]# euca-describe-images \nIMAGE\temi-37D63D9F\tcentos-63-dvanrood-01/centos-6.3-x86_64.manifest.xml\t397852642205\tavailable\tprivate\t\tx86_64\tmachine\teki-508134E4\teri-459D3399\t\tinstance-store\nIMAGE\teri-459D3399\tcentos-63-dvanrood-01/initrd-2.6.32-279.14.1.el6.x86_64.img.manifest.xml\t000000000001\tavailable\tprivate\t\tx86_64\tramdisk\t\t\t\tinstance-store\nIMAGE\teri-C60932E0\tcentos-63-dvanrood-01/initrd-2.6.32-279.14.1.el6.x86_64.manifest.xml\t000000000001\tavailable\tprivate\t\tx86_64\tramdisk\t\t\t\tinstance-store\nIMAGE\teki-508134E4\tcentos-63-dvanrood-01/vmlinuz-2.6.32-279.14.1.el6.x86_64.manifest.xml\t000000000001\tavailable\tprivate\t\tx86_64\tkernel\t","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:28:28.197-0600","updated":"2013-02-11T18:28:28.197-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39542","id":"39542","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"Sorry, the proper title should be instance creation fails on blobstore.c not blockblob.c\n\nSorry!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-11T18:51:58.015-0600","updated":"2013-02-11T18:51:58.015-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39962","id":"39962","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"2013-02-20 22:22:32  INFO 000018542 init_backing_store       | initializing backing store...\n2013-02-20 22:22:32  INFO 000018542 init                     | disk space for instances: /var/lib/eucalyptus/instances/work\n2013-02-20 22:22:32  INFO 000018542 init                     |                           038522MB limit (30.1% of the file system) - 740MB overhead = 37782MB = 36GB\n2013-02-20 22:22:32  INFO 000018542 init                     |                           000000MB reserved for use (0.0% of limit)\n2013-02-20 22:22:32  INFO 000018542 init                     |                           000000MB allocated for use (0.0% of limit, 0.0% of the file system)\n2013-02-20 22:22:32  INFO 000018542 init                     |     disk space for cache: /var/lib/eucalyptus/instances/cache\n2013-02-20 22:22:32  INFO 000018542 init                     |                           078214MB limit (61.1% of the file system)\n2013-02-20 22:22:32  INFO 000018542 init                     |                           004569MB reserved for use (5.8% of limit)\n2013-02-20 22:22:32  INFO 000018542 init                     |                           004569MB allocated for use (5.8% of limit, 3.6% of the file system)\n2013-02-20 22:22:32  INFO 000018542 adopt_instances          | looking for existing domains\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-20T16:24:02.207-0600","updated":"2013-02-20T16:24:02.207-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39964","id":"39964","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"2013-02-20 22:39:39 DEBUG 000018623 art_implement_tree       | [i-CEF9408B] implemented artifact 006|emi-37D63D9F-ba1ca622 on try 1\n2013-02-20 22:39:39 DEBUG 000018623 find_or_create_artifact  | [i-CEF9408B] checking work blobstore for 007|emi-37D63D9F-229550a1 (do_create=1 ret=1)\n2013-02-20 22:39:39 DEBUG 000018623 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-CEF9408B/emi-37D63D9F-229550a1.blocks\n2013-02-20 22:39:39 DEBUG 000018623 diskutil_loop            |             to /dev/loop1 at offset 0\n2013-02-20 22:39:39 DEBUG 000018623 art_implement_tree       | [i-CEF9408B] created a blob for an artifact 007|emi-37D63D9F-229550a1 on try 1\n2013-02-20 22:39:39  INFO 000018623 copy_creator             | [i-CEF9408B] copying/cloning blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-CEF9408B/emi-37D63D9F-229550a1\n2013-02-20 22:39:39 ERROR 000018623 copy_creator             | [i-CEF9408B] failed to clone/copy blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-CEF9408B/emi-37D63D9F-229550a1: 12 blobstore.c:2869 blockblob involved in operation has backing of unexpected size\n2013-02-20 22:39:39 ERROR 000018623 art_implement_tree       | [i-CEF9408B] failed to create artifact emi-37D63D9F-229550a1 (error=12, may retry) on try 1\n2013-02-20 22:39:39 DEBUG 000018623 diskutil_unloop          | detaching from loop device /dev/loop1\n2013-02-20 22:39:39 DEBUG 000018623 diskutil_unloop          | detaching from loop device /dev/loop0\n2013-02-20 22:39:39 DEBUG 000018623 art_implement_tree       | [i-CEF9408B] failed to implement artifact 007|emi-37D63D9F-229550a1 on try 1\n2013-02-20 22:39:39 ERROR 000018623 art_implement_tree       | [i-CEF9408B] failed to provision dependency emi-37D63D9F-229550a1 for artifact dsk-37D63D9F-84434c84 (error=12) on try 1\n2013-02-20 22:39:39 DEBUG 000018623 art_implement_tree       | [i-CEF9408B] failed to implement artifact 012|dsk-37D63D9F-84434c84 on try 1\n2013-02-20 22:39:39 ERROR 000018623 art_implement_tree       | [i-CEF9408B] failed to provision dependency dsk-37D63D9F-84434c84 for artifact i-CEF9408B (error=12) on try 1\n2013-02-20 22:39:39 DEBUG 000018623 art_implement_tree       | [i-CEF9408B] failed to implement artifact 001|i-CEF9408B on try 1\n2013-02-20 22:39:39 ERROR 000018623 create_instance_backing  | [i-CEF9408B] failed to implement backing for instance\n2013-02-20 22:39:39 ERROR 000018623 startup_thread           | [i-CEF9408B] failed to prepare images for instance (error=1)\n2013-02-20 22:39:39 DEBUG 000018623 change_state             | [i-CEF9408B] state change for instance: Staging -> Shutoff (Pending)\n2013-02-20 22:39:40  WARN 000018555 libvirt_err_handler      | libvirt: Domain not found: no domain with matching name 'i-CEF9408B' (code=42)\n2013-02-20 22:39:40  INFO 000018555 monitoring_thread        | [i-CEF9408B] cleaning up state for instance\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-CEF9408B/*' eucalyptus.* 660\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-CEF9408B/eri-C60932E0-db0f043b.blocks\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_loop            |             to /dev/loop0 at offset 0\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_unloop          | detaching from loop device /dev/loop0\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-CEF9408B/eki-508134E4-d18fea2e.blocks\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_loop            |             to /dev/loop0 at offset 0\n2013-02-20 22:39:40 DEBUG 000018555 diskutil_unloop          | detaching from loop device /dev/loop0\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-20T16:41:06.069-0600","updated":"2013-02-20T16:41:06.069-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/39973","id":"39973","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"losetup -a \nreturns no output","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-20T18:44:48.513-0600","updated":"2013-02-20T18:44:48.513-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40374","id":"40374","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"if the emi/etc are in the cache dir, a different error appears:\n2013-02-21 02:40:15 DEBUG 000020940 art_implement_tree       | [i-6E404441] implemented artifact 014|eki-508134E4-d18fea2e on try 1\n2013-02-21 02:40:15 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 015|eki-508134E4-d18fea2e (do_create=1 ret=1)\n2013-02-21 02:40:15 DEBUG 000020940 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eki-508134E4-d18fea2e.blocks\n2013-02-21 02:40:15 DEBUG 000020940 diskutil_loop            |             to /dev/loop1 at offset 0\n2013-02-21 02:40:15 DEBUG 000020940 art_implement_tree       | [i-6E404441] created a blob for an artifact 015|eki-508134E4-d18fea2e on try 1\n2013-02-21 02:40:15  INFO 000020940 copy_creator             | [i-6E404441] copying/cloning blob eki-508134E4-d18fea2e to blob Y6DUFM655HO9IL1IJBODF/i-6E404441/eki-508134E4-d18fea2e\n2013-02-21 02:40:15  INFO 000020940 diskutil_dd2             | copying data from '/var/lib/eucalyptus/instances/cache/eki-508134E4-d18fea2e/blocks'\n2013-02-21 02:40:15  INFO 000020940 diskutil_dd2             |                to '/var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eki-508134E4-d18fea2e.blocks'\n2013-02-21 02:40:15  INFO 000020940 diskutil_dd2             |                of 249297 blocks (bs=16), seeking 0, skipping 0\n2013-02-21 02:40:15 DEBUG 000018542 doAssignAddress          | [i-6E404441] invoked (publicIp=172.16.123.100)\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eki-508134E4-d18fea2e.blocks' *.* 664\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop0\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] implemented artifact 015|eki-508134E4-d18fea2e on try 1\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop1\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] implementing artifact 017|eri-C60932E0-db0f043b\n2013-02-21 02:40:16 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 017|eri-C60932E0-db0f043b (do_create=0 ret=1)\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] implementing artifact 016|eri-C60932E0-db0f043b\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/cache/eri-C60932E0-db0f043b/blocks\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_loop            |             to /dev/loop0 at offset 0\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] found existing artifact 016|eri-C60932E0-db0f043b on try 1\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] implemented artifact 016|eri-C60932E0-db0f043b on try 1\n2013-02-21 02:40:16 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 017|eri-C60932E0-db0f043b (do_create=1 ret=1)\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eri-C60932E0-db0f043b.blocks\n2013-02-21 02:40:16 DEBUG 000020940 diskutil_loop            |             to /dev/loop1 at offset 0\n2013-02-21 02:40:16 DEBUG 000020940 art_implement_tree       | [i-6E404441] created a blob for an artifact 017|eri-C60932E0-db0f043b on try 1\n2013-02-21 02:40:16  INFO 000020940 copy_creator             | [i-6E404441] copying/cloning blob eri-C60932E0-db0f043b to blob Y6DUFM655HO9IL1IJBODF/i-6E404441/eri-C60932E0-db0f043b\n2013-02-21 02:40:16  INFO 000020940 diskutil_dd2             | copying data from '/var/lib/eucalyptus/instances/cache/eri-C60932E0-db0f043b/blocks'\n2013-02-21 02:40:16  INFO 000020940 diskutil_dd2             |                to '/var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eri-C60932E0-db0f043b.blocks'\n2013-02-21 02:40:16  INFO 000020940 diskutil_dd2             |                of 742881 blocks (bs=8), seeking 0, skipping 0\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_ch              | ch(own|mod) '/var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/eri-C60932E0-db0f043b.blocks' *.* 664\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop0\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] implemented artifact 017|eri-C60932E0-db0f043b on try 1\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop1\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] implementing artifact 024|dsk-37D63D9F-84434c84\n2013-02-21 02:40:19 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 024|dsk-37D63D9F-84434c84 (do_create=0 ret=1)\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] implementing artifact 019|emi-37D63D9F-229550a1\n2013-02-21 02:40:19 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 019|emi-37D63D9F-229550a1 (do_create=0 ret=1)\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] implementing artifact 018|emi-37D63D9F-ba1ca622\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/cache/emi-37D63D9F-ba1ca622/blocks\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_loop            |             to /dev/loop0 at offset 0\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] found existing artifact 018|emi-37D63D9F-ba1ca622 on try 1\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] implemented artifact 018|emi-37D63D9F-ba1ca622 on try 1\n2013-02-21 02:40:19 DEBUG 000020940 find_or_create_artifact  | [i-6E404441] checking work blobstore for 019|emi-37D63D9F-229550a1 (do_create=1 ret=1)\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/Y6DUFM655HO9IL1IJBODF/i-6E404441/emi-37D63D9F-229550a1.blocks\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_loop            |             to /dev/loop1 at offset 0\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] created a blob for an artifact 019|emi-37D63D9F-229550a1 on try 1\n2013-02-21 02:40:19  INFO 000020940 copy_creator             | [i-6E404441] copying/cloning blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-6E404441/emi-37D63D9F-229550a1\n***2013-02-21 02:40:19 ERROR 000020940 copy_creator             | [i-6E404441] failed to clone/copy blob emi-37D63D9F-ba1ca622 to blob Y6DUFM655HO9IL1IJBODF/i-6E404441/emi-37D63D9F-229550a1: 7 blobstore.c:2988 one of the source blockblobs is too small for the map***\n2013-02-21 02:40:19 ERROR 000020940 art_implement_tree       | [i-6E404441] failed to create artifact emi-37D63D9F-229550a1 (error=7, may retry) on try 1\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop1\n2013-02-21 02:40:19 DEBUG 000020940 diskutil_unloop          | detaching from loop device /dev/loop0\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] failed to implement artifact 019|emi-37D63D9F-229550a1 on try 1\n2013-02-21 02:40:19 ERROR 000020940 art_implement_tree       | [i-6E404441] failed to provision dependency emi-37D63D9F-229550a1 for artifact dsk-37D63D9F-84434c84 (error=7) on try 1\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] failed to implement artifact 024|dsk-37D63D9F-84434c84 on try 1\n2013-02-21 02:40:19 ERROR 000020940 art_implement_tree       | [i-6E404441] failed to provision dependency dsk-37D63D9F-84434c84 for artifact i-6E404441 (error=7) on try 1\n2013-02-21 02:40:19 DEBUG 000020940 art_implement_tree       | [i-6E404441] failed to implement artifact 013|i-6E404441 on try 1\n2013-02-21 02:40:19 ERROR 000020940 create_instance_backing  | [i-6E404441] failed to implement backing for instance\n2013-02-21 02:40:19 ERROR 000020940 startup_thread           | [i-6E404441] failed to prepare images for instance (error=1)\n2013-02-21 02:40:19 DEBUG 000020940 change_state             | [i-6E404441] state change for instance: Staging -> Shutoff (Pending)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-20T20:41:37.769-0600","updated":"2013-02-20T20:41:37.769-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40378","id":"40378","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Hi, [~genewitch]!\n\nWould you mind checking the following sizes for me, please? \n\n* Size of the emi-37D63D9F EMI that you've uploaded, in bytes.\n\n* Size of the EMI found between <size></size> tags in the signature file:\n     grep --color size /var/lib/eucalyptus/instances/cache/emi-37D63D9F-ba1ca622/sig\n\n* Size of /var/lib/eucalyptus/instances/cache/emi-37D63D9F-ba1ca622/blocks file, in bytes.\n\nI am looking for any discrepancy, as a starting point.\n\nThanks!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-20T23:49:51.018-0600","updated":"2013-02-20T23:49:51.018-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40379","id":"40379","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"1. 4781506560 (in bukkit)\n2. <size>4781506560</size>\n3. 4781476408 (in nc cache dir)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T00:10:48.641-0600","updated":"2013-02-21T00:10:48.641-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40380","id":"40380","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"and now the error, obviously, makes sense.\n\nI don't know how to fix it, i can run another instance and pastebin the entire log from nc start to instance teardown if that will help.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T00:14:06.855-0600","updated":"2013-02-21T00:14:06.855-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40381","id":"40381","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks, that's something! I noticed you're using CC's image cache. For completeness, could you find the EMI in CC's cache and check the file size there? It should be something like\n\n  /var/lib/eucalyptus/dynserv/data/emi-37D63D9F\n\n(I'm trying to figure out if CC has a bad copy or if it gets mangled for some reason on the download by the NC.)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T00:22:24.330-0600","updated":"2013-02-21T00:22:24.330-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40385","id":"40385","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"4781506560","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T01:07:24.350-0600","updated":"2013-02-21T01:07:24.350-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40386","id":"40386","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Interesting. So that means the download from CC's cache to NC didn't succeed. \n\nIn the snippet of the nc.log that you attached to the ticket you grep'ed for the instance ID. Would you mind posting another snippet from that same nc.log and from the same time period (from 23:18:08, when Run arrives, until 23:26:20, when provisioning fails) but with *all* lines included? (Code that performs the download produces DEBUG-level statements, but they aren't tagged by the instance ID because in that generic HTTP routine instance ID isn't known.)\n\nAlso, I am curious if you're running into this problem with any other images? Running another instance with the same EMI won't tell us much as NC will try to use the mangled cached copy and will fail with a different error, as you've already seen. But running a *different* EMI will cause the entire image provisioning pipeline to be exercised and may tell us if the problem is specific to the image or to the entire installation.\n\nThanks for your patience with this analysis!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T01:35:50.169-0600","updated":"2013-02-21T01:35:50.169-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40388","id":"40388","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"at least i learned that less is quite powerful and have a new way to grab sections of logs :-)\n\nhttps://gist.github.com/anonymous/5003073/raw/6f257b2e16c85e8610909fd324c94247b8db28ae/stdin.txt\n\nin less, go to the last line you want to grab, press m, then e. go to the first line you want to grab, and press | (pipe), e, then wgetpaste or whatever.\n\nhope this helps, i can go further up or down.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T02:05:51.444-0600","updated":"2013-02-21T02:05:51.444-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40390","id":"40390","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"When clearing cache and work directories did you delete the hidden .blobstore file?  You'll need to do this, its persistent so a reboot doesn't clear it.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-21T03:34:57.869-0600","updated":"2013-02-21T03:34:57.869-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40428","id":"40428","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"I did delete the .blobstore because i was in the parent directory when i typed rm -rf *; it deleted work and cache directories themselves.\n\nAnother image did sucessfully go into the running state, but the root size was 1.3gb instead of 4.7.\n\nWill attempt this EMI again in an hour or so, starting from eustore-install-image.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T13:55:06.392-0600","updated":"2013-02-21T13:55:06.392-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40430","id":"40430","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I think I might have recreated this.  Can you please stop the eucalyptus-nc service and then start it again.  Once started, please pull from the nc.log the section which looks like this:\n\n{code}\n2013-02-20 05:07:52  INFO | disk space for instances: /var/lib/eucalyptus/instances/work\n2013-02-20 05:07:52  INFO |                           305783MB limit (30.3% of the file system) - 5960MB overhead = 299823MB = 292GB\n2013-02-20 05:07:52  INFO |                           000000MB reserved for use (0.0% of limit)\n2013-02-20 05:07:52  INFO |                           000000MB allocated for use (0.0% of limit, 0.0% of the file system)\n2013-02-20 05:07:52  INFO |     disk space for cache: /var/lib/eucalyptus/instances/cache\n2013-02-20 05:07:52  INFO |                           620833MB limit (61.6% of the file system)\n2013-02-20 05:07:52  INFO |                           000000MB reserved for use (0.0% of limit)\n2013-02-20 05:07:52  INFO |                           000000MB allocated for use (0.0% of limit, 0.0% of the file system)\n{code}\n\nI know you've supplied this earlier, but just so we can get an up to date picture.  Then, please provide output from:\n\n{code}\ndf -kh\n{code}\n\nWhat I *think* I'm seeing is that the cache limit is still remembered somehow (despite restarts) and this retains the old value from the space calculation.  \n\nIn your log earlier in this ticket, it shows:\n\n{code}\n 2013-02-20 22:22:32 INFO 000018542 init | 004569MB allocated for use (5.8% of limit, 3.6% of the file system)\n{code}\n\nWhich is clearly not enough to allow a 4.7GB image to cache.\n\nTo try to work around this, try setting NC_CACHE_SIZE in /etc/eucalyptus/eucalyptus.conf to a higher (safe) value and then restart the eucalyptus-nc service and try to launch an instance. Make sure you hit this same node controller when launching, either check with euca-describe-nodes until you hit it or apply this change to all of your NC's.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-21T14:10:42.373-0600","updated":"2013-02-21T14:10:42.373-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40433","id":"40433","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"2013-02-21 20:39:46  INFO 000032210 init_backing_store       | initializing backing store...\n2013-02-21 20:39:46  INFO 000032210 init                     | disk space for instances: /var/lib/eucalyptus/instances/work\n2013-02-21 20:39:46  INFO 000032210 init                     |                           038522MB limit (30.1% of the file system) - 740MB overhead = 37782MB = 36GB\n2013-02-21 20:39:46  INFO 000032210 init                     |                           000000MB reserved for use (0.0% of limit)\n2013-02-21 20:39:46  INFO 000032210 init                     |                           000000MB allocated for use (0.0% of limit, 0.0% of the file system)\n2013-02-21 20:39:46  INFO 000032210 init                     |     disk space for cache: /var/lib/eucalyptus/instances/cache\n2013-02-21 20:39:46  INFO 000032210 init                     |                           078214MB limit (61.1% of the file system)\n2013-02-21 20:39:46  INFO 000032210 init                     |                           036656MB reserved for use (46.9% of limit)\n2013-02-21 20:39:46  INFO 000032210 init                     |                           007871MB allocated for use (10.1% of limit, 6.1% of the file system)\n\n\n\n[root@cloud-box-04 eucalyptus]# df -kh\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/mapper/vg_cloudbox04-lv_root\n                      126G  8.9G  110G   8% /\ntmpfs                 7.8G     0  7.8G   0% /dev/shm\n/dev/sda1             485M   52M  408M  12% /boot\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-21T14:41:54.521-0600","updated":"2013-02-21T14:41:54.521-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40451","id":"40451","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Thanks David.  So this NC looks fine, was this after changing the NC_CACHE/NC_WORK values manually? ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-21T17:31:14.783-0600","updated":"2013-02-21T17:31:14.783-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/40533","id":"40533","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"yes, NC_CACHE changed manually worked; at least i am no longer getting errors for that image. I haven't tested the 4.7gb image again yet, i may do that tonight.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-22T23:06:14.198-0600","updated":"2013-02-22T23:06:14.198-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/44556","id":"44556","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"I'm not sure if anything more is needed on this.  can it be resolved?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2013-04-30T19:18:49.793-0500","updated":"2013-04-30T19:18:49.793-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/45185","id":"45185","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"Fixed via workaround.  If you have any other problems, please file another ticket!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-09T16:14:17.226-0500","updated":"2013-05-09T16:14:17.226-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47289","id":"47289","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"I am having this same issue, and the workaround of tuning NC_CACHE_SIZE in eucalyptus.conf does not seem to always help.Please reopen this issue--I believe it is a real bug.\n\nI am running Eucalyptus 3.2.2 on CentOS 6.4.When starting instances, sometimes it fails with the same error message as with the original reporter.\n\n{code}\n2013-06-10 15:27:48  INFO | [i-0E884355] running instance cores=1 disk=5 memory=512 vlan=827 priMAC=D0:0D:0E:88:43:55 privIp=XXX.XXX.XXX.XXX\n2013-06-10 15:27:48  INFO | creating path /var/lib/eucalyptus/instances/work/MODG9RPAMJT5EOVWESGQ6/i-0E884355\n2013-06-10 15:27:49  INFO | [i-0E884355] copying/cloning blob eki-3E1B2ADA-109f7091 to blob MODG9RPAMJT5EOVWESGQ6/i-0E884355/eki-3E1B2ADA-109f7091\n2013-06-10 15:27:49  INFO | copying data from '/var/lib/eucalyptus/instances/cache/eki-3E1B2ADA-109f7091/blocks'\n2013-06-10 15:27:49  INFO |                to '/var/lib/eucalyptus/instances/work/MODG9RPAMJT5EOVWESGQ6/i-0E884355/eki-3E1B2ADA-109f7091.blocks'\n2013-06-10 15:27:49  INFO |                of 179039 blocks (bs=16), seeking 0, skipping 0\n2013-06-10 15:27:49  INFO | [i-0E884355] copying/cloning blob eri-3C202C9A-5c56f9be to blob MODG9RPAMJT5EOVWESGQ6/i-0E884355/eri-3C202C9A-5c56f9be\n2013-06-10 15:27:49  INFO | copying data from '/var/lib/eucalyptus/instances/cache/eri-3C202C9A-5c56f9be/blocks'\n2013-06-10 15:27:49  INFO |                to '/var/lib/eucalyptus/instances/work/MODG9RPAMJT5EOVWESGQ6/i-0E884355/eri-3C202C9A-5c56f9be.blocks'\n2013-06-10 15:27:49  INFO |                of 5550753 blocks (bs=2), seeking 0, skipping 0\n2013-06-10 15:27:59  INFO | creating path /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8\n2013-06-10 15:27:59  INFO | creating path /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8\n2013-06-10 15:28:00  INFO | [i-0E884355] downloading http://XXX.XXX.XXX.XXX:8776/emi-A39F35AB\n2013-06-10 15:28:21 ERROR | waitpid() timed out: pid=17522\n2013-06-10 15:28:27 ERROR | timed out waiting for hypervisor checker pid=17522\n2013-06-10 15:28:28  INFO | [i-0E884355] copying/cloning blob emi-A39F35AB-119533e8 to blob MODG9RPAMJT5EOVWESGQ6/i-0E884355/emi-A39F35AB-fb357be1\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to clone/copy blob emi-A39F35AB-119533e8 to blob MODG9RPAMJT5EOVWESGQ6/i-0E884355/emi-A39F35AB-fb357be1: 12 blobstore.c:2894 blockblob involved in operation has backing of unexpected size\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to create artifact emi-A39F35AB-fb357be1 (error=12, may retry) on try 1\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to provision dependency emi-A39F35AB-fb357be1 for artifact dsk-A39F35AB-8387629b (error=12) on try 1\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to provision dependency dsk-A39F35AB-8387629b for artifact i-0E884355 (error=12) on try 1\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to implement backing for instance\n2013-06-10 15:28:28 ERROR | [i-0E884355] failed to prepare images for instance (error=1)\n2013-06-10 15:28:28  WARN | libvirt: Domain not found: no domain with matching name 'i-0E884355' (code=42)\n2013-06-10 15:28:28  INFO | [i-0E884355] cleaning up state for instance\n2013-06-10 15:28:28  INFO | [i-0E884355] stopping the network (vlan=827)\n2013-06-10 15:31:32  INFO | [i-0E884355] forgetting about instance\n2013-06-10 15:40:18  INFO | setting sensor history size to 5\n2013-06-10 15:40:18  INFO | setting sensor collection interval time to 150000 milliseconds\n{code}\n\nThe EMI is copied to /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks, but it's missing some bytes from the end - in this case, it is 4294923228 bytes and the original EMI is exactly 4 GiB (4294967296 bytes), so the difference is 18472 bytes. I've seen different numbers here, but it always seems to be just ~20KB (but it seems to be random and not to be divisible by 1024 or 512). \n\nIf I wget the EMI from CC's cache using the URL in the log (real IPs replaced with XXXs), the file always downloads just fine (file size is correct) so the file is not corrupted in CC, but is corrupted when NC downloads it or stores it to disk.\n\nThere should be plenty of reserved space:\n\n{code}\n2013-06-07 17:38:30  INFO | disk space for instances: /var/lib/eucalyptus/instances/work\n2013-06-07 17:38:30  INFO |                           150000MB limit (64.7% of the file system) - 2920MB overhead = 147080MB = 143GB\n2013-06-07 17:38:30  INFO |                           061493MB reserved for use (41.0% of limit)\n2013-06-07 17:38:30  INFO |                           000739MB allocated for use (0.5% of limit, 0.3% of the file system)\n2013-06-07 17:38:30  INFO |     disk space for cache: /var/lib/eucalyptus/instances/cache\n2013-06-07 17:38:30  INFO |                           050000MB limit (21.6% of the file system)\n2013-06-07 17:38:30  INFO |                           019482MB reserved for use (39.0% of limit)\n2013-06-07 17:38:30  INFO |                           008518MB allocated for use (17.0% of limit, 3.7% of the file system)\n{code}\n\nThis appears to happen randomly--other identical NC nodes may work while one NC is acting up. It seems that if I manually clean the EMI from the cache and try again, the same error often happens, but the file might be missing a different number of bytes.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-10T08:11:40.060-0500","updated":"2013-06-10T08:11:40.060-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47301","id":"47301","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"Some additional findings. I ran NC with EXTREME logging and saw this:\n\n{code}\n2013-06-10 19:28:56 DEBUG 000013855 http_get_timeout         http.c:343                        | downloading /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks\n2013-06-10 19:28:56 DEBUG 000013855 http_get_timeout         http.c:344                        |        from http://XXX.XXX.XXX:8776/emi-A39F35AB\n2013-06-10 19:28:56 DEBUG 000013855 http_get_timeout         http.c:388                        | writing GET output to /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks\n\n(some unrelated log entries here?)\n\n2013-06-10 19:29:06 DEBUG 000013855 http_get_timeout         http.c:397                        | wrote 4294967296 bytes in 262145 writes\n2013-06-10 19:29:06 DEBUG 000013855 http_get_timeout         http.c:409                        | saved image in /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks\n{code}\n\n(4 GiB should be 262144 x 16KB blocks, is the write_data() callback called one time too much? This is on 10GigE network, so downloading 4 GiB only takes ~minute)\n\nHowever, this time the file is 8248 bytes short:\n\n{code}\n# ls -l /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks\n-rw-r-----. 1 eucalyptus eucalyptus 4294959048 Jun 10 19:29 /var/lib/eucalyptus/instances/cache/emi-A39F35AB-119533e8/blocks\n{code}\n\nI tried to look at the source code (storage/http.c) and the only thing I noticed was that the call of fclose(3) is not checked for errors. Also, not sure if you're supposed to call curl_easy_cleanup before closing the file pointer?\n\nThe installed libcurl is version libcurl-7.19.7-36.el6_4.x86_64.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-10T12:16:14.301-0500","updated":"2013-06-10T12:16:14.301-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47389","id":"47389","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"Further findings from http.c. Not sure if they are related to this case.\n\ncurl_global_init() is called only in http_put(). http_get_timeout() only calls curl_easy_init(). The man page states:\n\nbq. If you did not already call curl_global_init(3), curl_easy_init(3) does it automatically.  This may be lethal in multi-threaded cases, since curl_global_init(3) is  not  thread-safe, and it may result in resource problems because there is no corresponding cleanup.\n\nand the man page for curl_global_init(3):\n\nbq.  This  function is not thread safe. You must not call it when any other thread in the program (i.e. a thread sharing the same memory) is running.  This doesn't just mean no other thread that is using libcurl.  Because curl_global_init() calls functions of other libraries that are similarly thread unsafe, it could conflict with any other thread that  uses these other libraries.\n\nIf threads are used in euca/NC/axis2c,  I think thread-safety should be\ntaken into account. Perhaps there should be some kind of initialization function in http.c that gets called before any threads are running, and it should call curl_global_init().\n\nI made a test program in C that uses libcurl to simply download EMIs from the CC cache (in very much the same way storage/http.c does) and was not able to reproduce the problem no matter how many times I tried, but with NC it happens all the time.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-12T09:28:16.341-0500","updated":"2013-06-12T09:28:16.341-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47421","id":"47421","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"body":"IIRC all the errors i was seeing related to http_get_timeout... I don't remember what server, though. May be in my logs above.\r\n\r\nedit: actually, it was on IRC that we were doing a lot of troubleshooting.\r\ngenewitch #eucalyptus on or around when this ticket was created.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=genewitch","name":"genewitch","key":"genewitch","accountId":"557058:199151fc-c36a-4a36-9816-526c9f5aad91","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/8b15abb66d6c58a35c2128acb75d0f5f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"David Van Rood","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-06-12T17:11:40.472-0500","updated":"2013-06-12T17:15:18.682-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47427","id":"47427","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"[~pablo], thank you for the detailed report and for digging in deeper into this problem. A couple questions for you:\n\n# Is there anything unusual about the file system that {{/var/lib/eucalyptus/instances/cache}} resides on? (E.g., it is not an NFS share, is it?) I am curious if [~genewitch] has anything to say on this matter, too.\n# If the problem is easily reproducible, would you be willing to try a patched version of NC to see if it solves the problem? One idea I have, related to your investigation of multi-threading, is to add the locking discipline that is currently used in walrus.c around libcurl invocations. We've seen problems with libcurl in Walrus downloads, so we serialized those invocations, but not the ones for CC image cache requests.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-06-12T17:59:23.925-0500","updated":"2013-06-12T17:59:23.925-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47447","id":"47447","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"1. It is on local SSDs, ext4 filesystem on LVM logical volume with LVM mirroring (no hardware RAID). I have also tried disabling the mirroring (i.e. pretty much the default CentOS installation) but does not seem to make a difference. And, I have not been able to reproduce the file truncation by other means (wget, curl, my own libcurl progam, etc.) so it does not seem to be a low level filesystem problem.\n\n2. Sure, I'd be happy to (this environment is not in production yet). I don't currently have a working build environment set up, so if you can provide binary or source rpm:s, it would be easier for me, but if needed I can probably pull in a git branch too. I had the same idea in mind, and noticed that there are some related commits in walrus.c. Probably calling the curl_global_init before any threads are started would be the correct long term fix, I believe it's the only non-thread-safe function in libcurl. But locking might also help--frankly I'm not too familiar with threads programming in C. Anyway, when observing nc.log, it seems clear that some other threads are doing something during the downloads since new log entries appear while the download is going on.\n\nThanks for your help and let me know if any other information is required.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-13T00:31:18.777-0500","updated":"2013-06-13T00:31:18.777-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47518","id":"47518","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks for the information, [~pablo], and for the willingness to try something. I've got the code that I'd like to try out on your system -- it does curl_global_init() before any threads are spawned *and* it serializes all curl invocations -- in a git branch:\n\n  https://github.com/dmitrii/eucalyptus/tree/dev/dmitrii/curl-changes\n\nI will look into building a binary RPM for you tomorrow. So, stay tuned.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-06-14T02:45:41.360-0500","updated":"2013-06-14T02:45:41.360-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47520","id":"47520","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"Thanks Dmitrii, looks promising. The patches seems to be against master, can you run 3.3 based NC in 3.2.2 euca installation or can you backport the patch to 3.2-maintenance?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-14T07:17:28.839-0500","updated":"2013-06-14T07:17:28.839-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47532","id":"47532","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"I cannot _think_ of a reason why 3.3-based NC won't work with 3.2.2 components, but I could be forgetting something. If you don't mind the risk, let's just try it:\r\n\r\n  http://downloads.eucalyptus.com/software/eucalyptus/nightly/euca-4964/centos/6/x86_64/\r\n\r\nMake sure no instances are running on the NC when you restart it after the installation, but otherwise there is no need to perturb anything else in the system. The cache format has changed, so no need to blow away that even. CC can keep running.\r\n\r\nKudos to [~mspaulding] for quickly building the packages off of my private branch!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-06-14T12:57:24.281-0500","updated":"2013-06-14T13:26:36.604-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47704","id":"47704","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"Thanks. I've tried to upgrade one NC to the build you provided. I upgraded all the packages that were needed to fulfill the dependencies:\n\n{code}\neucalyptus-nc-3.4.0-0.0.1069.20130614gita4a82578.el6.x86_64\npython-eucadmin-3.4.0-0.0.1069.20130614gita4a82578.el6.noarch\neucalyptus-gl-3.4.0-0.0.1069.20130614gita4a82578.el6.x86_64\neucalyptus-3.4.0-0.0.1069.20130614gita4a82578.el6.x86_64\neucalyptus-admin-tools-3.4.0-0.0.1069.20130614gita4a82578.el6.noarch\n{code}\n\nUnfortunately there seem to be some compatibility problem (?) with the CC version 3.2.2.\n\n/var/log/eucalyptus/cc.log:\n{code}\n2013-06-17 11:02:43 ERROR | operation on 10.NN.NN.NN could not be invoked (check NC host, port, and credentials)\n2013-06-17 11:02:43 ERROR | bad return from ncDescribeResource(10.NN.NN.NN) (1)\n{code}\n\n/var/log/eucalyptus/nc.log:\n{code}\n2013-06-17 11:17:08 DEBUG 000029520 doDescribeResource       | returning status=enabled cores=32/32 mem=131881/131881 disk=162/162 iqn=iqn.1994-05.com.redhat:2c41XXXXXXXX\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-17T03:19:33.456-0500","updated":"2013-06-17T03:19:33.456-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47772","id":"47772","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"I've spent quite some time last few days debugging this and here's what I've found so far, including a workaround that appears to work reliably for me. Unfortunately I've not been able to pinpoint the exact root cause.\n\nDownloaded EMIs are not only truncated from the end, there is also some random corruption in the middle parts of the file. This corruption seems to be related to the buffered high-level I/O streams functions (fopen64, fwrite, fclose). When I add debugging output just before fclose() \n\n{code}\nlogprintfl(EUCADEBUG, \"ftell: %ld\\n\",ftell(fp));\n{code}\n\n... and after closing the file pointer ...\n\n{code}\nstruct stat s;\nstat(outfile, &s);\nlogprintfl(EUCADEBUG, \"file size (stat): %lld\\n\", (long long) s.st_size);\n{code}\n\nthe numbers don't match: ftell reports it has written  4294967296 bytes, stat from the file reports e.g. 4294959104. \n\nI've tried the following changes, without no effect:\n\n* Adding the curl_global_init and mutex locks (I still think this is a good idea to implement).\n* Calling fflush() before fclose().\n* Calling fflush() after each fwrite(). (with this ftell() also returned the wrong number).\n* Bypassing the write_data() callback function and just using the libcurl's default (direct fwrite).\n* curl_easy_setopt(curl, CURLOPT_NOSIGNAL, 1L);  (as recommended for thread-safety with openssl).\n* Printing the file handle number and pointer addresses etc in write_data() to make sure file handles are not mixed with different threads.\n\nFinally I found a workaround that helps: just disable buffering:\n\n{code}\n--- a/storage/http.c\n+++ b/storage/http.c\n@@ -354,6 +354,7 @@ int http_get_timeout(const char *url, const char *outfile, int total_retries, in\n         logprintfl(EUCAERROR, \"failed to open %s for writing\\n\", outfile);\n         return code;\n     }\n+    setbuf(fp, NULL);\n \n     CURL *curl;\n     CURLcode result;\n{code}\n\nOf course this is not a proper fix, and probably there is a performance penalty since libcurl does the I/O mostly in small 16K or smaller blocks, but in practice it works well enough for a workaround. (I just build Eucalyptus and replace libEucalyptusNC.so with the modified version.)\n\nWe have another 3.2.0 deployment running on different hardware and older version (6.3 vs 6.4) of CentOS and we have not noticed this problem occuring there. Both CentOS/RHEL 6.3 and 6.4 have the same upstream glic version (2.12), but 6.4 adds a bunch of RHEL-specific patches. However I tried downgrading glibc to the same version (glibc-2.12-1.80.el6) and it behaved the same.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-18T08:13:50.518-0500","updated":"2013-06-18T08:13:50.518-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47830","id":"47830","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"body":"Quick update: I've today upgraded the Eucalyptus installation from 3.2.2 to 3.3.0 (the upgrade went smoothly, BTW). The new version behaves just the same: EMIs are corrupted unless I patch storage/http.c by disabling standard file IO buffering with setbuf(fp,NULL).\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=pablo","name":"pablo","key":"pablo","accountId":"557058:e2460987-e075-4fa1-b902-2d2397f65743","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/2274ee918a27d45b051e5338b2da64e4?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Henrik Ahlgren","active":true,"timeZone":"US/Central"},"created":"2013-06-19T10:30:42.427-0500","updated":"2013-06-19T10:30:42.427-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/47884","id":"47884","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"Related issue: EUCA-6577","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-20T04:50:19.291-0500","updated":"2013-06-20T04:50:19.291-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19119/comment/50408","id":"50408","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"I got sidetracked for a while and dropped the ball on this one. But the fix proposed by [~pablo], using {{setbuf(fp,NULL)}}, is in the code now, going through QA and targeted for 3.3.1 release. Many thanks for testing it in different settings on your system, Henrik.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-07-25T17:51:47.951-0500","updated":"2013-07-25T17:51:47.951-0500"}],"maxResults":39,"total":39,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4964/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}