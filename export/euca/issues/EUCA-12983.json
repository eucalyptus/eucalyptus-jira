{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"51302","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51302","key":"EUCA-12983","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17800","id":"17800","description":"Eucalyptus 4.3.1","name":"4.3.1","archived":false,"released":true,"releaseDate":"2016-12-14"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2016-12-07T19:23:02.528-0600","customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12983/watchers","watchCount":3,"isWatching":false},"created":"2016-11-30T13:25:15.613-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2016-12-06T10:43:49.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18200","id":"18200","description":"Eucalyptus 4.3.0.1","name":"4.3.0.1","archived":false,"released":true,"releaseDate":"2016-09-21"}],"customfield_11901":null,"issuelinks":[{"id":"46006","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/46006","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"51502","key":"EUCA-12993","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51502","fields":{"summary":"Instances unreachable through public addresses when using rhel7u3","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2017-01-05T16:26:35.944-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10501","id":"10501","name":"Packaging"}],"timeoriginalestimate":null,"description":"In the cookbook we now use a workaround to load the br_netfilter module on RHEL/CentOS 7.3 platforms, but we need to do this within the eucalyptus packaging to properly handle this module requirement.  We should avoid recommending they do this in documentation or in the cookbook.\r\n\r\nThis might require that we load the 'bridge' module as well in the same fashion.\r\n\r\nMay also require something in modprobe.d.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"On NC use modules-load.d to load br_netfilter on RHEL/CentOS 7.3","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"customfield_10000":"3_*:*_1_*:*_95080472_*|*_10000_*:*_1_*:*_96537283_*|*_10001_*:*_1_*:*_414990649_*|*_10003_*:*_1_*:*_19658524_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i040cn:","customfield_10001":"2016-12-07T19:23:02.538-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["mbacchi(mbacchi)","tony(tony)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51302/comment/114009","id":"114009","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"body":"Testing the following diffs:\r\n\r\n\r\n{code:java}\r\nmbacchi@localhost ~/r/eucalyptus (dev-mbacchi-EUCA-12983)> git diff\r\ndiff --git a/systemd/modules-load.d/70-eucalyptus-node.conf b/systemd/modules-load.d/70-eucalyptus-node.conf\r\nindex 00734a0..1990407 100644\r\n--- a/systemd/modules-load.d/70-eucalyptus-node.conf\r\n+++ b/systemd/modules-load.d/70-eucalyptus-node.conf\r\n@@ -1,2 +1,4 @@\r\n+bridge\r\n+br_netfilter\r\n kvm_amd\r\n kvm_intel\r\nmbacchi@localhost ~/r/eucalyptus-rpmspec (dev-mbacchi-EUCA-12983)> git diff\r\ndiff --git a/eucalyptus.spec b/eucalyptus.spec\r\nindex c48d6f6..f4b1fcf 100644\r\n--- a/eucalyptus.spec\r\n+++ b/eucalyptus.spec\r\n@@ -927,6 +927,7 @@ exit 0\r\n # group to connect to the system instance without authenticating\r\n getent group libvirt >/dev/null || groupadd -r libvirt\r\n usermod -a -G libvirt eucalyptus || :\r\n+/usr/lib/systemd/systemd-modules-load || :\r\n \r\n %post -n eucanetd\r\n %systemd_post eucanetd.service\r\n@@ -961,6 +962,9 @@ usermod -a -G libvirt eucalyptus || :\r\n %endif  #if 0%{?el6}\r\n \r\n %changelog\r\n+* Tue Dec  6 2016 Matt Bacchi <mbacchi@hpe.com> - 4.3.1\r\n+- Run systemd-modules-load in nc package post scriptlet (EUCA-12983)\r\n+\r\n * Fri Dec  2 2016 Matt Bacchi <mbacchi@hpe.com> - 4.3.1\r\n - Added /etc/libvirt/hooks/qemu to nc package (EUCA-12594)\r\n{code}\r\n\r\nOn a RHEL 7.3 machine this works properly, here is the resultant output from the NC:\r\n\r\n\r\n{code:java}\r\n[root@a-28-r ~]# lsmod | grep bridge\r\nbridge                107106  0 \r\nstp                    12976  2 garp,bridge\r\nllc                    14552  3 stp,garp,bridge\r\n[root@a-28-r ~]# lsmod | grep br_netfilter\r\n[root@a-28-r ~]# rpm -qa | grep euca\r\neucalyptus-axis2c-common-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-nc-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neuca2ools-3.3.1-0.1780.29.20161114git291ea24.el7.noarch\r\neucanetd-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-selinux-0.1.16-1.el7.noarch\r\neucalyptus-blockdev-utils-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-imaging-toolkit-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\n{code}\r\n\r\nAfter installing RPMs with the diffs above we see:\r\n\r\n\r\n{code:java}\r\n[root@a-28-r ~]# rpm -Uvh ./eucalyptus-4.3.1-0.25165.0.el7.x86_64.rpm ./eucalyptus-nc-4.3.1-0.25165.0.el7.x86_64.rpm ./eucalyptus-axis2c-common* ./eucalyptus-blockdev-utils* ./eucalyptus-imaging-toolkit* ./eucanetd*\r\nPreparing...                          ################################# [100%]\r\nUpdating / installing...\r\n   1:eucalyptus-4.3.1-0.25165.0.el7   ################################# [  8%]\r\n   2:eucalyptus-axis2c-common-4.3.1-0.################################# [ 17%]\r\n   3:eucalyptus-blockdev-utils-4.3.1-0################################# [ 25%]\r\n   4:eucalyptus-imaging-toolkit-4.3.1-################################# [ 33%]\r\n   5:eucanetd-4.3.1-0.25165.0.el7     ################################# [ 42%]\r\nInserted module 'kvm_amd'\r\n   6:eucalyptus-nc-4.3.1-0.25165.0.el7################################# [ 50%]\r\nInserted module 'kvm_amd'\r\nInserted module 'br_netfilter'\r\nCleaning up / removing...\r\n   7:eucalyptus-nc-4.3.1-0.25162.79.20################################# [ 58%]\r\n   8:eucalyptus-blockdev-utils-4.3.1-0################################# [ 67%]\r\n   9:eucalyptus-imaging-toolkit-4.3.1-################################# [ 75%]\r\n  10:eucalyptus-axis2c-common-4.3.1-0.################################# [ 83%]\r\n  11:eucalyptus-4.3.1-0.25162.79.20161################################# [ 92%]\r\nInserted module 'kvm_amd'\r\n  12:eucanetd-4.3.1-0.25162.79.2016120################################# [100%]\r\n[root@a-28-r ~]# rpm -qa | grep euca\r\neucalyptus-imaging-toolkit-4.3.1-0.25165.0.el7.x86_64\r\neuca2ools-3.3.1-0.1780.29.20161114git291ea24.el7.noarch\r\neucalyptus-4.3.1-0.25165.0.el7.x86_64\r\neucalyptus-blockdev-utils-4.3.1-0.25165.0.el7.x86_64\r\neucanetd-4.3.1-0.25165.0.el7.x86_64\r\neucalyptus-selinux-0.1.16-1.el7.noarch\r\neucalyptus-axis2c-common-4.3.1-0.25165.0.el7.x86_64\r\neucalyptus-nc-4.3.1-0.25165.0.el7.x86_64\r\n[root@a-28-r ~]# lsmod | grep netfil\r\nbr_netfilter           22248  0 \r\nbridge                107106  1 br_netfilter\r\n\r\n\r\n[root@a-28-r ~]# rpm -qa --last | grep euca\r\neucanetd-4.3.1-0.25165.0.el7.x86_64           Tue 06 Dec 2016 12:06:27 PM PST\r\neucalyptus-nc-4.3.1-0.25165.0.el7.x86_64      Tue 06 Dec 2016 12:06:27 PM PST\r\n\r\n[root@a-28-r ~]# tail -n 2500 /var/log/messages  | grep Bridge\r\nDec  6 12:06:27 a-28-r kernel: Bridge firewalling registered\r\n{code}\r\n\r\nAnd after rebooting:\r\n\r\n\r\n{code:java}\r\n\r\nREBOOTING:\r\n\r\n[root@h-04 ~]# ssh 10.111.5.211\r\nLast login: Tue Dec  6 12:24:36 2016 from h-04.qa1.eucalyptus-systems.com\r\n[root@a-28-r ~]# uptime\r\n 12:37:28 up 2 min,  1 user,  load average: 0.92, 0.87, 0.37\r\n[root@a-28-r ~]# lsmod | grep netfil\r\nbr_netfilter           22248  0 \r\nbridge                107106  1 br_netfilter\r\n[root@a-28-r ~]# set -o vi\r\n[root@a-28-r ~]# tail -n 2500 /var/log/messages  | grep Bridg\r\nDec  6 12:35:17 a-28-r kernel: Performance Events: PEBS fmt1+, 16-deep LBR, SandyBridge events, full-width counters, Broken BIOS detected, complain to your hardware vendor.\r\nDec  6 12:35:17 a-28-r kernel: ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-1f])\r\nDec  6 12:35:17 a-28-r kernel: ACPI: PCI Root Bridge [PCI1] (domain 0000 [bus 20-3f])\r\nDec  6 12:35:21 a-28-r kernel: Bridge firewalling registered\r\nDec  6 12:35:21 a-28-r kernel: EDAC MC0: Giving out device to 'sbridge_edac.c' 'Sandy Bridge Socket#0': DEV 0000:1f:0e.0\r\nDec  6 12:35:21 a-28-r kernel: EDAC MC1: Giving out device to 'sbridge_edac.c' 'Sandy Bridge Socket#1': DEV 0000:3f:0e.0\r\n[root@a-28-r ~]# date\r\nTue Dec  6 12:38:06 PST 2016\r\n{code}\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"created":"2016-12-06T15:36:15.666-0600","updated":"2016-12-06T15:36:15.666-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51302/comment/114010","id":"114010","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"body":"On a CentOS 7.2 machine we see:\r\n\r\n\r\n{code:java}\r\n[root@d-01 ~]# lsmod | grep netfil\r\n[root@d-01 ~]# lsmod | grep bridge\r\nbridge                119601  0 \r\nstp                    12976  2 garp,bridge\r\nllc                    14552  3 stp,garp,bridge\r\n[root@d-01 ~]# rpm -qa | grep euca\r\neucalyptus-imaging-toolkit-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-blockdev-utils-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucanetd-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neuca2ools-3.3.1-0.1780.29.20161114git291ea24.el7.noarch\r\neucalyptus-nc-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\neucalyptus-selinux-0.1.16-1.el7.noarch\r\neucalyptus-axis2c-common-4.3.1-0.25162.79.20161203gitb82d9e1.el7.x86_64\r\n[root@d-01 ~]# rpm -Uvh ./eucalyptus-4.3.1-0.25165.0.el7.x86_64.rpm ./eucalyptus-nc-4.3.1-0.25165.0.el7.x86_64.rpm ./eucalyptus-axis2c-common* ./eucalyptus-blockdev-utils* ./eucalyptus-imaging-toolkit* ./eucanetd*\r\nPreparing...                          ################################# [100%]\r\nUpdating / installing...\r\n   1:eucalyptus-4.3.1-0.25165.0.el7   ################################# [  8%]\r\n   2:eucalyptus-axis2c-common-4.3.1-0.################################# [ 17%]\r\n   3:eucalyptus-blockdev-utils-4.3.1-0################################# [ 25%]\r\n   4:eucalyptus-imaging-toolkit-4.3.1-################################# [ 33%]\r\n   5:eucanetd-4.3.1-0.25165.0.el7     ################################# [ 42%]\r\nInserted module 'kvm_amd'\r\n   6:eucalyptus-nc-4.3.1-0.25165.0.el7################################# [ 50%]\r\nInserted module 'kvm_amd'\r\nFailed to find module 'br_netfilter'\r\nCleaning up / removing...\r\n   7:eucalyptus-nc-4.3.1-0.25162.79.20################################# [ 58%]\r\n   8:eucalyptus-blockdev-utils-4.3.1-0################################# [ 67%]\r\n   9:eucalyptus-imaging-toolkit-4.3.1-################################# [ 75%]\r\n  10:eucalyptus-axis2c-common-4.3.1-0.################################# [ 83%]\r\n  11:eucalyptus-4.3.1-0.25162.79.20161################################# [ 92%]\r\nInserted module 'kvm_amd'\r\nFailed to find module 'br_netfilter'\r\n  12:eucanetd-4.3.1-0.25162.79.2016120################################# [100%]\r\n[root@d-01 ~]# lsmod | grep kvm\r\nkvm_intel             162153  3 \r\nkvm                   525409  1 kvm_intel\r\n[root@d-01 ~]# ls /etc/modules-load.d/\r\n[root@d-01 ~]# rpm -ql eucalyptus-nc | grep mod\r\n/usr/lib/modules-load.d/70-eucalyptus-node.conf\r\n[root@d-01 ~]# cat /usr/lib/modules-load.d/70-eucalyptus-node.conf\r\nkvm_amd\r\nkvm_intel\r\nbridge\r\nbr_netfilter\r\n[root@d-01 ~]# lsmod | grep bridge\r\nbridge                119601  0 \r\nstp                    12976  2 garp,bridge\r\nllc                    14552  3 stp,garp,bridge\r\n{code}\r\n\r\nAfter rebooting:\r\n\r\n\r\n{code:java}\r\n[root@b-38 ~]# ssh 10.111.1.71\r\nLast login: Tue Dec  6 13:30:09 2016 from b-38.qa1.eucalyptus-systems.com\r\n[root@d-01 ~]# lsmod | grep netfil\r\n[root@d-01 ~]# lsmod | grep bridge\r\nbridge                119601  0 \r\nstp                    12976  2 garp,bridge\r\nllc                    14552  3 stp,garp,bridge\r\n[root@d-01 ~]# set -o vi\r\n[root@d-01 ~]# tail -n 2000 /var/log/messages | grep Brid\r\nDec  6 13:32:35 d-01 kernel: Performance Events: PEBS fmt1+, 16-deep LBR, SandyBridge events, full-width counters, Intel PMU driver.\r\nDec  6 13:32:35 d-01 kernel: ACPI: PCI Root Bridge [PCI0] (domain 0000 [bus 00-fe])\r\nDec  6 13:32:39 d-01 kernel: Bridge firewalling registered\r\n{code}\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"created":"2016-12-06T15:38:56.827-0600","updated":"2016-12-06T15:38:56.827-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51302/comment/114122","id":"114122","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"Fix Verified.\r\n\r\nRHEL 7.3 and Centos 7.2 Euca 4.3.1 CI runs are passing.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2016-12-07T19:23:02.538-0600","updated":"2016-12-07T19:23:02.538-0600"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12983/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}