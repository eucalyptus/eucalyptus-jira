{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"42442","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42442","key":"EUCA-12252","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":null,"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12252/watchers","watchCount":1,"isWatching":false},"lastViewed":null,"created":"2016-04-24T15:26:48.394-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17200","id":"17200","description":"Eucalyptus 4.2.2","name":"4.2.2","archived":false,"released":true,"releaseDate":"2016-04-28"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-05-20T01:03:34.975-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12300","id":"12300","name":"Image tools"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nAfter setting up HTTPS endpoints on a Eucalyptus 4.2.2 clouds, esi-* tools had issues working with the HTTPS endpoints.  \r\n{code}\r\n[root@d-30 ~]# esi-install-image --install-default --region euca-admin@localhost\r\nChecking if image 'eucalyptus-service-image-v1.54' is already installed...\r\nFound tarball /usr/share/eucalyptus/service-images/eucalyptus-service-image-1.54.tar.xz\r\nChecking env variables\r\nDecompressing tarball: /usr/share/eucalyptus/service-images/eucalyptus-service-image-1.54.tar.xz\r\nInstalling image from eucalyptus-service-image.raw\r\nBundling, uploading and registering image to bucket: eucalyptus-service-image-v1.54\r\nError: Unable to install imaging worker due to:\r\neuca-install-image: error: connection error (('Connection aborted.', error(104, 'Connection reset by peer')))\r\nProcess Process-3:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/lib/python2.6/site-packages/euca2ools/bundle/pipes/fittings.py\", line 162, in _write_parts\r\n    partinfo_mpconn.send(partinfo)\r\nIOError: [Errno 32] Broken pipe\r\nerror writing output file\r\n\r\ngzip: stdout: Broken pipe\r\nProcess Process-1:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 232, in _bootstrap\r\n    self.run()\r\n  File \"/usr/lib64/python2.6/multiprocessing/process.py\", line 88, in run\r\n    self._target(*self._args, **self._kwargs)\r\n  File \"/usr/lib/python2.6/site-packages/euca2ools/bundle/pipes/core.py\", line 231, in _create_tarball_from_stream\r\n    tarball.close()\r\n  File \"/usr/lib64/python2.6/tarfile.py\", line 1768, in close\r\n    self.fileobj.write(NUL * (BLOCKSIZE * 2))\r\n  File \"/usr/lib64/python2.6/tarfile.py\", line 465, in write\r\n    self.__write(s)\r\n  File \"/usr/lib64/python2.6/tarfile.py\", line 473, in __write\r\n    self.fileobj.write(self.buf[:self.bufsize])\r\nIOError: [Errno 32] Broken pipe\r\nException IOError: (32, 'Broken pipe') in <bound method _Stream.__del__ of <tarfile._Stream instance at 0x1793a28>> ignored\r\n\r\n\r\n[root@d-30 ~]# esi-install-image --install-default --region euca-admin@ --debug\r\nTraceback (most recent call last):\r\n  File \"/usr/bin/esi-install-image\", line 240, in <module>\r\n    args.debug)\r\n  File \"/usr/bin/esi-install-image\", line 56, in __init__\r\n    self._populate_images()\r\n  File \"/usr/bin/esi-install-image\", line 62, in _populate_images\r\n    for image in self._ec2.get_all_images():\r\n  File \"/usr/lib/python2.6/site-packages/boto/ec2/connection.py\", line 189, in get_all_images\r\n    [('item', Image)], verb='POST')\r\n  File \"/usr/lib/python2.6/site-packages/boto/connection.py\", line 1170, in get_list\r\n    response = self.make_request(action, params, path, verb)\r\n  File \"/usr/lib/python2.6/site-packages/boto/connection.py\", line 1116, in make_request\r\n    return self._mexe(http_request)\r\n  File \"/usr/lib/python2.6/site-packages/boto/connection.py\", line 1030, in _mexe\r\n    raise ex\r\nssl.SSLError: [Errno 1] _ssl.c:492: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed\r\n{code}\r\n\r\nIn order to resolve the issue, I had to use options in [Boto config|http://boto.readthedocs.org/en/latest/boto_config_tut.html#boto] in order to get {{esi-install-image}}, {{esi-manage-stack}}, and {{esi-describe-images}} to work correctly:\r\n\r\n*{{esi-install-image}}*\r\n{code}\r\n[root@d-30 ~]# cat .boto\r\n[Boto]\r\nis_secure: true\r\nhttps_validate_certificates: true\r\nca_certificates_file: /root/euca-ca-0.crt\r\n\r\n[root@d-30 ~]# esi-install-image --install-default --region euca-admin@ --debug\r\nChecking if image 'eucalyptus-service-image-v1.54' is already installed...\r\nFound tarball /usr/share/eucalyptus/service-images/eucalyptus-service-image-1.54.tar.xz\r\nChecking env variables\r\nDecompressing tarball: /usr/share/eucalyptus/service-images/eucalyptus-service-image-1.54.tar.xz\r\nInstalling image from eucalyptus-service-image.raw\r\nBundling, uploading and registering image to bucket: eucalyptus-service-image-v1.54\r\n....\r\n2016-04-24 13:09:20,189 DEBUG   RegisterImage -- end of response content --\r\n\r\nRegistered image: emi-211a6020\r\nservices.imaging.worker.image = emi-211a6020\r\nservices.loadbalancing.worker.image = emi-211a6020\r\nservices.database.worker.image = emi-211a6020\r\n{code}\r\n\r\n*{{esi-describe-images}}*\r\n{code}\r\n[root@d-30 ~]# cat .boto\r\n[Boto]\r\nis_secure: true\r\nhttps_validate_certificates: false\r\nca_certificates_file: /root/euca-ca-0.crt\r\n\r\n[root@d-30 ~]# esi-describe-images --region euca-admin@localhost\r\n    SERVICE     VERSION  ACTIVE     IMAGE      INSTANCES\r\n    imaging       1.54     *     emi-211a6020      0\r\n loadbalancing    1.54     *     emi-211a6020      0\r\n    database      1.54     *     emi-211a6020      0\r\n{code}\r\n\r\n*{{esi-manage-stack}}*\r\n{code}\r\n[root@d-30 ~]# cat .boto\r\n[Boto]\r\nis_secure: true\r\nhttps_validate_certificates: false\r\nca_certificates_file: /root/euca-ca-0.crt\r\n\r\n[root@d-30 ~]# esi-manage-stack -a create imaging --region euca-admin@localhost\r\nservices.imaging.worker.configured = true\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"esi tools don't work with HTTPS endpoints ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":null,"customfield_12100":"0|i03q2f:","customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["gholms(gholms)","hspencer(hspencer)"],"customfield_10116":null,"customfield_10117":null,"environment":"* Federated Setup with HTTPS endpoints\r\n** Eucalyptus multi-cluster cloud with Eucalyptus DNS enabled - [hspencer-309|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.2/309/]\r\n** Eucalyptus cloud with Eucalyptus DNS enabled - [hspencer-352|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.2/352/]","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12252/votes","votes":0,"hasVoted":false},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}