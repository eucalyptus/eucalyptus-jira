{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"45307","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/45307","key":"EUCA-12512","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12512/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2016-06-28T18:37:19.511-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[],"issuelinks":[{"id":"41003","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/41003","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"46407","key":"EUCA-12609","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46407","fields":{"summary":"ClientComputeException: Manifest is not accessible during install image (in faststart)","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-07-27T12:19:11.922-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10000","description":"This issue has not yet been validated, and is not currently being investigated.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Unconfirmed","id":"10000","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"I removed the old service image to verify a ticket, and then tried to install the image. Then the tool throws exception. I tried to run the tool after manually deleting the bucket, but it still fails. I've run this after clcadmin-assume-system-credentials.\r\n\r\nI also tried to manually install the raw file using euca-install-image, but it fails with the following error.\r\n\r\n{code:java}\r\nvar/tmp/bundle-6UGS_x/eucalyptus_service_image.part.33 100% |===========================================================================|  10.00 MB  18.95 MB/s Time: 0:00:00\r\n/var/tmp/bundle-6UGS_x/eucalyptus_service_image.part.34 100% |===========================================================================|   7.13 MB  29.67 MB/s Time: 0:00:00\r\n/var/tmp/bundle-6UGS_x/eucalyptus_service_image.manifest.xml 100% |======================================================================|   6.84 kB  46.17 kB/s Time: 0:00:00\r\neuca-install-image: error (AuthFailure): Manifest is not accessible\r\n\r\n{code}\r\n\r\n\r\n{code:java}\r\nChecking if image 'eucalyptus-service-image-v2.41' is already installed...\r\nFound tarball /usr/share/eucalyptus/service-images/eucalyptus-service-image-2.41.tar.xz\r\nChecking env variables\r\nDecompressing tarball: /usr/share/eucalyptus/service-images/eucalyptus-service-image-2.41.tar.xz\r\nInstalling image from eucalyptus-service-image.raw\r\nBundling, uploading and registering image to bucket: eucalyptus-service-image-v2.41\r\nRunning: euca-install-image -b eucalyptus-service-image-v2.41 -i eucalyptus-service-image.raw -r x86_64 -n eucalyptus-service-image-v2.41 --virt hvm --region localhost --user 000622086692 --debug\r\n2016-06-29 12:59:31,635 DEBUG   InstallImage parsed arguments: {'kernel': None, 'show_progress': False, 'bucket': 'eucalyptus-service-image-v2.41', 'image': 'eucalyptus-service-image.raw', 'part_size': 10485760, 'prefix': None, 'ec2cert': None, 'upload_policy_signature': None, 'ec2_url': None, 'productcodes': [], 'image_type': 'machine', 'destination': None, 'platform': None, 'location': None, 'bootstrap_auth': None, 'virtualization_type': 'hvm', 'ramdisk': None, 'enc_key': None, 'description': None, 'max_pending_parts': 2, 'upload_policy': None, 'bootstrap_service': None, 'enc_iv': None, 'user': '000622086692', 'show_empty_fields': False, 'image_size': None, 'bootstrap_url': None, 'arch': 'x86_64', 'block_device_mappings': None, 'retries': 0, 'name': 'eucalyptus-service-image-v2.41', 'security_token': None, 'url': None, 'region': 'localhost', 'show_porcelain': False, 'privatekey': None, 'batch': False, 'acl': 'aws-exec-read', 'cert': None, 'ec2_auth': None, 'ec2_service': None, 'key_id': None, 'secret_key': None}\r\n2016-06-29 12:59:31,635 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,635 INFO    Config finding region option user\r\n2016-06-29 12:59:31,635 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,636 DEBUG   Config   section *\r\n2016-06-29 12:59:31,636 INFO    Config   novalue for user\r\n2016-06-29 12:59:31,636 INFO    Config finding region option s3-url\r\n2016-06-29 12:59:31,636 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,636 INFO    Config   found   localhost::s3-url = 'http://127.0.0.1:8773/services/objectstorage/'\r\n2016-06-29 12:59:31,636 INFO    Config finding region option name\r\n2016-06-29 12:59:31,636 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,636 INFO    Config   found   localhost::name = 'localhost'\r\n2016-06-29 12:59:31,636 INFO    Config finding global option max-retries\r\n2016-06-29 12:59:31,636 INFO    Config   novalue for max-retries\r\n2016-06-29 12:59:31,637 INFO    Config finding global option timeout\r\n2016-06-29 12:59:31,637 INFO    Config   novalue for timeout\r\n2016-06-29 12:59:31,637 INFO    Config finding region option verify-ssl\r\n2016-06-29 12:59:31,637 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,637 DEBUG   Config   section *\r\n2016-06-29 12:59:31,637 INFO    Config   novalue for verify-ssl\r\n2016-06-29 12:59:31,637 DEBUG   HmacV1Auth using auth info from environment\r\n2016-06-29 12:59:31,637 INFO    Config finding region option s3-force-sigv4\r\n2016-06-29 12:59:31,637 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,637 DEBUG   Config   section *\r\n2016-06-29 12:59:31,638 INFO    Config   novalue for s3-force-sigv4\r\n2016-06-29 12:59:31,638 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,638 INFO    Config finding region option ec2-url\r\n2016-06-29 12:59:31,638 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,638 INFO    Config   found   localhost::ec2-url = 'http://127.0.0.1:8773/services/compute/'\r\n2016-06-29 12:59:31,638 DEBUG   QueryHmacV2Auth using auth info provided directly\r\n2016-06-29 12:59:31,638 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,638 WARNING Bootstrap added fake region name undefined-12514\r\n2016-06-29 12:59:31,639 DEBUG   HmacV4Auth using auth info provided directly\r\n2016-06-29 12:59:31,639 DEBUG   InstallImage account ID: 000622086692\r\n2016-06-29 12:59:31,639 DEBUG   InstallImage certificate: None\r\n2016-06-29 12:59:31,639 DEBUG   InstallImage private key: None\r\n2016-06-29 12:59:31,639 INFO    Config finding region option certificate\r\n2016-06-29 12:59:31,639 DEBUG   Config   section localhost\r\n2016-06-29 12:59:31,639 INFO    Config   found   localhost::certificate = '/var/lib/eucalyptus/keys/cloud-cert.pem'\r\n2016-06-29 12:59:31,639 DEBUG   InstallImage using cloud certificate from configuration\r\n2016-06-29 12:59:31,639 DEBUG   InstallImage cloud certificate: /var/lib/eucalyptus/keys/cloud-cert.pem\r\n2016-06-29 12:59:31,644 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,644 DEBUG   HmacV1Auth using auth info provided directly\r\n2016-06-29 12:59:31,644 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,644 WARNING Bootstrap added fake region name undefined-12514\r\n2016-06-29 12:59:31,645 DEBUG   HmacV4Auth using auth info provided directly\r\n2016-06-29 12:59:31,645 DEBUG   BundleAndUploadImage account ID: 000622086692\r\n2016-06-29 12:59:31,645 DEBUG   BundleAndUploadImage certificate: None\r\n2016-06-29 12:59:31,645 DEBUG   BundleAndUploadImage private key: None\r\n2016-06-29 12:59:31,645 DEBUG   BundleAndUploadImage cloud certificate: /var/lib/eucalyptus/keys/cloud-cert.pem\r\n2016-06-29 12:59:31,780 DEBUG   BundleAndUploadImage bundle path prefix: /var/tmp/bundle-KhbBb5/eucalyptus-service-image.raw\r\n2016-06-29 12:59:31,781 INFO    Config set region to localhost\r\n2016-06-29 12:59:31,782 DEBUG   HmacV1Auth using auth info provided directly\r\n2016-06-29 12:59:31,799 INFO    S3 sending request (attempt 1 of 3)\r\n2016-06-29 12:59:31,896 DEBUG   HmacV1Auth canonicalized headers: ''\r\n2016-06-29 12:59:31,896 DEBUG   HmacV1Auth canonicalized resource: '/eucalyptus-service-image-v2.41'\r\n2016-06-29 12:59:31,896 DEBUG   HmacV1Auth string to sign: 'GET\\n\\n\\nWed, 29 Jun 2016 19:59:31 -0000\\n/eucalyptus-service-image-v2.41'\r\n2016-06-29 12:59:31,896 DEBUG   HmacV1Auth b64-encoded signature: xjaQjgk1CliwCrkZUkHXIk9Fwd0=\r\n2016-06-29 12:59:31,897 DEBUG   S3 request method: GET\r\n2016-06-29 12:59:31,897 DEBUG   S3 request url:    http://127.0.0.1:8773/services/objectstorage/eucalyptus-service-image-v2.41?max-keys=0\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Accept: */*\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Accept-Encoding: gzip, deflate\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Authorization: AWS AKIAAXPCPUHZOCFAPGAX:xjaQjgk1CliwCrkZUkHXIk9Fwd0=\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Connection: keep-alive\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Date: Wed, 29 Jun 2016 19:59:31 -0000\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: Host: 127.0.0.1:8773\r\n2016-06-29 12:59:31,897 DEBUG   S3 request header: User-Agent: euca2ools/3.3.0 (CPython 2.7.5; Linux 3.10.0-327.22.2.el7.x86_64; x86_64) requestbuilder/0.5.2 requests/2.6.0\r\n2016-06-29 12:59:31,897 DEBUG   S3 request param:  max-keys: 0\r\n2016-06-29 12:59:31,947 DEBUG   S3 response time: 0.049 seconds\r\n2016-06-29 12:59:31,947 INFO    S3 response status: 307\r\n2016-06-29 12:59:31,947 DEBUG   S3 response header: connection: close\r\n2016-06-29 12:59:31,947 DEBUG   S3 response header: date: Wed, 29 Jun 2016 19:59:31 UTC\r\n2016-06-29 12:59:31,947 DEBUG   S3 response header: location: http://10.111.1.110:8773/services/objectstorage/eucalyptus-service-image-v2.41?max-keys=0\r\n2016-06-29 12:59:31,947 DEBUG   S3 response header: server: Eucalyptus/4.3.0\r\n2016-06-29 12:59:31,948 DEBUG   S3 redirecting to http://10.111.1.110:8773/services/objectstorage/eucalyptus-service-image-v2.41?max-keys=0 (4 redirect(s) remaining)\r\n2016-06-29 12:59:31,948 INFO    S3 sending request (attempt 1 of 3)\r\n2016-06-29 12:59:31,948 DEBUG   HmacV1Auth canonicalized headers: ''\r\n2016-06-29 12:59:31,948 DEBUG   HmacV1Auth canonicalized resource: '/eucalyptus-service-image-v2.41'\r\n2016-06-29 12:59:31,949 DEBUG   HmacV1Auth string to sign: 'GET\\n\\n\\nWed, 29 Jun 2016 19:59:31 -0000\\n/eucalyptus-service-image-v2.41'\r\n2016-06-29 12:59:31,949 DEBUG   HmacV1Auth b64-encoded signature: xjaQjgk1CliwCrkZUkHXIk9Fwd0=\r\n2016-06-29 12:59:31,949 DEBUG   S3 request method: GET\r\n2016-06-29 12:59:31,949 DEBUG   S3 request url:    http://10.111.1.110:8773/services/objectstorage/eucalyptus-service-image-v2.41?max-keys=0&max-keys=0\r\n2016-06-29 12:59:31,949 DEBUG   S3 request header: Accept: */*\r\n2016-06-29 12:59:31,949 DEBUG   S3 request header: Accept-Encoding: gzip, deflate\r\n2016-06-29 12:59:31,949 DEBUG   S3 request header: Authorization: AWS AKIAAXPCPUHZOCFAPGAX:xjaQjgk1CliwCrkZUkHXIk9Fwd0=\r\n2016-06-29 12:59:31,949 DEBUG   S3 request header: Connection: keep-alive\r\n2016-06-29 12:59:31,949 DEBUG   S3 request header: Date: Wed, 29 Jun 2016 19:59:31 -0000\r\n2016-06-29 12:59:31,950 DEBUG   S3 request header: Host: 10.111.1.110:8773\r\n2016-06-29 12:59:31,950 DEBUG   S3 request header: User-Agent: euca2ools/3.3.0 (CPython 2.7.5; Linux 3.10.0-327.22.2.el7.x86_64; x86_64) requestbuilder/0.5.2 requests/2.6.0\r\n2016-06-29 12:59:31,950 DEBUG   S3 request param:  max-keys: 0\r\n2016-06-29 12:59:31,950 DEBUG   S3 request param:  max-keys: 0\r\n2016-06-29 12:59:31,974 DEBUG   S3 response time: 0.024 seconds\r\n2016-06-29 12:59:31,974 INFO    S3 response status: 200\r\n2016-06-29 12:59:31,975 DEBUG   S3 response header: content-length: 237\r\n2016-06-29 12:59:31,975 DEBUG   S3 response header: content-type: application/xml\r\n2016-06-29 12:59:31,975 DEBUG   S3 response header: date: Wed, 29 Jun 2016 19:59:31 GMT\r\n2016-06-29 12:59:31,975 DEBUG   S3 response header: server: Eucalyptus/4.3.0\r\n2016-06-29 12:59:31,975 DEBUG   S3 response header: x-amz-request-id: a86d1f61-a087-4774-8bc5-404606adf025\r\n2016-06-29 12:59:33,343 INFO    Config set region to localhost\r\n2016-06-29 12:59:33,343 DEBUG   HmacV1Auth using auth info provided directly\r\n2016-06-29 12:59:33,344 INFO    S3 sending request (attempt 1 of 3)\r\n2016-06-29 12:59:33,345 DEBUG   HmacV1Auth canonicalized headers: 'x-amz-acl:aws-exec-read\\n'\r\n2016-06-29 12:59:33,346 DEBUG   HmacV1Auth canonicalized resource: '/eucalyptus-service-image-v2.41/eucalyptus-service-image.raw.part.00'\r\n2016-06-29 12:59:33,346 DEBUG   HmacV1Auth string to sign: 'PUT\\n\\n\\nWed, 29 Jun 2016 19:59:33 -0000\\nx-amz-acl:aws-exec-read\\n/eucalyptus-service-image-v2.41/eucalyptus-service-image.raw.part.00'\r\n2016-06-29 12:59:33,346 DEBUG   HmacV1Auth b64-encoded signature: EDCifsUS50wIVWTQcTsxe1uaDqU=\r\n2016-06-29 12:59:33,346 DEBUG   S3 request method: PUT\r\n2016-06-29 12:59:33,346 DEBUG   S3 request url:    http://127.0.0.1:8773/services/objectstorage/eucalyptus-service-image-v2.41/eucalyptus-service-image.raw.part.00\r\n2016-06-29 12:59:33,346 DEBUG   S3 request header: Accept: */*\r\n2016-06-29 12:59:33,346 DEBUG   S3 request header: Accept-Encoding: gzip, deflate\r\n2016-06-29 12:59:33,346 DEBUG   S3 request header: Authorization: AWS AKIAAXPCPUHZOCFAPGAX:EDCifsUS50wIVWTQcTsxe1uaDqU=\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: Connection: keep-alive\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: Content-Length: 10485760\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: Date: Wed, 29 Jun 2016 19:59:33 -0000\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: Host: 127.0.0.1:8773\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: User-Agent: euca2ools/3.3.0 (CPython 2.7.5; Linux 3.10.0-327.22.2.el7.x86_64; x86_64) requestbuilder/0.5.2 requests/2.6.0\r\n2016-06-29 12:59:33,347 DEBUG   S3 request header: x-amz-acl: aws-exec-read\r\n2016-06-29 12:59:33,353 DEBUG   S3 connection error\r\nTraceback (most recent call last):\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/service.py\", line 179, in send_request\r\nallow_redirects=False)\r\nFile \"/usr/lib/python2.7/site-packages/requests/sessions.py\", line 576, in send\r\nr = adapter.send(request, **kwargs)\r\nFile \"/usr/lib/python2.7/site-packages/requests/adapters.py\", line 424, in send\r\nraise ConnectionError(e, request=request)\r\nConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8773): Max retries exceeded with url: /services/objectstorage/eucalyptus-service-image-v2.41/eucalyptus-service-image.raw.part.00 (Caused by ProtocolError('Connection aborted.', error(104, 'Connection reset by peer')))\r\n2016-06-29 12:59:33,383 ERROR   PutObject upload failed\r\nTraceback (most recent call last):\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/s3/putobject.py\", line 137, in try_send\r\nresponse = self.send()\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/request.py\", line 160, in send\r\nauth=self.auth)\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/service.py\", line 232, in send_request\r\nreturn self.__handle_connection_error(exc)\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/service.py\", line 251, in __handle_connection_error\r\nraise ClientError('connection error ({0})'.format(msg))\r\nClientError: connection error (('Connection aborted.', error(104, 'Connection reset by peer')))\r\neuca-install-image: error: connection error (('Connection aborted.', error(104, 'Connection reset by peer')))\r\nTraceback (most recent call last):\r\nFile \"/usr/bin/euca-install-image\", line 6, in <module>\r\neuca2ools.commands.bundle.installimage.InstallImage.run()\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/command.py\", line 305, in run\r\ncmd.handle_cli_exception(err)\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/request.py\", line 226, in handle_cli_exception\r\nBaseCommand.handle_cli_exception(self, err)\r\nFile \"/usr/lib/python2.7/site-packages/requestbuilder/command.py\", line 302, in run\r\nresult = cmd.main()\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/bundle/installimage.py\", line 115, in main\r\nresult_bundle = req.main()\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/bundle/bundleanduploadimage.py\", line 98, in main\r\nkey_prefix)\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/bundle/bundleanduploadimage.py\", line 182, in create_and_upload_bundle\r\nshow_progress=self.args.get('show_progress'))\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/bundle/mixins.py\", line 441, in upload_bundle_parts\r\nself.upload_bundle_file(part.filename, dest, **putobj_kwargs)\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/bundle/mixins.py\", line 432, in upload_bundle_file\r\nreq.main()\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/commands/s3/putobject.py\", line 127, in main\r\nraise self.last_upload_error\r\nrequestbuilder.exceptions.ClientError: connection error (('Connection aborted.', error(104, 'Connection reset by peer')))\r\nProcess Process-3:\r\nTraceback (most recent call last):\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 258, in _bootstrap\r\nself.run()\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 114, in run\r\nself._target(*self._args, **self._kwargs)\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/bundle/pipes/fittings.py\", line 162, in _write_parts\r\npartinfo_mpconn.send(partinfo)\r\nIOError: [Errno 32] Broken pipe\r\nerror writing output file\r\n\r\ngzip: stdout: Broken pipe\r\nProcess Process-2:\r\nTraceback (most recent call last):\r\nProcess Process-1:\r\nTraceback (most recent call last):\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 258, in _bootstrap\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 258, in _bootstrap\r\nself.run()\r\nself.run()\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 114, in run\r\nFile \"/usr/lib64/python2.7/multiprocessing/process.py\", line 114, in run\r\nself._target(*self._args, **self._kwargs)\r\nself._target(*self._args, **self._kwargs)\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/bundle/pipes/core.py\", line 231, in _create_tarball_from_stream\r\nFile \"/usr/lib/python2.7/site-packages/euca2ools/bundle/pipes/core.py\", line 202, in _calc_sha1_for_pipe\r\ntarball.close()\r\noutfile.write(chunk)\r\nFile \"/usr/lib64/python2.7/tarfile.py\", line 1776, in close\r\nIOError: [Errno 32] Broken pipe\r\nself.fileobj.write(NUL * (BLOCKSIZE * 2))\r\nFile \"/usr/lib64/python2.7/tarfile.py\", line 471, in write\r\nself.__write(s)\r\nFile \"/usr/lib64/python2.7/tarfile.py\", line 479, in __write\r\nself.fileobj.write(self.buf[:self.bufsize])\r\nIOError: [Errno 32] Broken pipe\r\n<bound method _Stream.__del__ of <tarfile._Stream instance at 0x13a1950>> ignored\r\n\r\nError: Unable to install imaging worker due to:\r\nSEE OUTPUT ABOVE\r\n{code}\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"esi-install-image fails when clcadmin system credential is used","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"customfield_12100":"0|i03uan:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2016-06-29T14:30:19.653-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["gholms(gholms)","spark(spark)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12512/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/45307/comment/105932","id":"105932","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"body":"Do you have --debug output from euca-install-image?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-06-29T14:30:19.653-0500","updated":"2016-06-29T14:30:19.653-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/45307/comment/105936","id":"105936","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~gholms] Updated the original posting. The cmdline succeeds when eucalyptus/admin is used after setting AWS_DEFAULT_REGION. The difference seems to be the region being localhost vs. domain-name.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-06-29T15:05:40.980-0500","updated":"2016-06-29T15:05:40.980-0500"}],"maxResults":2,"total":2,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}