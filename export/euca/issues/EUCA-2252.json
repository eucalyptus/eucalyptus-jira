{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13347","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347","key":"EUCA-2252","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10201","id":"10201","description":"Eucalyptus 3.1.1","name":"3.1.1","archived":false,"released":true,"releaseDate":"2012-08-24"}],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@54255f3c[id=3,rapidViewId=<null>,state=CLOSED,name=3.1 Harden and Release Sprint,goal=<null>,startDate=2012-05-30T21:33:16.395Z,endDate=2012-06-22T21:33:16.395Z,completeDate=2012-07-15T15:03:03.863Z,sequence=3]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"resolutiondate":"2012-06-10T15:22:38.496-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2252/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2012-05-31T17:55:18.085-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2012-06-05T04:26:39.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"issuelinks":[{"id":"10901","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/10901","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"inwardIssue":{"id":"13475","key":"EUCA-2316","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13475","fields":{"summary":"BFEBS Instance Launched with DeleteOnTermination Flag set to false, deletes Root Device Volume on Termination","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"10802","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/10802","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"11892","key":"EUCA-1492","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/11892","fields":{"summary":"delete on terminate false is always reported as true","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/5","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"updated":"2013-01-09T19:50:27.848-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"description":"Registration-time behavior:\r\n$ euca-register -n BFEBS_delOnTermTrue --root-device-name /dev/sda1 -b /dev/sda1=snap-476C411C::true\r\nIMAGE\temi-C8C240E3\r\n\r\n$ euca-register -n BFEBS_delOnTermFalse --root-device-name /dev/sda1 -b /dev/sda1=snap-476C411C::false\r\nIMAGE\temi-C6553CA9\r\n\r\n$ euca-describe-images \r\nIMAGE\temi-C6553CA9\t494041629378/BFEBS_delOnTermFalse\t494041629378\tavailable\tpublic\t x86_64\tmachine\t \t ebs BLOCKDEVICEMAPPING\t/dev/sda1\tsnap-476C411C\t5\r\nIMAGE\temi-C8C240E3\t494041629378/BFEBS_delOnTermTrue\t494041629378\tavailable\tpublic\t x86_64\tmachine\t \t ebs BLOCKDEVICEMAPPING\t/dev/sda1\tsnap-476C411C\t5\r\n\r\n$ euca-run-instances -n 1 -t m1.small -k testkey emi-C6553CA9\r\nRESERVATION\tr-57A741E8\t494041629378\tdefault\r\nINSTANCE\ti-E4A946FD\temi-C6553CA9\t0.0.0.0\t0.0.0.0\tpending\ttestkey\t0\t m1.small\t2012-05-30T23:48:08.458Z\tPARTI00\t\r\n\r\n$ euca-run-instances -n 1 -t m1.small -k testkey emi-C8C240E3\r\nRESERVATION\tr-641D41DB\t494041629378\tdefault\r\nINSTANCE\ti-BD304436\temi-C8C240E3\t0.0.0.0\t0.0.0.0\tpending\ttestkey\t0\t m1.small\t2012-05-30T23:48:35.261Z\tPARTI00\r\n\r\n$ euca-describe-instances \r\nRESERVATION\tr-641D41DB\t494041629378\tdefault\r\nINSTANCE\ti-BD304436\temi-C8C240E3\t192.168.46.59\t10.172.20.59\trunning\ttestkey\t0\t m1.small\t2012-05-30T23:48:35.261Z PARTI00\r\n\r\nRESERVATION\tr-57A741E8\t494041629378\tdefault\r\nINSTANCE\ti-E4A946FD\temi-C6553CA9\t192.168.46.58\t10.172.20.50\trunning\ttestkey\t0\t m1.small\t2012-05-30T23:48:08.458Z PARTI00\t\r\n\r\n$ euca-describe-volumes \r\nVOLUME\tvol-2BB83CB5\t 5\tsnap-476C411C\tPARTI00\tin-use\t2012-05-30T23:48:35.369Z\r\nATTACHMENT\tvol-2BB83CB5\ti-BD304436\t/dev/sda1\tattached\t2012-05-30T23:48:35.479Z\r\nVOLUME\tvol-8FD23DB5\t 5\tsnap-476C411C\tPARTI00\tin-use\t2012-05-30T23:48:08.64Z\r\nATTACHMENT\tvol-8FD23DB5\ti-E4A946FD\t/dev/sda1\tattached\t2012-05-30T23:48:08.746Z\r\n\r\n$ euca-terminate-instances i-BD304436\r\nINSTANCE\ti-BD304436\r\n\r\n$ euca-terminate-instances i-E4A946FD\r\nINSTANCE\ti-E4A946FD\r\n\r\n$ euca-describe-instances\r\nRESERVATION\tr-641D41DB\t494041629378\r\nINSTANCE\ti-BD304436\temi-C8C240E3\t10.172.20.59\t10.172.20.59\tterminated\ttestkey\t0\t m1.small\t2012-05-30T23:48:35.261Z PARTI00\r\nRESERVATION\tr-57A741E8\t494041629378\r\nINSTANCE\ti-E4A946FD\temi-C6553CA9\t10.172.20.50\t10.172.20.50\tterminated\ttestkey\t0\t m1.small\t2012-05-30T23:48:08.458Z PARTI00\t\r\n\r\n$ euca-describe-volumes \r\nVOLUME\tvol-2BB83CB5\t 5\tsnap-476C411C\tPARTI00\tdeleted\t2012-05-30T23:48:35.369Z\r\nVOLUME\tvol-8FD23DB5\t 5\tsnap-476C411C\tPARTI00\tavailable\t2012-05-30T23:48:08.64Z\r\n\r\nConclusion: Defaults for the registered image are honored correctly\r\n\r\n\r\nNow to try overriding the defaults during the euca-run-instances command:\r\n\r\n$ euca-run-instances -n 1 -t m1.small -k testkey emi-C8C240E3 --block-device-mapping /dev/sda1=snap-476C411C::false (NOTE: this is the opposite of the image default)\r\nRESERVATION\tr-F0DC4184\t494041629378\tdefault\r\nINSTANCE\ti-DA3B42CA\temi-C8C240E3\t0.0.0.0\t0.0.0.0\tpending\ttestkey\t0\t m1.small\t2012-05-31T00:00:01.052Z\tPARTI00\r\n\r\n$ euca-run-instances -n 1 -t m1.small -k testkey emi-C6553CA9 --block-device-mapping /dev/sda1=snap-476C411C::true (Note: this is the opposite of the image default)\r\nRESERVATION\tr-07233ED5\t494041629378\tdefault\r\nINSTANCE\ti-15203FBA\temi-C6553CA9\t0.0.0.0\t0.0.0.0\tpending\ttestkey\t0\t m1.small\t2012-05-31T00:00:36.581Z\tPARTI00\r\n\r\n$ euca-describe-volumes \r\nVOLUME\tvol-45EC3D7C\t 5\tsnap-476C411C\tPARTI00\tin-use\t2012-05-31T00:00:01.16Z\r\nATTACHMENT\tvol-45EC3D7C\ti-DA3B42CA\t/dev/sda1\tattached\t2012-05-31T00:00:01.288Z (NOTE: this volume should NOT be deleted on terminate)\r\nVOLUME\tvol-1E01388A\t 5\tsnap-476C411C\tPARTI00\tin-use\t2012-05-31T00:00:36.659Z\r\nATTACHMENT\tvol-1E01388A\ti-15203FBA\t/dev/sda1\tattached\t2012-05-31T00:00:36.778Z (NOTE: this volume SHOULD be deleted on terminate)\r\n\r\n$ euca-describe-instances \r\nRESERVATION\tr-F0DC4184\t494041629378\tdefault\r\nINSTANCE\ti-DA3B42CA\temi-C8C240E3\t192.168.46.58\t10.172.20.43\trunning\ttestkey\t0\t m1.small\t2012-05-31T00:00:01.052Z PARTI00\r\nRESERVATION\tr-07233ED5\t494041629378\tdefault\r\nINSTANCE\ti-15203FBA\temi-C6553CA9\t192.168.46.59\t10.172.20.45\trunning\ttestkey\t0\t m1.small\t2012-05-31T00:00:36.581Z PARTI00\r\n\r\n$ euca-terminate-instances i-DA3B42CA\r\nINSTANCE\ti-DA3B42CA\r\n\r\n$ euca-terminate-instances i-15203FBA\r\nINSTANCE\ti-15203FBA\r\n\r\n$ euca-describe-instances \r\nRESERVATION\tr-F0DC4184\t494041629378\r\nINSTANCE\ti-DA3B42CA\temi-C8C240E3\t10.172.20.43\t10.172.20.43\tterminated\ttestkey\t0\t m1.small\t2012-05-31T00:00:01.052Z PARTI00\r\n\r\nRESERVATION\tr-07233ED5\t494041629378\r\nINSTANCE\ti-15203FBA\temi-C6553CA9\t10.172.20.45\t10.172.20.45\tterminated\ttestkey\t0\t m1.small\t2012-05-31T00:00:36.581Z PARTI00\r\n\r\n$ euca-describe-volumes \r\nVOLUME\tvol-45EC3D7C\t 5\tsnap-476C411C\tPARTI00\tdeleted\t2012-05-31T00:00:01.16Z (WRONG!)\r\nVOLUME\tvol-1E01388A\t 5\tsnap-476C411C\tPARTI00\tavailable\t2012-05-31T00:00:36.659Z (WRONG!)\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Delete on Terminate specified at run-time doesn't override image default","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_614533_*|*_10001_*:*_1_*:*_326290948_*|*_10000_*:*_1_*:*_66547355_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_445332400_*|*_10007_*:*_1_*:*_16055211","customfield_12100":"0|i01c87:","customfield_10001":"2012-06-01T16:52:00.646-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["kedwards(kedwards)","sjones(sjones)","viglesias(viglesias)","zhill(zhill)"],"customfield_10116":null,"customfield_10117":null,"environment":"Setup:\r\nTEST_NAME\tvic-precise-ha\r\nUNIQUE_ID\t1011\r\nEMAIL\tvic.iglesias@eucalyptus.com\r\nPXE_TYPE\tQAIMAGE\r\nBUILD_TYPE\tNORMAL\r\nTEST_SEQ\teee-sequence-drbd-01\r\nNETWORK\tMANAGED\r\nSUBNET_IP\t10.172.16.0\r\nMANAGED_IPS\t192.168.46.50 192.168.46.51 192.168.46.52 192.168.46.53 192.168.46.54 192.168.46.55 192.168.46.56 192.168.46.57 192.168.46.58 192.168.46.59 192.168.46.60 192.168.46.61 192.168.46.62 192.168.46.63 192.168.46.64 192.168.46.65 192.168.46.66 192.168.46.67 192.168.46.68 192.168.46.69 192.168.46.70 192.168.46.71 192.168.46.72 192.168.46.73 192.168.46.74 192.168.46.75 192.168.46.76 192.168.46.77 192.168.46.78 192.168.46.79 192.168.46.80 192.168.46.81\r\nBZR_BRANCH\tsftp://root@192.168.7.1/home/repositories/eucalyptus/eee\r\nBZR_REVISION\t0\r\nGIT_REPO\tgit+ssh://repo-euca@git.eucalyptus-systems.com/internal#testing\r\nGIT_HASH\t30949fe72416f0757f5766419734bf7d877eb712\r\n\r\n192.168.51.67\tUBUNTU\tPRECISE\t64\tREPO\t[CLC WS]\r\n192.168.51.68\tUBUNTU\tPRECISE\t64\tREPO\t[CLC WS]\r\n192.168.51.69\tUBUNTU\tPRECISE\t64\tREPO\t[CC00 SC00]\r\n192.168.51.70\tUBUNTU\tPRECISE\t64\tREPO\t[CC00 SC00]\r\n192.168.51.76\tUBUNTU\tPRECISE\t64\tREPO\t[NC00]\r\n192.168.51.77\tUBUNTU\tPRECISE\t64\tREPO\t[NC00]\r\n\r\nMEMO\r\nCLOUD_OPTS=--debug --db-home=/usr/lib/postgresql/9.1/\r\nWALRUS_BACKEND=DRBDStorageManager\r\nSAN_PROVIDER=EquallogicProvider\r\nEBS_STORAGE_MANAGER=SANManager\r\nSET_VNET_NETMASK=255.255.240.0\r\nLOCAL_PKG_REPO=http://192.168.51.243/ubuntu\r\nMAX_CORES=16\r\nEND_MEMO\r\nTEST EXECUTION AND RESULTS\r\n","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2252/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347/comment/27760","id":"27760","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I've reproduced this issue. We should allow override of \"delete on terminate\" when running an instance, but currently the value passed when running is ignored.\r\n\r\n[1] http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html#BDM_Override","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-01T16:52:00.646-0500","updated":"2012-06-01T16:52:00.646-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347/comment/27762","id":"27762","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"body":"This is an interesting one... below is a snip form the link : http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html#Using_OverridingAMIBDM\r\n\r\n\"You can override that mapping by specifying a block device mapping with the changes that you want at launch time. In your overrides, you can modify the mapping for any of the storage devices except the root device volume.\"","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-01T18:09:19.390-0500","updated":"2012-06-01T18:09:19.390-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347/comment/27815","id":"27815","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Some AWS documentation for this is here:\r\n\r\nhttp://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/RootDeviceStorage.html\r\n\r\nSearch for \"Changing the Root Volume to Persist\".","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-04T12:36:28.670-0500","updated":"2012-06-04T12:36:28.670-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347/comment/27837","id":"27837","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The delete on terminate flag passed in a block device mapping is now respected.\r\n\r\nNote that all parts of a mapping are optional, so the mapping:\r\n\r\n  -b /dev/sda1=::\r\n\r\nmeans do not change the snapshot or size and set the delete on terminate flag to true.\r\n\r\nThe following shows the new (expected) behaviour for the six cases:\r\n\r\n1) Image with DOT=false, no mapping override ; instance has DOT=false\r\n2) Image with DOT=false, override to DOT=true ; instance has DOT=true\r\n3) Image with DOT=false, override to DOT=false ; instance has DOT=false\r\n4) Image with DOT=true, no mapping override ; instance has DOT=true\r\n5) Image with DOT=true, override to DOT=true ; instance has DOT=true\r\n6) Image with DOT=true, override to DOT=false ; instance has DOT=false\r\n\r\nFor each command the resulting image / instance is shown as a comment: \r\n\r\n> euca-register -b /dev/sda1=snap-29C74060::false -n EBS # emi-D1C4402B\r\n> euca-register -b /dev/sda1=snap-29C74060 -n EBS_DOT    # emi-390B3F30\r\n\r\n> euca-run-instances emi-D1C4402B                        # i-B4733EE3 deleteOnTermination=false\r\n> euca-run-instances emi-D1C4402B -b /dev/sda1=::        # i-C7714301 deleteOnTermination=true\t\r\n> euca-run-instances emi-D1C4402B -b /dev/sda1=::false   # i-B2204331 deleteOnTermination=false\t\t\t\t\t\r\n\r\n> euca-describe-volumes # while running\r\nVOLUME\tvol-EB79403F\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:45:01.716Z\r\nATTACHMENT\tvol-EB79403F\ti-B2204331\t/dev/sda1\tattached\t2012-06-05T00:45:02.669Z\r\nVOLUME\tvol-93FF3DE1\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:44:49.109Z\r\nATTACHMENT\tvol-93FF3DE1\ti-C7714301\t/dev/sda1\tattached\t2012-06-05T00:44:49.246Z\r\nVOLUME\tvol-E11B4069\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:44:32.391Z\r\nATTACHMENT\tvol-E11B4069\ti-B4733EE3\t/dev/sda1\tattached\t2012-06-05T00:44:32.499Z\r\n\r\n> euca-describe-volumes # after termination\r\nVOLUME\tvol-EB79403F\t 1\tsnap-29C74060\tPARTI00\tavailable\t2012-06-05T00:45:01.716Z\r\nVOLUME\tvol-93FF3DE1\t 1\tsnap-29C74060\tPARTI00\tdeleted\t    2012-06-05T00:44:49.109Z\r\nVOLUME\tvol-E11B4069\t 1\tsnap-29C74060\tPARTI00\tavailable\t2012-06-05T00:44:32.391Z\r\n\r\n> euca-run-instances emi-390B3F30                        # i-09D146A2 deleteOnTermination=true\r\n> euca-run-instances emi-390B3F30 -b /dev/sda1=::        # i-5AE33FF7 deleteOnTermination=true\t\r\n> euca-run-instances emi-390B3F30 -b /dev/sda1=::false   # i-3D19422C deleteOnTermination=false\t\t\t\t\t\r\n\r\n> euca-describe-volumes # while running\r\nVOLUME\tvol-10183963\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:55:13.47Z\r\nATTACHMENT\tvol-10183963\ti-3D19422C\t/dev/sda1\tattached\t2012-06-05T00:55:13.689Z\r\nVOLUME\tvol-68B23DAE\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:54:50.667Z\r\nATTACHMENT\tvol-68B23DAE\ti-09D146A2\t/dev/sda1\tattached\t2012-06-05T00:54:50.773Z\r\nVOLUME\tvol-C861404D\t 1\tsnap-29C74060\tPARTI00\tin-use\t2012-06-05T00:55:04.564Z\r\nATTACHMENT\tvol-C861404D\ti-5AE33FF7\t/dev/sda1\tattached\t2012-06-05T00:55:06.083Z\r\n\r\n> euca-describe-volumes # after termination\r\nVOLUME\tvol-10183963\t 1\tsnap-29C74060\tPARTI00\tavailable\t2012-06-05T00:55:13.47Z\r\nVOLUME\tvol-68B23DAE\t 1\tsnap-29C74060\tPARTI00\tdeleted\t2012-06-05T00:54:50.667Z\r\nVOLUME\tvol-C861404D\t 1\tsnap-29C74060\tPARTI00\tdeleted\t2012-06-05T00:55:04.564Z\r\n\r\nNote that due to EUCA-1492, you have to terminate the instance and see if the volume is still available to check the delete on terminate setting for the instance.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-05T11:40:26.128-0500","updated":"2012-06-05T11:44:51.347-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13347/comment/27987","id":"27987","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified in latest packages. Working as expected when passing the following block device mapping at run time:\r\n-b /dev/sda1=:10:false\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-10T15:22:38.527-0500","updated":"2012-06-10T15:22:38.527-0500"}],"maxResults":5,"total":5,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}