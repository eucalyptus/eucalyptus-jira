{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"44607","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607","key":"EUCA-12468","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@397f5bee[id=149,rapidViewId=118,state=CLOSED,name=5.0 Sprint 2,goal=,startDate=2017-04-06T19:05:14.391Z,endDate=2017-04-27T19:05:00.000Z,completeDate=2017-05-01T19:25:11.414Z,sequence=149]","com.atlassian.greenhopper.service.sprint.Sprint@4733d3d6[id=150,rapidViewId=118,state=CLOSED,name=5.0 Sprint 3,goal=,startDate=2017-04-28T19:35:18.297Z,endDate=2017-05-18T19:35:00.000Z,completeDate=2017-05-19T17:08:06.071Z,sequence=150]","com.atlassian.greenhopper.service.sprint.Sprint@510fad40[id=151,rapidViewId=118,state=CLOSED,name=5.0 Sprint 4,goal=,startDate=2017-05-19T17:08:06.223Z,endDate=2017-06-09T17:08:00.000Z,completeDate=2017-06-13T20:28:29.061Z,sequence=151]"],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12468/watchers","watchCount":7,"isWatching":false},"created":"2016-06-16T21:28:09.843-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10300":null,"labels":["NeedsKnownIssue"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"issuelinks":[{"id":"39800","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/39800","type":{"id":"10100","name":"Blocks","inward":"is blocked by","outward":"blocks","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10100"},"outwardIssue":{"id":"38780","key":"EUCA-11523","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38780","fields":{"summary":"enhance error message: \"Migrating instance i-ce0e95fd failed because of: ERROR\"","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"45600","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/45600","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"46217","key":"EUCA-12594","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46217","fields":{"summary":"Destination node does not clean all artifacts after instance is migrated out","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"39407","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/39407","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"44606","key":"EUCA-12467","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44606","fields":{"summary":"Instance migration fails silently when not enough space available","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"updated":"2017-05-19T12:08:11.078-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"description":"When instance migration fails, the rollback should clean up any artifacts that were generated during migration process.\r\n\r\nCurrently it leaves following artifacts on destination host when migration fails,\r\n\r\n{noformat}\r\n# ll /var/lib/eucalyptus/instances/work/AIDAAB4PFGBEXK2XHGOWK/i-2c47292b/\r\ntotal 8\r\n-rw-r-----. 1 eucalyptus eucalyptus 2148532224 Jun 16 19:15 emi-6563714b-14e248fa.blocks\r\n-rw-r-----. 1 eucalyptus eucalyptus          0 Jun 16 19:15 emi-6563714b-14e248fa.lock\r\n-rw-r-----. 1 eucalyptus eucalyptus         21 Jun 16 19:15 emi-6563714b-14e248fa.sig\r\nlrwxrwxrwx. 1 eucalyptus eucalyptus         96 Jun 16 19:15 link-to-vda -> /var/lib/eucalyptus/instances/work/AIDAAB4PFGBEXK2XHGOWK/i-2c47292b/emi-6563714b-14e248fa.blocks\r\n{noformat}\r\n\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Failed migration due to space limitations should not leave instance's artifacts on destination host","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i03tj3:","customfield_10000":null,"customfield_10001":"2016-09-27T16:01:55.712-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["shaon(shaon)","mmunn1(mmunn1)","sgraham(sgraham)","vasya(vasya)"],"customfield_10117":null,"environment":"CentOS Linux release 7.2.1511 (Core)\r\n\r\nInstalled Packages\r\nName        : eucalyptus-nc\r\nArch        : x86_64\r\nVersion     : 4.3.0\r\nRelease     : 0.24988.324.20160615gited4b99a.el7\r\nSize        : 3.7 M\r\nRepo        : installed","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12468/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/110705","id":"110705","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vasya] Would you like me to take a look at this issue?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-27T16:01:55.712-0500","updated":"2016-09-27T16:01:55.712-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/110706","id":"110706","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1], yes, please.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-09-27T16:30:43.978-0500","updated":"2016-09-27T16:30:43.978-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/110811","id":"110811","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~shaon] Were you able to reproduce this? Please list the reproduction steps if you have them.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-28T12:54:47.179-0500","updated":"2016-09-28T12:54:47.179-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/110812","id":"110812","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1], I think, this issue happened, if instance migration is requested when there is no space left on the node controllers.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-28T12:59:48.194-0500","updated":"2016-09-28T12:59:48.194-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/110926","id":"110926","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"I have this reproduced, this issue is caused whan an outside process grabs all the available space while the migration is in progress.\r\n\r\nOn A QA Quick-Start setup with 2 NC's\r\n1) start an instance on the source NC\r\n2) open a terminal on the destination NC host and go the directory /var/lib/eucalyptus/instances/work \r\n3) Start the instance migration \r\n4) In the open terminal on the destination NC immediately run  the command 'fallocate -l  170G bogus.file' (this will create a very large file very quickly)\r\n    the total space of the instnace and fallocate value should just exced the available space by a  gig or two. \r\n5) The instance will fail to migrate and you will see artifacts for the attempted migration left in the work directory","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-09-29T19:17:30.934-0500","updated":"2016-09-29T19:17:30.934-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/113242","id":"113242","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"Also, once the instance migration failed due to resource limitation, it keeps failing even after I make enough room for the instance.\r\n\r\nI had to remove the instance directory (e.g /var/lib/eucalyptus/instances/work/AIDAAUHKXFEXJNMB7QID4/i-be2afb69) to be able to migrate the same instance again.\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-18T18:11:17.739-0600","updated":"2016-11-18T18:11:17.739-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/113503","id":"113503","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"This looks like it may be the same issue as EUCA-12594. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-29T11:47:42.559-0600","updated":"2016-11-29T11:47:42.559-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/115516","id":"115516","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"This is not the same issue as EUCA-12594 and is not resolved by the fix for that issue in 4.4","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-01-11T14:52:17.138-0600","updated":"2017-01-11T14:52:17.138-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/115944","id":"115944","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"I'm not able to repro the issue so far, I'm using an instance that has a 10GB fs, plus filling up the disk with 'fallocate'.. the migration fails but the files are cleaned up as expected:\r\n{code}\r\n2017-01-18 16:36:20  WARN 000016719 refresh_instance_info    | [i-fc58adaa] hypervisor failed to find domain, will retry 1 more time(s)\r\n2017-01-18 16:36:25 ERROR 000016719 libvirt_err_handler      | libvirt: Domain not found: no domain with matching name 'i-fc58adaa' (code=42)\r\n2017-01-18 16:36:25  WARN 000016719 refresh_instance_info    | [i-fc58adaa] hypervisor failed to find domain, assuming it was shut off\r\n2017-01-18 16:36:25 DEBUG 000016719 change_state             | [i-fc58adaa] state change for instance: Paused -> Shutoff (Extant)\r\n2017-01-18 16:36:25  INFO 000016719 monitoring_thread        | [i-fc58adaa] cleaning up state for instance\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.blocks\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_loop            |             to /dev/loop0 at offset 0\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_unloop          | detaching from loop device /dev/loop0\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.blocks\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_loop            |             to /dev/loop0 at offset 0\r\n2017-01-18 16:36:25 DEBUG 000016719 diskutil_unloop          | detaching from loop device /dev/loop0\r\n2017-01-18 16:36:25 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing link-to-vda\r\n2017-01-18 16:36:25 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing link-to-vdb\r\n2017-01-18 16:36:25 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance.xml\r\n2017-01-18 16:36:25 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance-libvirt.xml\r\n2017-01-18 16:36:25 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing console.log\r\n2017-01-18 16:36:25 DEBUG 000016719 change_state             | [i-fc58adaa] state change for instance: Shutoff -> Teardown (Teardown)\r\n{code}\r\n\r\nThere might be another code path here that I'm not hitting. I suspected that this is happening because of a state change was going directly to Teardown, Instead of Pending->Shutoff as above. In the direct Teardown case, the blobstore removal calls aren't made. But that was just a theory. I'll see if I can try to repro some more tomorrow. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-18T18:44:33.958-0600","updated":"2017-01-18T18:44:33.958-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/115959","id":"115959","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Ok, a little more data on the disk and I was able to repro:\r\n{code}\r\nfallocate -l 196G /var/lib/eucalyptus/bogus.file  # gets to about 98% full\r\ndd of=/var/lib/eucalytus/dd.out bs=8192 if=/dev/zero # FILL UP the disk\r\n{code}\r\n\r\nNC Logs (debug):\r\n{code}\r\n2017-01-19 08:31:09 DEBUG 000016665 art_implement_tree       | [i-fc58adaa] implemented artifact 024|prt-07988ext3-9992afdb on try 1\r\n2017-01-19 08:31:09 DEBUG 000016665 find_or_create_artifact  | [i-fc58adaa] checking work blobstore for 025|prt-07988ext3-9992afdb (do_create=1 ret=1)\r\n2017-01-19 08:31:09 DEBUG 000016665 find_or_create_artifact  | [i-fc58adaa] checking work blobstore for 025|prt-07988ext3-9992afdb (do_create=0 ret=1)\r\n2017-01-19 08:31:09 DEBUG 000016665 diskutil_loop            | attaching file /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.blocks\r\n2017-01-19 08:31:09 DEBUG 000016665 art_implement_tree       | [i-fc58adaa] found existing artifact 025|prt-07988ext3-9992afdb on try 2\r\n2017-01-19 08:31:09 DEBUG 000016665 update_vbr_with_backing_ | [i-fc58adaa] symlinked /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.blocks to /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/link-to-vdb\r\n2017-01-19 08:31:09 DEBUG 000016665 art_implement_tree       | [i-fc58adaa] implemented artifact 025|prt-07988ext3-9992afdb on try 2\r\n2017-01-19 08:31:09 DEBUG 000016665 art_implement_tree       | [i-fc58adaa] implemented artifact 021|i-fc58adaa on try 1\r\n2017-01-19 08:31:09 DEBUG 000016665 change_state             | [i-fc58adaa] state change for instance: Unknown -> Booting (Extant)\r\n2017-01-19 08:31:09  INFO 000016665 doMigrateInstances       | [i-fc58adaa] migration destination ready 10.111.5.139 > 10.111.5.156\r\n2017-01-19 08:31:10 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (ready <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:12  INFO 000016719 refresh_instance_info    | [i-fc58adaa] incoming (10.111.5.156 < 10.111.5.139) migration in progress (1 of 3)\r\n2017-01-19 08:31:12 DEBUG 000016719 refresh_instance_info    | [i-fc58adaa] incoming (10.111.5.156 < 10.111.5.139) migration_state set to 'migrating'\r\n2017-01-19 08:31:12 DEBUG 000016719 change_state             | [i-fc58adaa] state change for instance: Booting -> Paused (Extant)\r\n2017-01-19 08:31:15 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:21 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:27 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:33 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:40 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:43 ERROR 000016719 libvirt_err_handler      | libvirt: Domain not found: no domain with matching name 'i-fc58adaa' (code=42)\r\n2017-01-19 08:31:43  WARN 000016719 refresh_instance_info    | [i-fc58adaa] hypervisor failed to find domain, will retry 5 more time(s)\r\n2017-01-19 08:31:45 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:31:48 ERROR 000016719 libvirt_err_handler      | libvirt: Domain not found: no domain with matching name 'i-fc58adaa' (code=42)\r\n2017-01-19 08:31:48  WARN 000016719 refresh_instance_info    | [i-fc58adaa] hypervisor failed to find domain, will retry 4 more time(s)\r\n2017-01-19 08:31:51 DEBUG 000016665 doDescribeIn2017-01-19 08:32:09 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance.xml\r\n2017-01-19 08:32:09 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance-libvirt.xml\r\n2017-01-19 08:32:09 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing console.log\r\n2017-01-19 08:32:09 ERROR 000016719 destroy_instance_backing | [i-fc58adaa] failed to remove backing directory /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa\r\n2017-01-19 08:32:09 DEBUG 000016719 change_state             | [i-fc58adaa] state change for instance: Shutoff -> Teardown (Teardown)\r\n2017-01-19 08:32:09 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Teardown (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-19T10:37:49.753-0600","updated":"2017-01-19T10:37:49.753-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/115962","id":"115962","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Trace level, not much more information.\r\n\r\n{code}\r\n2017-01-19 08:48:18 TRACE 000016719 write_xml_file           | [i-fc58adaa] wrote instance XML to /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/instance.xml\r\n2017-01-19 08:48:21 DEBUG 000016665 doDescribeInstances      | [i-fc58adaa] Extant (migrating <10.111.5.139) pub=10.111.30.139 vols=\r\n2017-01-19 08:48:25 ERROR 000016719 libvirt_err_handler      | libvirt: Domain not found: no domain with matching name 'i-fc58adaa' (code=42)\r\n2017-01-19 08:48:25  WARN 000016719 refresh_instance_info    | [i-fc58adaa] hypervisor failed to find domain, will retry 5 more time(s)\r\n2017-01-19 08:48:25 ERROR 000016719 write_xml_file           | [i-fc58adaa] failed to write instance XML to /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/instance.xml\r\n2017-01-19 08:42017-01-19 08:48:53 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance.xml\r\n2017-01-19 08:48:53 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing instance-libvirt.xml\r\n2017-01-19 08:48:53 DEBUG 000016719 blobstore_delete_nonblob | [i-fc58adaa] removing console.log\r\n2017-01-19 08:48:53 ERROR 000016719 destroy_instance_backing | [i-fc58adaa] failed to remove backing directory /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa\r\n2017-01-19 08:48:53 DEBUG 000016719 change_state             | [i-fc58adaa] state change for instance: Shutoff -> Teardown (Teardown)\r\n{code}\r\n\r\nWhen restarting the node controller, the instance information is cleaned up:\r\n{code}\r\n2017-01-19 08:56:09  INFO | disk space for instances: /var/lib/eucalyptus/instances/work\r\n2017-01-19 08:56:09  INFO |                           064471MB limit (31.5% of the file system) - 1240MB overhead = 63231MB = 61GB\r\n2017-01-19 08:56:09  INFO |                           010241MB reserved for use (15.9% of limit)\r\n2017-01-19 08:56:09  INFO |                           001966MB allocated for use (3.0% of limit, 1.0% of the file system)\r\n2017-01-19 08:56:09  INFO |     disk space for cache: /var/lib/eucalyptus/instances/cache\r\n2017-01-19 08:56:09  INFO |                           130898MB limit (63.9% of the file system)\r\n2017-01-19 08:56:09  INFO |                           002252MB reserved for use (1.7% of limit)\r\n2017-01-19 08:56:09  INFO |                           002252MB allocated for use (1.7% of limit, 1.1% of the file system)\r\n2017-01-19 08:56:09  INFO | looking for existing domains\r\n2017-01-19 08:56:09  INFO | no currently running domains to adopt\r\n2017-01-19 08:56:09 ERROR | failed to read /instance/hypervisor/@type from /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/instance.xml\r\n2017-01-19 08:56:09 ERROR | failed to read instance XML\r\n2017-01-19 08:56:09  INFO | deleted stale/corrupted blob AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33\r\n2017-01-19 08:56:09 ERROR | failed to read /instance/hypervisor/@type from /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/instance.xml\r\n2017-01-19 08:56:09 ERROR | failed to read instance XML\r\n2017-01-19 08:56:09  INFO | deleted stale/corrupted blob AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-19T11:00:11.467-0600","updated":"2017-01-19T11:00:11.467-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/116119","id":"116119","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"So...this one is getting tricky to track down.\r\n\r\n{code}\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.blocks\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.lock\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.dm\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.deps\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.loopback\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.sig\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.refs\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/emi-313d0003-29607e33.hollow\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.blocks\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.lock\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.dm\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.deps\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.loopback\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.sig\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.refs\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG delete_blockblob: /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/prt-07988ext3-9992afdb.hollow\r\n2017-01-20 13:37:05 DEBUG 000014525 delete_blockblob_files   | SG unlink error: 2 error str: No such file or directory\r\n[root@g-12-04 node]# ls -l /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/\r\ntotal 2565124\r\n-rw-r-----. 1 eucalyptus eucalyptus 2362441728 Jan 20 13:38 emi-313d0003-29607e33.blocks\r\n-rw-r-----. 1 eucalyptus eucalyptus          0 Jan 20 13:38 emi-313d0003-29607e33.lock\r\n-rw-r-----. 1 eucalyptus eucalyptus         21 Jan 20 13:37 emi-313d0003-29607e33.sig\r\n-rw-r-----. 1 eucalyptus eucalyptus 8376025088 Jan 20 13:38 prt-07988ext3-9992afdb.blocks\r\n-rw-r-----. 1 eucalyptus eucalyptus          0 Jan 20 13:38 prt-07988ext3-9992afdb.lock\r\n-rw-r-----. 1 eucalyptus eucalyptus         37 Jan 20 13:37 prt-07988ext3-9992afdb.sig\r\n{code}\r\n\r\nSo the above instrumentation the unlink() call is being made to remove the file. If there isn't an unlink error that means unlink() returned 0...so...yeah. Its looking like the OS has said that the file has been deleted, for example the emi-*.blocks and prt-*.blocks. Yet we can see that the files are still on disk. This brings up some interesting questions, did the files *really* get removed? Did they get removed and were re-created?. Fun stuff happens in the context of running out of disk space.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-20T16:00:16.426-0600","updated":"2017-01-20T16:00:16.426-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/116171","id":"116171","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Not seeing a delete on the FS level for the .blocks and .lock files:\r\n{code}\r\n[root@g-12-04 ~]# inotifywait -r -m /var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ MODIFY emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ MODIFY prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ DELETE instance.xml\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ DELETE link-to-vda\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ DELETE link-to-vdb\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ DELETE instance-libvirt.xml\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ DELETE console.log\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE emi-313d0003-29607e33.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_WRITE,CLOSE prt-07988ext3-9992afdb.lock\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ OPEN,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ OPEN,ISDIR \r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/ CLOSE_NOWRITE,CLOSE,ISDIR i-fc58adaa\r\n/var/lib/eucalyptus/instances/work/AIDAAZWNISTXWFRELTFRU/i-fc58adaa/ CLOSE_NOWRITE,CLOSE,ISDIR \r\n{code}\r\n\r\nStill digging through this one.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-23T16:00:52.973-0600","updated":"2017-01-23T16:00:52.973-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/116213","id":"116213","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Used GDB to break at blobstore_delete_regex:\r\n\r\n{code}\r\n        for (blockblob_meta * bm = matches; bm; bm = bm->next) {\r\n            blockblob *bb = blockblob_open(bs, bm->id, 0, 0, NULL, BLOBSTORE_FIND_TIMEOUT_USEC);\r\n            if (bb != NULL) {\r\n                if (bb->in_use & BLOCKBLOB_STATUS_MAPPED) {\r\n                    // mapped blobs have children, thus cannot be deleted at this iteration\r\n                    blockblob_close(bb);\r\n                    continue;\r\n                }\r\n                if (blockblob_delete(bb, BLOBSTORE_DELETE_TIMEOUT_USEC, 0) == -1) {\r\n                    blockblob_close(bb);\r\n                } else {\r\n                    deleted++;\r\n                }\r\n            }\r\n        }\r\n    } while (deleted && (left_to_delete -= deleted));\r\n{code}\r\n\r\nGDB interaction:\r\n{code}\r\n(gdb) print bm->id\r\n$4 = \"AIDAAZWNISTXWFRELTFRU/i-f33ada4c/emi-313d0003-d6fc1377\", '\\000' <repeats 969 times>\r\n(gdb) n\r\n3073                if (bb != NULL) {\r\n(gdb) n\r\n3071            for (blockblob_meta * bm = matches; bm; bm = bm->next) {\r\n(gdb) l\r\n3066        int deleted;\r\n3067        do {\r\n3068            // iterate multiple times in case there are dependencies\r\n3069            //! @TODO unify with _fsck's iteration code?\r\n3070            deleted = 0;                   // deleted in this round\r\n3071            for (blockblob_meta * bm = matches; bm; bm = bm->next) {\r\n3072                blockblob *bb = blockblob_open(bs, bm->id, 0, 0, NULL, BLOBSTORE_FIND_TIMEOUT_USEC);\r\n3073                if (bb != NULL) {\r\n3074                    if (bb->in_use & BLOCKBLOB_STATUS_MAPPED) {\r\n3075                        // mapped blobs have children, thus cannot be deleted at this iteration\r\n(gdb) bb\r\nUndefined command: \"bb\".  Try \"help\".\r\n(gdb) print bb\r\n$5 = 1431662116\r\n(gdb) print bb->in_use\r\nAttempt to extract a component of a value that is not a structure pointer.\r\n(gdb) list\r\n3076                        blockblob_close(bb);\r\n3077                        continue;\r\n3078                    }\r\n3079                    if (blockblob_delete(bb, BLOBSTORE_DELETE_TIMEOUT_USEC, 0) == -1) {\r\n3080                        blockblob_close(bb);\r\n3081                    } else {\r\n3082                        deleted++;\r\n3083                    }\r\n3084                }\r\n3085            }\r\n(gdb) n\r\n3072                blockblob *bb = blockblob_open(bs, bm->id, 0, 0, NULL, BLOBSTORE_FIND_TIMEOUT_USEC);\r\n(gdb) n\r\n3073                if (bb != NULL) {\r\n(gdb) n\r\n3072                blockblob *bb = blockblob_open(bs, bm->id, 0, 0, NULL, BLOBSTORE_FIND_TIMEOUT_USEC);\r\n(gdb) n\r\n3073                if (bb != NULL) {\r\n(gdb) \r\n3071            for (blockblob_meta * bm = matches; bm; bm = bm->next) {\r\n(gdb) \r\n3086        } while (deleted && (left_to_delete -= deleted));\r\n{code}\r\n\r\nIt seems like blockblob_open() is failing to open the blob. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-01-24T14:44:42.844-0600","updated":"2017-01-24T14:44:42.844-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/44607/comment/120539","id":"120539","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"The fix I have in mind is to make the .lock files associated with blobstores have holes in them so that we are guaranteed the space needed to write the thread id when locking. I believe what is happening is that we try to lock the blobstore, and the .lock file can't increase in size because the filesystem is full. The change requires use of fallocate() and removal of ftruncate() calls to the .lock fds and zero out the data instead to maintain a 'buffer' of space needed to properly lock the files. \r\n\r\nI need to shift priorities so I'm moving this ticket out of 4.4.1.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-04-07T11:58:42.775-0500","updated":"2017-04-07T11:58:42.775-0500"}],"maxResults":15,"total":15,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}