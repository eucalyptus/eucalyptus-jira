{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"14887","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14887","key":"EUCA-8292","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816},"parent":{"id":"14886","key":"EUCA-8264","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14886","fields":{"summary":"Volume creation and deletion using EMC VNX","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10104":[],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8292/watchers","watchCount":1,"isWatching":false},"created":"2012-07-26T14:38:53.535-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"issuelinks":[],"assignee":null,"updated":"2013-11-13T19:31:53.087-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"description":"Test Case QA-194: Attach multiple volumes to a single instance\r\nSummary:\r\n1) Launch instance, ssh into instance. Save output of ls  /dev/.\r\n2) Create 20 volumes\r\n3) 1 by 1 attach volumes to the instance and verify the volume is attached by ls /dev, and verify euca_describe_volumes shows the correct in-use or available state\r\n4) Detach each volume, verify it's euca-describe-volumes state\r\n5) Verify ls /dev on the instance to confirm the volume has been detached.\r\nExecution type:\tManual\r\n\r\n \r\nTest Case QA-196: High frequency of attach and detach single volume\r\nSummary:\r\n\r\n    Launch 2 instances\r\n    create 1 volume\r\n    Using a single volume and the 2 running instances, repeat several times the following:\r\n\r\n    - attach volume to instance #1\r\n    -detach volume to instance #1\r\n    -attach volume to istance #2\r\n    -detach volume to instance #2\r\n\r\nExecution type:\tManual\r\n\r\n \r\nTest Case QA-201: Large volumes-attach and detach\r\nSummary:\r\n\r\n    run an instance\r\n    create a large volume (ie: equal to what ever is available defined in euca-describe-properties...)  Note: These can be modified with euca-modify-properties\r\n\r\nPROPERTY    PARTI00.storage.maxtotalvolumesizeingb    50\r\nPROPERTY    PARTI00.storage.maxvolumesizeingb    10\r\n\r\n    Attach this volume to the instance (for example at /dev/sdf)\r\n    format and mount it, ie: mkdir /mnt/testvol, mkfs.ext3 /dev/sdf, mount /dev/sdf /mnt/testvol\r\n    create a file handle on the mounted dir: touch /mnt/testvol/testfile\r\n    verify the file is mounted and has space: df -k, mount\r\n    fill the mounted file dd if=/dev/zero of=/mnt/testvol/testfile\r\n    sync the fs : ie type sync\r\n    md5 the test file and record checksum: md5sum /mnt/testvol/testfile\r\n    umount /mnt/testvol\r\n    Now detach the volume\r\n    confirm it is detached via euca-describe-volumes as well as the /dev/ is missing on the instance\r\n    -reattach and mount\r\n    md5sum the file created earlier and compare the checksums, they should match.\r\n\r\nExecution type:\tManual\r\n\r\n \r\nTest Case QA-316: Attach multiple volumes to multiple instances\r\nSummary:\r\n\r\n    Run more that 3 instances\r\n    Attach at least one volume to each instance\r\n    Mount each volume and ensure it can be written to\r\n    Detach 2 volumes and switch the instances that they were attached to\r\n    Ensure that the volumes are properly attached to their new instances \r\n\r\nExecution type:\tManual\r\nTest Suite : Functional\r\n\r\n \r\nTest Case QA-203: Create Volume-verify attach/detach\r\nSummary:\r\n\r\n    euca-create-volume -s<size> -z<clustername> (ie: euca-create-volume -s 1 -z PARTI00)\r\n    run an instance\r\n    euca-attach-volume -i <instance id> -d <device> volume_id (where device id can be something like /dev/sdf)\r\n    Use euca-descibe-volumes to verify the volume state, should not be available, should show in use by the instance id\r\n    euca-detach-volume volume_id\r\n    Use euca-describe-volumes to verify the volume state as available shortly after detaching.\r\n\r\nExecution type:\tManual\r\n\r\n \r\nTest Case QA-206: Euca-delete-volume in Use\r\nSummary:\r\n1)create volume and attach to a running instance\r\neuca-attach-volume\r\n2) confirm this volume can not be deleted while in use.\r\neuca-delete-volume\r\n\r\nExecution type:\tManual\r\n\r\n \r\nTest Case QA-207: volume size boundaries\r\nSummary:\r\n1) Use euca-describe-properties to get the listed max volume size (per volume as well as total).\r\n2) attempt to create a volume larger than the max single volume size. Confirm this fails\r\n3) attempt to create multiple volumes equal to or  slightly less than the single max volume size, who's sum exceeds the system wide max. Confirm this fails. \r\n\r\nExecution type:\tManual\r\n\r\n \r\n\r\n\r\n \r\nTest Case QA-229: Attach/Detach and creation timestamps\r\nSummary:\r\nConfirm the attach, detach, and creation timestamps for volumes is correct.\r\n\r\n    Create 2 volumes 5 minutes apart verify each time stamps is correct, confirm  the creation of these volumes is reflected in the gui reports (gig/hour stat).\r\n    Attach both volumes to the same instance but 1 hour apart, verify the attach time stamps are correct, check the usage reports (gui?) to confirm the gig/hour usage is accurate\r\n    Detach both volumes 1 hour apart, check the usage reports to confirm the correct values of gig/hour etc.\r\n\r\nExecution type:\tManual\r\nTest Suite : Data Integrity\r\n\r\n \r\nTest Case QA-209: MD5 comparison for large volume\r\nSummary:\r\n-create a volume and euca-attach the volume to a running instance\r\n-format and mount the volume (mkfs.ext3 /dev/X , mkdir /mnt/testdir, mount /dev/X /mnt/testdir)\r\n-create a file and fill it with random data (this can be done with something like touch /mnt/testdir/testfile, dd if=/dev/urandom of=/mnt/testdir/testilf ), without specifying the amount to dd, it should fill the file to the extent of the mounted disk/volume.\r\n-sync (ie type sync)\r\n-record the checksum of the file created (md5sum testfile)\r\n-umount the volume, sync, and then euca-detach the volume\r\n-either restart or start a new instance (to confirm the fs cache is cleared, which umount should do anyways).\r\n-attach the previous volume to the new/restarted instance, mount the volume, \r\n-confirm the file is present and the md5sum is the same.\r\n\r\nExecution type:\tManual\r\nTest Suite : Churn/repetetive tests\r\n\r\n \r\nTest Case QA-214: Volume churn test\r\nSummary:\r\n-script repetitive runs stressing the following flows in parrellel use:\r\nFlow1) repeat: (create volume X -> delete volume X)\r\nFlow2) create volume Y, then  repeat ( attach volume Y-> detach volume Y)\r\nFlow 3) repeat : ( create volume Z -> attach volume Z -> detach volume Z)\r\nflow 4) repeat: (create volume V -> Create snapshot S from volume V, create volume SV from snapshot S, delete volume V, delete snapshot S, delete volume SV)\r\n\r\nScripts have been attached to test case\r\nExecution type:\tManual\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"QA definition of done - Volume creation on EMC VNX","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"customfield_12100":"0|i01hev:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["mclark(mclark)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8292/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}