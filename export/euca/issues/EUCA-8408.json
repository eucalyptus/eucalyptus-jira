{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"25757","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25757","key":"EUCA-8408","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/10001","id":"10001","description":"This issue won't be actioned.","name":"Won't Do"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11400":null,"customfield_10104":[],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2017-06-13T13:30:04.177-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8408/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2013-12-04T18:32:30.218-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2017-06-13T13:30:04.185-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"{panel:title=Assessment|borderStyle=dashed|borderColor=#000000|titleBGColor=#CCCC99|bgColor=#CCCCCC}\r\nCurrently, there isn't a way to map hash entries in iptables rules on the CC (Managed/Managed-NOVLAN) or NC (Edge).  For example, here are the iptables on the CC when two instances are running in account1's default security group:\r\n{code}\r\n$ euca-describe-instances --region account1-user01@\r\nRESERVATION\tr-99A3432B\t961915002812\tdefault\r\nINSTANCE\ti-21853F23\temi-06663A57\teuca-10-104-7-11.eucalyptus.euca-hasp.eucalyptus-systems.com\teuca-172-17-120-175.eucalyptus.internal\trunning\taccount1-user01\t0\t\tm1.medium\t2013-12-04T23:30:28.184Z\tLayinDaSmackDown\teki-28F338EB\teri-51253C0A\t\tmonitoring-disabled\t10.104.7.11\t172.17.120.175\t\t\tinstance-store\t\t\t\t\tparavirtualized\r\nRESERVATION\tr-AE6D41F7\t961915002812\tdefault\r\nINSTANCE\ti-E9A242B1\temi-4EFE3A91\teuca-10-104-7-10.eucalyptus.euca-hasp.eucalyptus-systems.com\teuca-172-17-120-174.eucalyptus.internal\trunning\taccount1-user01\t0\t\tm1.medium\t2013-11-30T19:31:53.954Z\tLayinDaSmackDown\teki-2C54378B\teri-015435B7\t\tmonitoring-disabled\t10.104.7.10\t172.17.120.174\t\t\tinstance-store\t\t\t\t\tparavirtualized\r\n{code}\r\n{code}\r\n# iptables-save\r\n# Generated by iptables-save v1.4.7 on Wed Dec  4 16:09:40 2013\r\n*nat\r\n:PREROUTING ACCEPT [13800418:16437500919]\r\n:POSTROUTING ACCEPT [180129:10774472]\r\n:OUTPUT ACCEPT [333362:19964670]\r\n-A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.104.1.216:8773\r\n-A PREROUTING -d 10.104.7.10/32 -j DNAT --to-destination 172.17.120.174\r\n-A PREROUTING -d 10.104.7.11/32 -j DNAT --to-destination 172.17.120.175\r\n-A POSTROUTING -s 172.17.120.175/32 -j SNAT --to-source 10.104.7.11\r\n-A POSTROUTING -s 172.17.120.174/32 -j SNAT --to-source 10.104.7.10\r\n-A POSTROUTING -o em1 -j MASQUERADE\r\n-A POSTROUTING -s 172.17.0.0/16 ! -d 172.17.0.0/16 -j MASQUERADE\r\n-A OUTPUT -d 10.104.7.10/32 -j DNAT --to-destination 172.17.120.174\r\n-A OUTPUT -d 10.104.7.11/32 -j DNAT --to-destination 172.17.120.175\r\nCOMMIT\r\n# Completed on Wed Dec  4 16:09:40 2013\r\n# Generated by iptables-save v1.4.7 on Wed Dec  4 16:09:40 2013\r\n*filter\r\n:INPUT ACCEPT [404:97602]\r\n:FORWARD DROP [0:0]\r\n:OUTPUT ACCEPT [528:98920]\r\n:EUCA_COUNTERS_IN - [0:0]\r\n:EUCA_COUNTERS_OUT - [0:0]\r\n:JHx/phlwAU197VE1GqYNsA== - [0:0]\r\n-A FORWARD -j EUCA_COUNTERS_OUT\r\n-A FORWARD -j EUCA_COUNTERS_IN\r\n-A FORWARD -i em2 -o em1 -m state --state RELATED,ESTABLISHED -j ACCEPT\r\n-A FORWARD -i em2 -o em1 -j ACCEPT\r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT\r\n-A FORWARD ! -d 172.17.0.0/16 -j ACCEPT\r\n-A FORWARD -s 172.17.120.160/27 -d 172.17.120.160/27 -j ACCEPT\r\n-A FORWARD -j JHx/phlwAU197VE1GqYNsA==\r\n-A EUCA_COUNTERS_IN -d 172.17.0.0/16\r\n-A EUCA_COUNTERS_IN -d 172.17.120.174/32\r\n-A EUCA_COUNTERS_IN -d 172.17.120.175/32\r\n-A EUCA_COUNTERS_OUT -s 172.17.0.0/16\r\n-A EUCA_COUNTERS_OUT -s 172.17.120.174/32\r\n-A EUCA_COUNTERS_OUT -s 172.17.120.175/32\r\n-A JHx/phlwAU197VE1GqYNsA== -d 172.17.120.160/27 -p tcp -m tcp --dport 5000 -j ACCEPT\r\n-A JHx/phlwAU197VE1GqYNsA== -d 172.17.120.160/27 -p tcp -m tcp --dport 22 -j ACCEPT\r\n-A JHx/phlwAU197VE1GqYNsA== -d 172.17.120.160/27 -p icmp -m icmp --icmp-type any -j ACCEPT\r\nCOMMIT\r\n# Completed on Wed Dec  4 16:09:40 2013\r\n{code}\r\n\r\nAlthough there is only one security group currently being used, if there are multiple account security groups.\r\n{panel}\r\n{panel:title=Signs|borderStyle=dashed|borderColor=#000000|titleBGColor=#CCCC99|bgColor=#CCCCCC}\r\n* Checked out the eucalyptus_cloud database, metadata_network_group table:\r\n{code}\r\neucalyptus_cloud=# select metadata_display_name,metadata_account_name,metadata_account_id,metadata_network_group_id from metadata_network_group;\r\n     metadata_display_name      | metadata_account_name | metadata_account_id | metadata_network_group_id\r\n--------------------------------+-----------------------+---------------------+---------------------------\r\n default                        | account2              | 653636154520        | sg-C5E9401C\r\n euca-internal-441445882805-erg | eucalyptus            | 441445882805        | sg-65F73BA0\r\n drop-test                      | eucalyptus            | 441445882805        | sg-49913F67\r\n default                        | account3              | 765839538650        | sg-0F9639E4\r\n euca-internal-441445882805-gop | eucalyptus            | 441445882805        | sg-B33C3EBF\r\n default                        | account1              | 961915002812        | sg-98133D03\r\n webconsole-group               | webconsole            | 683099708207        | sg-2BB34150\r\n default                        | webconsole            | 683099708207        | sg-23E43AE8\r\n default                        | webconsole            | 387233639677        | sg-546B3A0E\r\n default                        | account3              | 410851883146        | sg-CE773E0B\r\n default                        | account2              | 137614824505        | sg-94AE42C1\r\n default                        | eucalyptus            | 441445882805        | sg-D5093E32\r\n(12 rows)\r\n{code}\r\n* Checked out the eucalyptus_cloud database, metadata_network_indices table:\r\n{code}\r\neucalyptus_cloud=# select metadata_display_name,metadata_account_name,metadata_account_id,metadata_unique_name,metadata_user_id,metadata_user_name from metadata_network_indices;\r\n metadata_display_name | metadata_account_name | metadata_account_id | metadata_unique_name |   metadata_user_id    | metadata_user_name\r\n-----------------------+-----------------------+---------------------+----------------------+-----------------------+--------------------\r\n 967:15                | account1              | 961915002812        | 961915002812:967:15  | YCPAG8PWHJSEVTZFDSS8V | user01\r\n 967:14                | account1              | 961915002812        | 961915002812:967:14  | YCPAG8PWHJSEVTZFDSS8V | user01\r\n(2 rows)\r\n{code}\r\n{panel}\r\n{panel:title=Workaround|borderStyle=dashed|borderColor=#000000|titleBGColor=#CCCC99|bgColor=#CCCCCC}\r\nNot Known\r\n{panel}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Ability to Map Security Groups to iptables chain entries for Troubleshooting","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_111175053969","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i02edj:","customfield_10001":"2013-12-04T18:47:07.933-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["hspencer(hspencer)","viglesias(viglesias)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25757/comment/59149","id":"59149","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"One option that is not super easy is to:\r\n\r\n1) Look at iptables -L\r\n2) Find the chain\r\n3) Find a subnet in that chain\r\n4) Map that back to an instance that is in that subnet\r\n5) Look for that instances' group","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-12-04T18:47:07.933-0600","updated":"2013-12-04T18:47:07.933-0600"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8408/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}