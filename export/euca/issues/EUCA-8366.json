{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"25612","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612","key":"EUCA-8366","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10401","value":"Standard","id":"10401"},"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@44506ac7[id=66,rapidViewId=45,state=CLOSED,name=4.1.0 Sprint 1,goal=<null>,startDate=2014-06-30T13:48:10.163Z,endDate=2014-07-21T13:48:00.000Z,completeDate=2014-07-24T15:48:24.089Z,sequence=66]","com.atlassian.greenhopper.service.sprint.Sprint@4b20fc9f[id=67,rapidViewId=37,state=CLOSED,name=4.1.0 Sprint 2,goal=<null>,startDate=2014-07-22T15:49:23.013Z,endDate=2014-08-11T15:49:00.000Z,completeDate=2014-08-18T21:57:24.120Z,sequence=67]","com.atlassian.greenhopper.service.sprint.Sprint@7ccaa314[id=54,rapidViewId=75,state=CLOSED,name=4.0 Sprint 7,goal=<null>,startDate=2014-04-05T00:26:27.500Z,endDate=2014-04-26T00:26:00.000Z,completeDate=2014-04-29T13:33:10.513Z,sequence=54]","com.atlassian.greenhopper.service.sprint.Sprint@475e52b2[id=126,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 8,goal=<null>,startDate=2015-07-24T17:18:30.088Z,endDate=2015-08-14T17:18:00.000Z,completeDate=2015-08-19T20:57:28.154Z,sequence=126]","com.atlassian.greenhopper.service.sprint.Sprint@9f0ecc[id=127,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 9,goal=<null>,startDate=2015-08-18T21:33:50.479Z,endDate=2015-09-08T21:33:00.000Z,completeDate=2015-09-11T20:28:07.867Z,sequence=127]","com.atlassian.greenhopper.service.sprint.Sprint@4c97de44[id=128,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 10,goal=<null>,startDate=2015-09-09T20:38:52.383Z,endDate=2015-10-02T20:38:00.000Z,completeDate=2015-11-03T02:34:19.117Z,sequence=128]"],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2015-10-26T16:23:24.181-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8366/watchers","watchCount":14,"isWatching":false},"lastViewed":null,"created":"2013-11-26T06:20:38.212-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12107","id":"12107","description":"Eucalyptus 3.3.2","name":"3.3.2","archived":false,"released":true,"releaseDate":"2013-10-02"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"issuelinks":[{"id":"22550","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22550","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"23211","key":"EUCA-7243","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23211","fields":{"summary":"Can not communicate over private net diff security groups and different zones","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"27637","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/27637","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"inwardIssue":{"id":"33042","key":"EUCA-10087","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33042","fields":{"summary":"Authorizing a group in another opens up public IP access within a single AZ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"22041","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22041","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"23809","key":"EUCA-7509","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/23809","fields":{"summary":"Security group rules are not enforced for intra-security group traffic","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"27278","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/27278","type":{"id":"10300","name":"Test","inward":"is tested by","outward":"tests","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10300"},"inwardIssue":{"id":"32807","key":"EUCA-10060","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/32807","fields":{"summary":"Able to ping/ssh private IPs through instances on different security groups","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:24:30.417-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"}],"timeoriginalestimate":null,"description":"h4. CIDR vs. SG authorizations\r\n\r\nThere are two types of security authorizations:\r\n# *CIDR*: uses the source address of the packet and tests whether it matches the indicated {{CIDR}}.\r\n# *SG*: uses a security group name and account to grant access for packets which originate within the {{SG}}.\r\n\r\nh4. AWS Behaviour\r\nIf you have a {{SG1}} and {{SG2}} with a {{CIDR}} rule granting {{-s 0.0.0.0/0}}, then instances in the different groups can communicate with each other over their private addresses.\r\n\r\nh4. Eucalyptus Behaviour\r\nIf you have a {{SG1}} and {{SG2}} with a {{CIDR}} rule granting {{-s 0.0.0.0/0}}, then instances in the different groups can communicate _only_ using their public addresses.  Communication using the private addresses only succeeds when {{SG}} authorizations are added between the groups.\r\n\r\nh4. The Problem\r\nThis means that applications which use DNS (viz. _all_ applications) to determine the counter party's address will get back the private address and fail.  \r\n\r\nh4. Workarounds\r\nSo, the applications will need interim modification in either their implementaiton or deployment:\r\n# Implementation:  don't use DNS to determine the other endpoints ip address.\r\n# Deployment: Add {{SG}} authorizations which grant the needed cross security.\r\n\r\n[~shatterednirvana] can provide additional details and may be able to help with validation of a fix.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Security group rules with CIDR source ip ranges should also apply between security groups","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=decker","name":"decker","key":"decker","accountId":"557058:518b1ab0-12c2-4e72-b694-6c07036941a8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue"},"displayName":"do not want! (use @grze, please)","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=decker","name":"decker","key":"decker","accountId":"557058:518b1ab0-12c2-4e72-b694-6c07036941a8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a84cbf1ecec07d9320b42ae4fc90ccce?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddecker%26avatarId%3D16203%26noRedirect%3Dtrue"},"displayName":"do not want! (use @grze, please)","active":false,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i000z3:","customfield_10000":"3_*:*_3_*:*_1292687639_*|*_10000_*:*_1_*:*_813185841_*|*_10001_*:*_3_*:*_54875099546_*|*_10003_*:*_1_*:*_2327456810_*|*_10006_*:*_1_*:*_0","customfield_10001":"2013-12-11T17:46:05.399-0600","customfield_10200":null,"customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["chuck(chuck)","dshekhawat(dshekhawat)","dmitrii(dmitrii)","decker(decker)","kedwards(kedwards)","lbiasi(lbiasi)","tsugawa(tsugawa)","spark(spark)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61246","id":"61246","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"[~decker],\r\n\r\nI cannot reproduce your issue with 3.4.x. I have 2 instance running under 2 security group with {{CIDR}} allowing {{-s 0.0.0.0/0}} and both can pass traffic using both public and private addresses:\r\n\r\n{noformat}\r\n[root@h-21 ~]# euca-describe-groups \r\nGROUP\tsg-3F1B3D6A\t202673621730\tdefault\tdefault group\t\r\nGROUP\tsg-7D003B48\t202673621730\tSECURITY2\tSEC2\t\r\nPERMISSION\t202673621730\tSECURITY2\tALLOWS\ttcp\t10\t10000\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nPERMISSION\t202673621730\tSECURITY2\tALLOWS\ticmp\t-1\t-1\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nGROUP\tsg-146F4326\t202673621730\tSECURITY1\tSEC1\t\r\nPERMISSION\t202673621730\tSECURITY1\tALLOWS\ticmp\t-1\t-1\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nPERMISSION\t202673621730\tSECURITY1\tALLOWS\ttcp\t10\t10000\tFROM\tCIDR\t0.0.0.0/0\tingress\r\n[root@h-21 ~]# \r\n[root@h-21 ~]# euca-describe-instances \r\nRESERVATION\tr-F57C3FF5\t202673621730\tSECURITY1\r\nINSTANCE\ti-ECCF42C2\temi-39AB3764\t10.111.100.44\t172.30.37.250\trunning\tchuck\t0\t\tm1.small\t2014-01-10T18:10:26.645Z\tPARTI00\teki-01633B75\teri-B9763D36\t\tmonitoring-disabled\t10.111.100.44\t172.30.37.250\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\nTAG\tinstance\ti-ECCF42C2\teuca:node\t10.111.5.58\r\nRESERVATION\tr-4CBF45EF\t202673621730\tSECURITY2\r\nINSTANCE\ti-45EA416B\temi-39AB3764\t10.111.100.45\t172.30.37.77\trunning\tchuck\t0\t\tm1.small\t2014-01-10T18:10:35.834Z\tPARTI00\teki-01633B75\teri-B9763D36\t\tmonitoring-disabled\t10.111.100.45\t172.30.37.77\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\nTAG\tinstance\ti-45EA416B\teuca:node\t10.111.5.64\r\n[root@h-21 ~]# \r\n[root@h-21 ~]# \r\n{noformat}\r\n\r\nPlease advice on what it missing from this...","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-10T13:02:12.950-0600","updated":"2014-01-10T13:02:12.950-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61254","id":"61254","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Talked with [~decker], the issue occurs when the SG are running on different Availability Zones.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-10T14:37:23.772-0600","updated":"2014-01-10T14:37:23.772-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61267","id":"61267","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Duplicate of EUCA-7243 per [~mclark]","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-10T15:49:32.582-0600","updated":"2014-01-10T15:49:32.582-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61354","id":"61354","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Ok, reproduced this issue and I think I have a better understanding. First, when we start 2 instances of different security groups (allowing -s 0.0.0.0/0), we noticed that each CC installs a single bridge device for their instance. Because of this, when we ping from 1 instance to the other using the private IP, the IP tables translate the source private IP to its public counterpart but the problem is that we have no route to send these packets to the other partition. I'm able to somewhat get around this issue by running 1 instance of each security group in each partition. In the later case, we can see the packets hitting the destination instance and the respond coming back (but gets drop at the source CC for some reason I haven't explored yet). Now, in the first case, I'm not 100% sure what the behavior should be on start network but it definitely seem like something is missing to connect the 2 networks (route or bridge device?)\r\n\r\nHere's my 2 instances running:\r\n{noformat}\r\n[root@d-01 ~]# euca-describe-instances \r\nRESERVATION\tr-8FD04419\t083018621302\tSECURITY1\r\nINSTANCE\ti-27EB3F28\temi-935B3A2B\t10.111.100.16\t172.29.160.204\trunning\tchuck\t0\t\tm1.small\t2014-01-16T23:02:33.957Z\tPARTI00\teki-6D603DC0\teri-E12C3D7A\t\tmonitoring-disabled\t10.111.100.16\t172.29.160.204\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\nTAG\tinstance\ti-27EB3F28\teuca:node\t10.111.5.12\r\nRESERVATION\tr-616A4065\t083018621302\tSECURITY2\r\nINSTANCE\ti-8BC341AE\temi-935B3A2B\t10.111.100.17\t172.29.162.108\trunning\tchuck\t0\t\tm1.small\t2014-01-16T23:06:11.044Z\tPARTI01\teki-6D603DC0\teri-E12C3D7A\t\tmonitoring-disabled\t10.111.100.17\t172.29.162.108\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\nTAG\tinstance\ti-8BC341AE\teuca:node\t10.111.5.15\r\n[root@d-01 ~]# \r\n[root@d-01 ~]# euca-describe-groups \r\nGROUP\tsg-DEC640C8\t083018621302\tdefault\tdefault group\t\r\nGROUP\tsg-83613E97\t083018621302\tSECURITY2\tSEC2 GROUP\t\r\nPERMISSION\t083018621302\tSECURITY2\tALLOWS\ticmp\t-1\t-1\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nPERMISSION\t083018621302\tSECURITY2\tALLOWS\ttcp\t10\t10000\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nGROUP\tsg-69D63F5C\t083018621302\tSECURITY1\tSEC1 GROUP\t\r\nPERMISSION\t083018621302\tSECURITY1\tALLOWS\ticmp\t-1\t-1\tFROM\tCIDR\t0.0.0.0/0\tingress\r\nPERMISSION\t083018621302\tSECURITY1\tALLOWS\ttcp\t10\t10000\tFROM\tCIDR\t0.0.0.0/0\tingress\r\n[root@d-01 ~]# \r\n{noformat}\r\n\r\nHere's the ip tables, interface list and route on PARTI00\r\n{noformat}\r\n[root@d-30 ~]# route -n\r\nKernel IP routing table\r\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\r\n172.29.160.192  0.0.0.0         255.255.255.240 U     0      0        0 eucabr526\r\n192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0\r\n10.107.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1.107\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 em1\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1007   0        0 em1.107\r\n10.111.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1\r\n0.0.0.0         10.111.0.1      0.0.0.0         UG    0      0        0 em1\r\n[root@d-30 ~]# \r\n[root@d-30 ~]# iptables-save\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:17:51 2014\r\n*nat\r\n:PREROUTING ACCEPT [2313628:1089117405]\r\n:POSTROUTING ACCEPT [340157:20462028]\r\n:OUTPUT ACCEPT [340155:20461860]\r\n-A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.111.1.71:8773 \r\n-A PREROUTING -d 10.111.100.16/32 -j DNAT --to-destination 172.29.160.204 \r\n-A POSTROUTING -s 172.29.160.204/32 -j SNAT --to-source 10.111.100.16 \r\n-A POSTROUTING -s 172.29.0.0/16 ! -d 172.29.0.0/16 -j MASQUERADE \r\n-A OUTPUT -d 10.111.100.16/32 -j DNAT --to-destination 172.29.160.204 \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:17:51 2014\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:17:51 2014\r\n*mangle\r\n:PREROUTING ACCEPT [117058064:62766829205]\r\n:INPUT ACCEPT [114850572:61686497451]\r\n:FORWARD ACCEPT [456533:38360790]\r\n:OUTPUT ACCEPT [95101622:19128353393]\r\n:POSTROUTING ACCEPT [95878720:19620147144]\r\n-A POSTROUTING -o virbr0 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:17:51 2014\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:17:51 2014\r\n*filter\r\n:INPUT ACCEPT [153:111108]\r\n:FORWARD DROP [0:0]\r\n:OUTPUT ACCEPT [70:26904]\r\n:3IaezSL6lQMoOaitY+qeOg== - [0:0]\r\n:EUCA_COUNTERS_IN - [0:0]\r\n:EUCA_COUNTERS_OUT - [0:0]\r\n-A FORWARD -j EUCA_COUNTERS_OUT \r\n-A FORWARD -j EUCA_COUNTERS_IN \r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT \r\n-A FORWARD ! -d 172.29.0.0/16 -j ACCEPT \r\n-A FORWARD -j 3IaezSL6lQMoOaitY+qeOg== \r\n-A FORWARD -s 172.29.160.192/28 -d 172.29.160.192/28 -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.160.192/28 -p icmp -m icmp --icmp-type any -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.160.192/28 -p tcp -m tcp --dport 10:10000 -j ACCEPT \r\n-A EUCA_COUNTERS_IN -d 172.29.0.0/16 \r\n-A EUCA_COUNTERS_IN -d 172.29.160.204/32 \r\n-A EUCA_COUNTERS_OUT -s 172.29.0.0/16 \r\n-A EUCA_COUNTERS_OUT -s 172.29.160.204/32 \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:17:51 2014\r\n[root@d-30 ~]# \r\n[root@d-30 ~]# ifconfig\r\nem1       Link encap:Ethernet  HWaddr B8:AC:6F:8B:93:6F  \r\n          inet addr:169.254.169.254  Bcast:0.0.0.0  Mask:255.255.255.255\r\n          inet6 addr: fe80::baac:6fff:fe8b:936f/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:137508107 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:97559046 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:65869463274 (61.3 GiB)  TX bytes:21016781438 (19.5 GiB)\r\n\r\nem1.107   Link encap:Ethernet  HWaddr B8:AC:6F:8B:93:6F  \r\n          inet addr:10.107.101.100  Bcast:10.107.255.255  Mask:255.255.0.0\r\n          inet6 addr: fe80::baac:6fff:fe8b:936f/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:1141321 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:10 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:825425907 (787.1 MiB)  TX bytes:636 (636.0 b)\r\n\r\nem1.526   Link encap:Ethernet  HWaddr B8:AC:6F:8B:93:6F  \r\n          inet6 addr: fe80::baac:6fff:fe8b:936f/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:200 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:192 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:16597 (16.2 KiB)  TX bytes:19899 (19.4 KiB)\r\n\r\neucabr526 Link encap:Ethernet  HWaddr B8:AC:6F:8B:93:6F  \r\n          inet addr:172.29.160.193  Bcast:172.29.160.207  Mask:255.255.255.240\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:198 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:187 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:16445 (16.0 KiB)  TX bytes:19521 (19.0 KiB)\r\n\r\nlo        Link encap:Local Loopback  \r\n          inet addr:127.0.0.1  Mask:255.0.0.0\r\n          inet6 addr: ::1/128 Scope:Host\r\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\r\n          RX packets:26321 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:26321 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:2618229 (2.4 MiB)  TX bytes:2618229 (2.4 MiB)\r\n\r\nvirbr0    Link encap:Ethernet  HWaddr 52:54:00:54:31:85  \r\n          inet addr:192.168.122.1  Bcast:192.168.122.255  Mask:255.255.255.0\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:0 (0.0 b)  TX bytes:108 (108.0 b)\r\n\r\n[root@d-30 ~]# \r\n{noformat}\r\n\r\nHere's the ip tables, interface list and route on PARTI01\r\n{noformat}\r\n[root@h-06 ~]# route -n\r\nKernel IP routing table\r\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\r\n172.29.162.96   0.0.0.0         255.255.255.240 U     0      0        0 eucabr552\r\n192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0\r\n10.107.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1.107\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 em1\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1003   0        0 em2\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1007   0        0 em1.107\r\n10.111.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1\r\n0.0.0.0         10.111.0.1      0.0.0.0         UG    0      0        0 em1\r\n[root@h-06 ~]# \r\n[root@h-06 ~]# iptables-save\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:18:33 2014\r\n*nat\r\n:PREROUTING ACCEPT [2296332:1085847948]\r\n:POSTROUTING ACCEPT [340556:20494391]\r\n:OUTPUT ACCEPT [340551:20493927]\r\n-A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.111.1.71:8773 \r\n-A PREROUTING -d 10.111.100.17/32 -j DNAT --to-destination 172.29.162.108 \r\n-A POSTROUTING -s 172.29.162.108/32 -j SNAT --to-source 10.111.100.17 \r\n-A POSTROUTING -s 172.29.0.0/16 ! -d 172.29.0.0/16 -j MASQUERADE \r\n-A OUTPUT -d 10.111.100.17/32 -j DNAT --to-destination 172.29.162.108 \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:18:33 2014\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:18:33 2014\r\n*mangle\r\n:PREROUTING ACCEPT [116749755:62992968509]\r\n:INPUT ACCEPT [114560625:61916000258]\r\n:FORWARD ACCEPT [440366:37006067]\r\n:OUTPUT ACCEPT [94786785:19288476197]\r\n:POSTROUTING ACCEPT [95563808:19783525864]\r\n-A POSTROUTING -o virbr0 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:18:33 2014\r\n# Generated by iptables-save v1.4.7 on Thu Jan 16 15:18:33 2014\r\n*filter\r\n:INPUT ACCEPT [59:56205]\r\n:FORWARD DROP [0:0]\r\n:OUTPUT ACCEPT [4:1438]\r\n:EUCA_COUNTERS_IN - [0:0]\r\n:EUCA_COUNTERS_OUT - [0:0]\r\n:rrpLek8ugP0TZRxoBfCtiQ== - [0:0]\r\n-A FORWARD -j EUCA_COUNTERS_OUT \r\n-A FORWARD -j EUCA_COUNTERS_IN \r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT \r\n-A FORWARD ! -d 172.29.0.0/16 -j ACCEPT \r\n-A FORWARD -j rrpLek8ugP0TZRxoBfCtiQ== \r\n-A FORWARD -s 172.29.162.96/28 -d 172.29.162.96/28 -j ACCEPT \r\n-A EUCA_COUNTERS_IN -d 172.29.0.0/16 \r\n-A EUCA_COUNTERS_IN -d 172.29.162.108/32 \r\n-A EUCA_COUNTERS_OUT -s 172.29.0.0/16 \r\n-A EUCA_COUNTERS_OUT -s 172.29.162.108/32 \r\n-A rrpLek8ugP0TZRxoBfCtiQ== -d 172.29.162.96/28 -p icmp -m icmp --icmp-type any -j ACCEPT \r\n-A rrpLek8ugP0TZRxoBfCtiQ== -d 172.29.162.96/28 -p tcp -m tcp --dport 10:10000 -j ACCEPT \r\nCOMMIT\r\n# Completed on Thu Jan 16 15:18:33 2014\r\n[root@h-06 ~]# \r\n[root@h-06 ~]# ifconfig\r\nem1       Link encap:Ethernet  HWaddr B8:AC:6F:8B:7F:65  \r\n          inet addr:169.254.169.254  Bcast:0.0.0.0  Mask:255.255.255.255\r\n          inet6 addr: fe80::baac:6fff:fe8b:7f65/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:137151529 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:97414589 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:66087151099 (61.5 GiB)  TX bytes:21179205516 (19.7 GiB)\r\n\r\nem1.107   Link encap:Ethernet  HWaddr B8:AC:6F:8B:7F:65  \r\n          inet addr:10.107.105.6  Bcast:10.107.255.255  Mask:255.255.0.0\r\n          inet6 addr: fe80::baac:6fff:fe8b:7f65/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:1141393 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:10 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:825483542 (787.2 MiB)  TX bytes:636 (636.0 b)\r\n\r\nem1.552   Link encap:Ethernet  HWaddr B8:AC:6F:8B:7F:65  \r\n          inet6 addr: fe80::baac:6fff:fe8b:7f65/64 Scope:Link\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:200 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:192 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:16597 (16.2 KiB)  TX bytes:19899 (19.4 KiB)\r\n\r\nem2       Link encap:Ethernet  HWaddr B8:AC:6F:8B:7F:66  \r\n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\r\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:1000 \r\n          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)\r\n\r\neucabr552 Link encap:Ethernet  HWaddr B8:AC:6F:8B:7F:65  \r\n          inet addr:172.29.162.98  Bcast:172.29.162.111  Mask:255.255.255.240\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:198 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:187 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:16445 (16.0 KiB)  TX bytes:19521 (19.0 KiB)\r\n\r\nlo        Link encap:Local Loopback  \r\n          inet addr:127.0.0.1  Mask:255.0.0.0\r\n          inet6 addr: ::1/128 Scope:Host\r\n          UP LOOPBACK RUNNING  MTU:16436  Metric:1\r\n          RX packets:26322 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:26322 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:2611255 (2.4 MiB)  TX bytes:2611255 (2.4 MiB)\r\n\r\nvirbr0    Link encap:Ethernet  HWaddr 52:54:00:21:6D:32  \r\n          inet addr:192.168.122.1  Bcast:192.168.122.255  Mask:255.255.255.0\r\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\r\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\r\n          TX packets:2 errors:0 dropped:0 overruns:0 carrier:0\r\n          collisions:0 txqueuelen:0 \r\n          RX bytes:0 (0.0 b)  TX bytes:108 (108.0 b)\r\n\r\n[root@h-06 ~]# \r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-16T17:18:47.528-0600","updated":"2014-01-16T17:18:47.528-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61368","id":"61368","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Please disregard my previous comment. Had some mis-understanding of certain behavior. I have been able to get the traffic through last night and in the process to re-building my setup to make sure it wasn't a goof and that I'm not missing a step in my solution. Will update back COB today with results.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-17T10:37:41.604-0600","updated":"2014-01-17T10:37:41.604-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61380","id":"61380","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Ok, I've been able to narrow down the issue and was able to pass traffic across the security groups on different CC. The solution is ugly and risky for a maintenance release. Talking with [~nurmi], he is in agreement with the \"Risky for maintenance release\" statement.\r\n\r\nIf we have 1 instance running in 2 security groups spread across 2 availability zone, if we look at the first instance, its IP tables and rules may look like the following:\r\n{noformat}\r\n[root@d-30 cluster]# route -n\r\nKernel IP routing table\r\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\r\n172.29.165.0    0.0.0.0         255.255.255.240 U     0      0        0 eucabr594\r\n192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0\r\n10.107.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1.107\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 em1\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1007   0        0 em1.107\r\n10.111.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1\r\n0.0.0.0         10.111.0.1      0.0.0.0         UG    0      0        0 em1\r\n\r\n\r\n[root@d-30 cluster]# iptables-save\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*nat\r\n:PREROUTING ACCEPT [315782:138399761]\r\n:POSTROUTING ACCEPT [48545:2922022]\r\n:OUTPUT ACCEPT [48510:2916996]\r\n-A PREROUTING -d 10.111.100.16/32 -j DNAT --to-destination 172.29.165.11 \r\n-A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.111.1.71:8773 \r\n-A POSTROUTING -s 172.29.165.11/32 ! -d 172.29.0.0/16 -j SNAT --to-source 10.111.100.16 \r\n-A POSTROUTING -s 172.29.0.0/16 -j MASQUERADE \r\n-A OUTPUT -d 10.111.100.16/32 -j DNAT --to-destination 172.29.165.11 \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*mangle\r\n:PREROUTING ACCEPT [134206665:72011955688]\r\n:INPUT ACCEPT [131747660:70795164510]\r\n:FORWARD ACCEPT [462941:38918023]\r\n:OUTPUT ACCEPT [109012932:21928827669]\r\n:POSTROUTING ACCEPT [109844270:22487854441]\r\n-A POSTROUTING -o virbr0 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*filter\r\n:INPUT ACCEPT [124:151297]\r\n:FORWARD DROP [0:0]\r\n:OUTPUT ACCEPT [13:7902]\r\n:3IaezSL6lQMoOaitY+qeOg== - [0:0]\r\n:EUCA_COUNTERS_IN - [0:0]\r\n:EUCA_COUNTERS_OUT - [0:0]\r\n-A FORWARD -j EUCA_COUNTERS_OUT \r\n-A FORWARD -j EUCA_COUNTERS_IN \r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT \r\n-A FORWARD ! -d 172.29.0.0/16 -j ACCEPT \r\n-A FORWARD -j 3IaezSL6lQMoOaitY+qeOg== \r\n-A FORWARD -s 172.29.165.0/28 -d 172.29.165.0/28 -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p icmp -m icmp --icmp-type any -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p tcp -m tcp --dport 10:10000 -j ACCEPT \r\n-A EUCA_COUNTERS_IN -d 172.29.0.0/16 \r\n-A EUCA_COUNTERS_IN -d 172.29.165.11/32 \r\n-A EUCA_COUNTERS_OUT -s 172.29.0.0/16 \r\n-A EUCA_COUNTERS_OUT -s 172.29.165.11/32 \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n[root@d-30 cluster]# \r\n{noformat}\r\n\r\nWith instance 1 having IP 172.29.165.11 and instance 2 having IP 172.29.166.10, when trying to reach the 2nd instance from the first instance network group, the first stop is that there is no FORWARD rules that applies for a private to private communication.\r\n{noformat}\r\nWe don't have an established connection (skip)\r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT \r\n\r\nOur destination is private network (skip)\r\n-A FORWARD ! -d 172.29.0.0/16 -j ACCEPT \r\n\r\nOur destination is not our local security group net (skip)\r\n-A FORWARD -j 3IaezSL6lQMoOaitY+qeOg== \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p icmp -m icmp --icmp-type any -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p tcp -m tcp --dport 10:10000 -j ACCEPT \r\n\r\nOur source is our local network but our destination is not (skip)\r\n-A FORWARD -s 172.29.165.0/28 -d 172.29.165.0/28 -j ACCEPT \r\n\r\nDrop the packet\r\n:FORWARD DROP [0:0]\r\n{noformat}\r\n\r\nTo get around this first hurdle, I had to change the following rule\r\n{noformat}\r\n-A FORWARD -s 172.29.165.0/28 -d 172.29.165.0/28 -j ACCEPT \r\n{noformat}\r\n\r\nwith\r\n{noformat}\r\n-A FORWARD -s 172.29.165.0/28 -d 172.29.0.0/16 -j ACCEPT \r\n{noformat}\r\n\r\nThis allowed for the traffic from private to private to be accepted and forwarded. The next issue was the SNAT rules. Because of this rule, the packets were not forwarded to the network as well as a second copy was sent NATed!!! This is the following rule that applies:\r\n{noformat}\r\n-A POSTROUTING -s 172.29.0.0/16 -j MASQUERADE \r\n{noformat}\r\n\r\nwhich I changed to the following so NATing does not occur\r\n{noformat}\r\n-A POSTROUTING -s 172.29.0.0/16 ! -d 172.29.0.0/16 -j MASQUERADE \r\n{noformat}\r\n\r\nNow the traffic looked great except that the system did not know where to route this packet. The last action was to install a route towards the 2nd CC as in:\r\n{noformat}\r\n172.29.0.0      10.107.105.6    255.255.0.0     UG    0      0        0 em1.107\r\n{noformat}\r\n\r\nBy making the changes on both CC, the 2 instances were not able to communicate properly. This is somewhat ugly and risky and could open many cans of worms.\r\n\r\nThis is the final IP tables and route tables look:\r\n{noformat}\r\n[root@d-30 cluster]# route -n\r\nKernel IP routing table\r\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\r\n172.29.165.0    0.0.0.0         255.255.255.240 U     0      0        0 eucabr594\r\n192.168.122.0   0.0.0.0         255.255.255.0   U     0      0        0 virbr0\r\n172.29.0.0      10.107.105.6    255.255.0.0     UG    0      0        0 em1.107\r\n10.107.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1.107\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1002   0        0 em1\r\n169.254.0.0     0.0.0.0         255.255.0.0     U     1007   0        0 em1.107\r\n10.111.0.0      0.0.0.0         255.255.0.0     U     0      0        0 em1\r\n0.0.0.0         10.111.0.1      0.0.0.0         UG    0      0        0 em1\r\n\r\n\r\n[root@d-30 cluster]# iptables-save\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*nat\r\n:PREROUTING ACCEPT [315782:138399761]\r\n:POSTROUTING ACCEPT [48545:2922022]\r\n:OUTPUT ACCEPT [48510:2916996]\r\n-A PREROUTING -d 10.111.100.16/32 -j DNAT --to-destination 172.29.165.11 \r\n-A PREROUTING -d 169.254.169.254/32 -p tcp -m tcp --dport 80 -j DNAT --to-destination 10.111.1.71:8773 \r\n-A POSTROUTING -s 172.29.165.11/32 ! -d 172.29.0.0/16 -j SNAT --to-source 10.111.100.16 \r\n-A POSTROUTING -s 172.29.0.0/16 ! -d 172.29.0.0/16 -j MASQUERADE \r\n-A OUTPUT -d 10.111.100.16/32 -j DNAT --to-destination 172.29.165.11 \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*mangle\r\n:PREROUTING ACCEPT [134206665:72011955688]\r\n:INPUT ACCEPT [131747660:70795164510]\r\n:FORWARD ACCEPT [462941:38918023]\r\n:OUTPUT ACCEPT [109012932:21928827669]\r\n:POSTROUTING ACCEPT [109844270:22487854441]\r\n-A POSTROUTING -o virbr0 -p udp -m udp --dport 68 -j CHECKSUM --checksum-fill \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n# Generated by iptables-save v1.4.7 on Fri Jan 17 12:46:26 2014\r\n*filter\r\n:INPUT ACCEPT [124:151297]\r\n:FORWARD DROP [0:0]\r\n:OUTPUT ACCEPT [13:7902]\r\n:3IaezSL6lQMoOaitY+qeOg== - [0:0]\r\n:EUCA_COUNTERS_IN - [0:0]\r\n:EUCA_COUNTERS_OUT - [0:0]\r\n:chuck - [0:0]\r\n-A FORWARD -j EUCA_COUNTERS_OUT \r\n-A FORWARD -j EUCA_COUNTERS_IN \r\n-A FORWARD -m conntrack --ctstate ESTABLISHED -j ACCEPT \r\n-A FORWARD ! -d 172.29.0.0/16 -j ACCEPT \r\n-A FORWARD -j 3IaezSL6lQMoOaitY+qeOg== \r\n-A FORWARD -s 172.29.165.0/28 -d 172.29.0.0/16 -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p icmp -m icmp --icmp-type any -j ACCEPT \r\n-A 3IaezSL6lQMoOaitY+qeOg== -d 172.29.165.0/28 -p tcp -m tcp --dport 10:10000 -j ACCEPT \r\n-A EUCA_COUNTERS_IN -d 172.29.0.0/16 \r\n-A EUCA_COUNTERS_IN -d 172.29.165.11/32 \r\n-A EUCA_COUNTERS_OUT -s 172.29.0.0/16 \r\n-A EUCA_COUNTERS_OUT -s 172.29.165.11/32 \r\nCOMMIT\r\n# Completed on Fri Jan 17 12:46:26 2014\r\n[root@d-30 cluster]# \r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-17T15:04:43.803-0600","updated":"2014-01-17T15:04:43.803-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/61399","id":"61399","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"To clarify, when I qualify the solution as ugly, I refer to the solution I implemented not the ultimate final solution. But regardless, the issue here is that any good solution would touch some sensitive core entries in our IP tables that causes the overall risk of implementing a solution in a maintenance release increase drastically.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-01-17T21:38:46.293-0600","updated":"2014-01-17T21:38:46.293-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/66375","id":"66375","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"body":"Not a regression. The use case is operational in 4.0 with edge mode.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-08T16:17:39.048-0500","updated":"2014-04-08T16:17:39.048-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/69726","id":"69726","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Hi [~chuck],\r\n\r\nThanks for providing great details on the workaround. We are facing an issue that you did not explore further enough due to time constraints, which is that when 2 instances of same security group are running on 2 different availability zones with MANAGED networking mode in 3.4.2 we seem to have no way to talk between these 2 instances via private IP. You said \r\n\r\n\"we can see the packets hitting the destination instance and the response coming back (but gets drop at the source CC for some reason I haven't explored yet).\"\r\n\r\nI did some analysis on the packets that hit the source CC and found it interesting that the response was meant for the public IP of the instance , I explored further and found when the source CC actually sent the packet to the destination CC it had done a SNAT on it before, causing the destination CC to believe it came from public IP.\r\n\r\nSo I decided to modify the SNAT rule on the source CC and make it look like this:\r\n\r\n{code}\r\n-A POSTROUTING -s 10.1.190.23/32 ! -d 10.1.0.0/16 -j SNAT --to-source 192.168.122.10\r\n{code}\r\n\r\nBasically telling it to not SNAT a packet if destination is of the network that all instances belong to, this worked and now I can ping an instance on a given availability zone from within another instance in another availability zone but same security group using private IP.\r\n\r\nNot sure if the above workaround is elegant enough to be proposed as a fix or we need to further explore why the source CC is dropping the packets (responses) when they arrive on the public interface (I had assume it would do a DNAT via {{PREROUTING}} on {{NAT}} but no luck with that)\r\n\r\nThanks again for your explanation that helped me figure out this problem. I will raise a SUP to track this info as it is affecting a production customer with 3.4.2\r\n\r\nPlease let me know if you have any questions.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2014-05-10T03:01:45.240-0500","updated":"2014-05-10T03:03:28.442-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/71301","id":"71301","body":"This issue was previously scheduled to be worked on in more than one sprint:\r\n* '3.3 Sprint 4' (on board 'Test 3.3 Board')\r\n* '3.3 Sprint 4' (on board 'Copy of 3.3 Release Board')\r\n\r\nStarting from JIRA Agile 6.3, an issue can only belong to a single future sprint. Read more about this change: http://docs.atlassian.com/agile/docs-0640/Sprint+Marker+Migration\r\n\r\nThis issue is now scheduled for future sprint '3.3 Sprint 4' (on board 'Copy of 3.3 Release Board').\r\n\r\nIf this is incorrect, please update the issue accordingly.\r\n\r\nThis comment was automatically generated by JIRA. If it is no longer relevant, please feel free to delete it.","created":"2014-05-25T20:40:20.512-0500","updated":"2014-05-25T20:40:20.512-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/79737","id":"79737","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"As stated earlier, this will be much easier to fix in 4.2, so, since this is not burning, re-targeting for that release.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-12-01T17:36:06.603-0600","updated":"2014-12-01T17:36:06.603-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/91862","id":"91862","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"body":"The fix discussed in comments seems to be implemented in 4.2 code.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"created":"2015-09-16T19:22:27.407-0500","updated":"2015-09-16T19:22:27.407-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/91863","id":"91863","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"body":"Chuck seems to have implemented the fix when writing the 4.2 eucanetd.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"created":"2015-09-16T19:23:31.234-0500","updated":"2015-09-16T19:23:31.234-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/93722","id":"93722","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"Fix verified. Instances in different security groups can use private IP when the authz rule is for source CIDR. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-10-13T17:54:28.045-0500","updated":"2015-10-13T17:54:28.045-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25612/comment/94662","id":"94662","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"body":"Released in 4.2","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"created":"2015-10-26T16:23:24.190-0500","updated":"2015-10-26T16:23:24.190-0500"}],"maxResults":15,"total":15,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8366/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}