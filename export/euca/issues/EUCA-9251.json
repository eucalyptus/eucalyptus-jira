{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"29342","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342","key":"EUCA-9251","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2014-08-15T13:06:32.899-0500","customfield_10704":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9251/watchers","watchCount":5,"isWatching":false},"created":"2014-04-29T09:40:00.241-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2014-05-05T23:30:25.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":["AWSCompat-PM","BDM-4.1"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/13700","id":"13700","description":"Eucalyptus 3.4.2","name":"3.4.2","archived":false,"released":true,"releaseDate":"2014-02-24"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:17:04.607-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nI noticed that in the latest Ubuntu LTS cloud image (14.04), ephemeral devices were not getting mounted by cloud-init.  While investigating this further, I noticed that /sys/block was not being populated with the swap and ephemeral devices as seen with the same image on AWS.  From the looks of it, it seems there is something going on with [sysfs|http://www.linux.org/threads/sysfs-and-configfs.4956/] and virtio.  \r\n\r\n*Eucalyptus* \r\n{code}\r\nubuntu@ip-172-18-0-100:~$ curl http://169.254.169.254/latest/meta-data/block-device-mapping/ephemeral0; echo\r\nsda2\r\n\r\nApr 28 15:27:52 ip-172-18-0-100 [CLOUDINIT] cc_mounts.py[DEBUG]: Attempting to determine the real name of ephemeral0\r\nApr 28 15:27:52 ip-172-18-0-100 [CLOUDINIT] DataSourceEc2.py[DEBUG]: Remapped device name /dev/sda2 => /dev/vda2\r\nApr 28 15:27:52 ip-172-18-0-100 [CLOUDINIT] cc_mounts.py[DEBUG]: Mapped metadata name ephemeral0 to /dev/vda2\r\nApr 28 15:27:52 ip-172-18-0-100 [CLOUDINIT] cc_mounts.py[DEBUG]: did not find entry for vda2 in /sys/block\r\nApr 28 15:27:52 ip-172-18-0-100 [CLOUDINIT] cc_mounts.py[DEBUG]: Ignoring nonexistant default named mount ephemeral0\r\n\r\nubuntu@ip-172-18-0-100:~$ ls /sys/block\r\nloop0  loop3  loop6  ram0   ram11  ram14  ram3  ram6  ram9\r\nloop1  loop4  loop7  ram1   ram12  ram15  ram4  ram7  vda\r\nloop2  loop5  md0    ram10  ram13  ram2   ram5  ram8\r\n\r\nubuntu@ip-172-18-0-100:~$ ls -ail /sys/block/vda\r\n11719 lrwxrwxrwx 1 root root 0 Apr 28 15:27 /sys/block/vda -> ../devices/pci0000:00/0000:00:04.0/virtio1/block/vda\r\n\r\nubuntu@ip-172-18-0-100:~$ find /sys/devices/pci0000:00/ -type d -print | grep vd\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/mq\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/mq/0\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/mq/0/cpu0\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/mq/0/cpu1\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda1\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda1/power\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda1/trace\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda1/holders\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda2\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda2/power\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda2/trace\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/vda2/holders\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/power\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/queue\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/trace\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/slaves\r\n/sys/devices/pci0000:00/0000:00:04.0/virtio1/block/vda/holders\r\n{code}\r\n\r\n*AWS*\r\n{code}\r\n** Compared to instance store-backed AMI - Ubuntu Trusty - on AWS (m1.small) **\r\n\r\nubuntu@ip-10-6-107-107:~$ df -ah\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/xvda1      9.9G  747M  8.6G   8% /\r\nproc               0     0     0    - /proc\r\nsysfs              0     0     0    - /sys\r\nnone            4.0K     0  4.0K   0% /sys/fs/cgroup\r\nnone               0     0     0    - /sys/fs/fuse/connections\r\nnone               0     0     0    - /sys/kernel/debug\r\nnone               0     0     0    - /sys/kernel/security\r\nudev            816M   12K  816M   1% /dev\r\ndevpts             0     0     0    - /dev/pts\r\ntmpfs           166M  192K  165M   1% /run\r\nnone            5.0M     0  5.0M   0% /run/lock\r\nnone            826M     0  826M   0% /run/shm\r\nnone            100M     0  100M   0% /run/user\r\nnone               0     0     0    - /sys/fs/pstore\r\nsystemd            0     0     0    - /sys/fs/cgroup/systemd\r\n/dev/xvda2      147G   60M  140G   1% /mnt\r\nubuntu@ip-10-6-107-107:~$ ls /sys/block\r\nloop0  loop1  loop2  loop3  loop4  loop5  loop6  loop7  ram0  ram1  ram10  ram11  ram12  ram13  ram14  ram15  ram2  ram3  ram4  ram5  ram6  ram7  ram8  ram9  xvda1  xvda2  xvda3\r\nubuntu@ip-10-6-107-107:~$ ls -ail /sys/block/xvda*\r\n 9648 lrwxrwxrwx 1 root root 0 Apr 29 02:02 /sys/block/xvda1 -> ../devices/vbd-2049/block/xvda1\r\n 9735 lrwxrwxrwx 1 root root 0 Apr 29 02:01 /sys/block/xvda2 -> ../devices/vbd-2050/block/xvda2\r\n10255 lrwxrwxrwx 1 root root 0 Apr 29 02:01 /sys/block/xvda3 -> ../devices/vbd-2051/block/xvda3\r\nubuntu@ip-10-6-107-107:~$ grep ephem /var/log/cloud-init.log\r\n2014-04-29 02:00:53,486 - url_helper.py[DEBUG]: [0/6] open 'http://169.254.169.254/2009-04-04/meta-data/block-device-mapping/ephemeral0' with {'url': 'http://169.254.169.254/2009-04-04/meta-data/block-device-mapping/ephemeral0', 'headers': {'User-Agent': 'Cloud-Init/0.7.5'}, 'allow_redirects': True, 'method': 'GET', 'timeout': 5.0} configuration\r\n2014-04-29 02:00:53,489 - url_helper.py[DEBUG]: Read from http://169.254.169.254/2009-04-04/meta-data/block-device-mapping/ephemeral0 (200, 4b) after 1 attempts\r\nApr 29 02:01:02 ip-10-6-107-107 [CLOUDINIT] cc_mounts.py[DEBUG]: Attempting to determine the real name of ephemeral0\r\nApr 29 02:01:02 ip-10-6-107-107 [CLOUDINIT] cc_mounts.py[DEBUG]: Mapped metadata name ephemeral0 to /dev/xvda2\r\nApr 29 02:01:02 ip-10-6-107-107 [CLOUDINIT] cc_mounts.py[DEBUG]: changed default device ephemeral0 => /dev/xvda2\r\nubuntu@ip-10-6-107-107:~$ find /sys/devices -type d -print | grep vda\r\n/sys/devices/vbd-2049/block/xvda1\r\n/sys/devices/vbd-2049/block/xvda1/power\r\n/sys/devices/vbd-2049/block/xvda1/queue\r\n/sys/devices/vbd-2049/block/xvda1/queue/iosched\r\n/sys/devices/vbd-2049/block/xvda1/trace\r\n/sys/devices/vbd-2049/block/xvda1/slaves\r\n/sys/devices/vbd-2049/block/xvda1/holders\r\n/sys/devices/vbd-2050/block/xvda2\r\n/sys/devices/vbd-2050/block/xvda2/power\r\n/sys/devices/vbd-2050/block/xvda2/queue\r\n/sys/devices/vbd-2050/block/xvda2/queue/iosched\r\n/sys/devices/vbd-2050/block/xvda2/trace\r\n/sys/devices/vbd-2050/block/xvda2/slaves\r\n/sys/devices/vbd-2050/block/xvda2/holders\r\n/sys/devices/vbd-2051/block/xvda3\r\n/sys/devices/vbd-2051/block/xvda3/power\r\n/sys/devices/vbd-2051/block/xvda3/queue\r\n/sys/devices/vbd-2051/block/xvda3/queue/iosched\r\n/sys/devices/vbd-2051/block/xvda3/trace\r\n/sys/devices/vbd-2051/block/xvda3/slaves\r\n/sys/devices/vbd-2051/block/xvda3/holders\r\n\r\n** Compared to instance store-backed AMI - Ubuntu Trusty - on AWS (m3.large) **\r\n\r\nubuntu@ip-10-234-164-146:~$ df -ah\r\nFilesystem      Size  Used Avail Use% Mounted on\r\n/dev/xvda1      9.9G  747M  8.6G   8% /\r\nproc               0     0     0    - /proc\r\nsysfs              0     0     0    - /sys\r\nnone            4.0K     0  4.0K   0% /sys/fs/cgroup\r\nnone               0     0     0    - /sys/fs/fuse/connections\r\nnone               0     0     0    - /sys/kernel/debug\r\nnone               0     0     0    - /sys/kernel/security\r\nudev            3.7G   12K  3.7G   1% /dev\r\ndevpts             0     0     0    - /dev/pts\r\ntmpfs           752M  188K  752M   1% /run\r\nnone            5.0M     0  5.0M   0% /run/lock\r\nnone            3.7G     0  3.7G   0% /run/shm\r\nnone            100M     0  100M   0% /run/user\r\nnone               0     0     0    - /sys/fs/pstore\r\nsystemd            0     0     0    - /sys/fs/cgroup/systemd\r\n/dev/xvdb        30G   45M   28G   1% /mnt\r\nubuntu@ip-10-234-164-146:~$ ls -ail /sys/block/xvd*\r\n11259 lrwxrwxrwx 1 root root 0 Apr 29 02:21 /sys/block/xvda1 -> ../devices/vbd-2049/block/xvda1\r\n11455 lrwxrwxrwx 1 root root 0 Apr 29 02:20 /sys/block/xvdb -> ../devices/vbd-2064/block/xvdb\r\n\r\nubuntu@ip-10-234-164-146:~$ find /sys/devices -type d -print | grep xvd\r\n/sys/devices/vbd-2049/block/xvda1\r\n/sys/devices/vbd-2049/block/xvda1/power\r\n/sys/devices/vbd-2049/block/xvda1/queue\r\n/sys/devices/vbd-2049/block/xvda1/queue/iosched\r\n/sys/devices/vbd-2049/block/xvda1/trace\r\n/sys/devices/vbd-2049/block/xvda1/slaves\r\n/sys/devices/vbd-2049/block/xvda1/holders\r\n/sys/devices/vbd-2064/block/xvdb\r\n/sys/devices/vbd-2064/block/xvdb/power\r\n/sys/devices/vbd-2064/block/xvdb/queue\r\n/sys/devices/vbd-2064/block/xvdb/queue/iosched\r\n/sys/devices/vbd-2064/block/xvdb/trace\r\n/sys/devices/vbd-2064/block/xvdb/slaves\r\n/sys/devices/vbd-2064/block/xvdb/holders\r\n{code}\r\n\r\n*Signs*\r\n\r\n* /var/log/libvirt/qemu/i-7c7fd842.log file on NC (4.0 cloud)\r\n{code}\r\n2014-04-28 22:27:42.747+0000: starting up\r\nLC_ALL=C PATH=/sbin:/usr/sbin:/bin:/usr/bin /usr/libexec/qemu-kvm -name i-7c7fd842 -S -M rhel6.5.0 -enable-kvm -m 1024 -realtime mlock=off -smp 2,sockets=2,cores=1,threads=1 -uuid e09e9974-411b-2c56-90c8-220da63fdab4 -nographic -nodefconfig -nodefaults -chardev socket,id=charmonitor,path=/var/lib/libvirt/qemu/i-7c7fd842.monitor,server,nowait -mon chardev=charmonitor,id=monitor,mode=control -rtc base=localtime -no-shutdown -kernel /var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-kernel -initrd /var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-ramdisk -append root=/dev/vda1 console=ttyS0 -device piix3-usb-uhci,id=usb,bus=pci.0,addr=0x1.0x2 -drive file=/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-sda,if=none,id=drive-virtio-disk0,format=raw,cache=none -device virtio-blk-pci,scsi=off,bus=pci.0,addr=0x4,drive=drive-virtio-disk0,id=virtio-disk0,bootindex=1 -netdev tap,fd=23,id=hostnet0,vhost=on,vhostfd=24 -device virtio-net-pci,netdev=hostnet0,id=net0,mac=d0:0d:7c:7f:d8:42,bus=pci.0,addr=0x3 -chardev file,id=charserial0,path=/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/console.log -device isa-serial,chardev=charserial0,id=serial0 -device virtio-balloon-pci,id=balloon0,bus=pci.0,addr=0x5\r\n{code}\r\n* /var/run/libvirt/qemu/i-7c7fd842.xml file on NC (4.0)\r\n{code}\r\n<!--\r\nWARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE\r\nOVERWRITTEN AND LOST. Changes to this xml configuration should be made using:\r\n  virsh edit i-7c7fd842\r\nor other application using the libvirt API.\r\n-->\r\n\r\n<domstatus state='running' reason='booted' pid='15202'>\r\n  <monitor path='/var/lib/libvirt/qemu/i-7c7fd842.monitor' json='1' type='unix'/>\r\n  <vcpus>\r\n    <vcpu pid='15234'/>\r\n    <vcpu pid='15235'/>\r\n  </vcpus>\r\n  <qemuCaps>\r\n    <flag name='vnc-colon'/>\r\n    <flag name='no-reboot'/>\r\n    <flag name='drive'/>\r\n    <flag name='name'/>\r\n    <flag name='uuid'/>\r\n    <flag name='vnet-hdr'/>\r\n    <flag name='migrate-qemu-tcp'/>\r\n    <flag name='migrate-qemu-exec'/>\r\n    <flag name='drive-cache-v2'/>\r\n    <flag name='kvm'/>\r\n    <flag name='drive-format'/>\r\n    <flag name='vga'/>\r\n    <flag name='0.10'/>\r\n    <flag name='pci-device'/>\r\n    <flag name='mem-path'/>\r\n    <flag name='drive-serial'/>\r\n    <flag name='migrate-qemu-unix'/>\r\n    <flag name='chardev'/>\r\n    <flag name='enable-kvm'/>\r\n    <flag name='monitor-json'/>\r\n    <flag name='balloon'/>\r\n    <flag name='device'/>\r\n    <flag name='smp-topology'/>\r\n    <flag name='netdev'/>\r\n    <flag name='rtc'/>\r\n    <flag name='vhost-net'/>\r\n    <flag name='no-kvm-pit'/>\r\n    <flag name='tdf'/>\r\n    <flag name='pci-configfd'/>\r\n    <flag name='nodefconfig'/>\r\n    <flag name='boot-menu'/>\r\n    <flag name='name-process'/>\r\n    <flag name='drive-readonly'/>\r\n    <flag name='smbios-type'/>\r\n    <flag name='vga-qxl'/>\r\n    <flag name='spice'/>\r\n    <flag name='vga-none'/>\r\n    <flag name='migrate-qemu-fd'/>\r\n    <flag name='boot-index'/>\r\n    <flag name='hda-duplex'/>\r\n    <flag name='drive-aio'/>\r\n    <flag name='pci-multibus'/>\r\n    <flag name='pci-bootindex'/>\r\n    <flag name='ccid-passthru'/>\r\n    <flag name='chardev-spicevmc'/>\r\n    <flag name='virtio-tx-alg'/>\r\n    <flag name='device-qxl-vga'/>\r\n    <flag name='pci-multifunction'/>\r\n    <flag name='virtio-blk-pci.ioeventfd'/>\r\n    <flag name='sga'/>\r\n    <flag name='virtio-blk-pci.event_idx'/>\r\n    <flag name='virtio-net-pci.event_idx'/>\r\n    <flag name='piix3-usb-uhci'/>\r\n    <flag name='piix4-usb-uhci'/>\r\n    <flag name='usb-ehci'/>\r\n    <flag name='ich9-usb-ehci1'/>\r\n    <flag name='usb-redir'/>\r\n    <flag name='usb-hub'/>\r\n    <flag name='no-shutdown'/>\r\n    <flag name='cache-unsafe'/>\r\n    <flag name='rombar'/>\r\n    <flag name='no-acpi'/>\r\n    <flag name='virtio-blk-pci.scsi'/>\r\n    <flag name='blk-sg-io'/>\r\n    <flag name='drive-copy-on-read'/>\r\n    <flag name='cpu-host'/>\r\n    <flag name='drive-iotune'/>\r\n    <flag name='system_wakeup'/>\r\n    <flag name='scsi-disk.channel'/>\r\n    <flag name='scsi-block'/>\r\n    <flag name='block-job-async'/>\r\n    <flag name='scsi-cd'/>\r\n    <flag name='hda-micro'/>\r\n    <flag name='dump-guest-memory'/>\r\n    <flag name='balloon-event'/>\r\n    <flag name='virtio-scsi-pci'/>\r\n    <flag name='blockio'/>\r\n    <flag name='disable-s3'/>\r\n    <flag name='disable-s4'/>\r\n    <flag name='usb-redir.filter'/>\r\n    <flag name='ide-drive.wwn'/>\r\n    <flag name='scsi-disk.wwn'/>\r\n    <flag name='reboot-timeout'/>\r\n    <flag name='dump-guest-core'/>\r\n    <flag name='seamless-migration'/>\r\n    <flag name='disable-ksm'/>\r\n    <flag name='virtio-net-pci.__com_redhat_macvtap_compat'/>\r\n    <flag name='qxl'/>\r\n    <flag name='VGA'/>\r\n    <flag name='cirrus-vga'/>\r\n    <flag name='ipv6-migration'/>\r\n    <flag name='vnc-share-policy'/>\r\n    <flag name='mlock'/>\r\n  </qemuCaps>\r\n  <domain type='kvm' id='1'>\r\n    <name>i-7c7fd842</name>\r\n    <uuid>e09e9974-411b-2c56-90c8-220da63fdab4</uuid>\r\n    <description>Eucalyptus instance i-7c7fd842</description>\r\n    <memory unit='KiB'>1048576</memory>\r\n    <currentMemory unit='KiB'>1048576</currentMemory>\r\n    <vcpu placement='static'>2</vcpu>\r\n    <os>\r\n      <type arch='x86_64' machine='rhel6.5.0'>hvm</type>\r\n      <kernel>/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-kernel</kernel>\r\n      <initrd>/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-ramdisk</initrd>\r\n      <cmdline>root=/dev/vda1 console=ttyS0</cmdline>\r\n      <root>/dev/vda1</root>\r\n      <boot dev='hd'/>\r\n    </os>\r\n    <features>\r\n      <acpi/>\r\n    </features>\r\n    <clock offset='localtime'/>\r\n    <on_poweroff>destroy</on_poweroff>\r\n    <on_reboot>restart</on_reboot>\r\n    <on_crash>destroy</on_crash>\r\n    <devices>\r\n      <emulator>/usr/libexec/qemu-kvm</emulator>\r\n      <disk type='block' device='disk'>\r\n        <driver name='qemu' type='raw' cache='none'/>\r\n        <source dev='/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/link-to-sda'/>\r\n        <target dev='vda' bus='virtio'/>\r\n        <alias name='virtio-disk0'/>\r\n        <address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/>\r\n      </disk>\r\n      <controller type='usb' index='0'>\r\n        <alias name='usb0'/>\r\n        <address type='pci' domain='0x0000' bus='0x00' slot='0x01' function='0x2'/>\r\n      </controller>\r\n      <interface type='bridge'>\r\n        <mac address='d0:0d:7c:7f:d8:42'/>\r\n        <source bridge='br1'/>\r\n        <target dev='vnet0'/>\r\n        <model type='virtio'/>\r\n        <alias name='net0'/>\r\n        <address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/>\r\n      </interface>\r\n      <serial type='file'>\r\n        <source path='/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/console.log'/>\r\n        <target port='1'/>\r\n        <alias name='serial0'/>\r\n      </serial>\r\n      <console type='file'>\r\n        <source path='/var/lib/eucalyptus/instances/work/AIDUDAVOYNROSCVC1MT4Y/i-7c7fd842/console.log'/>\r\n        <target type='serial' port='1'/>\r\n        <alias name='serial0'/>\r\n      </console>\r\n      <memballoon model='virtio'>\r\n        <alias name='balloon0'/>\r\n        <address type='pci' domain='0x0000' bus='0x00' slot='0x05' function='0x0'/>\r\n      </memballoon>\r\n    </devices>\r\n    <seclabel type='none'/>\r\n  </domain>\r\n</domstatus>\r\n{code}\r\n* libvirt and qemu-kvm packages on NC (4.0)\r\n{code}\r\n[root@odc-f-13 ~]# rpm -qa | grep qemu\r\ngpxe-roms-qemu-0.9.7-6.10.el6.noarch\r\nqemu-img-0.12.1.2-2.415.el6_5.8.x86_64\r\nqemu-kvm-0.12.1.2-2.415.el6_5.8.x86_64\r\n[root@odc-f-13 ~]# rpm -qa | grep libvirt\r\nlibvirt-client-0.10.2-29.el6_5.7.x86_64\r\nlibvirt-0.10.2-29.el6_5.7.x86_64\r\n{code}\r\n\r\n*Pertinent Data*\r\n\r\nDigging around through Google, I found a few resources that *may* help.  I wasn't sure there was something around how we label devices via libvirt.\r\n\r\n* http://comments.gmane.org/gmane.comp.emulators.qemu/64827\r\n* https://lists.linux-foundation.org/pipermail/virtualization/2010-June/015324.html\r\n* http://libvirt.org/formatdomain.html#elementsDisks\r\n\r\nSosreports from the FrontEnd and NC (4.0 cloud) are attached.\r\n\r\nThis was tested with instance store-backed paravirtual images.  However, this also affects EBS-backed and instance store-backed HVM images, but these images have issue around the block device mapping served to them regarding the proper device name for ephemeral - see EUCA-7860.\r\n\r\n*Workaround*\r\n\r\nIf anyone wants to use the latest Ubuntu LTS with Eucalyptus 3.4.2 and 4.0.0 and want to access ephemeral on boot, they will have to pass a script to via userdata to mount the ephemeral device.  I am not sure if this affects any other OSes that use cloud-init.  May need to check Fedora images as well.","customfield_13000":null,"customfield_13200":null,"customfield_11300":"EUCA-9687","customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/19725","id":"19725","filename":"sosreport-FrontEnd-20140429070540-9603.tar.xz","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-29T09:40:00.281-0500","size":9930980,"mimeType":"application/x-xz","content":"https://eucalyptus.atlassian.net/secure/attachment/19725/sosreport-FrontEnd-20140429070540-9603.tar.xz"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/19726","id":"19726","filename":"sosreport-NC-f-13-20140429070430-0c6f.tar.xz","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-04-29T09:40:00.313-0500","size":6735628,"mimeType":"application/x-xz","content":"https://eucalyptus.atlassian.net/secure/attachment/19726/sosreport-NC-f-13-20140429070430-0c6f.tar.xz"}],"aggregatetimeestimate":null,"summary":"Ephemeral not being mounted in Ubuntu 14.04 LTS images ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_2_*:*_230562677_*|*_10001_*:*_3_*:*_7848821261_*|*_10002_*:*_1_*:*_34485664_*|*_10000_*:*_1_*:*_10807020_*|*_5_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_1218916076","customfield_12100":"0|i02ns7:","customfield_10001":"2014-05-06T03:38:06.952-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["dmitrii(dmitrii)","hspencer(hspencer)","vasya(vasya)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/69331","id":"69331","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"QAing the fix right now.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T03:38:06.952-0500","updated":"2014-05-06T03:38:06.952-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/69364","id":"69364","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"fix is in eucalyptus 90102a39a655c7973ee11bd452372cac41df80f2","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-06T13:12:52.642-0500","updated":"2014-05-06T13:12:52.642-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70677","id":"70677","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"I don't see /dev/vdb mounted on VM start up. Is that suppose to work or I am missing something?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-19T19:22:28.767-0500","updated":"2014-05-19T19:22:28.767-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70685","id":"70685","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Is this EBS? (With IS we don't put ephemeral on the second disk.)\r\n\r\nIs there a /dev/vdb device? Is there a /dev/sdb device?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-19T21:46:26.904-0500","updated":"2014-05-19T21:46:26.904-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70688","id":"70688","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"This is IS hvm image that is started in the m1.small instance type with 5G disk space. Image is about 2G and the rest 3G is given to the /dev/vdb.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-19T22:58:49.054-0500","updated":"2014-05-19T22:58:49.054-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70689","id":"70689","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"When I tested this, it was the following:\r\n\r\n{quote}\r\nThis was tested with instance store-backed paravirtual images. However, this also affects EBS-backed and instance store-backed HVM images, but these images have issue around the block device mapping served to them regarding the proper device name for ephemeral - see EUCA-7860\r\n{quote}\r\n\r\nI am not sure if after we convert the instance store-backed paravirtual EMI to an instance store-backed HVM EMI if we honor the previous device mapping. (i.e. make sure we provide all three devices - /dev/vda1, /dev/vda2, /dev/vda3 - or like on HVM - /dev/vda and /dev/vdb for ephemeral). \r\n\r\nHope this helps.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-19T23:04:34.531-0500","updated":"2014-05-19T23:04:34.531-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70725","id":"70725","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"It is sounds that there might be several issues lumped together into this bug. I am assigning to [~kedwards] so he can discuss with [~hspencer] and [~dmitrii] and determine if this is 4.0 critical issue.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T13:05:55.245-0500","updated":"2014-05-20T13:05:55.245-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/70748","id":"70748","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"To answer [~hspencer]: in 4.0 we decided to maintain the disk geometry that we've had in 3.4.* and earlier versions:\r\n\r\n* partition images should see the three partitions on the first disk and there is no second disk\r\n* disk images remain untouched by us and ephemeral space shows up on the second disk\r\n\r\nThat behavior was broken when the ticket was filed, so that's what I fixed. Upon second reading, it appears that the ticket concerns a problem that was present in 3.4 and is still present in 4.0. So this is not a regression, but something that we certainly would like to fix.\r\n\r\nIn that case, I think the ticket needs to go back to open. I would like to assign it to 4.0.1 so we discuss it again soon.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-20T15:47:59.530-0500","updated":"2014-05-20T15:47:59.530-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/74989","id":"74989","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"I poked around in cloud-init source code and, for the record, confirmed that:\r\n\r\n* It does not matter whether metadata service returns, e.g., 'sda' or '/dev/sda'. The script handles both. (It appears that AWS is inconsistent on this, so that workaround is not just for Euca.)\r\n\r\n* It does not even matter whether metadata service returns the correct type of device: it could return 'sda' and cloud-init will remap it into 'vda' or whatever corresponding device is visible in the instance. (Again, AWS returns SCSI names in metadata service, but Xen-specific disks are visible in the instance.)\r\n\r\nThis problem is, indeed, specific to changes introduced in Ubuntu 14.04 release. On the same installation an Ubuntu 12.04 image works fine: the (formatted) ephemeral partition on /dev/vda2 is found and mounted by cloud-init.\r\n\r\nAs [~hspencer] points out, {{cloud-init}} on 14.04 seems to stop when it does not find partition entries under {{/sys/block}}. I checked 12.04 and the {{/sys/block}} entries are missing there, too. Then I compared the code for {{cloud-init}} between 14.04 and 12.04 and, sure enough, only the former contains the check for {{/sys/block}} entries.\r\n\r\nSo... Latest versions of {{cloud-init}} added additional checks that made it incompatible with how Eucalyptus constructs the disk. The solution, if there is one, must involve figuring out how to ensure that {{/sys/block}} entries are populated for partition devices and not just the disk device.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-08-12T22:14:17.273-0500","updated":"2014-08-12T22:14:17.273-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/75040","id":"75040","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"I convinced myself that partition devices are not supposed to appear under {{/sys/block}}. They don't do that in KVM guests or on Linux on bare metal. On AWS one sees {{/sys/block/xvda1}} and others like it because Xen can present unrelated devices as if they are partitions of one device. It appears that {{cloud-init}} would only work correctly on AWS. I filed a ticket for that:\r\n\r\n  https://bugs.launchpad.net/ubuntu/+source/cloud-init/+bug/1356494/\r\n\r\nAnd it looks like we're not the only ones bitten by this:\r\n\r\n  https://bugs.launchpad.net/cloud-init/+bug/1263294\r\n  https://bugs.launchpad.net/tripleo/+bug/1314922","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-08-15T13:05:35.446-0500","updated":"2014-08-15T13:05:35.446-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29342/comment/75041","id":"75041","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Looks like a bug in {{cloud-init}}.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-08-15T13:06:32.926-0500","updated":"2014-08-15T13:06:32.926-0500"}],"maxResults":11,"total":11,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9251/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}