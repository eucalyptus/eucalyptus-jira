{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"31667","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31667","key":"EUCA-9788","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10104":[],"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2015-01-19T04:23:11.714-0600","customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9788/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2014-08-01T13:34:09.193-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2014-09-15T19:53:19.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10102":null,"customfield_10301":null,"labels":["4.1-cloudformation","AWSCompat-PM"],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jmille","name":"jmille","key":"jmille","accountId":"557058:c742fd37-495a-4568-b828-6a07815887c6","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4a94ed6572382b1b49af7af7926e2af3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Djmille%26avatarId%3D13903%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4a94ed6572382b1b49af7af7926e2af3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Djmille%26avatarId%3D13903%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4a94ed6572382b1b49af7af7926e2af3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Djmille%26avatarId%3D13903%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4a94ed6572382b1b49af7af7926e2af3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Djmille%26avatarId%3D13903%26noRedirect%3Dtrue"},"displayName":"John Mille","active":true,"timeZone":"Europe/London"},"updated":"2015-05-08T17:00:24.011-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nWhen using the Eucalyptus Cloudformation [ValidateTemplate|http://docs.aws.amazon.com/AWSCloudFormation/latest/APIReference/API_ValidateTemplate.html] API call with euca2ools, the result returns a false-positive due to failure in confirming proper resource dependencies.  \r\n\r\n*Signs*\r\n\r\nComparing the output from Eucalyptus Cloudformation vs. AWS CloudFormation when validating the following JSON:\r\n{code}\r\n{\r\n\r\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n    \"Description\" : \"Cloudformation Example => Run instance with userdata in security group\",\r\n\r\n    \"Parameters\": {\r\n        \"UbuntuImageId\": {\r\n            \"Description\":\"Ubuntu Image id\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        },\r\n\r\n        \"Acct1User01KeyPair\": {\r\n            \"Description\":\"Account1 User01 Key Pair\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        }\r\n    },\r\n\r\n    \"Resources\" : {\r\n        \"DockerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n                \"Properties\": {\r\n                    \"GroupDescription\" : \"Security Group with Ingress Rule for DockerInstance\",\r\n                    \"SecurityGroupIngress\" : [\r\n                        {\r\n                            \"IpProtocol\" : \"tcp\",\r\n                            \"FromPort\" : \"22\",\r\n                            \"ToPort\" : \"22\",\r\n                            \"CidrIp\" : \"0.0.0.0/0\"\r\n                        }\r\n                    ]\r\n                }\r\n        },\r\n\r\n        \"DockerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n                \"Properties\": {\r\n                    \"ImageId\" : { \"Ref\":\"UbuntuImageId\" },\r\n                    \"InstanceType\" : \"m2.xlarge\",\r\n                    \"UserData\" : { \"Fn::Base64\" : \"#include https://get.docker.io\" },\r\n                    \"SecurityGroups\" : [\r\n                        { \"Ref\" : \"DockerSecurityGroup\" }\r\n                    ],\r\n            \"KeyName\" : { \"Ref\" : \"Acct1User01KeyPair\" }\r\n            }\r\n        }\r\n    },\r\n\r\n    \"Outputs\" : {\r\n        \"InstanceId\" : {\r\n            \"Description\" : \"InstanceId of the newly created EC2 instance\",\r\n            \"Value\" : { \"Ref\" : \"Ec2Instance\" }\r\n        },\r\n        \"AZ\" : {\r\n            \"Description\" : \"Availability Zone of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"AvailabilityZone\" ] }\r\n        },\r\n        \"PublicIP\" : {\r\n            \"Description\" : \"Public IP address of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"PublicIp\" ] }\r\n        }\r\n    }\r\n}\r\n{code}\r\n\r\n* Eucalyptus Cloudformation - euform-validate-template output:\r\n{code}\r\n# euform-validate-template --template-file cfn-example.json --region account1-user01@\r\nDESCRIPTION\tCloudformation Example => Run instance with userdata in security group\r\nPARAMETERS\tNoEcho\ttrue\r\nPARAMETERS\tDescription\tUbuntu Image id\r\nPARAMETERS\tParameterKey\tUbuntuImageId\r\nPARAMETERS\tNoEcho\ttrue\r\nPARAMETERS\tDescription\tAccount1 User01 Key Pair\r\nPARAMETERS\tParameterKey\tAcct1User01KeyPair\r\n{code}\r\n\r\n* AWS Cloudformation - cfn-validate-template output:\r\n{code}\r\n$ cfn-validate-template --template-file cfn-example.json\r\ncfn-validate-template:  Malformed input-Unresolved resource dependencies [Ec2Instance] in the Outputs\r\n block of the template\r\nUsage:\r\ncfn-validate-template\r\n       [--template-file  value ] [--template-url  value ]  [General Options]\r\nFor more information and a full list of options, run \"cfn-validate-template --help\"\r\n{code}\r\n\r\nThe issue is that in the _Outputs_ declaration, the reference _Ec2Instance_ does not exist in the template under the _Resources_ declaration.  Once I changed the reference _Ec2Instance_ to _DockerInstance_ (which is in the template under the _Resources_ declaration), this resolved the issue.\r\n\r\n{code}\r\n$ cfn-validate-template --template-file cfn-example.json\r\nPARAMETERS  UbuntuImageId       true  Ubuntu Image id\r\nPARAMETERS  Acct1User01KeyPair  true  Account1 User01 Key Pair\r\n{code}\r\n\r\n* Debug output when using euform-validate-template with misconfigured template:\r\n{code}\r\n# euform-validate-template --template-file cfn-example.json --region account1-user01@ --debug\r\n2014-08-01 11:28:25,159 DEBUG   ValidateTemplate parsed arguments: {'security_token': None, 'TemplateBody': <open file 'cfn-example.json', mode 'r' at 0x10866f0>, 'url': None, 'region': 'account1-user01@', 'show_empty_fields': False, 'key_id': None, 'TemplateURL': None, 'secret_key': None}\r\n2014-08-01 11:28:25,159 INFO    Config finding global option default-region\r\n2014-08-01 11:28:25,159 INFO    Config   found   default-region = ViciousLiesAndDangerousRumors\r\n2014-08-01 11:28:25,159 INFO    Config finding global option max-retries\r\n2014-08-01 11:28:25,159 INFO    Config   novalue for max-retries\r\n2014-08-01 11:28:25,159 INFO    Config finding global option timeout\r\n2014-08-01 11:28:25,159 INFO    Config   novalue for timeout\r\n2014-08-01 11:28:25,160 INFO    Config finding region option verify-ssl\r\n2014-08-01 11:28:25,160 DEBUG   Config   section ViciousLiesAndDangerousRumors\r\n2014-08-01 11:28:25,160 DEBUG   Config   section *\r\n2014-08-01 11:28:25,160 INFO    Config   novalue for verify-ssl\r\n2014-08-01 11:28:25,160 INFO    Config finding user option key-id\r\n2014-08-01 11:28:25,160 DEBUG   Config   section account1-user01\r\n2014-08-01 11:28:25,160 INFO    Config   found   account1-user01::key-id = 'AKI6GWITDEHGJIEBTREA'\r\n2014-08-01 11:28:25,160 INFO    Config finding user option secret-key\r\n2014-08-01 11:28:25,160 DEBUG   Config   section account1-user01\r\n2014-08-01 11:28:25,160 INFO    Config   found   account1-user01::secret-key = <redacted>\r\n2014-08-01 11:28:25,163 INFO    ValidateTemplate parameters: {'Action': 'ValidateTemplate', 'Version': '2010-05-15', 'TemplateBody': '{\\n\\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\\n\\n    \"Description\" : \"Cloudformation Example => Run instance with userdata in security group\",\\n\\n    \"Parameters\": {\\n        \"UbuntuImageId\": {\\n            \"Description\":\"Ubuntu Image id\",\\n            \"Type\":\"String\",\\n            \"NoEcho\":\"True\"\\n        },\\n\\n        \"Acct1User01KeyPair\": {\\n            \"Description\":\"Account1 User01 Key Pair\",\\n            \"Type\":\"String\",\\n            \"NoEcho\":\"True\"\\n        }\\n    },\\n\\n    \"Resources\" : {\\n        \"DockerSecurityGroup\": {\\n            \"Type\": \"AWS::EC2::SecurityGroup\",\\n                \"Properties\": {\\n                    \"GroupDescription\" : \"Security Group with Ingress Rule for DockerInstance\",\\n                    \"SecurityGroupIngress\" : [\\n                        {\\n                            \"IpProtocol\" : \"tcp\",\\n                            \"FromPort\" : \"22\",\\n                            \"ToPort\" : \"22\",\\n                            \"CidrIp\" : \"0.0.0.0/0\"\\n                        }\\n                    ]\\n                }\\n        },\\n\\n        \"DockerInstance\": {\\n            \"Type\": \"AWS::EC2::Instance\",\\n                \"Properties\": {\\n                    \"ImageId\" : { \"Ref\":\"UbuntuImageId\" },\\n                    \"InstanceType\" : \"m2.xlarge\",\\n                    \"UserData\" : { \"Fn::Base64\" : \"#include https://get.docker.io\" },\\n                    \"SecurityGroups\" : [\\n                        { \"Ref\" : \"DockerSecurityGroup\" }\\n                    ],\\n            \"KeyName\" : { \"Ref\" : \"Acct1User01KeyPair\" }\\n            }\\n        }\\n    },\\n\\n    \"Outputs\" : {\\n        \"InstanceId\" : {\\n            \"Description\" : \"InstanceId of the newly created EC2 instance\",\\n            \"Value\" : { \"Ref\" : \"Ec2Instance\" }\\n        },\\n        \"AZ\" : {\\n            \"Description\" : \"Availability Zone of the newly created EC2 instance\",\\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"AvailabilityZone\" ] }\\n        },\\n        \"PublicIP\" : {\\n            \"Description\" : \"Public IP address of the newly created EC2 instance\",\\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"PublicIp\" ] }\\n        }\\n    }\\n}\\n'}\r\n2014-08-01 11:28:25,164 INFO    CloudFormation sending request (attempt 1 of 3)\r\n2014-08-01 11:28:25,166 DEBUG   QuerySigV2Auth string to sign: 'POST\\ncloudformation.acme.eucalyptus-systems.com:8773\\n/\\nAWSAccessKeyId=AKI6GWITDEHGJIEBTREA&Action=ValidateTemplate&SignatureMethod=HmacSHA256&SignatureVersion=2&TemplateBody=%7B%0A%0A%20%20%20%20%22AWSTemplateFormatVersion%22%20%3A%20%222010-09-09%22%2C%0A%0A%20%20%20%20%22Description%22%20%3A%20%22Cloudformation%20Example%20%3D%3E%20Run%20instance%20with%20userdata%20in%20security%20group%22%2C%0A%0A%20%20%20%20%22Parameters%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22UbuntuImageId%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Description%22%3A%22Ubuntu%20Image%20id%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Type%22%3A%22String%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22NoEcho%22%3A%22True%22%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%22Acct1User01KeyPair%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Description%22%3A%22Account1%20User01%20Key%20Pair%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Type%22%3A%22String%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22NoEcho%22%3A%22True%22%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%22Resources%22%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%22DockerSecurityGroup%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Type%22%3A%20%22AWS%3A%3AEC2%3A%3ASecurityGroup%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Properties%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22GroupDescription%22%20%3A%20%22Security%20Group%20with%20Ingress%20Rule%20for%20DockerInstance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22SecurityGroupIngress%22%20%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22IpProtocol%22%20%3A%20%22tcp%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22FromPort%22%20%3A%20%2222%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22ToPort%22%20%3A%20%2222%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22CidrIp%22%20%3A%20%220.0.0.0%2F0%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%0A%20%20%20%20%20%20%20%20%22DockerInstance%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Type%22%3A%20%22AWS%3A%3AEC2%3A%3AInstance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22Properties%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22ImageId%22%20%3A%20%7B%20%22Ref%22%3A%22UbuntuImageId%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22InstanceType%22%20%3A%20%22m2.xlarge%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22UserData%22%20%3A%20%7B%20%22Fn%3A%3ABase64%22%20%3A%20%22%23include%20https%3A%2F%2Fget.docker.io%22%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22SecurityGroups%22%20%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%20%22Ref%22%20%3A%20%22DockerSecurityGroup%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22KeyName%22%20%3A%20%7B%20%22Ref%22%20%3A%20%22Acct1User01KeyPair%22%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%0A%20%20%20%20%22Outputs%22%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%22InstanceId%22%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Description%22%20%3A%20%22InstanceId%20of%20the%20newly%20created%20EC2%20instance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Value%22%20%3A%20%7B%20%22Ref%22%20%3A%20%22Ec2Instance%22%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22AZ%22%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Description%22%20%3A%20%22Availability%20Zone%20of%20the%20newly%20created%20EC2%20instance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Value%22%20%3A%20%7B%20%22Fn%3A%3AGetAtt%22%20%3A%20%5B%20%22Ec2Instance%22%2C%20%22AvailabilityZone%22%20%5D%20%7D%0A%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%22PublicIP%22%20%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Description%22%20%3A%20%22Public%20IP%20address%20of%20the%20newly%20created%20EC2%20instance%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22Value%22%20%3A%20%7B%20%22Fn%3A%3AGetAtt%22%20%3A%20%5B%20%22Ec2Instance%22%2C%20%22PublicIp%22%20%5D%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%7D%0A&Timestamp=2014-08-01T18%3A28%3A25Z&Version=2010-05-15'\r\n2014-08-01 11:28:25,166 DEBUG   QuerySigV2Auth b64-encoded signature: /e7jxpVphr+AdqUISq3D7xUjUB4BEmJ/3aYOxuxa1ws=\r\n2014-08-01 11:28:25,166 DEBUG   QuerySigV2Auth converting params to POST data\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request method: POST\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request url:    http://cloudformation.acme.eucalyptus-systems.com:8773/\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request header: Content-Length: 3061\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request header: Content-Type: application/x-www-form-urlencoded\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request header: Host: cloudformation.acme.eucalyptus-systems.com:8773\r\n2014-08-01 11:28:25,174 DEBUG   CloudFormation request header: User-Agent: euca2ools/3.1.0 (CPython 2.6.6; Linux 2.6.32-431.20.3.el6.x86_64; x86_64) requestbuilder/0.2.1 requests/1.1.0\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   AWSAccessKeyId: AKI6GWITDEHGJIEBTREA\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   Action: ValidateTemplate\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   Signature: /e7jxpVphr+AdqUISq3D7xUjUB4BEmJ/3aYOxuxa1ws=\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   SignatureMethod: HmacSHA256\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   SignatureVersion: 2\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   TemplateBody: {\r\n\r\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n    \"Description\" : \"Cloudformation Example => Run instance with userdata in security group\",\r\n\r\n    \"Parameters\": {\r\n        \"UbuntuImageId\": {\r\n            \"Description\":\"Ubuntu Image id\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        },\r\n\r\n        \"Acct1User01KeyPair\": {\r\n            \"Description\":\"Account1 User01 Key Pair\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        }\r\n    },\r\n\r\n    \"Resources\" : {\r\n        \"DockerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n                \"Properties\": {\r\n                    \"GroupDescription\" : \"Security Group with Ingress Rule for DockerInstance\",\r\n                    \"SecurityGroupIngress\" : [\r\n                        {\r\n                            \"IpProtocol\" : \"tcp\",\r\n                            \"FromPort\" : \"22\",\r\n                            \"ToPort\" : \"22\",\r\n                            \"CidrIp\" : \"0.0.0.0/0\"\r\n                        }\r\n                    ]\r\n                }\r\n        },\r\n\r\n        \"DockerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n                \"Properties\": {\r\n                    \"ImageId\" : { \"Ref\":\"UbuntuImageId\" },\r\n                    \"InstanceType\" : \"m2.xlarge\",\r\n                    \"UserData\" : { \"Fn::Base64\" : \"#include https://get.docker.io\" },\r\n                    \"SecurityGroups\" : [\r\n                        { \"Ref\" : \"DockerSecurityGroup\" }\r\n                    ],\r\n            \"KeyName\" : { \"Ref\" : \"Acct1User01KeyPair\" }\r\n            }\r\n        }\r\n    },\r\n\r\n    \"Outputs\" : {\r\n        \"InstanceId\" : {\r\n            \"Description\" : \"InstanceId of the newly created EC2 instance\",\r\n            \"Value\" : { \"Ref\" : \"Ec2Instance\" }\r\n        },\r\n        \"AZ\" : {\r\n            \"Description\" : \"Availability Zone of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"AvailabilityZone\" ] }\r\n        },\r\n        \"PublicIP\" : {\r\n            \"Description\" : \"Public IP address of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"PublicIp\" ] }\r\n        }\r\n    }\r\n}\r\n\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   Timestamp: 2014-08-01T18:28:25Z\r\n2014-08-01 11:28:25,175 DEBUG   CloudFormation request data:   Version: 2010-05-15\r\n2014-08-01 11:28:25,330 DEBUG   CloudFormation response time: 0.154 seconds\r\n2014-08-01 11:28:25,330 INFO    CloudFormation response status: 200\r\n2014-08-01 11:28:25,330 DEBUG   CloudFormation response header: content-length: 653\r\n2014-08-01 11:28:25,331 DEBUG   CloudFormation response header: content-type: application/xml; charset=UTF-8\r\n2014-08-01 11:28:25,331 DEBUG   ValidateTemplate -- response content --\r\n<ValidateTemplateResponse xmlns=\"http://cloudformation.amazonaws.com/doc/2010-05-15/\"><ValidateTemplateResult><Capabilities/><Description>Cloudformation Example => Run instance with userdata in security group</Description><Parameters><member><Description>Ubuntu Image id</Description><NoEcho>true</NoEcho><ParameterKey>UbuntuImageId</ParameterKey></member><member><Description>Account1 User01 Key Pair</Description><NoEcho>true</NoEcho><ParameterKey>Acct1User01KeyPair</ParameterKey></member></Parameters></ValidateTemplateResult><ResponseMetadata><RequestId>d595e9d0-806f-4a43-8584-1103e78af198</RequestId></ResponseMetadata></ValidateTemplateResponse>\r\n2014-08-01 11:28:25,331 DEBUG   ValidateTemplate -- end of response content --\r\nDESCRIPTION\tCloudformation Example => Run instance with userdata in security group\r\nPARAMETERS\tNoEcho\ttrue\r\nPARAMETERS\tDescription\tUbuntu Image id\r\nPARAMETERS\tParameterKey\tUbuntuImageId\r\nPARAMETERS\tNoEcho\ttrue\r\nPARAMETERS\tDescription\tAccount1 User01 Key Pair\r\nPARAMETERS\tParameterKey\tAcct1User01KeyPair\r\n{code}\r\n\r\n* Because of this false-positive report, if a user uses the JSON file to create a CloudFormation stack on Eucalyptus 4.0, the stack will fail to deploy:\r\n{code}\r\n[root@odc-f-13 ~]# euform-create-stack --template-file cfn-example.json --parameter \"UbuntuImageId=emi-5FF95D61\" --parameter \"Acct1User01KeyPair=account1-user01\" DockerStack2 --region account1-user01@\r\narn:aws:cloudformation::408396244283:stack/DockerStack2/209e48cc-1a8f-4ccd-849f-b8deee2038b5\r\n......\r\n[root@odc-f-13 ~]# euform-describe-stacks --region account1-user01@\r\nSTACK\tDockerStack2\tROLLBACK_IN_PROGRESS\tTemplate error: unresolved resource dependency: Ec2InstanceRollback requested by user.\tCloudformation Example => Run instance with userdata in security group\t\t2014-08-01T18:46:34.827Z\r\n.....\r\n[root@odc-f-13 ~]# euform-describe-stacks --region account1-user01@\r\nSTACK\tDockerStack2\tROLLBACK_COMPLETE\t\tCloudformation Example => Run instance with userdata in security group\t\t2014-08-01T18:46:34.827Z\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up Eucalyptus 4.0.0 Cloud\r\n** single cluster, non-HA\r\n** 1 x CLC, DNS, Cloudformation\r\n** 1 x UFS\r\n** 1 x UFS, Walrus\r\n** 1 x CC/SC (Overlay)\r\n** 2 x NCs\r\n# Enable [Cloudformation service|https://eucalyptus.atlassian.net/wiki/display/ARCH/CloudFormationGuide]\r\n# Use the following json file with euform-validate-template:\r\n{code}\r\n{\r\n\r\n    \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n    \"Description\" : \"Cloudformation Example => Run instance with userdata in security group\",\r\n\r\n    \"Parameters\": {\r\n        \"UbuntuImageId\": {\r\n            \"Description\":\"Ubuntu Image id\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        },\r\n\r\n        \"Acct1User01KeyPair\": {\r\n            \"Description\":\"Account1 User01 Key Pair\",\r\n            \"Type\":\"String\",\r\n            \"NoEcho\":\"True\"\r\n        }\r\n    },\r\n\r\n    \"Resources\" : {\r\n        \"DockerSecurityGroup\": {\r\n            \"Type\": \"AWS::EC2::SecurityGroup\",\r\n                \"Properties\": {\r\n                    \"GroupDescription\" : \"Security Group with Ingress Rule for DockerInstance\",\r\n                    \"SecurityGroupIngress\" : [\r\n                        {\r\n                            \"IpProtocol\" : \"tcp\",\r\n                            \"FromPort\" : \"22\",\r\n                            \"ToPort\" : \"22\",\r\n                            \"CidrIp\" : \"0.0.0.0/0\"\r\n                        }\r\n                    ]\r\n                }\r\n        },\r\n\r\n        \"DockerInstance\": {\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n                \"Properties\": {\r\n                    \"ImageId\" : { \"Ref\":\"UbuntuImageId\" },\r\n                    \"InstanceType\" : \"m2.xlarge\",\r\n                    \"UserData\" : { \"Fn::Base64\" : \"#include https://get.docker.io\" },\r\n                    \"SecurityGroups\" : [\r\n                        { \"Ref\" : \"DockerSecurityGroup\" }\r\n                    ],\r\n            \"KeyName\" : { \"Ref\" : \"Acct1User01KeyPair\" }\r\n            }\r\n        }\r\n    },\r\n\r\n    \"Outputs\" : {\r\n        \"InstanceId\" : {\r\n            \"Description\" : \"InstanceId of the newly created EC2 instance\",\r\n            \"Value\" : { \"Ref\" : \"Ec2Instance\" }\r\n        },\r\n        \"AZ\" : {\r\n            \"Description\" : \"Availability Zone of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"AvailabilityZone\" ] }\r\n        },\r\n        \"PublicIP\" : {\r\n            \"Description\" : \"Public IP address of the newly created EC2 instance\",\r\n            \"Value\" : { \"Fn::GetAtt\" : [ \"Ec2Instance\", \"PublicIp\" ] }\r\n        }\r\n    }\r\n}\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"ValidateTemplate doesn't confirm proper resource mapping","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i02uhr:","customfield_10000":"3_*:*_1_*:*_19952_*|*_10000_*:*_1_*:*_529361684_*|*_10001_*:*_1_*:*_3395957755_*|*_10003_*:*_1_*:*_10819603173_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2014-09-15T23:56:28.579-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["ethomas(ethomas)","hspencer(hspencer)","jmille(jmille)"],"customfield_10116":null,"customfield_10117":null,"environment":"* single cluster, non-HA\r\n* 1 x CLC, DNS, Cloudformation\r\n* 1 x UFS\r\n* 1 x UFS, Walrus\r\n* 1 x CC/SC (Overlay)\r\n* 2 x NCs","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31667/comment/76319","id":"76319","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"body":"The template in the description is a good test.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-09-15T23:56:28.579-0500","updated":"2014-09-15T23:56:28.579-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9788/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}