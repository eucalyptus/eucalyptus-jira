{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"53515","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/53515","key":"EUCA-13137","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@370c5ffa[id=147,rapidViewId=118,state=CLOSED,name=4.4.0 Sprint 8,goal=,startDate=2017-02-22T05:18:20.467Z,endDate=2017-03-15T10:18:00.000Z,completeDate=2017-03-16T03:45:47.155Z,sequence=147]"],"customfield_12800":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13137/watchers","watchCount":2,"isWatching":false},"created":"2017-01-19T10:43:49.194-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=6, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":6,\"lastUpdated\":\"2017-03-06T12:50:35.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":6,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"updated":"2017-03-09T13:03:35.766-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10003","description":"This issue is undergoing QA.  See linked QA issue(s) for progress.","iconUrl":"https://s3.amazonaws.com/awithrow-jira/Jira_icon_in_qa.png","name":"In QA","id":"10003","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12800","id":"12800","name":"eucanetd","description":"Used to track component level items associated with Edge."}],"timeoriginalestimate":null,"customfield_13000":null,"description":"As a cloud user I would like arp table and mac table entries for each ENI defined in MN, so that  MN agents can directly respond to ARP requests and consequently avoid unnecessary ARP broadcasts.\r\n\r\nEach bridge in MN is associated with an arp_table (handles ip-to-mac mappings), and a mac_table (handles mac-to-port mappings). When creating ENIs, if these mappings are defined in the VPC subnet bridge, MN agents would be able to directly and locally handle ARP traffic among ENIs. This will avoid ARP broadcasts and improve the scalability wrt number of ENIs.","customfield_13200":null,"customfield_11300":"EUCA-12428","customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"eucanetd: VPCMIDO: define ip-mac and mac-port mappings of ENIs in MN","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"subtasks":[{"id":"55305","key":"EUCA-13264","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55305","fields":{"summary":"Retrieve arp_table and mac_table of bridges from MN","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}},{"id":"55400","key":"EUCA-13265","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55400","fields":{"summary":"Create an arp_table entry for dot2 address of each VPC subnet","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}},{"id":"55401","key":"EUCA-13266","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55401","fields":{"summary":"Create an arp_table and a mac_table entry for each ENI","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}},{"id":"55402","key":"EUCA-13267","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55402","fields":{"summary":"Cleanup arp_table and mac_table entries upon ENI disconnect","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}},{"id":"55403","key":"EUCA-13268","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55403","fields":{"summary":"Configuration option to enable/disable the population of arp_table and mac_table","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}},{"id":"55600","key":"EUCA-13273","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/55600","fields":{"summary":"Cleanup unknown arp_table and mac_table entries","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}}],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"customfield_12100":"0|i041tb:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":null,"customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10004":13.0,"customfield_11600":["tsugawa(tsugawa)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/53515/comment/118905","id":"118905","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"body":"eucanetd can now populate MN arp_table and mac_table.\r\nThe feature can be enabled/disable via eucalyptus.conf parameter MIDO_ENABLE_ARPTABLE = (Y/N) - default is enabled. There is no need to restart eucanetd when changing MIDO_ENABLE_ARPTABLE.\r\n\r\nTests:\r\n\r\n1. check for regression - mostly instance network connectivity. Security groups and network ACL functionality not affected.\r\n\r\n2. Verify that instances receive dot2 ARP replies (this functionality is not affected by MIDO_ENABLE_ARPTABLE)\r\n\r\n- Start an instance and send a ping request to subnet dot2 address - note that no ICMP response is expected since the interface does not exist.\r\n- Check the OS arp table and verify that the dot2 address is directed to the subnet gateway's MAC address.\r\n{noformat}\r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at <incomplete> on eth0\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# ping -c1 172.31.0.2\r\nPING 172.31.0.2 (172.31.0.2) 56(84) bytes of data.\r\n\r\n--- 172.31.0.2 ping statistics ---\r\n1 packets transmitted, 0 received, 100% packet loss, time 0ms\r\n\r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at <incomplete> on eth0\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# arp -d 172.31.0.2\r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at <incomplete> on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at <incomplete> on eth0\r\n[root@euca-172-31-2-225 cloud-user]# arping -c1 172.31.0.2\r\nARPING 172.31.0.2 from 172.31.2.225 eth0\r\nUnicast reply from 172.31.0.2 [AC:CA:BA:F5:B1:C9]  1.125ms\r\nSent 1 probes (1 broadcast(s))\r\nReceived 1 response(s)\r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n{noformat}\r\n\r\n*Note:* arping can be used for this test. Make sure to only send 1 probe - arping switches from broadcast to unicast once a response is received. MidoNet seems to not respond to unicast requests.\r\n\r\n3. Verify that MN intercepts arp broadcasts of instances and responds appropriately.\r\n- Start 2 instances on the same VPC subnet VMa (e.g., 172.31.1.217) and VMb (e.g., 172.31.2.225)\r\n- Start tcpdump and capture arp messages on VMa\r\n- Clear the arp entry of VMa on VMb\r\n- Send a ping request from VMb to VMa\r\n\r\nWith MIDO_ENABLE_ARPTABLE = Y (default), it is expected that:\r\n- No arp request (related to VMb request) is observed on VMa\r\n- Still, VMb receives arp response from MN and successfully sends ICMP request to VMa\r\n\r\nVMa\r\n{noformat}\r\n[root@euca-172-31-1-217 cloud-user]# tcpdump -i eth0 -n -vvv -X -e arp\r\ntcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes\r\n^C\r\n0 packets captured\r\n0 packets received by filter\r\n0 packets dropped by kernel\r\n{noformat}\r\n\r\nVMb\r\n{noformat}\r\n[root@euca-172-31-2-225 cloud-user]# arp -d 172.31.1.217\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at <incomplete> on eth0\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# ping -c1 172.31.1.217\r\nPING 172.31.1.217 (172.31.1.217) 56(84) bytes of data.\r\n64 bytes from 172.31.1.217: icmp_seq=1 ttl=64 time=2.75 ms\r\n\r\n--- 172.31.1.217 ping statistics ---\r\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\r\nrtt min/avg/max/mdev = 2.753/2.753/2.753/0.000 ms\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at d0:0d:ba:80:66:1d [ether] on eth0\r\n{noformat}\r\n\r\nWith MIDO_ENABLE_ARPTABLE = N, it is expected that:\r\n- arp request (broadcast) from VMb is observed on VMa\r\n\r\n{noformat}\r\n[root@euca-172-31-1-217 cloud-user]# tcpdump -i eth0 -n -vvv -X -e arp\r\ntcpdump: listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes\r\n18:52:22.033680 d0:0d:28:79:27:8b > Broadcast, ethertype ARP (0x0806), length 42: Ethernet (len 6), IPv4 (len 4), Request who-has 172.31.1.217 tell 172.31.2.225, length 28\r\n\t0x0000:  0001 0800 0604 0001 d00d 2879 278b ac1f  ..........(y'...\r\n\t0x0010:  02e1 0000 0000 0000 ac1f 01d9            ............\r\n18:52:22.033738 d0:0d:ba:80:66:1d > d0:0d:28:79:27:8b, ethertype ARP (0x0806), length 42: Ethernet (len 6), IPv4 (len 4), Reply 172.31.1.217 is-at d0:0d:ba:80:66:1d, length 28\r\n\t0x0000:  0001 0800 0604 0002 d00d ba80 661d ac1f  ............f...\r\n\t0x0010:  01d9 d00d 2879 278b ac1f 02e1            ....(y'.....\r\n18:52:27.043629 d0:0d:ba:80:66:1d > d0:0d:28:79:27:8b, ethertype ARP (0x0806), length 42: Ethernet (len 6), IPv4 (len 4), Request who-has 172.31.2.225 tell 172.31.1.217, length 28\r\n\t0x0000:  0001 0800 0604 0001 d00d ba80 661d ac1f  ............f...\r\n\t0x0010:  01d9 0000 0000 0000 ac1f 02e1            ............\r\n18:52:27.044878 d0:0d:28:79:27:8b > d0:0d:ba:80:66:1d, ethertype ARP (0x0806), length 42: Ethernet (len 6), IPv4 (len 4), Reply 172.31.2.225 is-at d0:0d:28:79:27:8b, length 28\r\n\t0x0000:  0001 0800 0604 0002 d00d 2879 278b ac1f  ..........(y'...\r\n\t0x0010:  02e1 d00d ba80 661d ac1f 01d9            ......f.....\r\n^C\r\n4 packets captured\r\n4 packets received by filter\r\n0 packets dropped by kernel\r\n{noformat}\r\n\r\nVMb\r\n{noformat}\r\n[root@euca-172-31-2-225 cloud-user]# arp -d 172.31.1.217\r\n[root@euca-172-31-2-225 cloud-user]# \r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at <incomplete> on eth0\r\n[root@euca-172-31-2-225 cloud-user]# ping -c1 172.31.1.217\r\nPING 172.31.1.217 (172.31.1.217) 56(84) bytes of data.\r\n64 bytes from 172.31.1.217: icmp_seq=1 ttl=64 time=4.03 ms\r\n\r\n--- 172.31.1.217 ping statistics ---\r\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\r\nrtt min/avg/max/mdev = 4.030/4.030/4.030/0.000 ms\r\n[root@euca-172-31-2-225 cloud-user]# arp -an\r\n? (172.31.0.2) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.0.1) at ac:ca:ba:f5:b1:c9 [ether] on eth0\r\n? (172.31.1.217) at d0:0d:ba:80:66:1d [ether] on eth0\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tsugawa","name":"tsugawa","key":"tsugawa","accountId":"557058:619bab88-9b87-4778-995a-1e8a85d8b899","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c16b1da4b6426cad544b6eddd78d76b1?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"M Tsugawa","active":true,"timeZone":"America/New_York"},"created":"2017-03-09T13:03:35.761-0600","updated":"2017-03-09T13:03:35.761-0600"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13137/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}