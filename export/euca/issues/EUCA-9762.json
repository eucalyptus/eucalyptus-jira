{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"31538","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538","key":"EUCA-9762","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15500","id":"15500","description":"Eucalyptus 4.1.1","name":"4.1.1","archived":false,"released":true,"releaseDate":"2015-05-11"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@7ee415[id=97,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 0,goal=<null>,startDate=2015-02-02T19:15:01.023Z,endDate=2015-02-26T19:15:00.000Z,completeDate=2015-02-26T20:33:18.310Z,sequence=97]","com.atlassian.greenhopper.service.sprint.Sprint@42b12b25[id=113,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 4,goal=<null>,startDate=2015-04-30T17:10:52.516Z,endDate=2015-05-20T17:10:00.000Z,completeDate=2015-05-22T01:23:00.449Z,sequence=113]","com.atlassian.greenhopper.service.sprint.Sprint@489ddf4c[id=83,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 6,goal=<null>,startDate=2014-10-15T21:01:31.173Z,endDate=2014-11-04T22:01:00.000Z,completeDate=2014-11-06T16:40:34.661Z,sequence=83]","com.atlassian.greenhopper.service.sprint.Sprint@5eb9723d[id=103,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 1,goal=<null>,startDate=2015-02-26T22:01:48.169Z,endDate=2015-03-18T21:01:00.000Z,completeDate=2015-03-23T21:33:28.087Z,sequence=103]","com.atlassian.greenhopper.service.sprint.Sprint@29106bb3[id=73,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 3,goal=<null>,startDate=2014-08-12T22:07:18.093Z,endDate=2014-09-02T22:07:00.000Z,completeDate=2014-09-05T00:07:51.417Z,sequence=73]","com.atlassian.greenhopper.service.sprint.Sprint@62b395b7[id=90,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 7,goal=<null>,startDate=2014-11-05T16:43:27.428Z,endDate=2014-11-25T04:43:00.000Z,completeDate=2014-11-26T16:32:37.188Z,sequence=90]","com.atlassian.greenhopper.service.sprint.Sprint@44725112[id=91,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 8,goal=<null>,startDate=2014-11-26T21:12:51.775Z,endDate=2014-12-18T21:12:00.000Z,completeDate=2014-12-19T19:41:48.234Z,sequence=91]","com.atlassian.greenhopper.service.sprint.Sprint@51cfeb3b[id=108,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 2,goal=<null>,startDate=2015-03-19T21:33:06.046Z,endDate=2015-04-07T21:33:00.000Z,completeDate=2015-04-14T01:30:24.055Z,sequence=108]","com.atlassian.greenhopper.service.sprint.Sprint@7ba84f42[id=92,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 9,goal=<null>,startDate=2014-12-19T17:39:04.067Z,endDate=2015-01-23T17:39:00.000Z,completeDate=2015-02-02T18:43:16.138Z,sequence=92]","com.atlassian.greenhopper.service.sprint.Sprint@5c863ad[id=78,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 4,goal=<null>,startDate=2014-09-04T00:08:11.292Z,endDate=2014-09-24T00:08:00.000Z,completeDate=2014-09-25T22:18:09.293Z,sequence=78]","com.atlassian.greenhopper.service.sprint.Sprint@53e448c7[id=111,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 3,goal=<null>,startDate=2015-04-10T01:30:24.326Z,endDate=2015-04-30T01:30:00.000Z,completeDate=2015-05-01T16:00:21.046Z,sequence=111]","com.atlassian.greenhopper.service.sprint.Sprint@7ddce7b3[id=80,rapidViewId=92,state=CLOSED,name=4.1.0 Sprint 5,goal=<null>,startDate=2014-09-24T22:19:44.735Z,endDate=2014-10-14T22:19:00.000Z,completeDate=2014-10-15T20:44:37.166Z,sequence=80]"],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2015-04-02T17:23:33.630-0500","customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9762/watchers","watchCount":5,"isWatching":false},"created":"2014-07-22T14:17:02.734-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14205","id":"14205","description":"Eucalyptus 4.0.1","name":"4.0.1","archived":false,"released":true,"releaseDate":"2014-08-13"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:32:24.385-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"I am running the following script:\r\nhttps://github.com/eucalyptus/eutester/blob/maint/4.0/testing/testcases/cloud_admin/create_resources.py\r\n\r\nIt runs through all accounts in the cloud (in my case 5) and runs the following:\r\n1) Allocate address\r\n2) Run instance\r\n3) Associate address\r\n4) SSH to instance\r\n5) Disassociate address\r\n6) SSH to instance\r\n\r\nStep 6 will fail periodically. This is caused by the global xml network config is missing the publicIP node for the instance. No errors are found in the CLC or eucanetd logs\r\n\r\nAn example is here for i-e1e6969a:\r\n{code:xml}\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><network-data><configuration><property name=\"publicIps\"><value>10.111.103.5</value><value>10.111.103.6</value><value>10.111.103.18</value><value>10.111.103.23</value><value>10.111.103.46</value><value>10.111.103.47</value><value>10.111.103.48</value><value>10.111.103.49</value><value>10.111.103.50</value><value>10.111.103.51</value><value>10.111.103.52</value><value>10.111.103.53</value><value>10.111.103.54</value><value>10.111.103.55</value><value>10.111.103.56</value><value>10.111.103.57</value></property><property name=\"enabledCLCIp\"><value>10.111.1.12</value></property><property name=\"instanceDNSDomain\"><value>eucalyptus.internal</value></property><property name=\"instanceDNSServers\"><value>10.111.1.12</value></property><property name=\"clusters\"><cluster name=\"PARTI00\"><subnet name=\"1.122.0.0\"><property name=\"subnet\"><value>1.122.0.0</value></property><property name=\"netmask\"><value>255.255.255.0</value></property><property name=\"gateway\"><value>1.122.0.1</value></property></subnet><property name=\"enabledCCIp\"><value>10.111.1.12</value></property><property name=\"macPrefix\"><value>d0:0d</value></property><property name=\"privateIps\"><value>1.122.0.3</value><value>1.122.0.4</value><value>1.122.0.5</value><value>1.122.0.6</value><value>1.122.0.7</value><value>1.122.0.8</value><value>1.122.0.9</value><value>1.122.0.10</value><value>1.122.0.11</value><value>1.122.0.12</value><value>1.122.0.13</value><value>1.122.0.14</value><value>1.122.0.15</value><value>1.122.0.16</value><value>1.122.0.17</value><value>1.122.0.18</value><value>1.122.0.19</value><value>1.122.0.20</value><value>1.122.0.21</value><value>1.122.0.22</value><value>1.122.0.23</value><value>1.122.0.24</value><value>1.122.0.25</value><value>1.122.0.26</value><value>1.122.0.27</value><value>1.122.0.28</value><value>1.122.0.29</value><value>1.122.0.30</value><value>1.122.0.31</value><value>1.122.0.32</value><value>1.122.0.33</value><value>1.122.0.34</value><value>1.122.0.35</value><value>1.122.0.36</value><value>1.122.0.37</value><value>1.122.0.38</value><value>1.122.0.39</value><value>1.122.0.40</value><value>1.122.0.41</value><value>1.122.0.42</value><value>1.122.0.43</value><value>1.122.0.44</value><value>1.122.0.45</value><value>1.122.0.46</value><value>1.122.0.47</value><value>1.122.0.48</value><value>1.122.0.49</value><value>1.122.0.50</value><value>1.122.0.51</value><value>1.122.0.52</value><value>1.122.0.53</value><value>1.122.0.54</value><value>1.122.0.55</value><value>1.122.0.56</value><value>1.122.0.57</value><value>1.122.0.58</value><value>1.122.0.59</value><value>1.122.0.60</value><value>1.122.0.61</value><value>1.122.0.62</value><value>1.122.0.63</value><value>1.122.0.64</value><value>1.122.0.65</value><value>1.122.0.66</value></property><property name=\"nodes\"><node name=\"10.111.1.13\"><instanceIds><value>i-70b5dfb4</value><value>i-e1e6969a</value></instanceIds></node></property></cluster></property></configuration><instances><instance name=\"i-70b5dfb4\"><ownerId>366529069847</ownerId><macAddress>d0:0d:70:b5:df:b4</macAddress><publicIp>10.111.103.18</publicIp><privateIp>1.122.0.10</privateIp><securityGroups><value>sg-b534df98</value></securityGroups></instance><instance name=\"i-e1e6969a\"><ownerId>397382878623</ownerId><macAddress>d0:0d:e1:e6:96:9a</macAddress><privateIp>1.122.0.14</privateIp><securityGroups><value>sg-a79a06d7</value></securityGroups></instance></instances><securityGroups><securityGroup name=\"sg-b534df98\"><ownerId>366529069847</ownerId><rules><value>-P icmp -t -1:-1  -s 0.0.0.0/0</value><value>-P tcp -p 22-22  -s 0.0.0.0/0</value></rules></securityGroup><securityGroup name=\"sg-a79a06d7\"><ownerId>397382878623</ownerId><rules><value>-P tcp -p 22-22  -s 0.0.0.0/0</value><value>-P icmp -t -1:-1  -s 0.0.0.0/0</value></rules></securityGroup></securityGroups></network-data>\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"On address deallocation, instance publicIP can be missing from network XML","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_12828_*|*_10000_*:*_1_*:*_180280227_*|*_10001_*:*_1_*:*_21676536479_*|*_10003_*:*_1_*:*_99961376_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i00327:","customfield_10001":"2014-07-23T15:44:07.675-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["nurmi(nurmi)","mmunn1(mmunn1)","sjones(sjones)","viglesias(viglesias)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9762/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/74181","id":"74181","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"According to euca-describe-instances the instance has the a public address:\r\nINSTANCE\ti-e1e6969a\temi-d2bc7132\teuca-10-111-103-23.eucalyptus.b-12.autoqa.qa1.eucalyptus-systems.com\teuca-1-122-0-14.eucalyptus.internal\trunning\tVEbLds\t0\t\tm1.small\t2014-07-22T19:00:32.716Z\tPARTI00\t\t\t\tmonitoring-disabled\t10.111.103.23\t1.122.0.14\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-a79a06d7\r\nTAG\tinstance\ti-e1e6969a\teuca:node\t10.111.1.13","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-22T14:19:34.526-0500","updated":"2014-07-22T14:19:34.526-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/74233","id":"74233","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~viglesias], do you mean it does not have a public IP for a short period of time or that even if you wait a minute there is no public IP?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-23T15:44:07.675-0500","updated":"2014-07-23T15:44:07.675-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/74235","id":"74235","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones] I waited for a few minutes and the IP was never picked up.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-07-23T15:45:58.614-0500","updated":"2014-07-23T15:45:58.614-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/75297","id":"75297","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I think this is not a CLC issue, it looks like when this occurs the CC reverts the last elastic IP assignment and then ignores subsequent network broadcasts that have no public IP for the instance:\r\n\r\n{code}\r\n2014-08-22 15:47:37 DEBUG 000010605 monitor_thread           | syncing network state\r\n2014-08-22 15:47:37 DEBUG 000010605 syncNetworkState         | syncNetworkState(): syncing public/private IP mapping ground truth with local state\r\n2014-08-22 15:47:37 DEBUG 000010605 instIpSync               | instanceId=i-a3babd7a CCpublicIp=10.111.100.5 CCprivateIp=172.26.64.60 CCprivateMac=d0:0d:a3:ba:bd:7a CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.111.100.5 NCprivateIp=172.26.64.60 NCprivateMac=d0:0d:a3:ba:bd:7a NCvlan=-1 NCnetworkIndex=-1\r\n2014-08-22 15:47:37 DEBUG 000010605 instIpSync               | instanceId=i-41597fa5 CCpublicIp=10.111.100.4 CCprivateIp=172.26.64.64 CCprivateMac=d0:0d:41:59:7f:a5 CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.111.100.6 NCprivateIp=172.26.64.64 NCprivateMac=d0:0d:41:59:7f:a5 NCvlan=-1 NCnetworkIndex=-1\r\n2014-08-22 15:47:37 DEBUG 000010605 instIpSync               | CC publicIp and NC publicIp differ\r\n2014-08-22 15:47:37  WARN 000010605 map_instanceCache        | instance cache mapping failed to operate at index 14\r\n2014-08-22 15:47:37  WARN 000010605 syncNetworkState         | syncNetworkState(): network sync implies network restore is necessary\r\n2014-08-22 15:47:37 DEBUG 000010605 monitor_thread           | syncNetworkState() triggering network restore\r\n2014-08-22 15:47:37 DEBUG 000010605 monitor_thread           | restoring network state\r\n2014-08-22 15:47:37 DEBUG 000010605 restoreNetworkState      | restoring network state\r\n2014-08-22 15:47:37 DEBUG 000010605 restoreNetworkState      | no restore necessary in EDGE\r\n2014-08-22 15:47:37 DEBUG 000010605 monitor_thread           | syncing CLC network rules ground truth with local state\r\n2014-08-22 15:47:37 DEBUG 000010605 monitor_thread           | maintaining network state\r\n2014-08-22 15:47:37 DEBUG 000010605 maintainNetworkState     | no network maintain required for EDGE or VPCMIDO\r\n{code}\r\n\r\nsome time later:\r\n\r\n{code}\r\n2014-08-22 16:12:29 DEBUG 000010599 init_thread              | init=1 0x7f68b94f5000 0x7f6833bb3000 0x7f686a814000 0x7f686a60e000\r\n2014-08-22 16:12:29 DEBUG 000010599 doBroadcastNetworkInfo   | invoked: networkInfo=PD94bWwgdmVyc2lv\r\n2014-08-22 16:12:29 DEBUG 000010599 doBroadcastNetworkInfo   | created and populated tmpfile '/tmp/euca-global-net-qNygYB'\r\n2014-08-22 16:12:29 DEBUG 000010599 gni_populate             | begin parsing XML into data structures\r\n2014-08-22 16:12:29 DEBUG 000010599 gni_populate             | end parsing XML into data structures\r\n2014-08-22 16:12:29 DEBUG 000010599 gni_instance_validate    | instance i-41597fa5: no publicIp set (ignore if instance was run with private only addressing)\r\n2014-08-22 16:12:29 DEBUG 000010599 gni_instance_validate    | instance i-a3babd7a: no publicIp set (ignore if instance was run with private only addressing)\r\n2014-08-22 16:12:29 DEBUG 000010599 doBroadcastNetworkInfo   | done with gni_populate()\r\n2014-08-22 16:12:29 DEBUG 000010599 doBroadcastNetworkInfo   | instance does not have either public or private IP set (id=i-41597fa5 pub=0.0.0.0 priv=172.26.64.64)\r\n2014-08-22 16:12:29 DEBUG 000010599 doBroadcastNetworkInfo   | instance does not have either public or private IP set (id=i-a3babd7a pub=0.0.0.0 priv=172.26.64.60)\r\n2014-08-22 16:12:29 DEBUG 000010605 refresh_resources        | invoked: timeout=60, dolock=1\r\n2014-08-22 16:12:29 DEBUG 000010184 refresh_resources        | received data from node=10.111.5.27 status=enabled mem=7536/8048 disk=47/57 cores=2/4 migrationCapable=TRUE\r\n2014-08-22 16:12:29 DEBUG 000010605 refresh_instances        | invoked: timeout=60, dolock=1\r\n2014-08-22 16:12:29 DEBUG 000010186 refresh_instances        | describing instance i-a3babd7a, Extant, 0\r\n2014-08-22 16:12:29 DEBUG 000010186 refresh_instances        | storing instance state: i-a3babd7a/Extant/10.111.100.5/172.26.64.60\r\n2014-08-22 16:12:29 DEBUG 000010186 print_ccInstance         | refresh_instances():  instanceId=i-a3babd7a reservationId=r-6288caaf state=Extant accountId=048035124958 ownerId=AIDANPNX646Q6GOHRRKVN ts=1408747609 keyName=ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA4dW1AXL6L7fA3HiRH8YfSfRLEFZSYfJLFdKI9zUtTPWvCiRPY2NsLOcRbVTYkMq10CRN2ALkAviEildGIO2tEyygynYVl5zq3ACi+yv9L1aDTc+4KUV1ob6DbGu6ZV02t3Pf0d/sJ8uuYsHt4gcHpm7mVlZIgSLXCBqtJyLmfxzc9ZnJHAmZITTX4cE8XzmdLO+i0Iu8JKTeNgtV1Fr4fPA5gtI4SzAmtvwQaErTJ0T7WoKj8OOu4cYjvbo7O1Qnjk63XPO9aJHfBq2AeQX6FrGXBGTxvKGpq7h6lL/XAJyn8/8YnW3hlGBfb1hkWBfZC2NYo3fQ1zCYcQBWnfgghw== 048035124958@eucalyptus.root ccnet={privateIp=172.26.64.60 publicIp=10.111.100.5 privateMac=d0:0d:a3:ba:bd:7a vlan=-1 networkIndex=-1} ccvm={cores=1 mem=256 disk=5} ncHostIdx=0 serviceTag=http://10.111.5.27:8775/axis2/services/EucalyptusNC userData= launchIndex=0 platform=linux bundleTaskStateName=none, bundleTaskProgress=0.0000 volumesSize=0 volumes={} groupNames={048035124958-f54bad3a-30df-4b93-a0b9-4453c69cb4fe } migration_state=none guestStateName=poweredOn\r\n2014-08-22 16:12:29 DEBUG 000010186 refresh_instances        | describing instance i-41597fa5, Extant, 1\r\n2014-08-22 16:12:29 DEBUG 000010186 refresh_instances        | storing instance state: i-41597fa5/Extant/10.111.100.6/172.26.64.64\r\n2014-08-22 16:12:29 DEBUG 000010186 print_ccInstance         | refresh_instances():  instanceId=i-41597fa5 reservationId=r-ecdef6b7 state=Extant accountId=048035124958 ownerId=AIDANPNX646Q6GOHRRKVN ts=1408747631 keyName=ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA4dW1AXL6L7fA3HiRH8YfSfRLEFZSYfJLFdKI9zUtTPWvCiRPY2NsLOcRbVTYkMq10CRN2ALkAviEildGIO2tEyygynYVl5zq3ACi+yv9L1aDTc+4KUV1ob6DbGu6ZV02t3Pf0d/sJ8uuYsHt4gcHpm7mVlZIgSLXCBqtJyLmfxzc9ZnJHAmZITTX4cE8XzmdLO+i0Iu8JKTeNgtV1Fr4fPA5gtI4SzAmtvwQaErTJ0T7WoKj8OOu4cYjvbo7O1Qnjk63XPO9aJHfBq2AeQX6FrGXBGTxvKGpq7h6lL/XAJyn8/8YnW3hlGBfb1hkWBfZC2NYo3fQ1zCYcQBWnfgghw== 048035124958@eucalyptus.root ccnet={privateIp=172.26.64.64 publicIp=10.111.100.6 privateMac=d0:0d:41:59:7f:a5 vlan=-1 networkIndex=-1} ccvm={cores=1 mem=256 disk=5} ncHostIdx=0 serviceTag=http://10.111.5.27:8775/axis2/services/EucalyptusNC userData= launchIndex=0 platform=linux bundleTaskStateName=none, bundleTaskProgress=0.0000 volumesSize=0 volumes={} groupNames={048035124958-f54bad3a-30df-4b93-a0b9-4453c69cb4fe } migration_state=none guestStateName=poweredOn\r\n{code}\r\n\r\nSo the broadcast says the instances should have no public IP addresses, but this is never applied. The CLC is waiting for the addresses to be reported as unused before allowing them to be assigned to another instance.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-22T18:36:01.088-0500","updated":"2014-08-22T18:36:24.813-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/75417","id":"75417","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~nurmi], please comment on the expected cluster controller behaviour here. The CLC attempts to clear the public IP for an instance but this is not being reflected in the response from describe instances (in the case outlined in the previous comment at least).\r\n\r\nA cloud currently in this state is here (but note that this is a build from testing so has VPC changes):\r\n\r\nhttp://10.111.1.120/euca-qa/display_test.php?testname=sjones-EUCA-9824&uid=1000\r\n\r\nThere are two instances (i-41597fa5, i-a3babd7a) which are reporting use of public IPs that are not requested via the network XML (/opt/eucalyptus/var/run/eucalyptus/global_network_info.xml)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-25T12:40:00.744-0500","updated":"2014-08-25T12:40:00.744-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/75735","id":"75735","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I've freed up the (previously mentioned) cloud but should be able to reproduce this issue if necessary for further investigation. This issue is on hold for now pending further discussion on the expected behaviour. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-08-29T17:06:46.186-0500","updated":"2014-08-29T17:06:46.186-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/84665","id":"84665","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"body":"commit 41b1d461d038b5793d1e1dd2a6337935825aa872\r\nAuthor: Daniel Nurmi <nurmi@eucalyptus.com>\r\nDate:   Wed Apr 1 11:36:08 2015 -0700\r\n\r\n    fix to euca-9762\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"created":"2015-04-01T13:37:32.263-0500","updated":"2015-04-01T13:37:32.263-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/84666","id":"84666","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"body":"fix is in two places - first was to update the internal 'doUnassignAddress()' function to handle EDGE/VPCMIDO in a similar fashion to its compliment doAssignAddress(), and second was to call doUnassignAddress() in the network broadcast function when a blank/0.0.0.0 address is detected as the public IP for an instance.  This tries to ensure that the internal CC/NC state of the instance/public IP in caches/etc are appropriately cleared.  Manual testing was\r\n\r\nallocate EL IP\r\nrun with --addressing private\r\nassociate EL IP, verify\r\ndisassociate EL IP, verify (including looking at internal logs to note that the system isn't trying to 'restore' the previously assigned EL IP\r\nassociate EL IP, verify\r\nterminate\r\n\r\nalso ran branch (euca-9762) with quick launch against EDGE and MANAGED\r\n-D","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"created":"2015-04-01T13:40:21.613-0500","updated":"2015-04-01T13:41:01.985-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/31538/comment/84727","id":"84727","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"I ran https://github.com/eucalyptus/eutester/blob/maint/4.0/testing/testcases/cloud_admin/create_resources.p 20 times without error","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-04-02T17:23:33.641-0500","updated":"2015-04-02T17:23:33.641-0500"}],"maxResults":9,"total":9,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}