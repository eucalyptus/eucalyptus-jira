{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54503","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503","key":"EUCA-13205","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2017-03-15T23:15:39.265-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13205/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2017-02-07T14:08:51.453-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-02-08T13:32:11.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"customfield_11901":null,"issuelinks":[{"id":"48802","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/48802","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"54509","key":"EUCA-13208","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54509","fields":{"summary":"Better error message for misconfigured ELB","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-03-15T23:15:39.280-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\n_Eucalyptus Version_\r\n{{4.4.0-0.25788.147.20170202git6e5a63d.el7}}\r\n\r\nUsing Cloudformation, when an ELB has a lifecycle of the following:\r\n* Multiple AZ ELB => Single AZ ELB => Multiple AZ ELB\r\n\r\nThe last update fails with the following Cloudformation stack event error:\r\n{code}\r\n...\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_FAILED-1486493620581\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:53:40.581ZUPDATE_FAILED\tRequested configuration change is invalid: Multiple subnets for zone (black-market)\r\n...\r\n{code}\r\n\r\nHowever, if the ELB lifecycle is the following:\r\n* Single AZ ELB => Multiple AZ ELB => Single AZ ELB\r\n\r\nThe deployment works with no problem. \r\n\r\nFrom the failure, it looks like once an ELB has deployed an ASG in an AZ, and that ASG has been updated to a desired capacity, minimum size and maximum size of 0, we don't support re-enabling that AZ for the ELB.\r\n\r\n*Steps*\r\n\r\n* Set up multiple AZ Eucalyptus VPC cloud\r\n{code}\r\n[root@h-04 ~]# euca-describe-availability-zones --region devops-admin@\r\nAVAILABILITYZONE\tblack-dollar\tavailable\r\nAVAILABILITYZONE\tblack-market\tavailable\r\nAVAILABILITYZONE\tport-of-miami\tavailable\r\n{code}\r\n* Create non-eucalyptus account\r\n* Using linked {{cfn-elb-multiple-az-resource-vpc-template.json}} template, create stack:\r\n{code}\r\n[root@h-04 ~]# euform-create-stack AZELBFailure --template-file cfn-elb-multiple-az-resource-vpc-template.json --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\r\n[root@h-04 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tAZELBFailure\tCREATE_COMPLETE\t\tCloudFormation template to deploy a multiple AZ ELB on Eucalyptus VPC\t2017-02-07T18:21:07.713Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-bdimlu7pwskhr\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-XRS5ZINEOVUBL-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n* List ASGs using {{(eucalyptus)loadbalancing}} account:\r\n{code}\r\n[root@h-04 ~]# euscale-describe-auto-scaling-groups --region elb-admin@\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar-d5738dfa\tblack-dollar\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-feeccc43\tblack-dollar\tInService\tHealthy\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar-d5738dfa\r\nTAG\tauto-scaling-group\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar\tservice-type\tloadbalancing\ttrue\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market-d05098f7\tblack-market\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-5ec69191\tblack-market\tInService\tHealthy\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market-d05098f7\r\nTAG\tauto-scaling-group\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market\tservice-type\tloadbalancing\ttrue\r\n{code}\r\n* Using linked {{cfn-elb-resource-vpc-template.json}} template, update the stack:\r\n{code}\r\n[root@h-04 ~]# euform-update-stack AZELBFailure --template-file cfn-elb-resource-vpc-template.json --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\r\n[root@h-04 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tAZELBFailure\tUPDATE_COMPLETE\t\tCloudFormation template to create an ELB access logging in Eucalyptus VPC\t2017-02-07T18:21:07.713Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-bdimlu7pwskhr\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-XRS5ZINEOVUBL-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n* List ASGs using {{(eucalyptus)loadbalancing}} account:\r\n{code}\r\n[root@h-04 ~]# euscale-describe-auto-scaling-groups --region elb-admin@\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar-d5738dfa\tblack-dollar\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-feeccc43\tblack-dollar\tInService\tHealthy\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar-d5738dfa\r\nTAG\tauto-scaling-group\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-dollar\tservice-type\tloadbalancing\ttrue\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market\tlc-euca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market-d05098f7\tblack-market\t\t0\t0\t0\tDefault\r\nTAG\tauto-scaling-group\teuca-internal-elb-000727120439-AZELBFail-NginxELB-XRS5ZINEOVUBL-black-market\tservice-type\tloadbalancing\ttrue\r\n{code}\r\n* Using linked {{cfn-elb-multiple-az-resource-vpc-template.json}} template, update the stack:\r\n{code}\r\n[root@h-04 ~]# euform-update-stack AZELBFailure --template-file cfn-elb-multiple-az-resource-vpc-template.json --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\r\n[root@h-04 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tAZELBFailure\tUPDATE_ROLLBACK_COMPLETE\t\tCloudFormation template to create an ELB access logging in Eucalyptus VPC\t2017-02-07T18:21:07.713Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-bdimlu7pwskhr\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-XRS5ZINEOVUBL-000727120439.lb.e-32.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n\r\n*Signs*\r\n\r\n* Stack trace in {{cloud-error.log}} on UFS:\r\n{code}\r\nTue Feb 7 10:53:40 2017 ERROR [StackActivityImpl:SWF Activity  CloudFormationTaskList 61] [com.eucalyptus.cloudformation.workflow.StackActivityImpl.performUpdateStep(StackActivityImpl.g\r\nroovy):895] com.eucalyptus.context.ServiceDispatchException: Failed to send message AttachLoadBalancerToSubnetsType to service loadbalancing-request because: nested exception is com.euc\r\nalyptus.loadbalancing.service.InvalidConfigurationRequestException: Requested configuration change is invalid: Multiple subnets for zone (black-market)\r\ncom.eucalyptus.context.ServiceDispatchException: Failed to send message AttachLoadBalancerToSubnetsType to service loadbalancing-request because: nested exception is com.eucalyptus.load\r\nbalancing.service.InvalidConfigurationRequestException: Requested configuration change is invalid: Multiple subnets for zone (black-market)\r\n        at com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:259)\r\n        at com.eucalyptus.context.ServiceContext.lambda$runWithContext$2(ServiceContext.java:292)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nCaused by: org.springframework.messaging.MessageHandlingException: nested exception is com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException: Requested configuration\r\n change is invalid: Multiple subnets for zone (black-market)\r\n        at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:96)\r\n        at org.springframework.integration.handler.ServiceActivatingHandler.handleRequestMessage(ServiceActivatingHandler.java:89)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:109)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.handler.MessageHandlerChain$1.send(MessageHandlerChain.java:129)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessageSendingTemplate.send(AbstractMessageSendingTemplate.java:105)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutput(AbstractMessageProducingHandler.java:292)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.produceOutput(AbstractMessageProducingHandler.java:212)\r\n        at org.springframework.integration.handler.AbstractMessageProducingHandler.sendOutputs(AbstractMessageProducingHandler.java:129)\r\n        at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:115)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.handler.MessageHandlerChain.handleMessageInternal(MessageHandlerChain.java:110)\r\n        at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:127)\r\n        at org.springframework.integration.dispatcher.AbstractDispatcher.tryOptimizedDispatch(AbstractDispatcher.java:116)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.doDispatch(UnicastingDispatcher.java:148)\r\n        at org.springframework.integration.dispatcher.UnicastingDispatcher.dispatch(UnicastingDispatcher.java:121)\r\n        at org.springframework.integration.channel.AbstractSubscribableChannel.doSend(AbstractSubscribableChannel.java:77)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:423)\r\n        at org.springframework.integration.channel.AbstractMessageChannel.send(AbstractMessageChannel.java:373)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSend(GenericMessagingTemplate.java:115)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:150)\r\n        at org.springframework.messaging.core.GenericMessagingTemplate.doSendAndReceive(GenericMessagingTemplate.java:45)\r\n        at org.springframework.messaging.core.AbstractMessagingTemplate.sendAndReceive(AbstractMessagingTemplate.java:42)\r\n        at org.springframework.messaging.core.AbstractDestinationResolvingMessagingTemplate.sendAndReceive(AbstractDestinationResolvingMessagingTemplate.java:112)\r\n        at com.eucalyptus.context.ServiceContext.lambda$send$1(ServiceContext.java:254)\r\n        ... 4 more\r\nCaused by: com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException: Requested configuration change is invalid: Multiple subnets for zone (black-market)\r\n        at com.eucalyptus.loadbalancing.service.LoadBalancingService.attachLoadBalancerToSubnets(LoadBalancingService.java:2107)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:498)\r\n        at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:113)\r\n        at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:102)\r\n        at org.springframework.expression.spel.ast.MethodReference.access$000(MethodReference.java:49)\r\n        at org.springframework.expression.spel.ast.MethodReference$MethodValueRef.getValue(MethodReference.java:347)\r\n        at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:88)\r\n        at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:131)\r\n        at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:330)\r\n        at org.springframework.integration.util.AbstractExpressionEvaluator.evaluateExpression(AbstractExpressionEvaluator.java:169)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.processInternal(MessagingMethodInvokerHelper.java:317)\r\n        at org.springframework.integration.util.MessagingMethodInvokerHelper.process(MessagingMethodInvokerHelper.java:155)\r\n        at org.springframework.integration.handler.MethodInvokingMessageProcessor.processMessage(MethodInvokingMessageProcessor.java:93)\r\n        ... 30 more\r\nTue Feb 7 10:53:40 2017 ERROR [UpdateStackWorkflowImpl:SWF Decider CloudFormationTaskList 2] [org.apache.log4j.Category$error$1.call(?):?] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException:Requested configuration change is invalid: Multiple subnets for zone (black-market) for activityId=\"48\" of activityType={Name: StackActivity.performUpdateStep,Version: 1.0}\r\nTue Feb 7 10:53:41 2017 ERROR [UpdateStackWorkflowImpl:SWF Decider CloudFormationTaskList 3] [org.apache.log4j.Category$error$1.call(?):?] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException:Requested configuration change is invalid: Multiple subnets for zone (black-market) for activityId=\"48\" of activityType={Name: StackActivity.performUpdateStep,Version: 1.0}\r\nTue Feb 7 10:53:41 2017 ERROR [UpdateStackWorkflowImpl:SWF Decider CloudFormationTaskList 2] [org.apache.log4j.Category$error$1.call(?):?] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException:Requested configuration change is invalid: Multiple subnets for zone (black-market) for activityId=\"48\" of activityType={Name: StackActivity.performUpdateStep,Version: 1.0}\r\nTue Feb 7 10:53:41 2017 ERROR [UpdateStackWorkflowImpl:SWF Decider CloudFormationTaskList 6] [org.apache.log4j.Category$error$1.call(?):?] com.amazonaws.services.simpleworkflow.flow.ActivityTaskFailedException: com.eucalyptus.loadbalancing.service.InvalidConfigurationRequestException:Requested configuration change is invalid: Multiple subnets for zone (black-market) for activityId=\"48\" of activityType={Name: StackActivity.performUpdateStep,Version: 1.0}\r\n{code}\r\n* Stack events from failed stack:\r\n{code}\r\n[root@h-04 ~]# euform-describe-stack-events AZELBFailure --region devops-admin@\r\nEVENT\tAZELBFailure\t88d8acf6-9740-4d9d-b646-ab5aa49f08f5\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:54:08.380Z\tUPDATE_ROLLBACK_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-DELETE_COMPLETE-1486493647460\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-abf68a84\t2017-02-07T18:54:07.460Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-DELETE_IN_PROGRESS-1486493646969\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-abf68a84\t2017-02-07T18:54:06.969Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-DELETE_COMPLETE-1486493646218\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-c7905631\t2017-02-07T18:54:06.218Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-DELETE_COMPLETE-1486493645350\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-c0eeff82\t2017-02-07T18:54:05.350Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-DELETE_IN_PROGRESS-1486493645066\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-c7905631\t2017-02-07T18:54:05.066Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-DELETE_IN_PROGRESS-1486493644310\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-c0eeff82\t2017-02-07T18:54:04.310Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\t1af6d33b-aef5-42a7-869a-0169810cd68e\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:54:03.003Z\tUPDATE_ROLLBACK_COMPLETE_CLEANUP_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_COMPLETE-1486493642516\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:54:02.516ZUPDATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_IN_PROGRESS-1486493639097\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:53:59.097Z\tUPDATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\td71965cf-bd17-441b-bb4f-b32802dea475\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:53:41.452Z\tUPDATE_ROLLBACK_IN_PROGRESS\tThe following resource(s) failed to create: [SubnetNetworkAclAssociation2].  The following resource(s) failed to update: [NginxELB].\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_FAILED-1486493620973\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-c7905631\t2017-02-07T18:53:40.973Z\tCREATE_FAILED\tResource creation cancelled\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_COMPLETE-1486493620715\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-c0eeff82\t2017-02-07T18:53:40.715Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_FAILED-1486493620581\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:53:40.581ZUPDATE_FAILED\tRequested configuration change is invalid: Multiple subnets for zone (black-market)\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_IN_PROGRESS-1486493620524\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-c7905631\t2017-02-07T18:53:40.524Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_IN_PROGRESS-1486493620433\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-c0eeff82\t2017-02-07T18:53:40.433Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_IN_PROGRESS-1486493620198\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\t\t2017-02-07T18:53:40.198Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_IN_PROGRESS-1486493620064\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\t\t2017-02-07T18:53:40.064Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_IN_PROGRESS-1486493619555\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:53:39.555Z\tUPDATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_COMPLETE-1486493618921\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-abf68a84\t2017-02-07T18:53:38.921Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_IN_PROGRESS-1486493617814\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-abf68a84\t2017-02-07T18:53:37.814Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_IN_PROGRESS-1486493617528\tAWS::EC2::Subnet\tNginxSubnet2\t\t2017-02-07T18:53:37.528Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\t236b7465-bb3e-4a21-ae94-b673727ba523\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:53:35.914Z\tUPDATE_IN_PROGRESS\tUser Initiated\r\nEVENT\tAZELBFailure\t23e0c371-5845-4635-9d4e-74eea52c0f01\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:47:15.866Z\tUPDATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-DELETE_COMPLETE-1486493234856\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-8ef115c4\t2017-02-07T18:47:14.856Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-DELETE_IN_PROGRESS-1486493198352\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-8ef115c4\t2017-02-07T18:46:38.352Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-DELETE_COMPLETE-1486493197519\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-07a98bf3\t2017-02-07T18:46:37.519Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-DELETE_COMPLETE-1486493197311\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-47e267c8\t2017-02-07T18:46:37.311Z\tDELETE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-DELETE_IN_PROGRESS-1486493196551\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-47e267c8\t2017-02-07T18:46:36.551Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-DELETE_IN_PROGRESS-1486493196417\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-07a98bf3\t2017-02-07T18:46:36.417Z\tDELETE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tc47f6d89-0ef6-4fe5-90b2-fd50d3815862\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:46:29.029Z\tUPDATE_COMPLETE_CLEANUP_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_COMPLETE-1486493188596\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:46:28.596ZUPDATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxELB-UPDATE_IN_PROGRESS-1486493184358\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:46:24.358Z\tUPDATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\t62204d17-1eaa-488d-9986-e0f4fd8c7e42\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:46:22.258Z\tUPDATE_IN_PROGRESS\tUser Initiated\r\nEVENT\tAZELBFailure\tef3e72bd-1631-40ab-a42d-7b55b93e19d6\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:21:22.700Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxELB-CREATE_COMPLETE-1486491682112\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:21:22.112ZCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxELB-CREATE_IN_PROGRESS-1486491678325\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\tAZELBFail-NginxELB-XRS5ZINEOVUBL\t2017-02-07T18:21:18.325Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation-CREATE_COMPLETE-1486491675186\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-cb27c1dd\t2017-02-07T18:21:15.186Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1486491674929\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-cb27c1dd\t2017-02-07T18:21:14.929Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_COMPLETE-1486491674785\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-07a98bf3\t2017-02-07T18:21:14.785Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_COMPLETE-1486491674635\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-47e267c8\t2017-02-07T18:21:14.635Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxRoute-CREATE_COMPLETE-1486491674601\tAWS::EC2::Route\tNginxRoute\tAZELBFailure-NginxRoute-EYEKYDMV09NTV\t2017-02-07T18:21:14.601Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_IN_PROGRESS-1486491674463\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\trtbassoc-07a98bf3\t2017-02-07T18:21:14.463Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxELB-CREATE_IN_PROGRESS-1486491674453\tAWS::ElasticLoadBalancing::LoadBalancer\tNginxELB\t\t2017-02-07T18:21:14.453Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1486491674394\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\t\t2017-02-07T18:21:14.394Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation-CREATE_COMPLETE-1486491674285\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation\trtbassoc-dab1f9422017-02-07T18:21:14.285Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tOutBoundNetworkAclEntry-CREATE_COMPLETE-1486491674235\tAWS::EC2::NetworkAclEntry\tOutBoundNetworkAclEntry\tAZELBFailure-OutBoundNetworkAclEntry-IROZNFFQVEK5U\t2017-02-07T18:21:14.235Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_IN_PROGRESS-1486491674178\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\taclassoc-47e267c8\t2017-02-07T18:21:14.178Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tInboundHTTPNetworkAclEntry-CREATE_COMPLETE-1486491674151\tAWS::EC2::NetworkAclEntry\tInboundHTTPNetworkAclEntry\tAZELBFailure-InboundHTTPNetworkAclEntry-KR4F9KKTJEXAC\t2017-02-07T18:21:14.151Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tInboundSSHNetworkAclEntry-CREATE_COMPLETE-1486491674026\tAWS::EC2::NetworkAclEntry\tInboundSSHNetworkAclEntry\tAZELBFailure-InboundSSHNetworkAclEntry-GJRSG2I4PBBM7\t2017-02-07T18:21:14.026Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxRoute-CREATE_IN_PROGRESS-1486491674019\tAWS::EC2::Route\tNginxRoute\tAZELBFailure-NginxRoute-EYEKYDMV09NTV\t2017-02-07T18:21:14.019Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation2-CREATE_IN_PROGRESS-1486491673842\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation2\t\t2017-02-07T18:21:13.842Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation-CREATE_IN_PROGRESS-1486491673827\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation\trtbassoc-dab1f942\t2017-02-07T18:21:13.827Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tInboundResponsePortsNetworkAclEntry-CREATE_COMPLETE-1486491673801\tAWS::EC2::NetworkAclEntry\tInboundResponsePortsNetworkAclEntry\tAZELBFailure-InboundResponsePortsNetworkAclEntry-ZNCDXGXNXIAHS\t2017-02-07T18:21:13.801Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tOutBoundNetworkAclEntry-CREATE_IN_PROGRESS-1486491673677\tAWS::EC2::NetworkAclEntry\tOutBoundNetworkAclEntry\tAZELBFailure-OutBoundNetworkAclEntry-IROZNFFQVEK5U\t2017-02-07T18:21:13.677Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tSubnetNetworkAclAssociation2-CREATE_IN_PROGRESS-1486491673608\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation2\t\t2017-02-07T18:21:13.608Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxRoute-CREATE_IN_PROGRESS-1486491673558\tAWS::EC2::Route\tNginxRoute\t\t2017-02-07T18:21:13.558Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnetRouteTableAssocaiation-CREATE_IN_PROGRESS-1486491673358\tAWS::EC2::SubnetRouteTableAssociation\tNginxSubnetRouteTableAssocaiation\t\t2017-02-07T18:21:13.358Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tInboundSSHNetworkAclEntry-CREATE_IN_PROGRESS-1486491673188\tAWS::EC2::NetworkAclEntry\tInboundSSHNetworkAclEntry\tAZELBFailure-InboundSSHNetworkAclEntry-GJRSG2I4PBBM7\t2017-02-07T18:21:13.188Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tInboundHTTPNetworkAclEntry-CREATE_IN_PROGRESS-1486491673153\tAWS::EC2::NetworkAclEntry\tInboundHTTPNetworkAclEntry\tAZELBFailure-InboundHTTPNetworkAclEntry-KR4F9KKTJEXAC\t2017-02-07T18:21:13.153Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tInboundResponsePortsNetworkAclEntry-CREATE_IN_PROGRESS-1486491673119\tAWS::EC2::NetworkAclEntry\tInboundResponsePortsNetworkAclEntry\tAZELBFailure-InboundResponsePortsNetworkAclEntry-ZNCDXGXNXIAHS\t2017-02-07T18:21:13.119Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tOutBoundNetworkAclEntry-CREATE_IN_PROGRESS-1486491672959\tAWS::EC2::NetworkAclEntry\tOutBoundNetworkAclEntry\t\t2017-02-07T18:21:12.959Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tLoadBalancerSecurityGroup-CREATE_COMPLETE-1486491672917\tAWS::EC2::SecurityGroup\tLoadBalancerSecurityGroup\tsg-1f69f9b9\t2017-02-07T18:21:12.917Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_COMPLETE-1486491672867\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-8ef115c4\t2017-02-07T18:21:12.867Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tInboundSSHNetworkAclEntry-CREATE_IN_PROGRESS-1486491672600\tAWS::EC2::NetworkAclEntry\tInboundSSHNetworkAclEntry\t\t2017-02-07T18:21:12.600ZCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tInboundResponsePortsNetworkAclEntry-CREATE_IN_PROGRESS-1486491672575\tAWS::EC2::NetworkAclEntry\tInboundResponsePortsNetworkAclEntry\t\t2017-02-07T18:21:12.575Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxSubnet-CREATE_COMPLETE-1486491672391\tAWS::EC2::Subnet\tNginxSubnet\tsubnet-5d6b1338\t2017-02-07T18:21:12.391Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tInboundHTTPNetworkAclEntry-CREATE_IN_PROGRESS-1486491672366\tAWS::EC2::NetworkAclEntry\tInboundHTTPNetworkAclEntry\t\t2017-02-07T18:21:12.366ZCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxRouteTable-CREATE_COMPLETE-1486491672332\tAWS::EC2::RouteTable\tNginxRouteTable\trtb-14f24f1b\t2017-02-07T18:21:12.332Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxNetworkAcl-CREATE_COMPLETE-1486491671633\tAWS::EC2::NetworkAcl\tNginxNetworkAcl\tacl-3fbcf1e2\t2017-02-07T18:21:11.633Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxAttachGateway-CREATE_COMPLETE-1486491671608\tAWS::EC2::VPCGatewayAttachment\tNginxAttachGateway\tAZELBFailure-NginxAttachGateway-890OOKNDMEC11\t2017-02-07T18:21:11.608Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxAttachGateway-CREATE_IN_PROGRESS-1486491671333\tAWS::EC2::VPCGatewayAttachment\tNginxAttachGateway\tAZELBFailure-NginxAttachGateway-890OOKNDMEC11\t2017-02-07T18:21:11.333Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxRouteTable-CREATE_IN_PROGRESS-1486491671159\tAWS::EC2::RouteTable\tNginxRouteTable\trtb-14f24f1b\t2017-02-07T18:21:11.159Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_IN_PROGRESS-1486491671150\tAWS::EC2::Subnet\tNginxSubnet2\tsubnet-8ef115c4\t2017-02-07T18:21:11.150Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnet-CREATE_IN_PROGRESS-1486491671024\tAWS::EC2::Subnet\tNginxSubnet\tsubnet-5d6b1338\t2017-02-07T18:21:11.024Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxRouteTable-CREATE_IN_PROGRESS-1486491670881\tAWS::EC2::RouteTable\tNginxRouteTable\t\t2017-02-07T18:21:10.881Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxNetworkAcl-CREATE_IN_PROGRESS-1486491670833\tAWS::EC2::NetworkAcl\tNginxNetworkAcl\tacl-3fbcf1e2\t2017-02-07T18:21:10.833Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnet2-CREATE_IN_PROGRESS-1486491670822\tAWS::EC2::Subnet\tNginxSubnet2\t\t2017-02-07T18:21:10.822Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxAttachGateway-CREATE_IN_PROGRESS-1486491670763\tAWS::EC2::VPCGatewayAttachment\tNginxAttachGateway\t\t2017-02-07T18:21:10.763Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tLoadBalancerSecurityGroup-CREATE_IN_PROGRESS-1486491670757\tAWS::EC2::SecurityGroup\tLoadBalancerSecurityGroup\tsg-1f69f9b9\t2017-02-07T18:21:10.757ZCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxSubnet-CREATE_IN_PROGRESS-1486491670507\tAWS::EC2::Subnet\tNginxSubnet\t\t2017-02-07T18:21:10.507Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tLoadBalancerSecurityGroup-CREATE_IN_PROGRESS-1486491670448\tAWS::EC2::SecurityGroup\tLoadBalancerSecurityGroup\t\t2017-02-07T18:21:10.448Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxNetworkAcl-CREATE_IN_PROGRESS-1486491670415\tAWS::EC2::NetworkAcl\tNginxNetworkAcl\t\t2017-02-07T18:21:10.415Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxVPC-CREATE_COMPLETE-1486491669922\tAWS::EC2::VPC\tNginxVPC\tvpc-fa19a81f\t2017-02-07T18:21:09.922Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tS3LoggingBucket-CREATE_COMPLETE-1486491669622\tAWS::S3::Bucket\tS3LoggingBucket\tazelbfailure-s3loggingbucket-bdimlu7pwskhr\t2017-02-07T18:21:09.622Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tNginxInternetGateway-CREATE_COMPLETE-1486491669396\tAWS::EC2::InternetGateway\tNginxInternetGateway\tigw-9d3db5db\t2017-02-07T18:21:09.396Z\tCREATE_COMPLETE\r\nEVENT\tAZELBFailure\tS3LoggingBucket-CREATE_IN_PROGRESS-1486491669105\tAWS::S3::Bucket\tS3LoggingBucket\tazelbfailure-s3loggingbucket-bdimlu7pwskhr\t2017-02-07T18:21:09.105ZCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxVPC-CREATE_IN_PROGRESS-1486491668974\tAWS::EC2::VPC\tNginxVPC\tvpc-fa19a81f\t2017-02-07T18:21:08.974Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tNginxInternetGateway-CREATE_IN_PROGRESS-1486491668839\tAWS::EC2::InternetGateway\tNginxInternetGateway\tigw-9d3db5db\t2017-02-07T18:21:08.839Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tAZELBFailure\tS3LoggingBucket-CREATE_IN_PROGRESS-1486491668670\tAWS::S3::Bucket\tS3LoggingBucket\t\t2017-02-07T18:21:08.670Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxVPC-CREATE_IN_PROGRESS-1486491668646\tAWS::EC2::VPC\tNginxVPC\t\t2017-02-07T18:21:08.646Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\tNginxInternetGateway-CREATE_IN_PROGRESS-1486491668594\tAWS::EC2::InternetGateway\tNginxInternetGateway\t\t2017-02-07T18:21:08.594Z\tCREATE_IN_PROGRESS\r\nEVENT\tAZELBFailure\t722628eb-8d1f-4bce-ac2c-bea8f3c6b286\tAWS::CloudFormation::Stack\tAZELBFailure\tarn:aws:cloudformation::000727120439:stack/AZELBFailure/bb2ee0f9-bb19-495a-bd32-faa8ac76d641\t2017-02-07T18:21:08.040Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39009","id":"39009","filename":"aws-elb-multiaz-scalein-scaleout-example.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-07T20:49:11.593-0600","size":81939,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39009/aws-elb-multiaz-scalein-scaleout-example.txt"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39010","id":"39010","filename":"cfn-elb-multiple-az-resource-vpc-template.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-07T20:49:11.547-0600","size":6664,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39010/cfn-elb-multiple-az-resource-vpc-template.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39011","id":"39011","filename":"cfn-elb-resource-vpc-template.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-07T20:49:11.391-0600","size":5705,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39011/cfn-elb-resource-vpc-template.json"}],"aggregatetimeestimate":null,"summary":"Availability Zone scaling issues with ELB","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i042hj:","customfield_10000":"3_*:*_1_*:*_9175869_*|*_10000_*:*_1_*:*_7448924_*|*_10001_*:*_1_*:*_77121068_*|*_10003_*:*_1_*:*_2311578018_*|*_10006_*:*_1_*:*_0","customfield_10001":"2017-02-08T16:11:17.311-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["hspencer(hspencer)","lbiasi(lbiasi)","spark(spark)"],"customfield_10116":null,"customfield_10117":null,"environment":"Eucalyptus VPC cloud with multiple AZs","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503/comment/117212","id":"117212","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Looking at the SWF workflow for the failed ELB, I noticed that there was only one {{EnableAvailabilityZone}} workflow execution. Shouldn't there have been two if the ELB tries to re-enable the AZ?:\r\n{code}\r\n[root@h-04 ~]# aws --endpoint-url http://simpleworkflow.e-32.autoqa.qa1.eucalyptus-systems.com:8773/ swf list-closed-workflow-executions --type-filter name=EnableAvailabilityZone,version=1.0 --domain LoadbalancingDomain --tag-filter tag=\"loadbalancer:AZELBFail-NginxELB-XRS5ZINEOVUBL\" --profile elb-admin\r\n{\r\n    \"executionInfos\": [\r\n        {\r\n            \"closeTimestamp\": 1486491678.112,\r\n            \"workflowType\": {\r\n                \"version\": \"1.0\",\r\n                \"name\": \"EnableAvailabilityZone\"\r\n            },\r\n            \"startTimestamp\": 1486491676.594,\r\n            \"closeStatus\": \"COMPLETED\",\r\n            \"executionStatus\": \"CLOSED\",\r\n            \"execution\": {\r\n                \"workflowId\": \"d8d76f78-973e-4204-bf07-cc0d5c384d08\",\r\n                \"runId\": \"93f4fedc-20bc-43fc-a689-3de5237536af\"\r\n            },\r\n            \"cancelRequested\": false,\r\n            \"tagList\": [\r\n                \"account:000727120439\",\r\n                \"loadbalancer:AZELBFail-NginxELB-XRS5ZINEOVUBL\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-07T14:21:29.665-0600","updated":"2017-02-07T14:21:29.665-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503/comment/117239","id":"117239","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark]/[~ethomas],\r\n\r\nI attached the stack events from the test I ran on AWS - file {{aws-elb-multiaz-scalein-scaleout-example.txt}}.  I also added the templates I used as well that (I removed the bucket creation and the access log configuration).  In short, it worked no problem on AWS, and the AZs stayed the same.  Hope this helps.  Let me know if you need any additional information.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-07T20:51:21.255-0600","updated":"2017-02-07T20:51:21.255-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503/comment/117269","id":"117269","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"Fix in maint-4.4","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-02-08T16:11:17.311-0600","updated":"2017-02-08T16:11:17.311-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503/comment/118707","id":"118707","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.4.0-0.25812.163.20170303gitb711a30.el7}}\r\n\r\n*Steps*\r\n\r\n# Deployed Eucalyptus VPC multi-cluster cloud - [hspencer-529-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/529/]\r\n{code}\r\n[root@a-34-l ~]# euca-describe-availability-zones\r\nAVAILABILITYZONE\tblack-dollar\tavailable\r\nAVAILABILITYZONE\tblack-market\tavailable\r\nAVAILABILITYZONE\tport-of-miami\tavailable\r\n{code}\r\n# Created non-eucalyptus account (example {{engineering}}) via {{euare-accountcreate}}\r\n# Using linked {{cfn-elb-multiple-az-resource-vpc-template.json}}, create multiple zone ELB:\r\n{code}\r\n[root@a-34-l ~]# euform-create-stack AZELBFailure --template-file cfn-elb-multiple-az-resource-vpc-template.json --region eng-admin@\r\narn:aws:cloudformation::000225068559:stack/AZELBFailure/1b718ef6-b985-4631-993d-a20557064576\r\n[root@a-34-l ~]# euform-describe-stacks --region eng-admin@\r\nSTACK\tAZELBFailure\tCREATE_COMPLETE\t\tCloudFormation template to deploy a multiple AZ ELB on Eucalyptus VPC\t2017-03-07T15:48:45.422Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-tny0mcojjlsf4\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-GMGQI15DCRGTP-000225068559.lb.d-25.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n# List ASG under {{(eucalyptus)loadbalancing}} account:\r\n{code}\r\n[root@a-34-l ~]# euscale-describe-auto-scaling-groups --region elb-admin@\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\tblack-dollar\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-06b6e656\tblack-dollar\tInService\tHealthy\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\r\nTAG\tauto-scaling-group\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tservice-type\tloadbalancing\ttrue\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market-28f4716f\tblack-market\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-ed0509e2\tblack-market\tInService\tHealthy\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market-28f4716f\r\n{code}\r\n# Using linked {{cfn-elb-resource-vpc-template.json}}, update deployed stack:\r\n{code}\r\n[root@a-34-l ~]# euform-update-stack AZELBFailure --template-file cfn-elb-resource-vpc-template.json --region eng-admin@\r\narn:aws:cloudformation::000225068559:stack/AZELBFailure/1b718ef6-b985-4631-993d-a20557064576\r\n[root@a-34-l ~]# euform-describe-stacks --region eng-admin@\r\nSTACK\tAZELBFailure\tUPDATE_COMPLETE\t\tCloudFormation template to create an ELB access logging in Eucalyptus VPC\t2017-03-07T15:48:45.422Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-tny0mcojjlsf4\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-GMGQI15DCRGTP-000225068559.lb.d-25.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n# List ASG under {{(eucalyptus)loadbalancing}} account:\r\n{code}\r\n[root@a-34-l ~]# euscale-describe-auto-scaling-groups --region elb-admin@\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\tblack-dollar\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-06b6e656\tblack-dollar\tInService\tHealthy\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\r\nTAG\tauto-scaling-group\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tservice-type\tloadbalancing\ttrue\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market-28f4716f\tblack-market\t\t0\t0\t0\tDefault\r\nTAG\tauto-scaling-group\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market\tservice-type\tloadbalancing\ttrue\r\n{code}\r\n# Using linked {{cfn-elb-multiple-az-resource-vpc-template.json}} template, update the stack:\r\n{code}\r\n[root@a-34-l ~]# euform-update-stack AZELBFailure --template-file cfn-elb-multiple-az-resource-vpc-template.json --region eng-admin@\r\narn:aws:cloudformation::000225068559:stack/AZELBFailure/1b718ef6-b985-4631-993d-a20557064576\r\n[root@a-34-l ~]# euform-describe-stacks --region eng-admin@\r\nSTACK\tAZELBFailure\tUPDATE_COMPLETE\t\tCloudFormation template to deploy a multiple AZ ELB on Eucalyptus VPC\t2017-03-07T15:48:45.422Z\r\nOUTPUT\tAccessLogBucket\tazelbfailure-s3loggingbucket-tny0mcojjlsf4\r\nOUTPUT\tELBURL\thttp://AZELBFail-NginxELB-GMGQI15DCRGTP-000225068559.lb.d-25.autoqa.qa1.eucalyptus-systems.com\r\n{code}\r\n# List ASG under {{(eucalyptus)loadbalancing}} account:\r\n{code}\r\n[root@a-34-l ~]# euscale-describe-auto-scaling-groups --region elb-admin@\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\tblack-dollar\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-06b6e656\tblack-dollar\tInService\tHealthy\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar-a5ea05e7\r\nTAG\tauto-scaling-group\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-dollar\tservice-type\tloadbalancing\ttrue\r\nAUTO-SCALING-GROUP\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market-28f4716f\tblack-market\t\t1\t1\t1\tDefault\r\nINSTANCE\ti-c7a6af95\tblack-market\tInService\tHealthy\tlc-euca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market-28f4716f\r\nTAG\tauto-scaling-group\teuca-internal-elb-000225068559-AZELBFail-NginxELB-GMGQI15DCRGTP-black-market\tservice-type\tloadbalancing\ttrue\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-07T10:17:35.308-0600","updated":"2017-03-07T10:17:35.308-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54503/comment/119387","id":"119387","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"body":"Moving 4.4.0 Issues from Release Pending to Resolved","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"created":"2017-03-15T23:15:39.273-0500","updated":"2017-03-15T23:15:39.273-0500"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13205/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}