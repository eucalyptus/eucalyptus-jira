{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13549","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549","key":"EUCA-2348","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10201","id":"10201","description":"Eucalyptus 3.1.1","name":"3.1.1","archived":false,"released":true,"releaseDate":"2012-08-24"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10208","value":"CentOS 5","id":"10208"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2012-06-18T01:44:35.692-0500","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10203","value":"Xen","id":"10203"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2348/watchers","watchCount":6,"isWatching":false},"lastViewed":null,"created":"2012-06-15T13:30:42.110-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2012-06-16T18:10:58.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10005","id":"10005","description":"Eucalyptus 3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"updated":"2013-01-09T19:50:18.571-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10015","id":"10015","name":"Walrus"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Bundle windows instance test is failing. Took a look with Zach, likely due to user not found related exception below...\r\n{code}Fri Jun 15 05:04:58 2012 ERROR DatabaseAuthProvider    | java.util.NoSuchElementException: No com.eucalyptus.auth.entities.UserEntity with userId=eucalyptus\r\njava.util.NoSuchElementException: No com.eucalyptus.auth.entities.UserEntity with userId=eucalyptus\r\n\tat com.eucalyptus.auth.DatabaseAuthUtils.getUnique(DatabaseAuthUtils.java:278)\r\n\tat com.eucalyptus.auth.DatabaseAuthProvider.lookupUserById(DatabaseAuthProvider.java:130)\r\n\tat com.eucalyptus.auth.Accounts.lookupUserById(Accounts.java:103)\r\n\tat edu.ucsb.eucalyptus.cloud.ws.WalrusManager.createBucket(WalrusManager.java:441)\r\n\tat edu.ucsb.eucalyptus.cloud.ws.WalrusControl.CreateBucket(WalrusControl.java:271)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:178)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService.doSend(SedaService.java:234)\r\n\tat org.mule.service.AbstractService.sendEvent(AbstractService.java:510)\r\n\tat org.mule.module.client.MuleClient.sendDirect(MuleClient.java:352)\r\n\tat com.eucalyptus.context.ServiceContext.send(ServiceContext.java:130)\r\n\tat com.eucalyptus.context.ServiceContext.send(ServiceContext.java:119)\r\n\tat com.eucalyptus.util.async.AsyncRequests.sendSync(AsyncRequests.java:113)\r\n\tat com.eucalyptus.vm.Bundles.verifyBucket(Bundles.java:224)\r\n\tat com.eucalyptus.vm.Bundles.create(Bundles.java:167)\r\n\tat com.eucalyptus.vm.VmControl$4.apply(VmControl.java:614)\r\n\tat com.eucalyptus.vm.VmControl$4.apply(VmControl.java:599)\r\n\tat com.eucalyptus.entities.Entities$TransactionalFunction.apply(Entities.java:899)\r\n\tat com.eucalyptus.vm.VmControl.bundleInstance(VmControl.java:643)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:178)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService$ComponentStageWorker.run(SedaService.java:533)\r\n\tat org.mule.work.WorkerContext.run(WorkerContext.java:310)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\r\n\tat java.lang.Thread.run(Thread.java:679)\r\nFri Jun 15 05:04:58 2012 ERROR WalrusManager           | com.eucalyptus.auth.AuthException: No such user\r\ncom.eucalyptus.auth.AuthException: No such user\r\n\tat com.eucalyptus.auth.DatabaseAuthProvider.lookupUserById(DatabaseAuthProvider.java:136)\r\n\tat com.eucalyptus.auth.Accounts.lookupUserById(Accounts.java:103)\r\n\tat edu.ucsb.eucalyptus.cloud.ws.WalrusManager.createBucket(WalrusManager.java:441)\r\n\tat edu.ucsb.eucalyptus.cloud.ws.WalrusControl.CreateBucket(WalrusControl.java:271)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:178)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService.doSend(SedaService.java:234)\r\n\tat org.mule.service.AbstractService.sendEvent(AbstractService.java:510)\r\n\tat org.mule.module.client.MuleClient.sendDirect(MuleClient.java:352)\r\n\tat com.eucalyptus.context.ServiceContext.send(ServiceContext.java:130)\r\n\tat com.eucalyptus.context.ServiceContext.send(ServiceContext.java:119)\r\n\tat com.eucalyptus.util.async.AsyncRequests.sendSync(AsyncRequests.java:113)\r\n\tat com.eucalyptus.vm.Bundles.verifyBucket(Bundles.java:224)\r\n\tat com.eucalyptus.vm.Bundles.create(Bundles.java:167)\r\n\tat com.eucalyptus.vm.VmControl$4.apply(VmControl.java:614)\r\n\tat com.eucalyptus.vm.VmControl$4.apply(VmControl.java:599)\r\n\tat com.eucalyptus.entities.Entities$TransactionalFunction.apply(Entities.java:899)\r\n\tat com.eucalyptus.vm.VmControl.bundleInstance(VmControl.java:643)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:616)\r\n\tat org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:147)\r\n\tat org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:178)\r\n\tat org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:50)\r\n\tat org.mule.component.DefaultLifecycleAdapter.intercept(DefaultLifecycleAdapter.java:202)\r\n\tat org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:82)\r\n\tat org.mule.component.AbstractJavaComponent.doOnCall(AbstractJavaComponent.java:73)\r\n\tat org.mule.component.AbstractComponent.onCall(AbstractComponent.java:87)\r\n\tat org.mule.model.seda.SedaService$ComponentStageWorker.run(SedaService.java:533)\r\n\tat org.mule.work.WorkerContext.run(WorkerContext.java:310)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:665)\r\n\tat edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:690)\r\n\tat java.lang.Thread.run(Thread.java:679)\r\nCaused by: java.util.NoSuchElementException: No com.eucalyptus.auth.entities.UserEntity with userId=eucalyptus\r\n\tat com.eucalyptus.auth.DatabaseAuthUtils.getUnique(DatabaseAuthUtils.java:278)\r\n\tat com.eucalyptus.auth.DatabaseAuthProvider.lookupUserById(DatabaseAuthProvider.java:130)\r\n\t... 42 more\r\nFri Jun 15 05:04:58 2012  INFO Exceptions              | Unable to create bucket: win11508\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Windows bundle instance failing-NoSuchElementException (user)","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_38158_*|*_10001_*:*_1_*:*_12655_*|*_10000_*:*_1_*:*_130007371_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_86761603_*|*_10007_*:*_1_*:*_13839","customfield_12100":"0|i01cw7:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2012-06-15T13:57:36.388-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["agrimm(agrimm)","mclark(mclark)","oskar.senft(oskar.senft)","viglesias(viglesias)","zhill(zhill)"],"customfield_10116":null,"environment":"{code}\r\n\r\ninternal#8f65a05b43c21b51c7aba92a294b47e2883f445d\r\n\r\nNETWORK\tMANAGED\r\nCONFIG\r\nmachine00\tCENTOS\t5.8\t64\tREPO\t[CC00 CLC SC00 WS]\r\nmachine01\tCENTOS\t5.8\t64\tREPO\t[NC00]\r\nEND_CONFIG\r\n\r\nNo SAN\r\n\r\n{code}","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2348/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28204","id":"28204","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"The failing call is a reporting call to lookup the user based on userID, which in this case is 'eucalyptus'. Need to confirm that the NC->Walrus authentication handoff (from NC creds to the effective userid) is correct and that the eucalyptus/admin user is simply an anomaly in that it has no user record. If that is the case we just need to decide how to handle reporting when the user is the eucalyptus admin.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-15T13:57:36.388-0500","updated":"2012-06-15T13:57:36.388-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28207","id":"28207","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I had a look at the eucalyptus_walrus DB and found that it created a record in the buckets table, but instead of setting the user_id to the requesting user, it set it to 'eucalyptus'.\r\n\r\nI didn't spend enough time to really understand what's going on, but this roughly reminds me of problems we had in our code base where we execute specific parts of the code in the \"super user\" context (which I guess is 'eucalyptus' here) to avoid security checks in parts of the code. This then causes then any \"get current user\" queries to return the ID of the super user, which then again would cause a problem as this. Really, I'm just guessing!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-06-15T16:59:01.427-0500","updated":"2012-06-15T16:59:01.427-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28211","id":"28211","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"[~oskar.senft], you are pretty close here.  I'm probably not going to explain this entirely correctly, but I'll give it a shot:\r\n\r\nThere are currently two representations of system admin in the eucalyptus code:\r\n\r\n1) The hard-coded SYSTEM_ACCOUNT and SYSTEM_USER values in com.eucalyptus.auth.principal.Account and com.eucalyptus.auth.principal.Principals -- these are intended mostly for bootstrapping and inter-component communication (the sort of \"super user\" context which you describe), and are not really intended to be referenced in the databases.  The account has a hard-coded account ID of 0, and the name and user ID of SYSTEM_USER are both \"eucalyptus\" (this is where the trouble starts).\r\n\r\n2) The system admin account named \"eucalyptus\" and the \"admin\" user of this account.  These are written to the database with a unique account id and user id, which are generated the first time the cloud starts.  These are the credentials that you use when interacting with the web UI or the API as a system admin.\r\n\r\nIt seems that what's happening here is that the \"bundle instance\" process is happening as the SYSTEM_USER.  I think that the creation of resources (e.g., the createBucket call) should be delegating to the eucalyptus/admin account which exists in the database, but this is where I have to defer to someone who knows the code better than I do.  If it were using these, it would be looking up a user ID like \"U5Z4GU7L4SQB2HNWFKJTR\" instead of the hard-coded \"eucalyptus\".\r\n\r\nThe exact error that you're seeing is caused by the fact that the \"lookupUserById\" method is *only* able to find users which exist in the database; the SYSTEM_USER is outside the scope of the search (and probably should be, since it should never actually own resources in the db).\r\n\r\n[~decker] can explain further after he's had time to look at it.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-06-15T23:06:57.498-0500","updated":"2012-06-15T23:06:57.498-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28214","id":"28214","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I dug into this a bit deeper. I narrowed it down to this part of the call stack:\r\n        at com.eucalyptus.context.ServiceContext.send(ServiceContext.java:130)\r\n        at com.eucalyptus.context.ServiceContext.send(ServiceContext.java:119)\r\n        at com.eucalyptus.util.async.AsyncRequests.sendSync(AsyncRequests.java:113)\r\n\r\nWhat's happening here is that in my case AyncRequests.sendSync executes\r\n    if ( config.isVmLocal( ) ) {\r\n      return ServiceContext.send( config.getComponentId( ), msg );\r\n\r\nI guess that's happening because I have all services on the same box for testing.\r\n\r\nWe then end up in ServiceContext.java:127 where we call\r\n    ctx = Contexts.createWrapped( dest, ( BaseMessage ) msg );\r\n\r\nand that's where it starts to go wrong. The Contexts.createWrapped eventually calls\r\n    Context ctx = new Context( dest, msg );\r\n\r\nwhich in turns sets\r\n    this.user = Principals.systemUser( );\r\n\r\nI'm not entirely sure (thanks to no comments in the code) what Contexts.createWrapped is supposed to do. \r\n\r\n1) Either it actually is meant to change the user to the system user (which means that the subsequent code in Walrus is making the wrong assumptions)\r\n2) Or the Contexts.createWrapped should actually set the Context.user to the current user instead of the systemUser (which obviously means that the subsequent code in Walrus is correct).\r\n\r\nAny opinions?\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-06-16T00:09:14.202-0500","updated":"2012-06-16T00:09:14.202-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28218","id":"28218","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Yep, so this is all correct. The contextWrapper handles assigning a user to an incoming request based on the credentials passed in the message. If the eucalyptus admin's credentials are found it sets the user to the super user. The error is coming from the event reporting and accounting code that is trying to figure out which user to account the storage usage to. I have a fix ready to be tested that simply does a detection of this case using ctx.hasAdministrativePrivileges() that will detect this condition and can do a proper lookup of the admin credentials. Normal users should never see this case but the QA test runs as the eucalyptus admin rather than a regular user so it hits this code.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-16T13:28:41.407-0500","updated":"2012-06-16T13:28:41.407-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28219","id":"28219","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"Hmm ... I was using the \"admin\" user which is created during initialization, so a \"regular\" user as far as I can tell. Or am I wrong there?\r\n\r\nIf you could share the fix, I'd be happy to test in my scenario.\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-06-16T14:29:08.182-0500","updated":"2012-06-16T14:29:08.182-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28226","id":"28226","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Yes, I mis-spoke. The NC is doing the operation so the identity is mapped to the eucalyptus system user. The 'eucalyptus/admin' user (the one created at initialization) is not a regular user, but is actually considered the system user in most cases even though it does have an access key and secret key. I've made a fix and it is currently in testing that should address both cases. First and foremost, it will not allow an exception in the reporting of a walrus event to actually affect the operation itself. It should also get around the current problem of doing an Accounts.lookupX() since that information is already included in the message context.\r\n\r\nThe fix is in testing for both the general test sequence as well as a sequence which will hit the windows instance bundle directly. Should have results in a couple of hours.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-16T19:03:40.445-0500","updated":"2012-06-16T19:03:40.445-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28228","id":"28228","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Ah, yes Oskar, you are looking at a different code path than I was. The NC also does a bucket check when it gets the message to bundle the running instance, so there are apparently two bucket creation paths. From the NC it should actually set the id correctly, but the resolution to this issue is the same. The un-necessary Account lookups can be avoided and the info taken from the context itself.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-16T20:07:55.525-0500","updated":"2012-06-16T20:07:55.525-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28229","id":"28229","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I'm not sure if I can follow. My analysis was on exactly the same code path that was reported in the issue description. As far as I remember from reviewing the code, the CLC tries to create the bucket before it does anything else, i.e. before it talks to the NC. Are you sure the NC (I assume you mean Node Controller) tries to create a bucket, too? I don't remember having seen code for this, but I might simply be wrong.\r\n\r\nAs I mentioned before, the reason why we end up with \"Principals.systemUser()\" in the Context is because we call \"Contexts.createWrapped\" if \"config.isVmLocal( )\" is true. I had a debugger attached and could see exactly how we got into the situation.\r\n\r\nI didn't look at it again today, but from what I remember, I do agree with you that WalrusManager.createBucket could probably simply get some information out of the request instead of going to the Context (which might be \"wrong\" at that point). Is that what you meant?\r\n\r\nDo you know what \"Contexts.createWrapped\" is supposed to achieve and why we use it in the \"config.isVmLocal()\" case? Knowing that would at least help me to understand why it's doing what it's doing :-D","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-06-16T22:27:59.615-0500","updated":"2012-06-16T22:27:59.615-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28230","id":"28230","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Oskar, excellent analysis. I was thinking about the bundle path from the NC, but there is also a create bucket that occurs on the CLC that I previously didn't know about (I'm a Walrus guy, not a CLC guy). That is the path in the stack trace and the one you followed. I looked into that path more and have more info that will give more info about what is happening.\r\n\r\nFirst, Contexts.createWrapped() creates a new message context directly and correlates it with the message about to be sent synchronously (yes, the AsyncRequest name is a misnomer in this case). The context is stored and then looked up later when the receiving component (Walrus) looks it up again based on the message's correlationId. If the message is not in the local JVM then it must travel a different path to be properly marshalled, serialized, etc and put on the wire and the context will be set on the ingress of the message at the receiving JVM.\r\n\r\nIn this particular case using Principals.systemUser() is the correct action for the CLC to take. During the bundle-instance operation it runs a step to verify that the bucket that the user specified to put the image is valid (that it doesn't exist and that the system can create it). In Eucalyptus, to perform the verification step the CLC will try to create the bucket and then delete it (see Bundles.verifyBucket() in Bundles.java). This is where the failure in Walrus occurs. It is actually just a test creation of the bucket by the system, so the system credential is correct.\r\n\r\nThe actual bucket is created by the Node Controller just before the upload of the bundled instance takes place. That code path uses a slightly different message ingress path that sets up the message context in a different way because it comes off the wire through the full HTTP messaging stack rather than arriving directly in the message queue.\r\n\r\nWhew... that was long. But I hope I helped clarify some things. Yes, our code has pretty much zero comments so it's a steep learning curve (I know because I've only worked at Eucalyptus since January).\r\n\r\nYou can access the fix we're testing in the testing branch of the code. I just committed it to the testing branch commit id: 6e89195acc459a9722ea27d4c1840cff1b4d98d4\r\n\r\nIf it doesn't show up on github, let me know and I'll attach a patch file for you, Oskar. Thanks for all your work on this.\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-17T01:31:15.671-0500","updated":"2012-06-17T01:31:15.671-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28231","id":"28231","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Fix is in the testing branch","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-17T01:38:34.124-0500","updated":"2012-06-17T01:38:34.124-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28233","id":"28233","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"body":"I just tried it out and it got past the reported problem. I can also confirm that it correctly created and uploaded the new bundle, so it's working fine now. The only that that surprised me was that it didn't automatically register the bundle as a new image. But that might simply be something for the documentation as doing that manually worked fine.\r\n\r\nThank you for the quick turnaround!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=oskar.senft","name":"oskar.senft","key":"oskar.senft","accountId":"557058:4405d91a-fbc0-4ad0-88ce-ff9cfbc27aea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/49cc2769ac0bcd18add2928e830c90bd?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Oskar Senft","active":false,"timeZone":"America/New_York"},"created":"2012-06-17T16:17:46.318-0500","updated":"2012-06-17T21:24:39.368-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28301","id":"28301","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified that we can now bundle instances properly as the admin user. Used master packages for verification. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-18T01:44:35.730-0500","updated":"2012-06-18T01:44:35.730-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13549/comment/28546","id":"28546","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Oskar, thanks for helping find/test this. Yes, you have to manually register the bundle once it is created, which is not an obvious step since it relies on the prefix and bucket you used for the bundle-instance operation.\r\n\r\nThanks again!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-06-22T18:44:17.107-0500","updated":"2012-06-22T18:44:17.107-0500"}],"maxResults":14,"total":14,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}