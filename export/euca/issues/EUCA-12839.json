{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"49297","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49297","key":"EUCA-12839","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@5daee8c1[id=144,rapidViewId=118,state=CLOSED,name=4.4.0 Sprint 5,goal=,startDate=2016-12-05T23:35:25.781Z,endDate=2017-01-05T05:35:00.000Z,completeDate=2017-01-05T17:09:22.486Z,sequence=144]"],"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2017-06-13T13:45:42.818-0500","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12839/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2016-10-14T16:55:05.929-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=7, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":7,\"lastUpdated\":\"2016-12-08T19:56:23.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":7,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2017-06-13T13:45:42.826-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"We should update the group, role and user resource types with support for custom names.\r\n\r\n{quote}\r\nAWS CloudFormation updated the following resources:\r\n\r\nAWS::IAM::Group, AWS::IAM::Role, AWS::IAM::User\r\n\r\nUse the name properties to specify a custom name for AWS Identity and Access Management (IAM) resources.\r\n{quote}\r\n\r\nhttp://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/ReleaseHistory.html\r\n\r\n{quote}\r\nGroupName\r\n\r\nA name for the IAM group. For valid values, see the GroupName parameter for the CreateGroup action in the IAM API Reference. If you don't specify a name, AWS CloudFormation generates a unique physical ID and uses that ID for the group name.\r\n{quote}\r\n\r\nhttp://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-group.html\r\n\r\n{quote}\r\nRoleName\r\n\r\nA name for the IAM role. For valid values, see the RoleName parameter for the CreateRole action in the IAM API Reference. If you don't specify a name, AWS CloudFormation generates a unique physical ID and uses that ID for the group name.\r\n{quote}\r\n\r\nhttp://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-iam-role.html\r\n\r\n{quote}\r\nUserName\r\n\r\nA name for the IAM user. For valid values, see the UserName parameter for the CreateUser action in the IAM API Reference. If you don't specify a name, AWS CloudFormation generates a unique physical ID and uses that ID for the user name.\r\n{quote}\r\n\r\nhttp://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html","customfield_13200":null,"customfield_11300":"EUCA-12994","customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"CloudFormation IAM resource support for custom names","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i03yg7:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_290624438_*|*_5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_515929557_*|*_10001_*:*_2_*:*_3978022378_*|*_10003_*:*_1_*:*_16112860526","customfield_10001":"2016-12-08T15:50:05.537-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["ethomas(ethomas)","lbiasi(lbiasi)","sjones(sjones)","tony(tony)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49297/comment/114139","id":"114139","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"body":"Some manual test cases:  Start with the following template (taken from the update stack test case for AWS::IAM::User)\r\n\r\n{code}\r\n{\r\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\r\n  \"Parameters\":{\r\n    \"Password\":{\r\n      \"NoEcho\":\"true\",\r\n      \"Type\":\"String\",\r\n      \"Description\":\"New account password\",\r\n      \"MinLength\":\"1\",\r\n      \"MaxLength\":\"41\"\r\n    }\r\n  },\r\n  \"Resources\":{\r\n    \"Group1\":{\r\n      \"Type\":\"AWS::IAM::Group\",\r\n      \"Properties\":{\r\n      }\r\n    },\r\n    \"Group2\":{\r\n      \"Type\":\"AWS::IAM::Group\"\r\n    },\r\n    \"User\":{\r\n      \"Type\":\"AWS::IAM::User\",\r\n      \"Properties\":{\r\n        \"LoginProfile\":{\r\n          \"Password\":{\r\n            \"Ref\":\"Password\"\r\n          }\r\n        },\r\n        \"Groups\":[\r\n          {\r\n            \"Ref\":\"Group1\"\r\n          },\r\n          {\r\n            \"Ref\":\"Group2\"\r\n          }\r\n        ],\r\n        \"Policies\":[\r\n          {\r\n            \"PolicyName\":\"Policy2\",\r\n            \"PolicyDocument\":{\r\n              \"Statement\":[\r\n                {\r\n                  \"Effect\":\"Allow\",\r\n                  \"Action\":[\r\n                    \"cloudformation:Describe*\",\r\n                    \"cloudformation:List*\",\r\n                    \"cloudformation:Get*\"\r\n                  ],\r\n                  \"Resource\":\"*\"\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"Outputs\" : {\r\n    \"UserRef\" : {\"Value\" : {\"Ref\":\"User\"}},\r\n    \"UserArn\" : {\"Value\" : {\"Fn::GetAtt\":[\"User\",\"Arn\"]}}\r\n  }\r\n}\r\n{code}\r\n\r\n1) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_IAM to run with resource types 'AWS::IAM::User' and 'AWS::IAM::Group'.\r\n2) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_IAM to run with resource types 'AWS::IAM::User' and 'AWS::IAM::Group'\r\n3) Verify that to create this stack you need to run --capabillities CAPABILITY_IAM as an option.  (also need -pPassword=...)\r\n4) Verify that using --capabilities CAPABILITY_NAMED_IAM instead of --capabilities CAPABILITY_IAM as an option also works to create this stack.\r\n5) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_IAM or --capabilities CAPABILITY_NAMED_IAM is required to update the stack.\r\n\r\nAdd the following property to the 'User' resource in the above template\r\n{code}\r\n        \"UserName\" : \"bob\",\r\n{code}\r\n\r\n6) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_NAMED_IAM to run with resource types 'AWS::IAM::User' and 'AWS::IAM::Group'.\r\n7) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_NAMED_IAM to run with resource types 'AWS::IAM::User' and 'AWS::IAM::Group'\r\n8) Verify that to create this stack you need to run --capabillities CAPABILITY_NAMED_IAM as an option.  (also need -pPassword=...) (also verify that the created user is named 'bob')\r\n9) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_NAMED_IAM is required to update the stack.  (Need to delete the previous stack from #8 otherwise a duplicate user error will occur)\r\n10) Start with the original stack, update to the version with a named user, and update back to the original stack.  Note that whenever the UserName is in the 'new' template CAPABILITY_NAMED_IAM is required, but only CAPABILITY_IAM is required if the 'new' template does not have a named user.\r\n\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T15:50:05.537-0600","updated":"2016-12-08T15:50:05.537-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49297/comment/114142","id":"114142","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"body":"Some more manual test cases:  Start with the following template (taken from the update stack test case for AWS::IAM::Group)\r\n\r\n{code}\r\n{\r\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\r\n  \"Resources\":{\r\n    \"Group1\":{\r\n      \"Type\":\"AWS::IAM::Group\",\r\n      \"Properties\":{\r\n        \"Path\":\"/myapplication/\",\r\n        \"Policies\":[\r\n          {\r\n            \"PolicyName\":\"myapppolicy0\",\r\n            \"PolicyDocument\":{\r\n              \"Version\":\"2012-10-17\",\r\n              \"Statement\":[\r\n                {\r\n                  \"Effect\":\"Allow\",\r\n                  \"Action\":[\r\n                    \"ec2:*\"\r\n                  ],\r\n                  \"Resource\":[\r\n                    \"*\"\r\n                  ]\r\n                },\r\n                {\r\n                  \"Effect\":\"Deny\",\r\n                  \"Action\":[\r\n                    \"s3:*\"\r\n                  ],\r\n                  \"NotResource\":[\r\n                    \"*\"\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"PolicyName\":\"myapppolicy1\",\r\n            \"PolicyDocument\":{\r\n              \"Version\":\"2012-10-18\",\r\n              \"Statement\":[\r\n                {\r\n                  \"Effect\":\"Allow\",\r\n                  \"Action\":[\r\n                    \"cloudwatch:*\"\r\n                  ],\r\n                  \"Resource\":[\r\n                    \"*\"\r\n                  ]\r\n                },\r\n                {\r\n                  \"Effect\":\"Deny\",\r\n                  \"Action\":[\r\n                    \"sqs:*\"\r\n                  ],\r\n                  \"NotResource\":[\r\n                    \"*\"\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            \"PolicyName\":\"myapppolicy2\",\r\n            \"PolicyDocument\":{\r\n              \"Version\":\"2012-10-19\",\r\n              \"Statement\":[\r\n                {\r\n                  \"Effect\":\"Allow\",\r\n                  \"Action\":[\r\n                    \"autoscaling:*\"\r\n                  ],\r\n                  \"Resource\":[\r\n                    \"*\"\r\n                  ]\r\n                },\r\n                {\r\n                  \"Effect\":\"Deny\",\r\n                  \"Action\":[\r\n                    \"sns:*\"\r\n                  ],\r\n                  \"NotResource\":[\r\n                    \"*\"\r\n                  ]\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"Outputs\":{\r\n    \"Group1Ref\":{\r\n      \"Value\":{\r\n        \"Ref\":\"Group1\"\r\n      }\r\n    },\r\n    \"Group1Arn\":{\r\n      \"Value\":{\r\n        \"Fn::GetAtt\":[\r\n          \"Group1\",\r\n          \"Arn\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code}\r\n\r\n1) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_IAM to run with resource types ''AWS::IAM::Group'.\r\n2) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_IAM to run with resource types 'AWS::IAM::Group'\r\n3) Verify that to create this stack you need to run --capabillities CAPABILITY_IAM as an option. \r\n4) Verify that using --capabilities CAPABILITY_NAMED_IAM instead of --capabilities CAPABILITY_IAM as an option also works to create this stack.\r\n5) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_IAM or --capabilities CAPABILITY_NAMED_IAM is required to update the stack.\r\n\r\nAdd the following property to the 'Group1' resource in the above template\r\n{code}\r\n        \"GroupName\" : \"bob\",\r\n{code}\r\n\r\n6) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_NAMED_IAM to run with resource type 'AWS::IAM::Group'.\r\n7) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_NAMED_IAM to run with resource type 'AWS::IAM::Group'\r\n8) Verify that to create this stack you need to run --capabillities CAPABILITY_NAMED_IAM as an option.  \r\n9) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_NAMED_IAM is required to update the stack.  (Need to delete the previous stack from #8 otherwise a duplicate group error will occur)\r\n10) Start with the original stack, update to the version with a named group, and update back to the original stack.  Note that whenever the GroupName is in the 'new' template CAPABILITY_NAMED_IAM is required, but only CAPABILITY_IAM is required if the 'new' template does not have a named group.\r\n\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T16:11:36.209-0600","updated":"2016-12-08T16:11:36.209-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49297/comment/114152","id":"114152","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"body":"Final set of manual test cases:  Start with the following template (taken from the update stack test case for AWS::IAM::Role)\r\n\r\n{code}\r\n{\r\n  \"AWSTemplateFormatVersion\":\"2010-09-09\",\r\n  \"Resources\":{\r\n    \"Role1\":{\r\n      \"Type\":\"AWS::IAM::Role\",\r\n      \"Properties\":{\r\n        \"AssumeRolePolicyDocument\":{\r\n          \"Version\":\"2012-10-17\",\r\n          \"Statement\":[\r\n            {\r\n              \"Effect\":\"Allow\",\r\n              \"Principal\":{\r\n                \"Service\":[\r\n                  \"ec2.amazonaws.com\"\r\n                ]\r\n              },\r\n              \"Action\":[\r\n                \"sts:AssumeRole\"\r\n              ]\r\n            }\r\n          ]\r\n        },\r\n        \"Path\":\"/\",\r\n        \"Policies\":[\r\n          {\r\n            \"PolicyName\":\"root\",\r\n            \"PolicyDocument\":{\r\n              \"Version\":\"2012-10-17\",\r\n              \"Statement\":[\r\n                {\r\n                  \"Effect\":\"Allow\",\r\n                  \"Action\":\"*\",\r\n                  \"Resource\":\"*\"\r\n                }\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    },\r\n    \"IP1\":{\r\n      \"Type\":\"AWS::IAM::InstanceProfile\",\r\n      \"Properties\":{\r\n        \"Path\":\"/\",\r\n        \"Roles\":[\r\n          {\r\n            \"Ref\":\"Role1\"\r\n          }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  \"Outputs\":{\r\n    \"Role1Ref\":{\r\n      \"Value\":{\r\n        \"Ref\":\"Role1\"\r\n      }\r\n    },\r\n    \"Role1Arn\":{\r\n      \"Value\":{\r\n        \"Fn::GetAtt\":[\r\n          \"Role1\",\r\n          \"Arn\"\r\n        ]\r\n      }\r\n    },\r\n    \"IP1Ref\":{\r\n      \"Value\":{\r\n        \"Ref\":\"IP1\"\r\n      }\r\n    },\r\n    \"IP1Arn\":{\r\n      \"Value\":{\r\n        \"Fn::GetAtt\":[\r\n          \"IP1\",\r\n          \"Arn\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}\r\n{code}\r\n\r\n1) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_IAM to run with resource types 'AWS::IAM::Role' and 'AWS::IAM::InstanceProfile'.\r\n2) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_IAM to run with resource types 'AWS::IAM::Role' and 'AWS::IAM::InstanceProfile'.\r\n3) Verify that to create this stack you need to run --capabillities CAPABILITY_IAM as an option.  \r\n4) Verify that using --capabilities CAPABILITY_NAMED_IAM instead of --capabilities CAPABILITY_IAM as an option also works to create this stack.\r\n5) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_IAM or --capabilities CAPABILITY_NAMED_IAM is required to update the stack.\r\n\r\nAdd the following property to the 'Role1' resource in the above template\r\n{code}\r\n        \"RoleName\" : \"bob\",\r\n{code}\r\n\r\n6) Run 'euwatch-get-template-summary' against the above template.  It should say that it requires CAPABILITY_NAMED_IAM to run with resource types 'AWS::IAM::Role' and 'AWS::IAM::InstanceProfile'.\r\n7) Run 'euwatch-validate-template' against the above template.  It should also say that it requires CAPABILITY_NAMED_IAM to run with resource types 'AWS::IAM::Role' and 'AWS::IAM::InstanceProfile'.\r\n8) Verify that to create this stack you need to run --capabillities CAPABILITY_NAMED_IAM as an option.  (also verify that the created role is named 'bob')\r\n9) Create any stack, and try to update to the above stack, verifying that --capabilities CAPABILITY_NAMED_IAM is required to update the stack.  (Need to delete the previous stack from #8 otherwise a duplicate role error will occur)\r\n10) Start with the original stack, update to the version with a named user, and update back to the original stack.  Note that whenever the RoleName is in the 'new' template CAPABILITY_NAMED_IAM is required, but only CAPABILITY_IAM is required if the 'new' template does not have a named role.\r\n11) Start with the updated stack (named role) and change the path of the role in the template\r\n{code}\r\n        \"Path\":\"/foo/\",\r\n{code}.  Should not be able to update this stack, as it would require replacement of the role but you have not changed the role name.\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-12-08T18:26:05.847-0600","updated":"2016-12-08T18:26:05.847-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49297/comment/123400","id":"123400","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"body":"No longer under development","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"created":"2017-06-13T13:43:19.195-0500","updated":"2017-06-13T13:43:19.195-0500"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12839/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}