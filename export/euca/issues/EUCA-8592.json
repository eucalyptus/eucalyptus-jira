{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"26929","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/26929","key":"EUCA-8592","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10211","value":"RHEL 6","id":"10211"}],"resolution":null,"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8592/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2014-01-27T05:36:06.602-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/11305","id":"11305","name":"3.2.2","archived":false,"released":true,"releaseDate":"2013-04-01"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12107","id":"12107","description":"Eucalyptus 3.3.2","name":"3.3.2","archived":false,"released":true,"releaseDate":"2013-10-02"}],"issuelinks":[{"id":"22791","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22791","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"17418","key":"EUCA-4224","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17418","fields":{"summary":"Errors logged when resources described by user","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"23866","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/23866","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"28522","key":"EUCA-9004","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/28522","fields":{"summary":"Exception logged when out of resources","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-21T17:49:42.798-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"description":"While investigating a problem on one of our clouds, we noticed that cloud-error.log gets filled with ERRORs that should properly be DEBUGs or even TRACEs. Two of the worst examples cause thousands of errors each minute.\r\n\r\nAs an incident investigator, I'd like to see ERRORs and WARNs only when administrator intervention is needed. Things that are an error in a subsystem (e.g. Postgres) but which the cloud can recover from, should not be ERRORs.\r\n\r\nh3. Authorization failures when using describeAddresses\r\n\r\n*This seems to be fixed in 3.4.0*. I'm including it here in case you wish to review it.\r\n\r\nisAuthorized logs an ERROR whenever checks fail     \r\n\t at com.eucalyptus.auth.Permissions.isAuthorized(Permissions.java:99)\r\n\r\n... but isAuthorized is used e.g. in loops (DescribeAddressesResponseType) that\r\nexpect to see an AuthException. Also, PolicyEngineImpl logs the same error as DEBUG.\r\n\r\nThis was responsible for 2300 ERRORs during a two-minute investigation segment.\r\n\r\nh3. TransientEntityExceptions\r\n\r\nHere is a sample:\r\n\r\nbq. Mon Jan 27 11:09:21 2014 ERROR [VmControl:VmControl.3] [com.eucalyptus.vm.VmControl.describeInstances(VmControl.java):271] com.eucalyptus.entities.TransientEntityException:\r\n\r\nI do not know how to reproduce. This seems to happen on a regular basis: 1300 instances during the two-minute tracking period.\r\n\r\nI tracked the source to VmInstance$Transform.Apply, which throws a TransientEntityException, when the VmInstance is not \"persistent\". VmControl.java simply logs this as an error. \r\n\r\nFor an admin or investigator, this type of an error is non-actionable.\r\n\r\nh4. Expected results\r\n\r\n* Logging level should be DEBUG or TRACE\r\n* VMControl should handle the exceptions in a more fine-grained manner and provide better log messages. \r\n\r\nh3. RuntimeExceptions when low on resources\r\n\r\nVmControl.RunInstancesResponseType method does Pokemon Exception catching and lazy log handling. Specifically, these are treated as errors:\r\n\r\nbq. Mon Jan 27 09:56:39 2014 ERROR [VmControl:VmControl.9] [com.eucalyptus.vm.VmControl.runInstances(VmControl.java):212] java.lang.RuntimeException: Not enough resources (0 in default < 1): vm instances.\r\njava.lang.RuntimeException: Not enough resources (0 in default < 1): vm instances.\r\n\r\nh4. Steps to reproduce\r\n\r\nRun out of capacity, then try to start an instance. \r\n\r\nh4. Expected results\r\n\r\n* This should be logged at most as a WARN.\r\n* VMControl should handle exceptions in a more fine-grained manner.\r\n\r\nh3. Hibernate exceptions\r\n\r\nI found a few cases of these as well:\r\n\r\nbq. Mon Jan 27 10:28:09 2014 ERROR [PersistenceExceptions:VmControl.9] [com.eucalyptus.entities.PersistenceExceptions.throwFiltered(PersistenceExceptions.java):220] org.hibernate.PersistentObjectException: detached entity passed to persist: com.eucalyptus.vm.VmInstance\r\n\r\nI do not know how to reproduce.\r\n\r\nThis error does not seem to be actionable or cause problems for cloud stability. \r\n\r\nh4. Expected results\r\n\r\n* Hibernate-specific log entries are either DEBUG or TRACE, if they do are not actionable or do not affect cloud stability.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"CLC logs too many non-actionable items as errors","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=arasinen","name":"arasinen","key":"arasinen","accountId":"557058:be91d39b-60c2-4e1a-9da4-1986da8753ac","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Antti Rasinen","active":false,"timeZone":"Europe/Helsinki"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=arasinen","name":"arasinen","key":"arasinen","accountId":"557058:be91d39b-60c2-4e1a-9da4-1986da8753ac","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/eb1226747f622d1fba9869fe81047591?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Antti Rasinen","active":false,"timeZone":"Europe/Helsinki"},"customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i02idj:","customfield_10001":"2014-01-30T16:32:34.127-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["arasinen(arasinen)","kedwards(kedwards)","tjcramer(tjcramer)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/26929/comment/64297","id":"64297","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"[~arsatiki], we keep moving various messages from INFO to DEBUG when they are meant for internal debugging, i.e. sometimes we can't characterize an error and stack traces are thrown, but it helps engineering debugging an issue and without it we'd be helpless to resolve issues.   We realize these are less and helpful to cloud administrators, however.  So we're striving to make the INFO (default logging level) as useful as possible.\r\n\r\nSo I believe in the spirit of this bug report we're doing the right thing going forward, but if you have specific examples (and thanks for those provided) it would be great to let us know and we can prioritize them.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-03-10T15:38:06.433-0500","updated":"2014-03-10T15:38:06.433-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-8592/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}