{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"15315","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15315","key":"EUCA-3308","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2012-10-23T18:51:14.103-0500","customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3308/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2012-08-13T15:25:43.740-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10201","id":"10201","description":"Eucalyptus 3.1.1","name":"3.1.1","archived":false,"released":true,"releaseDate":"2012-08-24"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=bthomason","name":"bthomason","key":"bthomason","accountId":"557058:0703053c-4ac6-4382-8ea0-013a1e007064","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brian Thomason","active":true,"timeZone":"America/New_York"},"updated":"2013-01-09T19:56:44.767-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10501","id":"10501","name":"Packaging"}],"timeoriginalestimate":null,"description":"Our upgrade process is a little sketchy in that (please correct me where I'm wrong Andy):\r\n\r\n* The upgrade script, euca_upgrade, resides in eucalyptus-common\r\n* euca_upgrade needs JARs from eucalyptus-java-common to be present\r\n* Therefore, Andy added a Pre-Depend on eucalyptus-common to the eucalyptus-java-common package so that when euca_upgrade runs, we can ensure that the JARs (and perhaps other files?) from eucalyptus-java-common are still around.\r\n\r\nUnfortunately, in apt < 0.8.16, this is a problem... We worked around it before by having users issue a dist-upgrade, but that no longer even works when upgrading FROM packages that contain the Pre-Depend TO packages that also contain the Pre-Depend.  apt just loses its little mind and refuses to proceed.\r\n\r\nHowever, I have found that this only applies to = Pre-Deps.  If we have each build of eucalyptus-common Provide a unique virtual package (we already have it Provide <name>-hashId) the Pre-Dep then seems to work.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Debian Pre-Depend causes issues in Lucid","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=bthomason","name":"bthomason","key":"bthomason","accountId":"557058:0703053c-4ac6-4382-8ea0-013a1e007064","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brian Thomason","active":true,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=bthomason","name":"bthomason","key":"bthomason","accountId":"557058:0703053c-4ac6-4382-8ea0-013a1e007064","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brian Thomason","active":true,"timeZone":"America/New_York"},"customfield_10000":"3_*:*_1_*:*_387287_*|*_10001_*:*_1_*:*_2988_*|*_10000_*:*_1_*:*_875114988_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_5271225112","customfield_12100":"0|i01isv:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["bthomason(bthomason)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15315/comment/31375","id":"31375","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=bthomason","name":"bthomason","key":"bthomason","accountId":"557058:0703053c-4ac6-4382-8ea0-013a1e007064","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brian Thomason","active":true,"timeZone":"America/New_York"},"body":"I will try to detail the issue and the workaround(s) below:\r\n\r\nWe added a Pre-Dep of java-common on the common package due to reasons Andy detailed.  Unfortunately, apt in Lucid is broken in certain ways and this causes issues.\r\n\r\nFirst, it requires performing a dist-upgrade rather than just an upgrade, which can pull in new kernels and the like.\r\n\r\nSecond, when moving from 3.0.x to 3.1.x, even dist-upgrade began failing.  This is because of the apt breakage again;  common Conflicts with sc << a certain version, as sc once contained files now in common.  The Conflict is legitimate, but combined with the Pre-Dep causes apt to lose its mind.\r\n\r\nI have worked around this by removing the Conflict altogether as it may no longer be needed.  However, I fear an upgrade from 2.x -> 3.1.1|3.2 may break.\r\n\r\nThe workaround to this would be to add the Conflict back and rather than having users dist-upgrade when moving to 3.1.1 or 3.2, have them \"apt-get install eucalyptus-common\".  For some strange reason, this seems to work fine.\r\n\r\nSo, if 2.x -> 3.1.1 doesn't work, we must decide which is more important:\r\n\r\n1.) Telling people they must first upgrade from 2.x to 3.0.x, then to 3.1.1|3.2\r\nor\r\n2.) Fixing the 2.x -> 3.1.1|3.2 upgrades by adding the Conflict back, but forcing users to upgrade by \"apt-get install eucalyptus-common\" rather than \"apt-get dist-upgrade\"","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=bthomason","name":"bthomason","key":"bthomason","accountId":"557058:0703053c-4ac6-4382-8ea0-013a1e007064","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/981a2c8bab2351ba0f63a5df9232ce22?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brian Thomason","active":true,"timeZone":"America/New_York"},"created":"2012-08-23T18:37:29.000-0500","updated":"2012-08-23T18:37:29.000-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3308/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}