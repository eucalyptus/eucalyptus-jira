{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"17511","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17511","key":"EUCA-4242","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@5eaf2744[id=10,rapidViewId=<null>,state=CLOSED,name=3.2 Sprint 7,goal=<null>,startDate=2012-11-10T22:18:20.990Z,endDate=2012-12-04T19:02:20.990Z,completeDate=2012-12-26T19:14:23.804Z,sequence=10]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2012-12-06T13:01:54.465-0600","customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4242/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2012-11-26T16:12:32.588-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2012-12-03T10:19:37.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"labels":["QA-assigned"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"issuelinks":[{"id":"25020","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/25020","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"30226","key":"EUCA-9458","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30226","fields":{"summary":"Node controller stop working after attach volume to instance","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10000","description":"This issue has not yet been validated, and is not currently being investigated.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Unconfirmed","id":"10000","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-05-28T13:15:37.430-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"Seen in long-term testing by QA team (on 3 occasions). Symptoms: over time, NC stops responding, while instances, if any, are still running. Tell-tale signs: \r\n\r\n* Stack inspection reveals 2-3 threads waiting on semaphores while another -- presumably while holding {{hyp_sem}} -- is \"stuck\" inside a libvirt call. We have seen that call to be both {{virConnectOpen}} and {{virConnectClose}}, invoked in all three cases from {{check_hypervisor_conn}}. The function at the top of the stack has been either {{pthread_sigmask}} or {{poll}}.\r\n\r\n* NC log reveals in all three cases, just prior to the lockup, a failure to fully provision an instance artifact on the first try due to blobstore timeout. Since the instance ultimately transitions to 'booting', presumably provisioning succeeds on the first retry:\r\n\r\n{code}\r\n2012-11-22 20:38:35  INFO | [i-306142B8] copying/cloning blob emi-BBF13B0F-96dde24a to blob IHBT3B2UJC9Y79N5EOIKA/i-306142B8/emi-BBF13B0F-4796f175\r\n2012-11-22 20:38:35  INFO | [i-306142B8] tuning root file system on disk 0 partition 1\r\n2012-11-22 20:38:35  INFO | [i-306142B8] injecting the ssh key\r\n2012-11-22 20:38:35  INFO | [i-A43D46C4] termination requested\r\n2012-11-22 20:38:36  INFO | [i-306142B8] copying/cloning blob prt-03258ext3-3fc604c2 to blob IHBT3B2UJC9Y79N5EOIKA/i-306142B8/prt-03258ext3-3fc604c2\r\n2012-11-22 20:38:36  INFO | [i-306142B8] copying/cloning blob prt-00512swap-ac8d5670 to blob IHBT3B2UJC9Y79N5EOIKA/i-306142B8/prt-00512swap-ac8d5670\r\n2012-11-22 20:38:36  INFO | [i-A43D46C4] destroying instance\r\n2012-11-22 20:38:37  INFO | [i-F3CB41E8] termination requested\r\n2012-11-22 20:38:37  INFO | [i-306142B8] constructing disk of size 5368741376 bytes in dsk-BBF13B0F-4637afe4 (/dev/loop46)\r\n2012-11-22 20:38:37  WARN | libvirt: Domain not found: no domain with matching name 'i-A43D46C4' (code=42)\r\n2012-11-22 20:38:37  INFO | [i-A43D46C4] cleaning up state for instance\r\n2012-11-22 20:38:38 ERROR | {431036160} error: timed out on a blobstore lock while attempting to update .refs\r\n2012-11-22 20:38:38 ERROR | error: blockblob_clone: blobstore.c:567 timeout (9)\r\n2012-11-22 20:38:38 ERROR | [i-306142B8] error: failed to clone partitions to created disk: 9 blobstore.c:567 timeout\r\n2012-11-22 20:38:38 ERROR | [i-306142B8] error: failed to create artifact dsk-BBF13B0F-4637afe4 (error=9, may retry) on try 1\r\n2012-11-22 20:38:38 ERROR | [i-306142B8] error: failed to remove partially created artifact dsk-BBF13B0F-4637afe4: 9 blobstore.c:567 timeout (potential resource leak!) on try 1\r\n2012-11-22 20:38:39  INFO | [i-306142B8] wrote instance XML to /var/lib/eucalyptus/instances/work/IHBT3B2UJC9Y79N5EOIKA/i-306142B8/instance.xml\r\n2012-11-22 20:38:39  INFO | [i-F3CB41E8] destroying instance\r\n2012-11-22 20:38:39  INFO | [i-306142B8] booting\r\n{code}\r\n\r\nHere is a sample stack trace:\r\n\r\n{code}\r\npstack 25177\r\nThread 4 (Thread 0x7fb01b8b6700 (LWP 25178)):\r\n#0  0x00007fb0315c843c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\r\n#1  0x00007fb02ad2ab10 in sem_prolaag () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#2  0x00007fb02ad2abe2 in sem_p () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#3  0x00007fb02ad32fbc in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#4  0x00007fb02ad37c0b in sensor_refresh_resources () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#5  0x00007fb02ad339c7 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#6  0x00007fb02ad33a3d in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#7  0x00007fb0315c4851 in start_thread () from /lib64/libpthread.so.0\r\n#8  0x00007fb03131211d in clone () from /lib64/libc.so.6\r\nThread 2 (Thread 0x7fb01a29e700 (LWP 3461)):\r\n#0  0x00007fb031308a63 in poll () from /lib64/libc.so.6\r\n#1  0x00007fb02a5ce1f1 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#2  0x00007fb02a5cebd1 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#3  0x00007fb02a5cf1c7 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#4  0x00007fb02a5cbc53 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#5  0x00007fb02a5ad43e in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#6  0x00007fb02a5ad4bc in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#7  0x00007fb02a5be272 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#8  0x00007fb02a5bf1b0 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#9  0x00007fb02a58b621 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#10 0x00007fb02a58c856 in virConnectOpen () from /usr/lib64/axis2c/lib/libvirt.so.0\r\n#11 0x00007fb02ace7512 in check_hypervisor_conn () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#12 0x00007fb02ace90db in startup_thread () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#13 0x00007fb0315c4851 in start_thread () from /lib64/libpthread.so.0\r\n#14 0x00007fb03131211d in clone () from /lib64/libc.so.6\r\nThread 1 (Thread 0x7fb032cda7e0 (LWP 25177)):\r\n#0  0x00007fb0315c843c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\r\n#1  0x00007fb02ad2ab10 in sem_prolaag () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#2  0x00007fb02ad2abe2 in sem_p () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#3  0x00007fb02acf2745 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#4  0x00007fb02acef4da in doRunInstance () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#5  0x00007fb02ace0abb in ncRunInstanceMarshal () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#6  0x00007fb02acd98ad in axis2_skel_EucalyptusNC_ncRunInstance () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#7  0x00007fb02acda319 in axis2_svc_skel_EucalyptusNC_invoke () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\r\n#8  0x00007fb03076dc35 in ?? () from /usr/lib64/libaxis2_engine.so.0\r\n#9  0x00007fb03076d7a1 in ?? () from /usr/lib64/libaxis2_engine.so.0\r\n#10 0x00007fb030763d16 in axis2_engine_receive () from /usr/lib64/libaxis2_engine.so.0\r\n#11 0x00007fb0309bb367 in axis2_http_transport_utils_process_http_post_request () from /usr/lib64/httpd/modules/libmod_axis2.so\r\n#12 0x00007fb0309b6d3c in axis2_apache2_worker_process_request () from /usr/lib64/httpd/modules/libmod_axis2.so\r\n#13 0x00007fb0309b4f7c in ?? () from /usr/lib64/httpd/modules/libmod_axis2.so\r\n#14 0x00007fb032d19b00 in ap_run_handler ()\r\n#15 0x00007fb032d1d3be in ap_invoke_handler ()\r\n#16 0x00007fb032d28a30 in ap_process_request ()\r\n#17 0x00007fb032d258f8 in ?? ()\r\n#18 0x00007fb032d21608 in ap_run_process_connection ()\r\n#19 0x00007fb032d2d807 in ?? ()\r\n#20 0x00007fb032d2db1a in ?? ()\r\n#21 0x00007fb032d2e79c in ap_mpm_run ()\r\n#22 0x00007fb032d05900 in main ()\r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"NC: node controller locks up with one thread in libvirt","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"10001_*:*_1_*:*_534960265_*|*_10002_*:*_1_*:*_5956_*|*_10000_*:*_1_*:*_71973867_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_245621811","customfield_12100":"0|i00t93:","customfield_10001":"2012-11-30T19:11:33.099-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["dmitrii(dmitrii)","vasya(vasya)","viglesias(viglesias)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4242/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17511/comment/36636","id":"36636","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"I ended up in the same situation while trying to attach volume to an instance running on NC with multipathing on and one of SAN's IP blocked by iptables rules. \n\nSteps to reproduce: \n# This page helps you to set up multipath on NC: https://wiki.eucalyptus-systems.com/dokuwiki/doku.php?id=qa_system:multipath_setup_in_qa_sequence\n# Set <partition>.storage.ncpaths property to 192.168.25.182,10.109.25.186\n# Verify that you can create and attach volume\n# Detach volume\n# Block one ip by running iptables -A OUTPUT -j DROP -d 192.168.25.182\n# Try to attach volume again\n\nStack trace:\n{code}\nThread 3 (Thread 0x7ff8282f1700 (LWP 12179)):\n#0  0x00007ff83ddfc43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\n#1  0x00007ff837766d5c in sem_prolaag () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#2  0x00007ff837766e2e in sem_p () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#3  0x00007ff83776f204 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#4  0x00007ff83777404c in sensor_refresh_resources () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#5  0x00007ff83776fc0d in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#6  0x00007ff83776fc83 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#7  0x00007ff83ddf8851 in start_thread () from /lib64/libpthread.so.0\n#8  0x00007ff83db4667d in clone () from /lib64/libc.so.6\nThread 2 (Thread 0x7ff8276da700 (LWP 12260)):\n#0  0x00007ff83ddfc43c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\n#1  0x00007ff837766d5c in sem_prolaag () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#2  0x00007ff837766e2e in sem_p () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#3  0x00007ff83772347e in check_hypervisor_conn () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#4  0x00007ff837723980 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#5  0x00007ff837724702 in monitoring_thread () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#6  0x00007ff83ddf8851 in start_thread () from /lib64/libpthread.so.0\n#7  0x00007ff83db4667d in clone () from /lib64/libc.so.6\nThread 1 (Thread 0x7ff83f50f7e0 (LWP 12178)):\n#0  0x00007ff83db3cfc3 in poll () from /lib64/libc.so.6\n#1  0x00007ff837009571 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#2  0x00007ff837009ef9 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#3  0x00007ff83700a4d7 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#4  0x00007ff837006030 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#5  0x00007ff836fe884e in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#6  0x00007ff836fe88cc in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#7  0x00007ff836feafa6 in ?? () from /usr/lib64/axis2c/lib/libvirt.so.0\n#8  0x00007ff836fcb9d0 in virDomainAttachDevice () from /usr/lib64/axis2c/lib/libvirt.so.0\n#9  0x00007ff837730ed7 in ?? () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#10 0x00007ff83772bc19 in doAttachVolume () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#11 0x00007ff83771fc07 in ncAttachVolumeMarshal () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#12 0x00007ff837715a2b in axis2_skel_EucalyptusNC_ncAttachVolume () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#13 0x00007ff837716fd7 in axis2_svc_skel_EucalyptusNC_invoke () from /usr/lib64/axis2c/services/EucalyptusNC/libEucalyptusNC.so\n#14 0x00007ff83cfa2c35 in ?? () from /usr/lib64/libaxis2_engine.so.0\n#15 0x00007ff83cfa27a1 in ?? () from /usr/lib64/libaxis2_engine.so.0\n#16 0x00007ff83cf98d16 in axis2_engine_receive () from /usr/lib64/libaxis2_engine.so.0\n#17 0x00007ff83d1f0367 in axis2_http_transport_utils_process_http_post_request () from /usr/lib64/httpd/modules/libmod_axis2.so\n#18 0x00007ff83d1ebd3c in axis2_apache2_worker_process_request () from /usr/lib64/httpd/modules/libmod_axis2.so\n#19 0x00007ff83d1e9f7c in ?? () from /usr/lib64/httpd/modules/libmod_axis2.so\n#20 0x00007ff83f54db00 in ap_run_handler ()\n#21 0x00007ff83f5513be in ap_invoke_handler ()\n#22 0x00007ff83f55ca30 in ap_process_request ()\n#23 0x00007ff83f5598f8 in ?? ()\n#24 0x00007ff83f555608 in ap_run_process_connection ()\n#25 0x00007ff83f561807 in ?? ()\n#26 0x00007ff83f561b1a in ?? ()\n#27 0x00007ff83f56279c in ap_mpm_run ()\n#28 0x00007ff83f539900 in main ()\n{code}\n\ntail for nc.log\n{code}\n012-11-30 16:43:14  INFO | [i-AA204372][vol-CC064058] invoked (remote=vasya1,,1,YwhrCn94uefMX80UHUh3Ip9Bi3jlaeKcxgbt4v08Bq2KAVwVu7BI0fJSHPYYkuA8cF8z6NKf/jFSi6Tl7RcG6RXefG8KEXM8d2VMxZ8GDpFoLT4yVaNIbXI8K1Wa3aQv9zLLyevPMkRp/+OIH39/K+kahxhYmmObHOeuME2VMZjFZjBDwQSkpyuDFXWk/OddXBCxAqWtCyZPZ8mrV+WeVquopHblCehDZitKZel3ONUbqu71L+gTFySEQl5bdekh0tDqd0+Vcv339qjvE9KxQUpYkulnu5YIDyimLboDnXRTTlwnPvWgHK48C3+TDd+yFFtqk5RpAOrWm54BIQLaGg==,,192.168.25.182,iqn.1992-04.com.emc:cx.apm00121200804.a6,,10.109.25.186,iqn.1992-04.com.emc:cx.apm00121200804.b6 local=/dev/sdd)\n2012-11-30 16:45:12 ERROR | [i-AA204372][vol-CC064058] failed to connect to iscsi target\n2012-11-30 16:45:12 ERROR | failed to parse XML in '/var/lib/eucalyptus/instances/work/8Y8ORHQM9RB8UIOZZ3MDA/i-AA204372/vol-CC064058-libvirt.xml'\n2012-11-30 16:45:12 ERROR | failed to parse XML in '/var/lib/eucalyptus/instances/work/8Y8ORHQM9RB8UIOZZ3MDA/i-AA204372/vol-DAF93D7E-libvirt.xml'\n2012-11-30 16:45:12 ERROR | [i-AA204372][vol-CC064058] failed error=1\n2012-11-30 16:49:04  INFO | [i-AA204372][vol-CC064058] invoked (remote=vasya1,,1,KigWog3e4UXLHo2kLgBlpunkDIEJ+IMPYrKr85CjFCQl40ilY2+DmZlc6tJj4irRsOOGxJ3fI8aqFyKApve4Q5wczHkX4ACcSEbURHaL69OXUuqLlMlEcjg77ABj9Q0bpWnUkHJVVh9WsXIrk7uB5kmr8xqmuHkjCrZc6JNKyeDcWM4BrdciHUtS75cqBbqSVyyiKafNmebQwBgI48qDOcruk7hLfSNH3P+t1xmSwSX80cB9j3dYFLnepeFE5Zrl0vroTMfn2uQLMrB7A1bvqAsb/tfOnGx/iTKiiTxQcgAwfWYjOdod2Tz/lQxMekiTXNa/0eLbWTPLC4GXBqAM+Q==,,192.168.25.182,iqn.1992-04.com.emc:cx.apm00121200804.a6,,10.109.25.186,iqn.1992-04.com.emc:cx.apm00121200804.b6 local=/dev/sdd)\n2012-11-30 16:50:31  INFO | [i-AA204372] wrote volume XML to /var/lib/eucalyptus/instances/work/8Y8ORHQM9RB8UIOZZ3MDA/i-AA204372/vol-CC064058.xml\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-11-30T19:11:33.099-0600","updated":"2012-11-30T19:11:33.099-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17511/comment/37021","id":"37021","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"No longer seeing this on the same setup that was seeing it before. Ran for 3 days and over 40K instances.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-12-06T13:01:54.482-0600","updated":"2012-12-06T13:01:54.482-0600"}],"maxResults":2,"total":2,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}