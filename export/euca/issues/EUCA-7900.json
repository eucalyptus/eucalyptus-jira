{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"24746","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24746","key":"EUCA-7900","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2013-10-16T13:13:10.885-0500","customfield_10308":null,"customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7900/watchers","watchCount":3,"isWatching":false},"created":"2013-10-15T18:04:44.341-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"customfield_11901":null,"issuelinks":[{"id":"20933","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/20933","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"24688","key":"EUCA-7868","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24688","fields":{"summary":"Load Balancer Servo haproxy original template breaks tcp loadbalancing","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":null,"updated":"2013-10-16T13:13:10.896-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Using eucalyptus-load-balancer-image-1.0.2-0.132.131014git65fc4e1.el6.x86_64.rpm the haproxy process fails to start on load balancer instances. Instances that are registered to the LB go to InService based on specified health check but the LB does not perform the traffic processing.\r\n\r\nSteps:\r\n# install specified ELB image\r\n# set vm_keyname property to a keypair you have so you can later ssh to the ELB instance\r\n# create ELB healthcheck tcp p 22, listener 80->80\r\n# register 2 webserver instances to the LB wait for them to go in service\r\n# try to use the load balancer with curl <loadbalancer>. connection is refused \r\n# log on to the LB notice no haproxy process is running\r\n\r\nservo log excerpt\r\n{code}\r\nStarting daemonized servo process\r\n2013-10-15 15:39:18,570 servo [INFO]:Starting daemonized servo process\r\nstarting cloudwatch metrics reporter\r\n2013-10-15 15:39:18,575 servo [INFO]:starting cloudwatch metrics reporter\r\n403 Forbidden\r\n2013-10-15 15:39:18,924 boto [ERROR]:403 Forbidden\r\n<?xml version=\"1.0\"?><Response><Errors><Error><Code>403 Forbidden</Code><Message>Message has expired (times in UTC): Timestamp=null Expires=null Deadline=2013-10-15T15:54:38</Message></Error></Errors><RequestID>Message has expired (times in UTC): Timestamp=null Expires=null De\r\nadline=2013-10-15T15:54:38</RequestID></Response>\r\n2013-10-15 15:39:18,925 boto [ERROR]:<?xml version=\"1.0\"?><Response><Errors><Error><Code>403 Forbidden</Code><Message>Message has expired (times in UTC): Timestamp=null Expires=null Deadline=2013-10-15T15:54:38</Message></Error></Errors><RequestID>Message has expired (times in\r\n UTC): Timestamp=null Expires=null Deadline=2013-10-15T15:54:38</RequestID></Response>\r\nfailed to query the elb service: BotoServerError: 403 Forbidden\r\n<?xml version=\"1.0\"?><Response><Errors><Error><Code>403 Forbidden</Code><Message>Message has expired (times in UTC): Timestamp=null Expires=null Deadline=2013-10-15T15:54:38</Message></Error></Errors><RequestID>Message has expired (times in UTC): Timestamp=null Expires=null De\r\nadline=2013-10-15T15:54:38</RequestID></Response>\r\n2013-10-15 15:39:18,928 servo [ERROR]:failed to query the elb service: BotoServerError: 403 Forbidden\r\n<?xml version=\"1.0\"?><Response><Errors><Error><Code>403 Forbidden</Code><Message>Message has expired (times in UTC): Timestamp=null Expires=null Deadline=2013-10-15T15:54:38</Message></Error></Errors><RequestID>Message has expired (times in UTC): Timestamp=null Expires=null De\r\nadline=2013-10-15T15:54:38</RequestID></Response>\r\nfailed to find the loadbalancers\r\n2013-10-15 15:39:18,928 servo [WARNING]:failed to find the loadbalancers\r\nnew health check config: healthcheck-config: interval=10, healthy_threshold=2, unhealthy_threshold=2, timeout=5, target=HTTP:80/index.html\r\n2013-10-15 22:39:56,411 servo [INFO]:new health check config: healthcheck-config: interval=10, healthy_threshold=2, unhealthy_threshold=2, timeout=5, target=HTTP:80/index.html\r\nstarting to check i-F54F419B\r\n2013-10-15 22:39:56,411 servo [INFO]:starting to check i-F54F419B\r\nstarting to check i-CD8A4332\r\n2013-10-15 22:39:56,411 servo [INFO]:starting to check i-CD8A4332\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:39:56,473 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:40:07,514 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:40:07,541 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:40:18,608 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:40:18,637 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:40:29,723 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:40:29,750 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:40:40,820 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:40:40,843 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:40:51,920 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:40:51,944 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n2013-10-15 22:41:02,975 servo [ERROR]:failed to add protocol-port: the port is found\r\nfailed to run haproxy process: ServoError: failed to launch haproxy process\r\n2013-10-15 22:41:03,001 servo [ERROR]:failed to run haproxy process: ServoError: failed to launch haproxy process\r\nfailed to add protocol-port: the port is found\r\n{code}\r\n\r\nhaproxy_template\r\n{code}\r\n#template\r\nglobal\r\n maxconn 100000\r\n ulimit-n 655360\r\n pidfile /var/run/haproxy.pid\r\n\r\ndefaults\r\n contimeout      1000\r\n clitimeout      10000\r\n srvtimeout      10000\r\n option http-server-close # affects KA on/off\r\n{code}\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"LoadBalancer image fails to launch haproxy","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10000":"10000_*:*_1_*:*_68906556_*|*_6_*:*_1_*:*_0","customfield_12100":"0|i02bun:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2013-10-16T13:13:10.895-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["kedwards(kedwards)","tony(tony)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24746/comment/55986","id":"55986","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"reverting the change from EUCA-7868 resolves this issue. It looks like HTTP listeners need the  \"mode http\" in the haproxy config","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2013-10-15T18:37:38.327-0500","updated":"2013-10-15T18:37:38.327-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24746/comment/55987","id":"55987","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"This was the change \r\n{code}\r\n defaults\r\n- mode http\r\n  contimeout      1000\r\n  clitimeout      10000\r\n  srvtimeout      10000\r\n{code}\r\n\r\nI logged into the LB instance added back \"mode http\" in /etc/load-balancer-servo/haproxy_template.conf and restarted the servo (service load-balancer-servo restart) and the issue went away.\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2013-10-15T18:40:37.315-0500","updated":"2013-10-15T18:40:37.315-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24746/comment/55996","id":"55996","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"We think we found a fix, it is to add correct mode field for the listener to the backend section as well. \r\n\r\nIt is OK to leave the fix for EUCA-7868 in place (remove mode http from default).  The reason that with EUCA-7868 in place worked for tcp and not http is because tcp is the haproxy default so even though the backend did not specify mode tcp it was getting the default and frontend/backend matched. (the same reason that HTTP not TCP worked before EUCA-7868)\r\n\r\nFrom haroxy manual (http://haproxy.1wt.eu/download/1.3/doc/configuration.txt)\r\n*When doing content switching, it is mandatory that the frontend and the backend are in the same mode*\r\n{code}\r\nmode { tcp|http|health }\r\n  Set the running mode or protocol of the instance\r\n  May be used in sections :   defaults | frontend | listen | backend\r\n                                 yes   |    yes   |   yes  |   yes\r\n  Arguments :\r\n    tcp       The instance will work in pure TCP mode. A full-duplex connection\r\n              will be established between clients and servers, and no layer 7\r\n              examination will be performed. This is the default mode. It\r\n              should be used for SSL, SSH, SMTP, ...\r\n\r\n    http      The instance will work in HTTP mode. The client request will be\r\n              analyzed in depth before connecting to any server. Any request\r\n              which is not RFC-compliant will be rejected. Layer 7 filtering,\r\n              processing and switching will be possible. This is the mode which\r\n              brings HAProxy most of its value.\r\n\r\n    health    The instance will work in \"health\" mode. It will just reply \"OK\"\r\n              to incoming connections and close the connection. Nothing will be\r\n              logged. This mode is used to reply to external components health\r\n              checks. This mode is deprecated and should not be used anymore as\r\n              it is possible to do the same and even better by combining TCP or\r\n              HTTP modes with the \"monitor\" keyword.\r\n\r\n   When doing content switching, it is mandatory that the frontend and the\r\n   backend are in the same mode (generally HTTP), otherwise the configuration\r\n   will be refused.\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2013-10-15T19:49:13.658-0500","updated":"2013-10-15T19:49:13.658-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24746/comment/56083","id":"56083","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"body":"dup of EUCA-7868","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-16T13:13:10.895-0500","updated":"2013-10-16T13:13:10.895-0500"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7900/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}