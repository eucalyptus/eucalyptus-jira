{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"51303","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51303","key":"EUCA-13012","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13012/watchers","watchCount":1,"isWatching":false},"lastViewed":null,"created":"2016-11-30T16:34:27.057-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[],"issuelinks":[],"assignee":null,"updated":"2016-12-08T16:15:50.849-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10000","id":"10000","name":"Admin tools","description":"CLI for administrative tasks"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"The euare-releaserole should unset AWS and EUCA vars that are eval'd by the clcadmin-assume-system-credentials command.  Four variables appear to remain after releasing admin creds.  The remaining vars are: AWS_DEFAULT_REGION, AWS_IAM_URL, EUCA_BOOTSTRAP_URL, EUCA_PROPERTIES_URL\r\n\r\n{code:java}\r\n[root@e-05 ~]# clcadmin-assume-system-credentials \r\nexport AWS_IAM_URL=http://127.0.0.1:8773/services/Euare;\r\nexport EUCA_BOOTSTRAP_URL=http://127.0.0.1:8773/services/Empyrean;\r\nexport EUCA_PROPERTIES_URL=http://127.0.0.1:8773/services/Properties;\r\nexport AWS_ACCESS_KEY_ID=\"AKIAAAMZ6IQRISYXL2GY\";\r\nexport AWS_ACCESS_KEY=\"AKIAAAMZ6IQRISYXL2GY\";\r\nexport EC2_ACCESS_KEY=\"AKIAAAMZ6IQRISYXL2GY\";\r\nexport AWS_SECRET_ACCESS_KEY=\"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\";\r\nexport AWS_SECRET_KEY=\"z3OOoncIsTBWrFWYBDPfPdiiCZBSo0B7fhn0DDfD\";\r\nexport EC2_SECRET_KEY=\"z3OOoncIsTBWrFWYBDPfPdiiCZBSo0B7fhn0DDfD\";\r\nunset AWS_CREDENTIAL_FILE;\r\nunset AWS_SESSION_TOKEN;\r\nunset AWS_SECURITY_TOKEN;\r\nunset EC2_USER_ID;\r\n\r\n# These are automatic CLC admin credentials generated on\r\n# Wed Nov 30 22:16:50 UTC 2016.\r\n#\r\n# If you can read this, rerun this program with eval:\r\n#     eval `/usr/sbin/clcadmin-assume-system-credentials`\r\n[root@e-05 ~]# eval `/usr/sbin/clcadmin-assume-system-credentials` && euca-generate-environment-config --simple --region localhost\r\nAWS_ACCESS_KEY_ID=AKIAAAMZ6IQRISYXL2GY\r\nAWS_AUTO_SCALING_URL=http://127.0.0.1:8773/services/AutoScaling/\r\nAWS_CLOUDFORMATION_URL=http://127.0.0.1:8773/services/CloudFormation/\r\nAWS_CLOUDWATCH_URL=http://127.0.0.1:8773/services/CloudWatch/\r\nAWS_CREDENTIAL_EXPIRATION=\r\nAWS_ELB_URL=http://127.0.0.1:8773/services/LoadBalancing/\r\nAWS_IAM_URL=http://127.0.0.1:8773/services/Euare\r\nAWS_SECRET_ACCESS_KEY=z3OOoncIsTBWrFWYBDPfPdiiCZBSo0B7fhn0DDfD\r\nAWS_SECURITY_TOKEN=\r\nEC2_CERT=\r\nEC2_PRIVATE_KEY=\r\nEC2_URL=http://127.0.0.1:8773/services/compute/\r\nEC2_USER_ID=\r\nEUCALYPTUS_CERT=/var/lib/eucalyptus/keys/cloud-cert.pem\r\nEUCA_BOOTSTRAP_URL=http://127.0.0.1:8773/services/Empyrean\r\nEUCA_PROPERTIES_URL=http://127.0.0.1:8773/services/Properties\r\nEUCA_REPORTING_URL=http://127.0.0.1:8773/services/Reporting/\r\nS3_URL=http://127.0.0.1:8773/services/objectstorage/\r\nTOKEN_URL=http://127.0.0.1:8773/services/Tokens/\r\n[root@e-05 ~]# eval `/usr/sbin/clcadmin-assume-system-credentials`\r\n[root@e-05 ~]# euare-releaserole \r\nunset AWS_ACCESS_KEY_ID;\r\nunset AWS_ACCESS_KEY;\r\nunset EC2_ACCESS_KEY;\r\nunset AWS_SECRET_ACCESS_KEY;\r\nunset AWS_SECRET_KEY;\r\nunset EC2_SECRET_KEY;\r\nunset AWS_SESSION_TOKEN;\r\nunset AWS_SECURITY_TOKEN;\r\nunset AWS_CREDENTIAL_EXPIRATION;\r\nunset EC2_USER_ID;\r\nunset AWS_CREDENTIAL_FILE;\r\n\r\n# If you can read this, rerun this program with eval:\r\n#     eval `/usr/bin/euare-releaserole`\r\n[root@e-05 ~]# eval `euare-releaserole `\r\n[root@e-05 ~]# set | grep AWS\r\nAWS_DEFAULT_REGION=localhost\r\nAWS_IAM_URL=http://127.0.0.1:8773/services/Euare\r\n[root@e-05 ~]# set | grep EC2\r\n[root@e-05 ~]# set | grep EUCA\r\nEUCA_BOOTSTRAP_URL=http://127.0.0.1:8773/services/Empyrean\r\nEUCA_PROPERTIES_URL=http://127.0.0.1:8773/services/Properties\r\n[root@e-05 ~]# \r\n{code}\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"euare-releaserole does not unset vars added by clcadmin-assume-system-credentials","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mbacchi","name":"mbacchi","key":"mbacchi","accountId":"557058:d650aabc-f00c-4262-93a9-7799945b8eed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/24b916c1ff78f38b51f4bb1dc66ed58c?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmbacchi%26avatarId%3D16201%26noRedirect%3Dtrue"},"displayName":"Matt Bacchi","active":true,"timeZone":"US/Central"},"customfield_12100":"0|i040cv:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":null,"customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["mbacchi(mbacchi)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13012/votes","votes":0,"hasVoted":false},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}