{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"36919","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919","key":"EUCA-11019","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2015-06-30T15:41:16.464-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11019/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2015-06-24T18:47:14.389-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15500","id":"15500","description":"Eucalyptus 4.1.1","name":"4.1.1","archived":false,"released":true,"releaseDate":"2015-05-11"}],"customfield_11901":null,"issuelinks":[{"id":"31306","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31306","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"36943","key":"EUCA-11034","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36943","fields":{"summary":"Instance ran from PV image fails to get migrated","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"31311","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31311","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"37026","key":"DOC-1614","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37026","fields":{"summary":"Explain possible migration time","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"31310","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31310","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"37025","key":"DOC-1613","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37025","fields":{"summary":"Document valid SELinux options","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"31312","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31312","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"37027","key":"EUCA-11051","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37027","fields":{"summary":"Generate correct fault about misconfigured network on failed migration","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:33:28.943-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"I run euca-migrate-instances, specifying an instance id. No output is returned. Instance continues to run on original NC.\r\n\r\n[relavent excerpts from nc.log on both NC|http://pastebin.com/eRCBSWjX]\r\n\r\nThis is reproducible on my cloud.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"euca-migrate-instances fails, breaks both NC if NC are registered on private network","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"customfield_12100":"0|i039zz:","customfield_10000":"5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_77200662_*|*_10001_*:*_1_*:*_430041429","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-06-25T01:09:05.627-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["dshekhawat(dshekhawat)","taylornate(taylornate)","vasya(vasya)"],"environment":"CentOS 6.6","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88309","id":"88309","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"Instances can start again after restarting eucalyptus-nc.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-24T18:48:59.267-0500","updated":"2015-06-24T18:48:59.267-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88315","id":"88315","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"Agh, forgot to say: instances go straight from pending to stopped or terminated on broken NCs. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-24T22:37:06.546-0500","updated":"2015-06-24T22:37:06.546-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88316","id":"88316","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"[~taylornate], please can you look at providing the sosreport of the source and destination node controller ? Please do this after increasing the log level to DEBUG in {{/etc/eucalyptus/eucalyptus.conf}} of both the NC's and then performing a migration that does not work. After that you need to install the eucalyptus sosreport plugin and run the sosreport command.\r\n\r\nRegarding the failure to launch new instance on the NC after the migration failure, please do the same, run an instance that fails to get launched and take a sosreport. You could do it before taking the 1st sosreport so we have the right reports capturing the problem. As far as it is seen looks like NC issue but it would be good to take corresponding sosreport from the CC and CLC as well. Also are the instances EBS backed ? Because EBS backed instances cannot be migrated in Eucalyptus 4.1.1\r\n\r\nTo increase the log level on CC please modify {{/etc/eucalyptus/eucalyptus.conf}} by changing {{LOGLEVEL}} to {{DEBUG}}. For CLC you would need to modify the log level by changing the cloud property for log_level. \r\n\r\nPlease ensure all system components are running on log level {{INFO}} at all times except when you want to troubleshoot a problem and capture the sosreport before turning it back to {{INFO}}.\r\n\r\nRegarding the logs you shared on pastebin the sensitivity level parameter is particular to SELinux and as we know SELinux does not work quite well with Eucalyptus at this point. I am pretty sure you have it disabled if not please proceed to disabling SELinux on all your machines (this would require a system restart).\r\n\r\n\r\nLooking forward to hear back from you soon.\r\n\r\nCheers,\r\nDeependra\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T01:09:05.627-0500","updated":"2015-06-25T01:09:05.627-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88317","id":"88317","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"For now I will clarify that the migration fails on both EBS and Instance-backed instances, and both EBS and Instance-backed instances failed to start on the broken node controllers (EBS backed go from pending to stopped, Instance Store backed go from pending to terminated). Tomorrow I will obtain sosreports.\r\n\r\nPlease clarify the following:\r\n\r\n1) I have SELinux configured according to [these instructions|https://www.eucalyptus.com/docs/eucalyptus/4.0/install-guide/configure_selinux.html]. Is this what you mean by disabled? On all hosts, sestatus returns the following:\r\n\r\nSELinux status:                 enabled\r\nSELinuxfs mount:                /selinux\r\nCurrent mode:                   permissive\r\nMode from config file:          permissive\r\nPolicy version:                 24\r\nPolicy from config file:        targeted\r\n\r\n2) Do you only want sosreports after the failure? Or do you want two sets of sosreports, one before the failure and another one after? Do you want reports after attempted migration of an EBS-backed instance or of an Instance Store-backed? Do you want reports after the failed migration, or after a failed start?\r\n\r\nThanks\r\n\r\nNate","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-25T04:26:58.724-0500","updated":"2015-06-25T04:27:58.703-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88318","id":"88318","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Hi Nate,\r\n\r\nI am not sure why the documentation say this because in our QA system all\r\nthe machines are provisioned with SELinux \"Disabled\" and not \"Permissive\"\r\nperhaps the documentation needs to come at the same level as the QA system.\r\nWe can only commit what we have tested. If QA system is running with\r\n\"Permissive\" mode then that's a different case.\r\n\r\nRegarding the sosreports please gather them after you have successfully\r\nfailed in first migrating the instance and then subsequently launching it\r\non the Node controller. As we know EBS backed instances would fail to\r\nmigrate let's not focus on them.\r\n\r\nAlso could you tell if the instance store backed instances that failed to\r\nmigrate had any EBS volumes (data) attached to them when they were migrated\r\n(that failed?). Currently we experience problems in the migration where the\r\nEBS volume attached to an instance store instance, if large (100GB+) could\r\nresult in failure in migration.\r\n\r\nCheers,\r\nDeependra\r\n\r\nCheers,\r\nDeependra\r\n\r\nOn Thu, Jun 25, 2015 at 2:58 PM, Nathan Wetter Taylor (JIRA) <\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T04:42:45.925-0500","updated":"2015-06-25T04:42:45.925-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88319","id":"88319","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"There were no EBS volumes attached to the instance store backed instance.\r\n\r\nShould I try disabling SELinux? If so, please give instructions.\r\n\r\nThanks\r\n\r\nNate","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-25T04:50:18.551-0500","updated":"2015-06-25T04:50:18.551-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88320","id":"88320","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Thanks [~taylornate], if you could try to disable SELinux it would be a great idea. Please modify {{/etc/sysconfig/selinux}} and set the {{SELINUX=disabled}} (it must be permissive in your system I believe). Then reboot the hosts and try to reproduce again. But I am not 100% sure its SELinux related yet at-least until we see the verbose logs from the sosreports you plan to share later today.\r\n\r\nCheers,\r\nDeependra","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T07:17:30.155-0500","updated":"2015-06-25T07:17:30.155-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88324","id":"88324","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"Would it be necessary to disable SELinux on on the CC and CLC, or only NC? Would rebooting CC cause a disruption to currently-running EBS-backed instances? This is a (small) production cloud, and I would have to coordinate with a couple of users to safely shut down their instances if I am going to disrupt them.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-25T10:09:35.482-0500","updated":"2015-06-25T10:09:35.482-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88325","id":"88325","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Ideally I would keep SELinux disabled on all systems involved in setting up Eucalyptus but for this particular problem it would be sufficient to keep it on the NC for now. Rebooting CC should not affect instance networking (for existing instances) if you are using EDGE networking mode. For this particular issue you do not need to restart CC or CLC. The problem so far (again just based on the small log snippet shared by you initially on the ticket) seems to be localized to the node controllers.\r\n\r\nAll instances on the affected Node controllers have to be either terminated or stopped to prepare them for a machine reboot. This will affect the users using those instances so you will have to communicate it to them in advance and do it on a planned outage window only.\r\n\r\nMeanwhile we are still waiting to grab the verbose log files (via sosreports) after you have successfully reproduced the failure to migrate and run new instances on the node controllers afterwards.\r\n\r\nCheers,\r\nDeependra","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T10:14:05.623-0500","updated":"2015-06-25T10:14:05.623-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88388","id":"88388","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"Behavior after disabling SELinux on both NC is a bit different than before, though still seemingly not correct. Before, the migration failed and seemed to be successfully rolled back, resulting in a pingable instance on the original NC. Now, according to euca-describe-nodes, the (instance store backed) instance has moved to the new NC, but it is not pingable, and by the logs it looks like it is stuck in a migrating or rolling back state. Attempting to start a new instance fails, but this is now because the stuck instance is taking up all cpu on both instance and has not been released for reprovisioning. I can repeat the whole thing with smaller instance types if needed.\r\n\r\nSosreports can be accessed [here|https://uofi.box.com/s/ykm61fzvaxqtbchvshpx9nbo9buq18ca]. *.1.tar.xz and *.2.tar.xz are before and after attempting to launch an instance during the stuck migration, though now I doubt this difference will be helpful.\r\n\r\nThe attempted migration was from nc2 to nc3.\r\n\r\nThanks\r\n\r\nNate","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-25T18:43:22.561-0500","updated":"2015-06-25T18:43:22.561-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88393","id":"88393","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Thanks [~taylornate], the instance ID {{i-2d6e779c}} seems to be stuck in migrating itself from nc2 to nc3. It is not accessible most likely because it is running on both nc2 and nc3. We have never seen this issue in our lab environment. Glad this ticket is assigned to an engineer who should be able to tell the next step. Thanks again for your help in troubleshooting this issue with us.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T22:52:59.697-0500","updated":"2015-06-25T22:52:59.697-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88394","id":"88394","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"One question I have for you, did migration ever worked on this setup before? Is this related to cloud upgrade? I see that the instance directory on NC's is backed with an {{XFS}} filesystem. I am sure we have not tested that as a backend in our QA system, we use {{ext4}} only , it would be interesting to try and reproduce this problem in QA environment with {{XFS}} filesystem.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-25T22:57:06.860-0500","updated":"2015-06-25T22:57:06.860-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88395","id":"88395","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"body":"I have never attempted migration until now. Just entered production on 4.1.1.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=taylornate","name":"taylornate","key":"taylornate","accountId":"557058:2fbcdaba-1cee-48c1-92fb-611ddbe1fb85","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e90c2568062fdfaf688e97c95bd00ec3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"taylornate","active":true,"timeZone":"US/Central"},"created":"2015-06-25T23:02:26.813-0500","updated":"2015-06-25T23:02:26.813-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88461","id":"88461","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"Thanks [~taylornate], for the reference of this ticket I will just give an overview of the reproduction environment that we setup to reproduce this problem.\r\n\r\na) We saw that your cloud has all the instance type definition modified for your consumption (this is fine but we should make a note of it for the reproduction purpose).\r\n\r\nb) The image used to boot the instance was a HVM image. Instances spun off from PV images could fail to migrate if kept running for many hours (this is a known issue).\r\n\r\nc) The image used was an instance store backed not EBS backed. EBS backed instances could fail to get migrated.\r\n\r\nd) The instance migrated was not having any EBS volume attached to it prior to migration. We have seen issues with this as well in the field specially when the size of the data EBS volume is large.\r\n\r\ne) We saw that you tried to migrate an {{m3.2xlarge}} instance with following instance type definition \r\n\r\n{code}\r\nAVAILABILITYZONE\t|- m3.2xlarge  2   2048   800\t\r\n{code}\r\n\r\nf) We found that the migration failed on the destination with the following error message:\r\n\r\n{code}\r\n2015-06-25 17:20:00 ERROR 000003331 migration_rollback       | [i-2d6e779c] request to roll back migration of instance on non-source/destination node 130.126.123.134\r\n{code}\r\n\r\ng) But after this failure the instance kept running on the destination, ideally according to the implementation in Eucalyptus after this error the node controller should have ideally cleaned up the artifacts belonging to instance {{i-2d6e779c}} from the destination.\r\n\r\nThis caused the instance to become un-reachable and in a weird state because the source node controller still thought the migration is in progress.\r\n\r\nThis is very important to note for a further improvement in the migration code of Eucalyptus under failure scenarios to make it more robust.\r\n\r\nh) The {{INSTANCE_PATH}} on node controllers is backed with a 1.5TB drive having {{XFS}} filesystem.\r\n\r\nNow we tried to create an environment as close as possible to your cloud in our lab. We did the following:\r\n\r\na) {{XFS}} filesystem for the node controller backend.\r\nb) Modified instance type for {{m3.2xlarge}} with 800 GB disk\r\nc) We used an HVM image with instance store only.\r\n\r\nWe ran the instance from the HVM image on the source node controller. It was available over SSH momentarily. Once we confirmed it is ready to migrate we issued the migration. \r\n\r\nWe found that the migration took a very long period of time. The reason behind that was found to be the time spent by the destination node controller to transition the instance from {{Paused}} to {{Booting}} state because of waiting to get the disk file created in the instance store (note that the disk for the instance in this case would be a 800GB file on the node controller). But finally the instance successfully got migrated to the destination. In our environment just to give you an idea, it took the migration to finish after 3 hours. Most of the time was only spent in creating the disk file on the destination. We did not see this delay when we booted the instance on the source node controller earlier perhaps because of thin provisioning ? (If this is true we need to add this as a *Note* in our documentation).\r\n\r\nNow coming back to your problem, as you see above we failed to reproduce the issue. But then again looking at the error message from your destination node controller which comes almost after the migration was kicked off:\r\n\r\n{code}\r\n2015-06-25 17:20:00 ERROR 000003331 migration_rollback       | [i-2d6e779c] request to roll back migration of instance on non-source/destination node 130.126.123.134\r\n{code}\r\n\r\nThis tells us that destination was not able to find the node controller on IP address {{130.126.123.134}} (this is destination node controller itself a.k.a nc3). The reason is because the node controllers are all registered on the private subnet hence the destination node controller is registered on the IP {{192.168.1.134}}. The source node controller has the IP address {{192.168.1.133}}.\r\n\r\nSo the question now became that why the destination tried to use the IP address {{130.126.123.134}} when it was registered on IP {{192.168.1.134}}. As we know instance migration uses hostnames instead of IP addresses we found that the hostname of the Node controller was {{bicloud-nc3.beckman.illinois.edu}} which resolves to {{130.126.123.134}} due to DNS server in your environment causing the NC to then use that IP as the reference when it should use the private IP {{192.168.1.134}}.\r\n\r\nNow there could be one way to avoid this behaviour and it must look obvious, it is to create entries in {{/etc/hosts}} file for all your node controllers and ensure they have a IP address<->Hostname mapping on the private IP. So something similar to below:\r\n\r\n{code}\r\n192.168.1.132 bicloud-nc1.beckman.illinois.edu bicloud-nc1.beckman.illinois.edu\r\n192.168.1.133 bicloud-nc2.beckman.illinois.edu bicloud-nc2.beckman.illinois.edu\r\n192.168.1.134 bicloud-nc3.beckman.illinois.edu bicloud-nc3.beckman.illinois.edu\r\n{code}\r\n\r\nThen restart the NC service on all the NCs (this should not affect the running instances), you might be able to do it without restarting the service (I am not 100% sure on it). Now when this is done and you try to migrate an instance,we recommend you first try to migrate via the smallest instance type on the list , in your case that been {{c1.xlarge}}.\r\n\r\nThe {{/etc/hosts}} file should hold preference over the DNS resolution from the local stub resolver causing it to take the right IP on which the NC is actually registered in the system. This should work but we have not tested it as the setup we have does not replicate your environment in this particular aspect. \r\n\r\nIf this does not work, we will have to look at a fresh set of logs from a failure (sosreports from CLC/NCs) and setup a cloud in the same manner as your's with different public and private subnet. \r\n\r\nPlease let me know if you have any questions.\r\n\r\nCheers,\r\nDeependra","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-27T01:35:50.317-0500","updated":"2015-06-27T01:42:24.724-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88561","id":"88561","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"I think we have these issues or improvements to be fixed from the experience documented in this ticket:\r\n\r\na) We should fix our documentation around SELinux. Currently it says SELinux should be set to {{Permissive}} but that does not really work as expected. Also our QA environments have SELinux set to {{Disabled}}\r\n\r\nb) Migration of instances when NC's are on private network needs to be part of a QA test-case part of the test suite for Migration \r\n\r\nc) We could improve some documentation here https://www.eucalyptus.com/docs/eucalyptus/4.1.1/index.html#admin-guide/manage_nodes.html by suggesting the time it could take for instances to get migrated to another node controller particularly when using large disks as it takes a while to actually get created on the destination. Folks should not feel that it isn't doing anything because this is not visible in logs, one has to keep an eye on the file sizes in instance work directory on the destination to get an idea\r\n\r\nd) Lastly when NC's are on private network and someone tries an instance migration without correct {{/etc/hosts}} file entries it should generate an appropriate fault in {{nc-fault.log}} about a possible reason why it could be happening. \r\n\r\nCheers,\r\nDeependra\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2015-06-30T01:31:13.382-0500","updated":"2015-06-30T01:31:13.382-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36919/comment/88580","id":"88580","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~deependra], thank you for excellent research and bug summary. I've created several bugs from your comments and linked them to this one.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-06-30T12:40:15.479-0500","updated":"2015-06-30T12:40:15.479-0500"}],"maxResults":16,"total":16,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11019/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}