{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"42800","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800","key":"EUCA-12283","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17800","id":"17800","description":"Eucalyptus 4.3.1","name":"4.3.1","archived":false,"released":true,"releaseDate":"2016-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2016-11-08T20:19:41.825-0600","customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12283/watchers","watchCount":6,"isWatching":false},"created":"2016-05-05T10:56:12.920-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2016-10-26T19:20:55.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"customfield_10301":null,"labels":["AWSCompat-PM"],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16401","id":"16401","description":"Eucalyptus 4.2.1","name":"4.2.1","archived":false,"released":true,"releaseDate":"2015-12-07"}],"customfield_11901":null,"issuelinks":[{"id":"45010","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/45010","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"37921","key":"EUCA-11320","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37921","fields":{"summary":"Large file uploads fails","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-01-05T16:26:43.695-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12700","id":"12700","name":"OSG","description":"Object Storage Gateway"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10015","id":"10015","name":"Walrus"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nUsed AWS CLI to upload large object (2.2 G) to OSG. The following error was the result:\r\n{code}\r\n[root@c-31 ~]# aws --endpoint-url http://s3.cloud.qa1.eucalyptus-systems.com:8773/ s3 cp --acl public-read ubuntu-xenial-x86-64-cloudtools-v3.img s3://internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img --profile hspencer-qa\r\nupload failed: ./ubuntu-xenial-x86-64-cloudtools-v3.img to s3://internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img\r\nA server error () occurred when calling the UploadPart operation:\r\n\r\n{code}\r\nCommand with debug flag output can be viewed here - https://gist.github.com/hspencer77/7353ad4c5810b6dae8ab85cce2fd969a.  In the output, the following error can be observed:\r\n{code}\r\n....\r\n2016-05-04 20:22:38,272 - Thread-14 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?partNumber=9&uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP HTTP/1.1\" 500 425\r\n2016-05-04 20:22:38,273 - Thread-14 - botocore.parsers - DEBUG - Response headers: {'date': 'Thu, 05 May 2016 03:22:38 GMT', 'content-length': '425', 'x-amz-request-id': '582117ab-d720-483c-91bf-28418520a1c2', 'content-type': 'application/xml'}\r\n2016-05-04 20:22:38,273 - Thread-14 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>InternalError</Code><Message>We encountered an internal error. Please try again.</Message><Resource>internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP&amp;partNumber=9</Resource><RequestId>582117ab-d720-483c-91bf-28418520a1c2</RequestId></Error>\r\n2016-05-04 20:22:38,273 - Thread-14 - botocore.hooks - DEBUG - Event needs-retry.s3.UploadPart: calling handler <botocore.retryhandler.RetryHandler object at 0x3a48f90>\r\n2016-05-04 20:22:38,274 - Thread-14 - botocore.retryhandler - DEBUG - retry needed: retryable HTTP status code received: 500\r\n2016-05-04 20:22:38,274 - Thread-14 - botocore.retryhandler - DEBUG - Retry needed, action of: 7.85042693548\r\n2016-05-04 20:22:38,274 - Thread-14 - botocore.endpoint - DEBUG - Response received to retry, sleeping for 7.85042693548 seconds\r\n2016-05-04 20:22:38,295 - Thread-7 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?partNumber=2&uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP HTTP/1.1\" 500 425\r\n2016-05-04 20:22:38,295 - Thread-7 - botocore.parsers - DEBUG - Response headers: {'date': 'Thu, 05 May 2016 03:22:38 GMT', 'content-length': '425', 'x-amz-request-id': '45a837c8-a62d-46a6-bfc3-75f813e85946', 'content-type': 'application/xml'}\r\n2016-05-04 20:22:38,295 - Thread-7 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>InternalError</Code><Message>We encountered an internal error. Please try again.</Message><Resource>internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP&amp;partNumber=2</Resource><RequestId>45a837c8-a62d-46a6-bfc3-75f813e85946</RequestId></Error>\r\n2016-05-04 20:22:38,296 - Thread-7 - botocore.hooks - DEBUG - Event needs-retry.s3.UploadPart: calling handler <botocore.retryhandler.RetryHandler object at 0x3a48f90>\r\n2016-05-04 20:22:38,296 - Thread-7 - botocore.retryhandler - DEBUG - retry needed: retryable HTTP status code received: 500\r\n2016-05-04 20:22:38,296 - Thread-7 - botocore.retryhandler - DEBUG - Retry needed, action of: 5.46576542877\r\n2016-05-04 20:22:38,296 - Thread-7 - botocore.endpoint - DEBUG - Response received to retry, sleeping for 5.46576542877 seconds\r\n2016-05-04 20:22:38,346 - Thread-6 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?partNumber=1&uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP HTTP/1.1\" 500 425\r\n2016-05-04 20:22:38,347 - Thread-6 - botocore.parsers - DEBUG - Response headers: {'date': 'Thu, 05 May 2016 03:22:38 GMT', 'content-length': '425', 'x-amz-request-id': '41d452f8-9d4f-4df1-af14-e70a589d5676', 'content-type': 'application/xml'}\r\n2016-05-04 20:22:38,347 - Thread-6 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>InternalError</Code><Message>We encountered an internal error. Please try again.</Message><Resource>internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP&amp;partNumber=1</Resource><RequestId>41d452f8-9d4f-4df1-af14-e70a589d5676</RequestId></Error>\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.hooks - DEBUG - Event needs-retry.s3.UploadPart: calling handler <botocore.retryhandler.RetryHandler object at 0x3a48f90>\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.retryhandler - DEBUG - retry needed: retryable HTTP status code received: 500\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.retryhandler - DEBUG - Reached the maximum number of retry attempts: 5\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.retryhandler - DEBUG - No retry needed.\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.hooks - DEBUG - Event after-call.s3.UploadPart: calling handler <function enhance_error_msg at 0x3390938>\r\n2016-05-04 20:22:38,348 - Thread-6 - botocore.hooks - DEBUG - Event after-call.s3.UploadPart: calling handler <awscli.errorhandler.ErrorHandler object at 0x3460910>\r\n2016-05-04 20:22:38,348 - Thread-6 - awscli.errorhandler - DEBUG - HTTP Response Code: 500\r\n2016-05-04 20:22:38,354 - Thread-8 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?partNumber=23&uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP HTTP/1.1\" 500 426\r\n2016-05-04 20:22:38,354 - Thread-8 - botocore.parsers - DEBUG - Response headers: {'date': 'Thu, 05 May 2016 03:22:38 GMT', 'content-length': '426', 'x-amz-request-id': '6eb2dfc8-832c-4c51-a5bb-941f8e958b8b', 'content-type': 'application/xml'}\r\n2016-05-04 20:22:38,354 - Thread-8 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>InternalError</Code><Message>We encountered an internal error. Please try again.</Message><Resource>internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP&amp;partNumber=23</Resource><RequestId>6eb2dfc8-832c-4c51-a5bb-941f8e958b8b</RequestId></Error>\r\n2016-05-04 20:22:38,354 - Thread-8 - botocore.hooks - DEBUG - Event needs-retry.s3.UploadPart: calling handler <botocore.retryhandler.RetryHandler object at 0x3a48f90>\r\n2016-05-04 20:22:38,355 - Thread-8 - botocore.retryhandler - DEBUG - retry needed: retryable HTTP status code received: 500\r\n2016-05-04 20:22:38,355 - Thread-8 - botocore.retryhandler - DEBUG - Retry needed, action of: 0.831188545731\r\n2016-05-04 20:22:38,355 - Thread-8 - botocore.endpoint - DEBUG - Response received to retry, sleeping for 0.831188545731 seconds\r\n2016-05-04 20:22:38,355 - Thread-13 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"PUT /internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?partNumber=19&uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP HTTP/1.1\" 500 426\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.parsers - DEBUG - Response headers: {'date': 'Thu, 05 May 2016 03:22:38 GMT', 'content-length': '426', 'x-amz-request-id': '4e5297c0-1267-434c-9372-6e30cb5658ec', 'content-type': 'application/xml'}\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.parsers - DEBUG - Response body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>InternalError</Code><Message>We encountered an internal error. Please try again.</Message><Resource>internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img?uploadId=VLRMQF7UFBMLUO8VINAIW1OBSJE5IV0BJOUC9B6UU8ACWFW6QUPSE5JQNRNYFPVP&amp;partNumber=19</Resource><RequestId>4e5297c0-1267-434c-9372-6e30cb5658ec</RequestId></Error>\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.hooks - DEBUG - Event needs-retry.s3.UploadPart: calling handler <botocore.retryhandler.RetryHandler object at 0x3a48f90>\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.retryhandler - DEBUG - retry needed: retryable HTTP status code received: 500\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.retryhandler - DEBUG - Retry needed, action of: 3.92777176283\r\n2016-05-04 20:22:38,356 - Thread-13 - botocore.endpoint - DEBUG - Response received to retry, sleeping for 3.92777176283 seconds\r\n2016-05-04 20:22:38,349 - Thread-6 - awscli.customizations.s3.tasks - DEBUG - Error during part upload: A server error () occurred when calling the UploadPart operation:\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python2.6/site-packages/awscli/customizations/s3/tasks.py\", line 241, in __call__\r\n    response_data = self._filename.client.upload_part(**params)\r\n  File \"/usr/lib/python2.6/site-packages/botocore/client.py\", line 228, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/usr/lib/python2.6/site-packages/botocore/client.py\", line 488, in _make_api_call\r\n    model=operation_model, context=request_context\r\n  File \"/usr/lib/python2.6/site-packages/botocore/hooks.py\", line 226, in emit\r\n    return self._emit(event_name, kwargs)\r\n  File \"/usr/lib/python2.6/site-packages/botocore/hooks.py\", line 209, in _emit\r\n    response = handler(**kwargs)\r\n  File \"/usr/lib/python2.6/site-packages/awscli/errorhandler.py\", line 70, in __call__\r\n    http_status_code=http_response.status_code)\r\nServerError: A server error () occurred when calling the UploadPart operation:\r\n2016-05-04 20:22:38,401 - Thread-6 - awscli.customizations.s3.executor - DEBUG - Worker thread invoking task: <awscli.customizations.s3.tasks.UploadPartTask object at 0x7f0bd40221d0>\r\n2016-05-04 20:22:38,401 - Thread-1 - awscli.customizations.s3.executor - DEBUG - Received print task: PrintTask(message=u'upload failed: ./ubuntu-xenial-x86-64-cloudtools-v3.img to s3://internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img\\nA server error () occurred when calling the UploadPart operation: ', error=True, total_parts=None, warning=None)\r\nupload failed: ./ubuntu-xenial-x86-64-cloudtools-v3.img to s3://internal-emis/images/ubuntu-xenial-x86-64-cloudtools.img\r\nA server error () occurred when calling the UploadPart operation:\r\n2016-05-04 20:22:38,401 - Thread-6 - awscli.customizations.s3.tasks - DEBUG - Uploading part 24 for filename: /root/ubuntu-xenial-x86-64-cloudtools-v3.img\r\n2016-05-04 20:22:38,401 - Thread-6 - awscli.customizations.s3.tasks - DEBUG - Waiting for upload id.\r\n2016-05-04 20:22:38,401 - Thread-6 - awscli.customizations.s3.tasks - DEBUG - Not uploading part, task has been cancelled.\r\n....\r\n{code}\r\n\r\n*Additional Information*\r\n\r\n* Version of AWS CLI\r\n{code}\r\n[root@c-31 ~]# aws --version\r\naws-cli/1.10.17 Python/2.6.6 Linux/2.6.32-573.22.1.el6.x86_64 botocore/1.4.8\r\n{code}\r\n* Error seen on OSG in {{/var/log/eucalyptus/cloud-tracking.log}} file:\r\n{code}\r\n2016-05-04 20:21:52 ERROR | [855fe278-90e5] Data PUT failure to backend for bucketuuid / objectuuid : 5af6fd44-f356-4abc-b68d-7d836c2a9d35/319f956b-f466-4f30-946a-dc693b8444d9-images/ubuntu-xenial-x86-64-cloudtools.img\r\njava.util.concurrent.ExecutionException: com.amazonaws.AmazonClientException: Unable to verify integrity of data upload.  Client calculated content hash didn't match hash calculated by Amazon S3.  You may need to delete the data stored in Amazon S3.\r\n        at java.util.concurrent.FutureTask.report(FutureTask.java:122)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:202)\r\n        at com.eucalyptus.objectstorage.ObjectFactoryImpl.waitForCompletion(ObjectFactoryImpl.java:361)\r\n        at com.eucalyptus.objectstorage.ObjectFactoryImpl.createObjectPart(ObjectFactoryImpl.java:682)\r\n        at com.eucalyptus.objectstorage.ObjectStorageGateway.uploadPart(ObjectStorageGateway.java:2111)\r\n        at sun.reflect.GeneratedMethodAccessor2557.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at org.mule.model.resolvers.AbstractEntryPointResolver.invokeMethod(AbstractEntryPointResolver.java:151)\r\n        at org.mule.model.resolvers.ReflectionEntryPointResolver.invoke(ReflectionEntryPointResolver.java:121)\r\n        at org.mule.model.resolvers.DefaultEntryPointResolverSet.invoke(DefaultEntryPointResolverSet.java:39)\r\n        at org.mule.component.DefaultComponentLifecycleAdapter.invoke(DefaultComponentLifecycleAdapter.java:343)\r\n        at org.mule.component.AbstractJavaComponent.invokeComponentInstance(AbstractJavaComponent.java:86)\r\n        at org.mule.component.AbstractJavaComponent.doInvoke(AbstractJavaComponent.java:77)\r\n        at org.mule.component.AbstractComponent.invokeInternal(AbstractComponent.java:126)\r\n        at org.mule.component.AbstractComponent.access$000(AbstractComponent.java:61)\r\n        at org.mule.component.AbstractComponent$1$1.process(AbstractComponent.java:242)\r\n        at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)\r\n        at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:61)\r\n        at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:47)\r\n        at org.mule.processor.chain.DefaultMessageProcessorChain.doProcess(DefaultMessageProcessorChain.java:95)\r\n        at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:70)\r\n        at org.mule.processor.chain.InterceptingChainLifecycleWrapper.doProcess(InterceptingChainLifecycleWrapper.java:54)\r\n        at org.mule.processor.chain.AbstractMessageProcessorChain.process(AbstractMessageProcessorChain.java:70)\r\n        at org.mule.processor.chain.InterceptingChainLifecycleWrapper.access$001(InterceptingChainLifecycleWrapper.java:26)\r\n        at org.mule.processor.chain.InterceptingChainLifecycleWrapper$1.process(InterceptingChainLifecycleWrapper.java:70)\r\n        at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)\r\n        at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:61)\r\n        at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:47)\r\n        at org.mule.processor.chain.InterceptingChainLifecycleWrapper.process(InterceptingChainLifecycleWrapper.java:65)\r\n        at org.mule.component.AbstractComponent.process(AbstractComponent.java:160)\r\n        at org.mule.service.processor.ServiceInternalMessageProcessor.process(ServiceInternalMessageProcessor.java:44)\r\n        at org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor.execute(ExceptionToMessagingExceptionExecutionInterceptor.java:27)\r\n        at org.mule.execution.MessageProcessorNotificationExecutionInterceptor.execute(MessageProcessorNotificationExecutionInterceptor.java:61)\r\n        at org.mule.execution.MessageProcessorExecutionTemplate.execute(MessageProcessorExecutionTemplate.java:47)\r\n        at org.mule.processor.AbstractInterceptingMessageProcessorBase.processNext(AbstractInterceptingMessageProcessorBase.java:106)\r\n        at org.mule.interceptor.AbstractEnvelopeInterceptor.process(AbstractEnvelopeInterceptor.java:55)\r\n        at org.mule.processor.AsyncInterceptingMessageProcessor.processNextTimed(AsyncInterceptingMessageProcessor.java:122)\r\n        at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker$1.process(AsyncInterceptingMessageProcessor.java:192)\r\n        at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker$1.process(AsyncInterceptingMessageProcessor.java:185)\r\n        at org.mule.execution.ExecuteCallbackInterceptor.execute(ExecuteCallbackInterceptor.java:20)\r\n        at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:34)\r\n        at org.mule.execution.HandleExceptionInterceptor.execute(HandleExceptionInterceptor.java:18)\r\n        at org.mule.execution.BeginAndResolveTransactionInterceptor.execute(BeginAndResolveTransactionInterceptor.java:58)\r\n        at org.mule.execution.ResolvePreviousTransactionInterceptor.execute(ResolvePreviousTransactionInterceptor.java:48)\r\n        at org.mule.execution.SuspendXaTransactionInterceptor.execute(SuspendXaTransactionInterceptor.java:54)\r\n        at org.mule.execution.ValidateTransactionalStateInterceptor.execute(ValidateTransactionalStateInterceptor.java:44)\r\n        at org.mule.execution.IsolateCurrentTransactionInterceptor.execute(IsolateCurrentTransactionInterceptor.java:44)\r\n        at org.mule.execution.ExternalTransactionInterceptor.execute(ExternalTransactionInterceptor.java:52)\r\n        at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:32)\r\n        at org.mule.execution.RethrowExceptionInterceptor.execute(RethrowExceptionInterceptor.java:17)\r\n        at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:113)\r\n        at org.mule.execution.TransactionalErrorHandlingExecutionTemplate.execute(TransactionalErrorHandlingExecutionTemplate.java:34)\r\n        at org.mule.processor.AsyncInterceptingMessageProcessor$AsyncMessageProcessorWorker.doRun(AsyncInterceptingMessageProcessor.java:184)\r\n        at org.mule.work.AbstractMuleEventWork.run(AbstractMuleEventWork.java:43)\r\n        at org.mule.work.WorkerContext.run(WorkerContext.java:311)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:744)\r\nCaused by: com.amazonaws.AmazonClientException: Unable to verify integrity of data upload.  Client calculated content hash didn't match hash calculated by Amazon S3.  You may need to delete the data stored in Amazon S3.\r\n        at com.amazonaws.services.s3.AmazonS3Client.uploadPart(AmazonS3Client.java:2575)\r\n        at com.eucalyptus.objectstorage.providers.s3.S3ProviderClient.uploadPart(S3ProviderClient.java:1123)\r\n        at com.eucalyptus.objectstorage.ObjectFactoryImpl$5.call(ObjectFactoryImpl.java:657)\r\n        at com.eucalyptus.objectstorage.ObjectFactoryImpl$5.call(ObjectFactoryImpl.java:652)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n        ... 3 more\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/30408","id":"30408","filename":"aws_cli_multipart_upload_2016-05-20_1637.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-20T18:43:07.963-0500","size":226356,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/30408/aws_cli_multipart_upload_2016-05-20_1637.txt"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/36204","id":"36204","filename":"ufs-tracking.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:01:12.714-0600","size":1011481,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/36204/ufs-tracking.log"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/36205","id":"36205","filename":"walrus-tracking.log","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:01:11.917-0600","size":85644,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/36205/walrus-tracking.log"}],"summary":"OSG fails multi-part upload to Walrus when client uploads concurrently","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_3_*:*_210119397_*|*_10000_*:*_1_*:*_20091713_*|*_10001_*:*_3_*:*_15349975048_*|*_10003_*:*_2_*:*_614022763_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i03qif:","customfield_10001":"2016-05-05T16:31:04.628-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["dmitrii(dmitrii)","hspencer(hspencer)","lincoln.thomas(lincoln.thomas)","sjones(sjones)","swathi(swathi)","vasya(vasya)"],"customfield_10117":null,"environment":"[QA Cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Quality+Infrastructure]","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12283/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/102408","id":"102408","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"I am not sure if this is a case where we extend the error messages from what [AWS provides|http://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html#ErrorCodeList].  Maybe we could return to the client the error message seen in the cloud-tracking.log:\r\n{code}\r\nUnable to verify integrity of data upload.  Client calculated content hash didn't match hash calculated by Amazon S3.  You may need to delete the data stored in Amazon S3.\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-05T13:02:11.423-0500","updated":"2016-05-05T13:02:11.423-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/102440","id":"102440","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"We'll want to make sure\r\n\r\n- we're returning the right code\r\n- propagate error if possible or say something more meaningful if not\r\n- if this is a symptom of a problem, then the problem is more critical","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-05-05T16:31:04.628-0500","updated":"2016-05-05T16:31:04.628-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/102446","id":"102446","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploading using the AWS CLI with larger files (>12MB) works for me when setting the concurrency to one:\r\n\r\n.aws/config:\r\n{code}\r\n[default]\r\nregion = eucalyptus\r\ns3 =\r\n    signature_version = s3\r\n    max_concurrent_requests = 1\r\n{code}\r\n\r\nThe error is not always visible to the client, the cloud-error.log on the objectstorage host can be checked for:\r\n\r\n{code}\r\nUnable to verify integrity of data upload.  Client calculated content hash didn't match hash calculated by Amazon S3\r\n{code}\r\n\r\nit looks like Walrus returns the md5 of the wrong part for concurrent multipart uploads, perhaps related to use of bucket/object as a key rather than bucket/object/part.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-05T19:01:31.015-0500","updated":"2016-05-05T19:01:31.015-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103434","id":"103434","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"I repro'd the problem, although my outputs are different. It's more than an error message issue, which I've moved to new issue EUCA-12388. The issue here now focuses on why the multi-part upload fails.\r\n\r\nOn my client, if I set {{max_concurrent_requests = 1}} in my {{~/.aws/config}} file, as [~sjones] did in the previous comment, I see no problems uploading a 243MB file (obtained from http://internal-emis.objectstorage.cloud.qa1.eucalyptus-systems.com:8773/images/centos-7-base.raw.xz ):\r\n\r\n{noformat}\r\n# aws --endpoint-url http://s3.d-20.autoqa.qa1.eucalyptus-systems.com:8773/ s3 cp centos-7-base.raw.xz s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nupload: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\n{noformat}\r\n\r\nHowever, without that {{max_concurrent_requests = 1}} line, it fails consistently, but with a different output than [~sjones] and [~hspencer] saw, on a 4.3 (latest master) 3-node cluster in EQS.\r\n\r\nOn the client:\r\n{noformat}\r\n# aws --endpoint-url http://s3.d-20.autoqa.qa1.eucalyptus-systems.com:8773/ s3 cp centos-7-base.raw.xz s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nupload failed: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nA server error () occurred when calling the UploadPart operation:\r\nupload failed: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nA server error () occurred when calling the UploadPart operation:\r\nupload failed: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nA server error () occurred when calling the UploadPart operation:\r\nupload failed: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nA server error () occurred when calling the UploadPart operation:\r\nupload failed: ./centos-7-base.raw.xz to s3://internal-emis/images/centos-7-base.raw.xz_take2\r\nA server error () occurred when calling the UploadPart operation:\r\nCompleted 12 of 30 part(s) with -4 file(s) remaining\r\n{noformat}\r\n\r\nThe cluster is http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Current%20Public%20Release/49/ . On that CLC, in cloud-debug.log, lots of these:\r\n\r\n{noformat}\r\nFri May 20 13:43:13 2016  WARN [WalrusFSManager:Bukkit.24] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:13 2016  WARN [WalrusFSManager:Bukkit.18] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:14 2016 DEBUG [Faults:Eucalyptus.eucalyptus:EphemeralConfiguration:arn:euca:eucalyptus:::com.eucalyptus.component.\\\r\nFaults/.class java.util.concurrent.ThreadPoolExecutor$Worker#408] Fault notifications: waking up to service error queue.\r\nFri May 20 13:43:15 2016  WARN [WalrusFSManager:Bukkit.22] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:16 2016  WARN [WalrusFSManager:Bukkit.23] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:17 2016  WARN [WalrusFSManager:Bukkit.18] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:17 2016 ERROR [WalrusFSManager:Eucalyptus.walrusbackend:ObjectDeleter.class java.util.concurrent.ThreadPoolExecuto\\\r\nr$Worker#4017] Failed to delete file=dba68592-82b0-4bc1-b76f-0990c5341e25, bucket=40506923-66c3-43d7-a545-51509721139d\r\njava.io.IOException: Unable to delete: /var/lib/eucalyptus/bukkits/40506923-66c3-43d7-a545-51509721139d/dba68592-82b0-4bc1-b76f-099\\\r\n0c5341e25\r\n        at com.eucalyptus.walrus.storage.FileSystemStorageManager.deleteObject(FileSystemStorageManager.java:189)\r\n        at com.eucalyptus.walrus.WalrusFSManager$ObjectDeleter.run(WalrusFSManager.java:757)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\nFri May 20 13:43:17 2016  WARN [WalrusFSManager:Bukkit.24] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:18 2016  WARN [WalrusFSManager:Bukkit.21] Transfer interrupted: 40506923-66c3-43d7-a545-51509721139d.e50d3b43-228f\\\r\n-4b05-bf95-3735e4a99f2e\r\nFri May 20 13:43:18 2016 DEBUG [Hosts:Eucalyptus.bootstrap:Hosts.class java.util.concurrent.ThreadPoolExecutor$Worker#73] Hosts.ent\\\r\nrySet(): 10.111.1.73 => Host 10.111.1.73 #38 /10.111.1.73 coordinator=10.111.1.73 booted db started=1463533920834 [/10.107.101.73, \\\r\n/10.111.1.73]\r\n{noformat}\r\n\r\nI'll continue to investigate in the code...\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-20T16:05:05.414-0500","updated":"2016-05-20T16:05:05.414-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103452","id":"103452","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"Same behavior occurs when using the AWS CLI from my laptop, with (I assume) much slower bandwidth than with the client I used within the same EQS lab as the Euca cluster (previous comment).\r\n\r\nThe warning comes from here, line 1552 of WalrusFSManager.java:\r\n            LOG.warn(\"Transfer interrupted: \" + key);\r\n\r\nApparently, the 4th part to be uploaded interrupts the uploading of the first 3, and those 3 parts fail their uploads instead of handling the interrupt and syncing on a certain monitor, then finishing their uploads. Does seem to be a concurrency issue. \r\n\r\nAttaching the AWS CLI output, looks like the one [~hspencer] uploaded in the original Description.\r\n\r\nNone of this code seems to have changed in the past year, so I don't yet know why I'm getting different errors now in the cloud log files.\r\n\r\nInvestigation continues...","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-20T18:50:23.560-0500","updated":"2016-05-20T18:50:23.560-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103455","id":"103455","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"Postulate: There is a {{WalrusDataQueue<WalrusDataMessage> putQueue}} gotten from a static queue of a part's chunks by multiple threads, if {{max_concurrent_requests}} > 1 in the AWS CLI config file. They get {{WalrusDataMessage}} chunks from the same static queue, which is OK because the chunks are serialized in the queue. The last message (chunk) in the queue has an EOF flag which tells the thread to finalize that object's part.\r\n\r\nIt looks like Walrus handles 3 parts concurrently, by default. When a thread gets the EOF flagged chunk of a part, it interrupts all other threads to get the next part. When an interrupted thread has just grabbed the last message (EOF-flagged) of its part, which is likely if threads are finishing their constant-sized parts at about the same time, there's a problem. \r\n\r\nAt line 1550 in WalrusFSManager.java:\r\n{noformat}\r\n            ObjectDeleter objectDeleter = new ObjectDeleter(bucketName, tempObjectName, null, null);\r\n            Threads.lookup(WalrusBackend.class, WalrusFSManager.ObjectDeleter.class).limitTo(10).submit(objectDeleter);\r\n            LOG.warn(\"Transfer interrupted: \" + key);\r\n            messenger.removeQueue(key, randomKey);\r\n{noformat}\r\n\r\nThe tempObjectName may not exist if this thread that has this EOF chunk did not earlier see the first chunk of this part, where the tempObjectName object is created (as a randomUUID string). This thread will have assigned a tempObjectName as a randomUUID string, but it won't be the same random string assigned by the other thread that grabbed the first chunk from the queue. So the deletion of this thread's temp object fails (doesn't exist), and things go south from there.\r\n\r\nInvestigation continues...","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-20T19:32:31.227-0500","updated":"2016-05-20T19:32:31.227-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103550","id":"103550","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified that the error behavior in v4.1.2 matches what [~hspencer] and [~sjones] saw. So, the problem is at least that old, and code changes in 4.3 changed the behavior and error messages, but the symptom remains. Investigation continues...\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-24T11:09:27.650-0500","updated":"2016-05-24T11:09:27.650-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103570","id":"103570","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks, [~lincoln.thomas], kicking out of 4.3.0.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-05-24T12:56:45.383-0500","updated":"2016-05-24T12:56:45.383-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103610","id":"103610","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"FYI for later work: This is a walrus-specific issue. Uploaded 4.7GB files to a 4.3 cluster with RiakCS with no problems, with AWS CLI's concurrent requests set to 100.\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-24T20:03:48.797-0500","updated":"2016-05-24T20:03:48.797-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103611","id":"103611","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"From [~swathi]: At line 1527 of WalrusFSManager.java, the key used is not unique across parts, it would be the same for all parts which is not right. I think that mucks with the data as well as the operation. This logic was pretty much copied from PUT object which is essentially a single part operation. Appending the part number to the key would be a good place to start.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-24T20:05:57.402-0500","updated":"2016-05-24T20:05:57.402-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/103783","id":"103783","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"body":"At today's bug scrub, it was decided the general error messaging issue is not an issue, and EUCA-12388 was closed. Recording here since it was spawned from this issue.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lincoln.thomas","name":"lincoln.thomas","key":"lincoln.thomas","accountId":"557058:f9364c00-87ee-4948-b657-bb8f8f2030ea","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/c21bba9797b880c34a5d772e6db4664f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlincoln.thomas%26avatarId%3D17800%26noRedirect%3Dtrue"},"displayName":"Lincoln Thomas","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-05-26T16:36:17.929-0500","updated":"2016-05-26T16:36:17.929-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112212","id":"112212","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I put a candidate fix for this issue on github here:\r\n\r\nhttps://github.com/sjones4/eucalyptus/commit/eca4fce1b980a8bc2e84aad8748a660dbfb38ac0\r\n\r\nthe same commit is available in our eucalyptus git repo.\r\n\r\nWith the above change in place the aws cli works as expected when copying objects (when configured using \"aws configure set default.s3.signature_version s3\"):\r\n\r\n{code}\r\n#\r\n# head -c 20000000 /dev/zero &> zero.txt\r\n#\r\n# eval $(euca-generate-environment-config)\r\n#\r\n# aws --endpoint $S3_URL s3 cp zero.txt s3://test/zero.txt.7\r\nupload: ./zero.txt to s3://test/zero.txt.7    \r\n#\r\n#\r\n{code}\r\n\r\n and qa/unit tests pass ( http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.3/133/ )","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T13:00:47.260-0500","updated":"2016-10-27T13:00:47.260-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112227","id":"112227","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~sjones], thank you for the patch. [~swathi], could you review [~sjones]'s change?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-10-27T15:56:20.776-0500","updated":"2016-10-27T15:56:20.776-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112307","id":"112307","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones], fix looks good to me, thank you for making the changes! \r\n\r\n[~vasya], this fix has the change I recommended and more. Let me know if you continue running into issues with the testing","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=swathi","name":"swathi","key":"swathi","accountId":"557058:ab7e71b5-781c-49ea-9f4d-ea9148c88f03","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d6487612d6674329ecef11be0a95552b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dswathi%26avatarId%3D17901%26noRedirect%3Dtrue"},"displayName":"Swathi Gangisetty","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-10-28T11:50:04.171-0500","updated":"2016-10-28T11:50:04.171-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112447","id":"112447","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in eca4fce1b980a8. Merged into 4.3 branches and master.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-11-01T18:35:07.531-0500","updated":"2016-11-01T18:35:07.531-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112825","id":"112825","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like the fix worked initially, however after posting the following:\r\n{code}\r\nCompleted 12.2 GiB/12.2 GiB with 1 file(s) remaining\r\n{code}\r\nThe upload fails with the message below:\r\n{code}\r\nupload failed: ./xenial-server-cloudimg-amd64-disk1.raw to s3://cloud-images/xenial-server-cloudimg-amd64-disk1.raw An error occurred () when calling the CompleteMultipartUpload operation (reached max retries: 4):\r\n{code}\r\n\r\nA few things to note here:\r\n* The image used was increased by 10Gs using {{qemu-img resize}}.\r\n* AWS CLI was configured to use s3 as the signature version.\r\n* {{cloud-tracking.log}} file attached from UFS and Walrus (UFS and Walrus are on separate machines)\r\n\r\n*Eucalyptus Version*\r\n\r\n{{4.3.1-0.25149.70.20161107git7d68652.el7}}\r\n\r\n*AWS CLI Version*\r\n\r\n{code}\r\n[root@g-22-05 ~]# aws --version\r\naws-cli/1.11.13 Python/2.7.5 Linux/3.10.0-327.36.3.el7.x86_64 botocore/1.4.70\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up Eucalyptus 4.3.1 cloud with VPC - [hspencer-164|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.3/164/]\r\n# Created non-eucalyptus account:\r\n{code}\r\n[root@g-22-05 ~]# euare-accountcreate -a development-operations -w > .euca/devops-admin.ini\r\n{code}\r\n# Set up AWS CLI, and set s3 signature version\r\n{code}\r\n[root@g-22-05 ~]# aws configure --profile devops-admin\r\n[root@g-22-05 ~]# aws configure set default.s3.signature_version s3 --profile devops-admin\r\n{code}\r\n# Created an image around ~12 gigs\r\n{code}\r\n[root@g-22-05 ~]# qemu-img info xenial-server-cloudimg-amd64-disk1.raw\r\nimage: xenial-server-cloudimg-amd64-disk1.raw\r\nfile format: raw\r\nvirtual size: 12G (13098811392 bytes)\r\ndisk size: 972M\r\n{code}\r\n# Create bucket, then upload the image:\r\n{code}\r\n[root@g-22-05 ~]# aws --endpoint-url http://s3.c-38.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://cloud-images --profile devops-admin\r\nmake_bucket: cloud-images\r\n[root@g-22-05 ~]# aws --endpoint-url http://s3.c-38.autoqa.qa1.eucalyptus-systems.com:8773/ s3 cp --acl public-read xenial-server-cloudimg-amd64-disk1.raw s3://cloud-images/ --profile devops-admin\r\nupload failed: ./xenial-server-cloudimg-amd64-disk1.raw to s3://cloud-images/xenial-server-cloudimg-amd64-disk1.raw An error occurred () when calling the CompleteMultipartUpload operation (reached max retries: 4):\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:00:23.003-0600","updated":"2016-11-08T20:00:23.003-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112826","id":"112826","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], please verify using the original test scenario for the issue (i.e. smaller upload). It is likely you are hitting other known issues in your test (e.g. EUCA-11320)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:10:41.433-0600","updated":"2016-11-08T20:10:41.433-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112827","id":"112827","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],  ah okay.  Yep, that was it.  I tried with a 4.2 gig file, and it worked just fine.  ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:18:02.138-0600","updated":"2016-11-08T20:18:02.138-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42800/comment/112828","id":"112828","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.3.1-0.25149.70.20161107git7d68652.el7}}\r\n\r\n*AWS CLI Version*\r\n\r\n{code}\r\n[root@g-22-05 ~]# aws --version\r\naws-cli/1.11.13 Python/2.7.5 Linux/3.10.0-327.36.3.el7.x86_64 botocore/1.4.70\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up Eucalyptus 4.3.1 cloud with VPC - [hspencer-164|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.3/164/]\r\n# Created non-eucalyptus account:\r\n{code}\r\n[root@g-22-05 ~]# euare-accountcreate -a development-operations -w > .euca/devops-admin.ini\r\n{code}\r\n# Set up AWS CLI, and set s3 signature version\r\n{code}\r\n[root@g-22-05 ~]# aws configure --profile devops-admin\r\n[root@g-22-05 ~]# aws configure set default.s3.signature_version s3 --profile devops-admin\r\n{code}\r\n# Created an image around ~4 gigs\r\n{code}\r\n[root@g-22-05 ~]# qemu-img info zesty-server-cloudimg-amd64.raw\r\nimage: zesty-server-cloudimg-amd64.raw\r\nfile format: raw\r\nvirtual size: 4.2G (4508876800 bytes)\r\ndisk size: 1.0G\r\n{code}\r\n# Create bucket, then upload the image:\r\n{code}\r\n[root@g-22-05 ~]# aws --endpoint-url http://s3.c-38.autoqa.qa1.eucalyptus-systems.com:8773/ s3 mb s3://cloud-images --profile devops-admin\r\nmake_bucket: cloud-images\r\n[root@g-22-05 ~]# aws --endpoint-url http://s3.c-38.autoqa.qa1.eucalyptus-systems.com:8773/ s3 cp --acl public-read zesty-server-cloudimg-amd64.raw s3://cloud-images/ --profile devops-admin\r\nupload: ./zesty-server-cloudimg-amd64.raw to s3://cloud-images/zesty-server-cloudimg-amd64.raw\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-11-08T20:19:41.838-0600","updated":"2016-11-08T20:19:41.838-0600"}],"maxResults":19,"total":19,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}