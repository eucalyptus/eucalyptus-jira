{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"38577","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38577","key":"EUCA-11450","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2015-10-04T11:38:30.558-0500","customfield_10308":null,"customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11450/watchers","watchCount":2,"isWatching":false},"lastViewed":null,"created":"2015-10-03T11:51:07.012-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15501","id":"15501","description":"Eucalyptus 4.1.2","name":"4.1.2","archived":false,"released":true,"releaseDate":"2015-07-30"}],"issuelinks":[],"assignee":null,"updated":"2015-10-04T11:38:30.679-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Okay -- I've managed to get HA up using 4.1.2.  It seems to be failing over correctly, but after the fail over, the new master CLC reports services as unavailable.\r\n\r\nIn the following example, 10.0.1.26 is the master that I used to configure HA and 10.0.1.25 was the secondary.  The system came up and worked correctly.  Then I shutdown the cloud on 10.0.1.26.  The services display on 10.0.1.25 is\r\n\r\nSERVICE\tuser-api          \tapi-10.0.1.26\tapi-10.0.1.26        \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/User-API\tarn:euca:bootstrap:api-10.0.1.26:user-api:api-10.0.1.26/\r\nSERVICE\tautoscaling       \tapi-10.0.1.26\tapi-10.0.1.26.autoscaling\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/AutoScaling\tarn:euca:bootstrap:api-10.0.1.26:autoscaling:api-10.0.1.26.autoscaling/\r\nSERVICE\tcloudformation    \tapi-10.0.1.26\tapi-10.0.1.26.cloudformation\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/CloudFormation\tarn:euca:bootstrap:api-10.0.1.26:cloudformation:api-10.0.1.26.cloudformation/\r\nSERVICE\tcloudwatch        \tapi-10.0.1.26\tapi-10.0.1.26.cloudwatch\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/CloudWatch\tarn:euca:bootstrap:api-10.0.1.26:cloudwatch:api-10.0.1.26.cloudwatch/\r\nSERVICE\tcompute           \tapi-10.0.1.26\tapi-10.0.1.26.compute\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/compute\tarn:euca:bootstrap:api-10.0.1.26:compute:api-10.0.1.26.compute/\r\nSERVICE\teuare             \tapi-10.0.1.26\tapi-10.0.1.26.euare  \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/Euare\tarn:euca:bootstrap:api-10.0.1.26:euare:api-10.0.1.26.euare/\r\nSERVICE\timaging           \tapi-10.0.1.26\tapi-10.0.1.26.imaging\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/Imaging\tarn:euca:bootstrap:api-10.0.1.26:imaging:api-10.0.1.26.imaging/\r\nSERVICE\tloadbalancing     \tapi-10.0.1.26\tapi-10.0.1.26.loadbalancing\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/LoadBalancing\tarn:euca:bootstrap:api-10.0.1.26:loadbalancing:api-10.0.1.26.loadbalancing/\r\nSERVICE\tobjectstorage     \tapi-10.0.1.26\tapi-10.0.1.26.objectstorage\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/objectstorage\tarn:euca:bootstrap:api-10.0.1.26:objectstorage:api-10.0.1.26.objectstorage/\r\nSERVICE\tsimpleworkflow    \tapi-10.0.1.26\tapi-10.0.1.26.simpleworkflow\tNOTREADY\t47  \thttp://10.0.1.26:8773/services/SimpleWorkflow\tarn:euca:bootstrap:api-10.0.1.26:simpleworkflow:api-10.0.1.26.simpleworkflow/\r\nSERVICE\ttokens            \tapi-10.0.1.26\tapi-10.0.1.26.tokens \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/Tokens\tarn:euca:bootstrap:api-10.0.1.26:tokens:api-10.0.1.26.tokens/\r\nSERVICE\tcluster           \taz01      \tcc-10.0.1.25         \tENABLED \t47  \thttp://10.0.1.25:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:az01:cluster:cc-10.0.1.25/\r\nSERVICE\tstorage           \taz01      \tsc-10.0.1.25         \tENABLED \t47  \thttp://10.0.1.25:8773/services/Storage\tarn:euca:eucalyptus:az01:storage:sc-10.0.1.25/\r\nSERVICE\tcluster           \taz01      \tcc-10.0.1.26         \tDISABLED\t47  \thttp://10.0.1.26:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:az01:cluster:cc-10.0.1.26/\r\nSERVICE\tstorage           \taz01      \tsc-10.0.1.26         \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/Storage\tarn:euca:eucalyptus:az01:storage:sc-10.0.1.26/\r\nSERVICE\treporting         \tbootstrap \t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Reporting\tarn:euca:bootstrap::reporting:10.0.1.25/\r\nSERVICE\tbootstrap         \tbootstrap \t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Empyrean\tarn:euca:bootstrap:::10.0.1.25/    \r\nSERVICE\teucalyptus        \teucalyptus\t192.168.1.1          \tNOTREADY\t47  \thttp://192.168.1.1:8773/services/Eucalyptus\tarn:euca:eucalyptus:::192.168.1.1/ \r\nSERVICE\tloadbalancingbackend\teucalyptus\t10.0.1.25            \tNOTREADY\t47  \thttp://10.0.1.25:8773/services/LoadBalancingBackend\tarn:euca:eucalyptus::loadbalancingbackend:10.0.1.25/\r\nSERVICE\tcloudwatchbackend \teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/CloudWatchBackend\tarn:euca:eucalyptus::cloudwatchbackend:10.0.1.25/\r\nSERVICE\tautoscalingbackend\teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/AutoScalingBackend\tarn:euca:eucalyptus::autoscalingbackend:10.0.1.25/\r\nSERVICE\tdns               \teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Dns \tarn:euca:eucalyptus::dns:10.0.1.25/\r\nSERVICE\tnotifications     \teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Notifications\tarn:euca:eucalyptus::notifications:10.0.1.25/\r\nSERVICE\tpollednotifications\teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/PolledNotifications\tarn:euca:eucalyptus::pollednotifications:10.0.1.25/\r\nSERVICE\timagingbackend    \teucalyptus\t10.0.1.25            \tNOTREADY\t47  \thttp://10.0.1.25:8773/services/ImagingBackend\tarn:euca:eucalyptus::imagingbackend:10.0.1.25/\r\nSERVICE\teucalyptus        \teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.0.1.25/   \r\nSERVICE\tjetty             \teucalyptus\t10.0.1.25            \tENABLED \t47  \thttp://10.0.1.25:8773/services/Jetty\tarn:euca:eucalyptus::jetty:10.0.1.25/\r\nSERVICE\tloadbalancingbackend\teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/LoadBalancingBackend\tarn:euca:eucalyptus::loadbalancingbackend:10.0.1.26/\r\nSERVICE\tcloudwatchbackend \teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/CloudWatchBackend\tarn:euca:eucalyptus::cloudwatchbackend:10.0.1.26/\r\nSERVICE\tautoscalingbackend\teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/AutoScalingBackend\tarn:euca:eucalyptus::autoscalingbackend:10.0.1.26/\r\nSERVICE\tpollednotifications\teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/PolledNotifications\tarn:euca:eucalyptus::pollednotifications:10.0.1.26/\r\nSERVICE\timagingbackend    \teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/ImagingBackend\tarn:euca:eucalyptus::imagingbackend:10.0.1.26/\r\nSERVICE\teucalyptus        \teucalyptus\t10.0.1.26            \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.0.1.26/   \r\nSERVICE\twalrusbackend     \twalrus    \twalrus-10.0.1.25     \tENABLED \t47  \thttp://10.0.1.25:8773/services/WalrusBackend\tarn:euca:bootstrap:walrus:walrusbackend:walrus-10.0.1.25/\r\nSERVICE\twalrusbackend     \twalrus    \twalrus-10.0.1.26     \tNOTREADY\t47  \thttp://10.0.1.26:8773/services/WalrusBackend\tarn:euca:bootstrap:walrus:walrusbackend:walrus-10.0.1.26/\r\n\r\nwhich shows the services correctly on 10.0.1.26 as being down.  It also shows the new clc as being enabled\r\n\r\nSERVICE\teucalyptus        \teucalyptus\t10.0.1.25            \tENABLED\r\n\r\non 10.0.1.25.  However when I query the new master I get\r\n\r\n[root@smartfarm5 cred]# euca-describe-availability-zones --debug verbose\r\n2015-10-03 09:47:56,192 DEBUG   DescribeAvailabilityZones parsed arguments: {'filters': None, 'security_token': None, 'url': None, 'region': None, 'show_empty_fields': False, 'key_id': None, 'secret_key': None, 'ZoneName': ['verbose']}\r\n2015-10-03 09:47:56,192 INFO    Config finding global option default-region\r\n2015-10-03 09:47:56,192 INFO    Config   novalue for default-region\r\n2015-10-03 09:47:56,192 INFO    Config finding global option max-retries\r\n2015-10-03 09:47:56,192 INFO    Config   novalue for max-retries\r\n2015-10-03 09:47:56,192 INFO    Config finding global option timeout\r\n2015-10-03 09:47:56,192 INFO    Config   novalue for timeout\r\n2015-10-03 09:47:56,194 INFO    DescribeAvailabilityZones parameters: {'Action': 'DescribeAvailabilityZones', 'ZoneName.1': 'verbose', 'Version': '2014-06-15'}\r\n2015-10-03 09:47:56,195 INFO    EC2 sending request (attempt 1 of 3)\r\n2015-10-03 09:47:56,195 DEBUG   QuerySigV2Auth string to sign: 'POST\\n10.0.1.25:8773\\n/services/compute\\nAWSAccessKeyId=AKIIL6LHAFGJ1571K1JR&Action=DescribeAvailabilityZones&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2015-10-03T16%3A47%3A56Z&Version=2014-06-15&ZoneName.1=verbose'\r\n2015-10-03 09:47:56,195 DEBUG   QuerySigV2Auth b64-encoded signature: 23zGNce1zTAJrPgM90awiqQzHN69o9AccZJ2ZaU+y5g=\r\n2015-10-03 09:47:56,195 DEBUG   QuerySigV2Auth converting params to POST data\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request method: POST\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request url:    http://10.0.1.25:8773/services/compute\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request header: Content-Length: 246\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request header: Content-Type: application/x-www-form-urlencoded\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request header: Host: 10.0.1.25:8773\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request header: User-Agent: euca2ools/3.2.1 (CPython 2.6.6; Linux 2.6.32-573.el6.x86_64; x86_64) requestbuilder/0.2.3 requests/2.6.0\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   AWSAccessKeyId: AKIIL6LHAFGJ1571K1JR\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   Action: DescribeAvailabilityZones\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   Signature: 23zGNce1zTAJrPgM90awiqQzHN69o9AccZJ2ZaU+y5g=\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   SignatureMethod: HmacSHA256\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   SignatureVersion: 2\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   Timestamp: 2015-10-03T16:47:56Z\r\n2015-10-03 09:47:56,200 DEBUG   EC2 request data:   Version: 2014-06-15\r\n2015-10-03 09:47:56,201 DEBUG   EC2 request data:   ZoneName.1: verbose\r\n2015-10-03 09:47:56,210 DEBUG   EC2 response time: 0.009 seconds\r\n2015-10-03 09:47:56,210 ERROR   EC2 response status: 503\r\n2015-10-03 09:47:56,210 DEBUG   EC2 response header: connection: close\r\n2015-10-03 09:47:56,210 DEBUG   EC2 will retry after 1.136 seconds\r\n\r\nThe same is true for euca-describe-instance-types\r\n\r\neuca-describe-instance-types --debug\r\n2015-10-03 09:49:05,333 DEBUG   DescribeInstanceTypes parsed arguments: {'security_token': None, 'url': None, 'region': None, 'InstanceType': [], 'show_empty_fields': False, 'key_id': None, 'secret_key': None, 'Availability': False, 'by_zone': False}\r\n2015-10-03 09:49:05,333 INFO    Config finding global option default-region\r\n2015-10-03 09:49:05,333 INFO    Config   novalue for default-region\r\n2015-10-03 09:49:05,333 INFO    Config finding global option max-retries\r\n2015-10-03 09:49:05,333 INFO    Config   novalue for max-retries\r\n2015-10-03 09:49:05,333 INFO    Config finding global option timeout\r\n2015-10-03 09:49:05,333 INFO    Config   novalue for timeout\r\n2015-10-03 09:49:05,336 INFO    DescribeInstanceTypes parameters: {'Action': 'DescribeInstanceTypes', 'Version': '2014-06-15', 'Availability': 'false'}\r\n2015-10-03 09:49:05,336 INFO    EC2 sending request (attempt 1 of 3)\r\n2015-10-03 09:49:05,336 DEBUG   QuerySigV2Auth string to sign: 'POST\\n10.0.1.25:8773\\n/services/compute\\nAWSAccessKeyId=AKIIL6LHAFGJ1571K1JR&Action=DescribeInstanceTypes&Availability=false&SignatureMethod=HmacSHA256&SignatureVersion=2&Timestamp=2015-10-03T16%3A49%3A05Z&Version=2014-06-15'\r\n2015-10-03 09:49:05,336 DEBUG   QuerySigV2Auth b64-encoded signature: l01EWMmD2yBIdZueHA6z5BOzR1KmojGYMZ4RBzz2Hm0=\r\n2015-10-03 09:49:05,337 DEBUG   QuerySigV2Auth converting params to POST data\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request method: POST\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request url:    http://10.0.1.25:8773/services/compute\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request header: Content-Length: 240\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request header: Content-Type: application/x-www-form-urlencoded\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request header: Host: 10.0.1.25:8773\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request header: User-Agent: euca2ools/3.2.1 (CPython 2.6.6; Linux 2.6.32-573.el6.x86_64; x86_64) requestbuilder/0.2.3 requests/2.6.0\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   AWSAccessKeyId: AKIIL6LHAFGJ1571K1JR\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   Action: DescribeInstanceTypes\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   Availability: false\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   Signature: l01EWMmD2yBIdZueHA6z5BOzR1KmojGYMZ4RBzz2Hm0=\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   SignatureMethod: HmacSHA256\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   SignatureVersion: 2\r\n2015-10-03 09:49:05,341 DEBUG   EC2 request data:   Timestamp: 2015-10-03T16:49:05Z\r\n2015-10-03 09:49:05,342 DEBUG   EC2 request data:   Version: 2014-06-15\r\n2015-10-03 09:49:05,352 DEBUG   EC2 response time: 0.010 seconds\r\n2015-10-03 09:49:05,352 ERROR   EC2 response status: 503\r\n2015-10-03 09:49:05,352 DEBUG   EC2 response header: connection: close\r\n2015-10-03 09:49:05,352 DEBUG   EC2 will retry after 1.102 seconds\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"HA services do not appear available after failover","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"customfield_10000":"6_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_85643669","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i03fev:","customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["rich(rich)"],"customfield_10117":null,"environment":"CentOS 6.4, eucalyptus 4.1.2 installed from packages\r\n\r\n[root@smartfarm5 cred]# euca-version\r\neuca2ools 3.2.1 (Apollo)\r\neucalyptus 4.1.2\r\n","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38577/comment/92888","id":"92888","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"body":"More information.  If I restart 10.0.1.26 with 10.0.1.25 as the master, the system appears to work.  That is\r\n\r\nmaster 1 goes down\r\nmaster 2 takes over\r\nservices appear 503\r\nmaster 1 comes back up as the secondary\r\nmaster 2 correctly responds\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"created":"2015-10-03T12:01:36.950-0500","updated":"2015-10-03T12:01:36.950-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38577/comment/92889","id":"92889","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"body":"Still more information.  It is really close to working.  \r\n\r\nCLC-1: the CLC used as the primary during registration\r\nCLC-2: the initial slave CLC\r\n\r\ncase 1: stop CLC-1 triggering a failover to CLC-2\r\n\r\nCLC-2 appears to come up with all services reporting correctly but any request to CLC-2 (except describe-services, which works) reports \"503 service unavailable.\" \r\n\r\nThe problem clears when CLC-1 comes back up as the slave.\r\n\r\ncase 2: CLC-2 is the master and goes down causing a fail over to CLC-1\r\n\r\nThe system works in the configuration where CLC-2 is down and also when CLC-2 comes back up as the slave.\r\n\r\nSo it is really only when CLC-2 is the master and CLC-1 is down that there is a problem.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"created":"2015-10-03T12:27:20.933-0500","updated":"2015-10-03T12:27:20.933-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38577/comment/92900","id":"92900","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"body":"Okay -- I found the problem.  The documentation is ambiguous with respect to registering the api service.  One needs to register separate api services, one one each system.  The docs say to repeat the original register (which fails).","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"created":"2015-10-04T11:38:13.236-0500","updated":"2015-10-04T11:38:13.236-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38577/comment/92901","id":"92901","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"body":"The issue was with the docs.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=rich","name":"rich","key":"rich","accountId":"557058:8c482bdc-e25e-4adf-8ce3-d545bda65679","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/836ed5700fb9db2dd603525a729cf69f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Rich Wolski","active":true,"timeZone":"US/Central"},"created":"2015-10-04T11:38:30.662-0500","updated":"2015-10-04T11:38:30.662-0500"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11450/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}