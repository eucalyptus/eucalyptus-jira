{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"29903","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29903","key":"EUCA-9373","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2014-05-16T17:57:49.823-0500","customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9373/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2014-05-13T12:50:26.353-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2014-05-16T17:54:03.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","labels":["ImageManagement"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"issuelinks":[{"id":"24740","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/24740","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"30014","key":"DOC-1231","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30014","fields":{"summary":"Remove 'Caching Images on the Cluster Controller' section","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"updated":"2014-07-03T09:16:13.137-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nIf [CC Image caching|https://www.eucalyptus.com/docs/eucalyptus/3.4/index.html#admin-guide/image_caching.html] is set up on a Eucalyptus 4.0 (4.0.0-0.0.1012.20140509) cloud, the NC doesn't honor this change, and continues to go to the OSG to download the image.\r\n\r\n*Change on the CC*\r\n\r\n* eucalyptus.conf information\r\n{code}\r\n[root@odc-d-31 ~]# grep -v \"#\" /etc/eucalyptus/eucalyptus.conf | grep CC\r\nCC_PORT=\"8774\"\r\nCC_IMAGE_PROXY=\"10.105.1.194\"\r\nCC_IMAGE_PROXY_PATH=\"/cluster-cache\"\r\nCC_IMAGE_PROXY_CACHE_SIZE=\"280000\"\r\n{code}\r\n* output in cc.log showing information loaded on restart\r\n{code}\r\n2014-05-13 05:52:00 DEBUG 000025661 isConfigModified         | file=//etc/eucalyptus/eucalyptus.conf current mtime=1399985519, stored mtime=1399985479\r\n2014-05-13 05:52:00  WARN 000025661 readConfigFile           | configuration file changed (KEY=CC_IMAGE_PROXY, ORIGVALUE=UNSET, NEWVALUE=10.105.1.194): clean\r\n restart is required before this change will take effect!\r\n2014-05-13 05:52:00  WARN 000025661 readConfigFile           | configuration file changed (KEY=CC_IMAGE_PROXY_CACHE_SIZE, ORIGVALUE=UNSET, NEWVALUE=280000):\r\nclean restart is required before this change will take effect!\r\n2014-05-13 05:52:00  WARN 000025661 readConfigFile           | configuration file changed (KEY=CC_IMAGE_PROXY_PATH, ORIGVALUE=UNSET, NEWVALUE=/cluster-cache)\r\n: clean restart is required before this change will take effect!\r\n...\r\n2014-05-13 05:52:08 DEBUG 000025661 vnetApplySingleTableRule | applying single table (filter) rule (-P FORWARD ACCEPT)\r\n2014-05-13 05:52:08  INFO 000025661 ccCheckState             | this cluster controller marked as shut down\r\n2014-05-13 05:52:08 ERROR 000025661 monitor_thread           | ccCheckState() returned failures\r\n2014-05-13 05:52:09 DEBUG 000025661 vnetUnsetMetadataRedirec | cloudIp is not yet set, not removing redirect rule\r\n2014-05-13 05:52:09 DEBUG 000025661 clean_network_state      | running command '///usr/lib/eucalyptus/euca_rootwrap ip addr del 10.104.6.230/32 dev em1'\r\n2014-05-13 05:52:09 DEBUG 000025661 clean_network_state      | running command '///usr/lib/eucalyptus/euca_rootwrap ip addr del 10.104.6.231/32 dev em1'\r\n2014-05-13 05:52:09 DEBUG 000025661 vnetApplySingleTableRule | applying single table (filter) rule (-F)\r\n2014-05-13 05:52:09 DEBUG 000025661 vnetApplySingleTableRule | applying single table (nat) rule (-F)\r\n2014-05-13 05:52:09 DEBUG 000025661 vnetApplySingleTableRule | applying single table (filter) rule (-P FORWARD ACCEPT)\r\n2014-05-13 05:52:09  INFO 000025661 ccCheckState             | this cluster controller marked as shut down\r\n2014-05-13 05:52:09 ERROR 000025661 monitor_thread           | ccCheckState() returned failures\r\n2014-05-13 05:52:10 DEBUG 000025554 init_thread              | init=1 0x7f4e225d6000 0x7f4d9fb53000 0x7f4dd67b4000 0x7f4dd65ae000\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | invoked: userId=UNSET, serviceIdsLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | received input serviceId[0]: cluster RiseOfAnEmpire Moment http://10.104.1.194:8774/axis2/services/EucalyptusCC\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=autoscalingbackend name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/AutoScalingBackend\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=cloudwatchbackend name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/CloudWatchBackend\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=cluster name=Moment partition=RiseOfAnEmpire urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.1.194:8774/axis2/services/EucalyptusCC\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=dns name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/Dns\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=eucalyptus name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/Eucalyptus\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=imaging name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/Imaging\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=loadbalancingbackend name=10.104.10.55 partition=eucalyptus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/LoadBalancingBackend\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=storage name=FresherThanEver partition=RiseOfAnEmpire urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.1.194:8773/services/Storage\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=walrusbackend name=InductionSpeech partition=walrus urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/WalrusBackend\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=tokens name=API_55.tokens partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/Tokens\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=autoscaling name=API_55.autoscaling partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/AutoScaling\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=cloudwatch name=API_55.cloudwatch partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/CloudWatch\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=loadbalancing name=API_55.loadbalancing partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/LoadBalancing\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=user-api name=API_55 partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/User-API\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=euare name=API_55.euare partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/Euare\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos type=objectstorage name=API_55.objectstorage partition=API_55 urisLen=1\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | internal serviceInfos     uri[0]:http://10.104.10.55:8773/services/objectstorage\r\n2014-05-13 05:52:10 DEBUG 000025554 doDescribeServices       | external services         uri[0]: cluster RiseOfAnEmpire Moment NOTREADY http://10.104.1.194:8774/axis2/services/EucalyptusCC\r\n{code}\r\n\r\n*Launch of instance*\r\n{code}\r\n[root@odc-f-13 ~]# euca-run-instances -k euca-admin -t m1.large emi-9508e88a\r\nRESERVATION\tr-526f6001\t214091788602\tdefault\r\nINSTANCE\ti-5e1dac4b\temi-9508e88a\t0.0.0.0\t0.0.0.0\tpending\teuca-admin\t0\t\tm1.large\t2014-05-13T13:22:31.736Z\tRiseOfAnEmpire\t\t\t\tmonitoring-disabled\t0.0.0.0\t0.0.0.0\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-e69f5d88\r\n{code}\r\n\r\n* View of download on NC.log\r\n{code}\r\n2014-05-13 06:22:36  INFO 000001265 doRunInstance            | [i-5e1dac4b] running instance cores=1 disk=10 memory=1024 vlan=946 net=10 priMAC=D0:0D:5E:1D:AC:4B privIp=172.18.118.10 plat=linux kernel=(null) ramdisk=(null)\r\n2014-05-13 06:22:36 DEBUG 000001265 vbr_legacy               | [i-5e1dac4b]                VBR[0] type=ephemeral id=none dev=sdb size=8376025088 format=ext3 none\r\n2014-05-13 06:22:36 DEBUG 000001265 vbr_legacy               | [i-5e1dac4b]                VBR[1] type=machine id=emi-9508e88a dev=sda size=2361393152 format=none http://imaging@10.104.10.55:8773/services/objectstorage/aa7053-download-manifests/DM-r-526f6001?Expires=1399998151&AWSAccessKeyId=AKI3WLLHYDPKQORTWCQU&Signature=a6cpU4qvH3WVj5mXnSNeBp0cOBo%3D\r\n2014-05-13 06:22:36 DEBUG 000001265 change_state             | [i-5e1dac4b] state change for instance: Unknown -> Staging (Pending)\r\n2014-05-13 06:22:36 DEBUG 000006969 startup_thread           | [i-5e1dac4b] spawning startup thread\r\n2014-05-13 06:22:36 DEBUG 000006969 vnetStartNetworkManaged  | params: vnetconfig=0x7f79e4e00010, vlan=946, uuid=UNSET, userName=UNSET, netName=UNSET\r\n2014-05-13 06:22:36  INFO 000006969 ensure_directories_exist | creating path /instances/work/AIDM7CMUGPQCXBESVSMRG/i-5e1dac4b\r\n2014-05-13 06:22:36 DEBUG 000006969 diskutil_ch              | ch(own|mod) '/instances/work/AIDM7CMUGPQCXBESVSMRG/i-5e1dac4b' *.root 771\r\n2014-05-13 06:22:36 DEBUG 000006969 vbr_alloc_tree           | [i-5e1dac4b] found 0 prereqs and 2 partitions/disks in the VBR\r\n2014-05-13 06:22:36 DEBUG 000006969 art_alloc                | [i-5e1dac4b] allocated artifact 001|i-5e1dac4b size=-1 vbr=(nil) cache=0 file=0\r\n2014-05-13 06:22:36 DEBUG 000006969 http_get_timeout         | downloading /tmp/http-reply-RsNYt6\r\n2014-05-13 06:22:36 DEBUG 000006969 http_get_timeout         | from http://10.104.10.55:8773/services/objectstorage/aa7053-download-manifests/DM-r-526f6001?Expires=1399998151&AWSAccessKeyId=AKI3WLLHYDPKQORTWCQU&Signature=a6cpU4qvH3WVj5mXnSNeBp0cOBo%3D\r\n2014-05-13 06:22:36 DEBUG 000006969 http_get_timeout         | writing GET output to /tmp/http-reply-RsNYt6\r\n{code}\r\n* no image is being cached on the CC\r\n{code}\r\n[root@odc-d-31 ~]# ls -ail /cluster-cache/\r\ntotal 32\r\n       2 drwxrwxrwx   4 eucalyptus eucalyptus  4096 May 13 05:52 .\r\n       2 dr-xr-xr-x. 24 root       root        4096 May 13 08:56 ..\r\n13631489 drwxr-xr-x   2 eucalyptus eucalyptus  4096 May 13 05:52 data\r\n      12 -rw-r--r--   1 eucalyptus eucalyptus   518 May 13 05:52 dynserv-httpd.conf\r\n      11 drwxrwxrwx   2 eucalyptus eucalyptus 16384 May 12 18:07 lost+found\r\n[root@odc-d-31 ~]# ls -ail /cluster-cache/data\r\ntotal 8\r\n13631489 drwxr-xr-x 2 eucalyptus eucalyptus 4096 May 13 05:52 .\r\n       2 drwxrwxrwx 4 eucalyptus eucalyptus 4096 May 13 05:52 ..\r\n{code}\r\n\r\n*Pertinent Data*\r\n\r\n* After restarting the CC and seeing it failed, I also restarted the NC and still witnessed the same behavior. \r\n* Each test, I used a different image which wasn't cached on the NC\r\n\r\n*Steps*\r\n\r\n* Set up Eucalyptus 4.0.0 cloud with following topology\r\n** 1 x CLC/Walrus/UFS\r\n** 1 x CC/SC\r\n** 1 x NC\r\n** network mode:  Managed\r\n* Set [CC image caching using the instructions from 3.4|https://www.eucalyptus.com/docs/eucalyptus/3.4/index.html#admin-guide/image_caching.html]\r\n* Bundle, upload and register instance store-backed HVM image\r\n* Observe where the image is being downloaded from","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"CC Image Caching Not Honored In Eucalyptus 4.0","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"10001_*:*_1_*:*_276361501_*|*_10000_*:*_1_*:*_1281988_*|*_5_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i02p0n:","customfield_10001":"2014-05-13T13:11:48.086-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["dmitrii(dmitrii)","hspencer(hspencer)","tjcramer(tjcramer)"],"customfield_10116":null,"customfield_10117":null,"environment":"{code}\r\n[root@odc-f-13 ~]# euca-describe-services --all -E\r\nSERVICE\tuser-api          \tAPI_55    \tAPI_55               \tENABLED \t60  \thttp://10.104.10.55:8773/services/User-API\tarn:euca:bootstrap:API_55:user-api:API_55/\r\nSERVICE\tautoscaling       \tAPI_55    \tAPI_55.autoscaling   \tENABLED \t60  \thttp://10.104.10.55:8773/services/AutoScaling\tarn:euca:bootstrap:API_55:autoscaling:API_55.autoscaling/\r\nSERVICE\tcloudwatch        \tAPI_55    \tAPI_55.cloudwatch    \tENABLED \t60  \thttp://10.104.10.55:8773/services/CloudWatch\tarn:euca:bootstrap:API_55:cloudwatch:API_55.cloudwatch/\r\nSERVICE\tcompute           \tAPI_55    \tAPI_55.compute       \tENABLED \t60  \thttp://10.104.10.55:8773/services/compute\tarn:euca:bootstrap:API_55:compute:API_55.compute/\r\nSERVICE\teuare             \tAPI_55    \tAPI_55.euare         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Euare\tarn:euca:bootstrap:API_55:euare:API_55.euare/\r\nSERVICE\tloadbalancing     \tAPI_55    \tAPI_55.loadbalancing \tENABLED \t60  \thttp://10.104.10.55:8773/services/LoadBalancing\tarn:euca:bootstrap:API_55:loadbalancing:API_55.loadbalancing/\r\nSERVICE\tobjectstorage     \tAPI_55    \tAPI_55.objectstorage \tENABLED \t60  \thttp://10.104.10.55:8773/services/objectstorage\tarn:euca:bootstrap:API_55:objectstorage:API_55.objectstorage/\r\nSERVICE\ttokens            \tAPI_55    \tAPI_55.tokens        \tENABLED \t60  \thttp://10.104.10.55:8773/services/Tokens\tarn:euca:bootstrap:API_55:tokens:API_55.tokens/\r\nSERVICE\tstorage           \tRiseOfAnEmpire\tFresherThanEver      \tENABLED \t60  \thttp://10.104.1.194:8773/services/Storage\tarn:euca:eucalyptus:RiseOfAnEmpire:storage:FresherThanEver/\r\nSERVICE\tcluster           \tRiseOfAnEmpire\tMoment               \tENABLED \t60  \thttp://10.104.1.194:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:RiseOfAnEmpire:cluster:Moment/\r\nSERVICE\tnode              \tRiseOfAnEmpire\t10.105.1.188         \tENABLED \t60  \thttp://10.105.1.188:8775/axis2/services/EucalyptusNC\tarn:euca:bootstrap:RiseOfAnEmpire:node:10.105.1.188/\r\nINFO\tnode              \tRiseOfAnEmpire\t10.105.1.188         \tMon May 12 12:23:27 PDT 2014 <null> <null>\r\nSERVICEEVENT\td861bc0d-4b12-4831-8361-6f106a452cc9\tarn:euca:bootstrap:RiseOfAnEmpire:node:10.105.1.188/\r\nSERVICEEVENT\td861bc0d-4b12-4831-8361-6f106a452cc9\tINFO\r\nSERVICEEVENT\td861bc0d-4b12-4831-8361-6f106a452cc9\tTue May 13 05:53:10 PDT 2014\r\nSERVICEEVENT\td861bc0d-4b12-4831-8361-6f106a452cc9\tMon May 12 12:23:27 PDT 2014 <null> <null>\r\nSERVICE\tbootstrap         \tbootstrap \t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Empyrean\tarn:euca:bootstrap:::10.104.10.55/\r\nSERVICE\tproperties        \tbootstrap \t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Properties\tarn:euca:bootstrap::properties:10.104.10.55/\r\nSERVICE\tcomponent         \tbootstrap \t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Component\tarn:euca:bootstrap::component:10.104.10.55/\r\nSERVICE\treporting         \tbootstrap \t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Reporting\tarn:euca:bootstrap::reporting:10.104.10.55/\r\nSERVICE\tdb                \teucalyptus\t10.104.10.55         \tENABLED \t60  \tpostgresql://10.104.10.55:8777/eucalyptus?ssl=true&sslfactory=com.eucalyptus.postgresql.PostgreSQLSSLSocketFactory\tarn:euca:eucalyptus::db:10.104.10.55/\r\nSERVICE\tnotifications     \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Notifications\tarn:euca:eucalyptus::notifications:10.104.10.55/\r\nSERVICE\tcloudwatchbackend \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/CloudWatchBackend\tarn:euca:eucalyptus::cloudwatchbackend:10.104.10.55/\r\nSERVICE\tloadbalancingbackend\teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/LoadBalancingBackend\tarn:euca:eucalyptus::loadbalancingbackend:10.104.10.55/\r\nSERVICE\teucalyptus        \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.104.10.55/\r\nSERVICE\timaging           \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Imaging\tarn:euca:eucalyptus::imaging:10.104.10.55/\r\nSERVICE\tldap              \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Ldap\tarn:euca:eucalyptus::ldap:10.104.10.55/\r\nSERVICE\tconfiguration     \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Configuration\tarn:euca:eucalyptus::configuration:10.104.10.55/\r\nSERVICE\tjetty             \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Jetty\tarn:euca:eucalyptus::jetty:10.104.10.55/\r\nSERVICE\tautoscalingbackend\teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/AutoScalingBackend\tarn:euca:eucalyptus::autoscalingbackend:10.104.10.55/\r\nSERVICE\tdns               \teucalyptus\t10.104.10.55         \tENABLED \t60  \thttp://10.104.10.55:8773/services/Dns\tarn:euca:eucalyptus::dns:10.104.10.55/\r\nSERVICE\twalrusbackend     \twalrus    \tInductionSpeech      \tENABLED \t60  \thttp://10.104.10.55:8773/services/WalrusBackend\tarn:euca:bootstrap:walrus:walrusbackend:InductionSpeech/\r\n{code}","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29903/comment/69941","id":"69941","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Added [sosreports from components|https://www.dropbox.com/sh/mihmhtt7w4atd4r/AACWKQJaHbRQ7sBBmTyLVRYSa]","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-13T12:53:25.646-0500","updated":"2014-05-13T12:53:25.646-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29903/comment/69952","id":"69952","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"Delete the property (and make sure we don't mention in the docs).  ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-13T13:11:48.086-0500","updated":"2014-05-13T13:11:48.086-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/29903/comment/70370","id":"70370","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Indeed, CC Image Proxy is *not* implemented in 4.0.  The entire image delivery path has changed significantly in 4.0 and, in particular, CC is no longer caching images in the current design. To ensure this is clear, I will:\r\n\r\n* remove the CC_IMAGE_PROXY_* parameters from {{eucalyptus.conf}}\r\n* will file a DOC ticket to remove the corresponding section from the docs\r\n* will note the behavior as something that's changed in 4.0 behavior-wise\r\n\r\nIt is not clear whether the image proxy will be needed with the new design. There are changes that _may_ make it less necessary:\r\n\r\n* images downloaded by the NC are stored in Object Store in compressed form, so serving them puts less load on Object Store\r\n* there is an option to use a highly scalable backing for object store (Riak)\r\n\r\nIf experience with 4.0 still shows that Object Store is an unacceptable bottleneck in a large-scale multi-cluster deployments (ones that CC Image Proxy was designed for), we can develop a solution without a huge effort. One option would be to bring back caching on CC, another is to involve NCs in the distribution of an image to each other.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-16T17:50:54.053-0500","updated":"2014-05-16T17:50:54.053-0500"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9373/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}