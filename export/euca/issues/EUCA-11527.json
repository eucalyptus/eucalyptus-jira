{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"38785","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38785","key":"EUCA-11527","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17200","id":"17200","description":"Eucalyptus 4.2.2","name":"4.2.2","archived":false,"released":true,"releaseDate":"2016-04-28"}],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@49f18770[id=130,rapidViewId=92,state=CLOSED,name=4.3.0 Sprint 1,goal=<null>,startDate=2015-12-01T17:45:13.503Z,endDate=2015-12-18T17:45:00.000Z,completeDate=2016-01-04T20:09:42.831Z,sequence=130]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2016-04-08T16:03:49.252-0500","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11527/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2015-10-16T17:22:53.026-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2015-12-04T18:51:49.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jhalterman","name":"jhalterman","key":"jhalterman","accountId":"557058:4cd5b16c-c831-4dae-acbc-1e26350c87f3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue"},"displayName":"Jonathan Halterman","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-10-28T00:34:59.032-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10004","id":"10004","name":"Database"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"This seems to be reproducible every time while using part of a script which shuts down all Eucalyptus services in the cloud prior to upgrade. Logs below show the timing the CLC(10.111.5.10) and the UFS(10.111.5.12) being shutdown, as well as the error on the UFS. \r\nIt looks like shutting down the cloud service CLC immediately before the UFS is the trigger...\r\nclc.sys('service eucalyptus-cloud stop'); ufs.sys('service eucalyptus-cloud stop')\r\n\r\n\r\n{code}\r\n[2015-10-16 15:00:23,220][INFO][SystemConnection]: Beginning upgrade. Shutting down all cloud services now...\r\n[2015-10-16 15:00:23,220][DEBUG][10.111.5.10:(['CLC'])]: test_port_status, ip:10.111.5.10, port:22, TCP:True\r\n[2015-10-16 15:00:23,238][DEBUG][10.111.5.10:(['CLC'])]: test_port_status, success\r\n[2015-10-16 15:00:23,239][DEBUG][10.111.5.10:(['CLC'])]: SSH connection has hostname:10.111.5.10 user:root password:f****r\r\n[2015-10-16 15:00:23,390][DEBUG][10.111.5.10:(['CLC'])]: SSH connection attempt(1 of 3), host:'root@10.111.5.10', using ipv4:10.111.5.10, thru proxy:'None'\r\n[2015-10-16 15:00:23,558][DEBUG][10.111.5.10:(['CLC'])]: SSH - Connected to 10.111.5.10\r\n[2015-10-16 15:00:23,559][DEBUG][10.111.5.10:(['CLC'])]: [root@10.111.5.10]# service eucalyptus-cloud stop\r\n[2015-10-16 15:00:23,694][DEBUG][10.111.5.10:(['CLC'])]: \r\nStopping Eucalyptus services: \r\n[2015-10-16 15:00:51,741][DEBUG][10.111.5.10:(['CLC'])]: done.\r\n\r\n[2015-10-16 15:00:51,793][DEBUG][10.111.5.10:(['CLC'])]: done with exec\r\n[2015-10-16 15:00:51,793][DEBUG][10.111.5.12:(['UFS'])]: test_port_status, ip:10.111.5.12, port:22, TCP:True\r\n[2015-10-16 15:00:51,811][DEBUG][10.111.5.12:(['UFS'])]: test_port_status, success\r\n[2015-10-16 15:00:51,811][DEBUG][10.111.5.12:(['UFS'])]: SSH connection has hostname:10.111.5.12 user:root password:f****r\r\n[2015-10-16 15:00:51,955][DEBUG][10.111.5.12:(['UFS'])]: SSH connection attempt(1 of 3), host:'root@10.111.5.12', using ipv4:10.111.5.12, thru proxy:'None'\r\n[2015-10-16 15:00:52,090][DEBUG][10.111.5.12:(['UFS'])]: SSH - Connected to 10.111.5.12\r\n[2015-10-16 15:00:52,091][DEBUG][10.111.5.12:(['UFS'])]: [root@10.111.5.12]# service eucalyptus-cloud stop\r\n[2015-10-16 15:00:52,224][DEBUG][10.111.5.12:(['UFS'])]: \r\nStopping Eucalyptus services: \r\n[2015-10-16 15:02:58,640][DEBUG][10.111.5.12:(['UFS'])]: CRITICAL: timed out waiting for eucalyptus-cloud process to shut down (pid=28209, ppid=28208).\r\nCRITICAL: this is most likely a bug; to kill processes (THIS MAY CAUSE DATA LOSS) run: kill -9 28209 28208\r\ndone.\r\n\r\n[2015-10-16 15:02:58,692][DEBUG][10.111.5.12:(['UFS'])]: done with exec\r\n[2015-10-16 15:02:58,692][DEBUG][10.111.5.12:(['UFS'])]: ['Stopping Eucalyptus services: CRITICAL: timed out waiting for eucalyptus-cloud process to shut down (pid=28209, ppid=28208).', 'CRITICAL: this is most likely a bug; to kill processes (THIS MAY CAUSE DATA LOSS) run: kill -9 28209 28208', 'done.']\r\n[2015-10-16 15:02:58,692][ERROR][SystemConnection]: Upgrade failed. The upgrade params are found in self._upgrade_dict.These can be used via the \"rerun\" argument to rerun this upgradeusing the same environment/machines\r\n---------------------------------------------------------------------------\r\nCommandExitCodeException                  Traceback (most recent call last)\r\n<ipython-input-6-69ef7441e25a> in <module>()\r\n----> 1 tc.sysadmin.upgrade_cloud()\r\n\r\n/Library/Python/2.7/site-packages/adminapi-0.13-py2.7.egg/cloud_admin/systemconnection.pyc in upgrade_cloud(self, network_mode, ccs, ncs, clcs, scs, ufs, ws, gpgcheck, yum_arg_list, dry_run, rerun)\r\n    446                 # Skip the CLCs which have already been stopped\r\n    447                 if host not in clcs:\r\n--> 448                     stop_service(host, 'eucalyptus-cloud')\r\n    449             for host in ccs:\r\n    450                 stop_service(host, 'eucalyptus-cc')\r\n\r\n/Library/Python/2.7/site-packages/adminapi-0.13-py2.7.egg/cloud_admin/systemconnection.pyc in stop_service(host, service, timeout)\r\n    431         def stop_service(host, service, timeout=300):\r\n    432             try:\r\n--> 433                 host.sys('service {0} stop'.format(service), code=0, timeout=timeout)\r\n    434             except CommandExitCodeException as CE:\r\n    435                 if CE.status == 2:\r\n\r\n/Library/Python/2.7/site-packages/adminapi-0.13-py2.7.egg/cloud_utils/system_utils/machine.pyc in sys(self, cmd, verbose, timeout, listformat, code, net_namespace)\r\n    421             cmd = 'ip netns exec {0} {1}'.format(net_namespace, cmd)\r\n    422         return self.ssh.sys(cmd, verbose=verbose, timeout=timeout, listformat=listformat,\r\n--> 423                             code=code)\r\n    424 \r\n    425     def cmd(self, cmd, verbose=True, timeout=120, listformat=False, net_namespace=None,\r\n\r\n/Library/Python/2.7/site-packages/adminapi-0.13-py2.7.egg/cloud_utils/net_utils/sshconnection.pyc in sys(self, cmd, verbose, timeout, listformat, enable_debug, code)\r\n    428             raise CommandExitCodeException('Cmd:' + str(cmd) + ' failed with status code:' +\r\n    429                                            str(out['status']) + \", output:\" + str(output),\r\n--> 430                                            status=out['status'])\r\n    431         return output\r\n    432 \r\n\r\nCommandExitCodeException: \"Cmd:service eucalyptus-cloud stop failed with status code:1, output:['Stopping Eucalyptus services: CRITICAL: timed out waiting for eucalyptus-cloud process to shut down (pid=28209, ppid=28208).', 'CRITICAL: this is most likely a bug; to kill processes (THIS MAY CAUSE DATA LOSS) run: kill -9 28209 28208', 'done.']\"\r\n\r\nIn [7]: ufs = tc.sysadmin.get_hosts_for_ufs()[0]\r\n\r\nIn [8]: ufs.sys('ps aux | grep \"28209\\|28208\"')\r\n[2015-10-16 15:13:40,595][DEBUG][10.111.5.12:(['UFS'])]: [root@10.111.5.12]# ps aux | grep \"28209\\|28208\"\r\n[2015-10-16 15:13:40,717][DEBUG][10.111.5.12:(['UFS'])]: \r\nroot     14185  0.0  0.0 106096  1340 pts/1    Ss+  15:13   0:00 bash -c ps aux | grep \"28209\\|28208\"\r\nroot     14195  0.0  0.0 103308   872 pts/1    S+   15:13   0:00 grep 28209\\|28208\r\nroot     28208  0.0  0.0  13036   200 ?        Ss   09:49   0:00 eucalyptus-cloud --log-level=INFO -h / -u eucalyptus --pidfile //var/run/eucalyptus/eucalyptus-cloud.pid -f -L console-log -o //var/log/eucalyptus/startup.log -e //var/log/eucalyptus/startup.log\r\n497      28209 14.2  3.2 27252732 2110272 ?    Sl   09:49  46:12 eucalyptus-cloud --log-level=INFO -h / -u eucalyptus --pidfile //var/run/eucalyptus/eucalyptus-cloud.pid -f -L console-log -o //var/log/eucalyptus/startup.log -e //var/log/eucalyptus/startup.log\r\n{code}\r\n\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Java components - hung pids during 'stop' if clc is stopped first. ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_108748633_*|*_10000_*:*_1_*:*_1120309888_*|*_10002_*:*_1_*:*_343223494_*|*_10001_*:*_1_*:*_3122326045_*|*_10003_*:*_1_*:*_10420648179_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i03jim:","customfield_10001":"2015-10-16T19:34:55.757-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["jhalterman(jhalterman)","mclark(mclark)","sjones(sjones)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38785/comment/94129","id":"94129","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"This can be reproduced by stopping the eucalyptus-cloud service on the cloud controller and once that is complete stopping the service on a UFS host.\r\n\r\nThe issue is that we check if the database is available when performing some actions, we should check if shutting down and not block in this case, e.g.\r\n\r\n{code}\r\n  public static Boolean isVolatile( ) {\r\n    return  !BootstrapArgs.isUpgradeSystem( ) && !Bootstrap.isShuttingDown( ) && volatileAtomic.get( );\r\n  }\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-10-16T19:34:55.757-0500","updated":"2015-10-16T19:34:55.757-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/38785/comment/101220","id":"101220","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jhalterman","name":"jhalterman","key":"jhalterman","accountId":"557058:4cd5b16c-c831-4dae-acbc-1e26350c87f3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue"},"displayName":"Jonathan Halterman","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified on maint-4.2 installed cloud.\r\n\r\nStarted CLC and UFS.\r\nStopped CLC.\r\nStopped UFS.\r\nVerified that no processes were hung after shutdown.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jhalterman","name":"jhalterman","key":"jhalterman","accountId":"557058:4cd5b16c-c831-4dae-acbc-1e26350c87f3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4b515b5c070734d54b5c1839c9e01910?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Djhalterman%26avatarId%3D17200%26noRedirect%3Dtrue"},"displayName":"Jonathan Halterman","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-08T16:03:49.262-0500","updated":"2016-04-08T16:03:49.262-0500"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11527/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}