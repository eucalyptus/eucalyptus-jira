{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54805","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805","key":"EUCA-13232","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18601","id":"18601","description":"Eucalyptus 4.4.1","name":"4.4.1","archived":false,"released":true,"releaseDate":"2017-05-09"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":[],"customfield_10302":null,"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2017-04-19T16:26:11.221-0500","customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13232/watchers","watchCount":4,"isWatching":false},"created":"2017-02-14T15:34:04.190-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":null,"labels":["AWSCompat-QA"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"customfield_11901":null,"issuelinks":[{"id":"51308","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/51308","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"57407","key":"EUCA-13349","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57407","fields":{"summary":"ServiceImage3 build should depend on lb-servo-1.4","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"49103","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/49103","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"48808","key":"EUCA-12779","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/48808","fields":{"summary":"ELB: takes too long for instance to be InService ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-04-19T16:31:32.582-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11500","id":"11500","name":"ELB","description":"Load Balancing"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nWhile verifying EUCA-12779, it was noticed that the access log file names didn't contain the IP of the load balancer node that handled the requests:\r\n{code}\r\n[root@h-04 ~]# aws --endpoint-url http://s3.e-32.autoqa.qa1.eucalyptus-systems.com:8773/ s3 ls --recursive s3://euca12779stack-s3loggingbucket-tmrw0xsa26rcp --profile devops-admin\r\n2017-02-14 11:05:07      13775 Logs/AWSLogs/000727120439/elasticloadbalancing/eucalyptus/2017/2/14/000727120439_elasticloadbalancing_eucalyptus_EUCA12779-NginxELB-CTX1C5AMLUG9K_20170214T1905Z_0.0.0.0_g7ww8jkr.log\r\n2017-02-14 11:05:06       6739 Logs/AWSLogs/000727120439/elasticloadbalancing/eucalyptus/2017/2/14/000727120439_elasticloadbalancing_eucalyptus_EUCA12779-NginxELB-CTX1C5AMLUG9K_20170214T1905Z_0.0.0.0_n5gp4kla.log\r\n2017-02-14 11:05:08       2546 Logs/AWSLogs/000727120439/elasticloadbalancing/eucalyptus/2017/2/14/000727120439_elasticloadbalancing_eucalyptus_EUCA12779-NginxELB-CTX1C5AMLUG9K_20170214T1905Z_0.0.0.0_o4dx14gt.log\r\n{code}\r\nPer [AWS documentation|http://docs.aws.amazon.com/elasticloadbalancing/latest/classic/access-log-collection.html#access-log-file-format], the name of the access log should contain the load balancer node IP address.  \r\n\r\n*Steps*\r\n\r\n# Set up Eucalyptus VPC cloud with multiple availability zones - [hspencer-400-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/400/]\r\n# Using linked {{cfn-elb-multiaz-accesslog-cloudwatch-instance-vpc.json}} template, create stack\r\n# After stack shows {{CREATE_COMPLETE}}, use AWS CLI to grant write access to bucket for {{(eucalyptus)loadbalancing}} account\r\n# Run a curl test in a while loop that queries the ELB DNS URL for about 10 minutes.  \r\n# After the test is finished, list the access log files in the bucket.\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39303","id":"39303","filename":"cfn-elb-multiaz-accesslog-cloudwatch-instance-vpc.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T15:33:46.119-0600","size":22001,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39303/cfn-elb-multiaz-accesslog-cloudwatch-instance-vpc.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/42003","id":"42003","filename":"cfn-elb-twoaz-accesslog-cloudwatch-instance-vpc.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-19T16:31:32.340-0500","size":20423,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/42003/cfn-elb-twoaz-accesslog-cloudwatch-instance-vpc.json"}],"summary":"Access Log File format doesn't contain IP address of load balancer node that handled the requests","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_1_*:*_2020425406_*|*_10000_*:*_1_*:*_2580988_*|*_10002_*:*_1_*:*_231448315_*|*_10001_*:*_1_*:*_2494950472_*|*_10003_*:*_2_*:*_516471135_*|*_10006_*:*_2_*:*_263250770","aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i042qn:","customfield_10001":"2017-03-29T15:42:52.132-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["hspencer(hspencer)","mmunn1(mmunn1)","spark(spark)"],"customfield_10116":null,"customfield_10117":null,"environment":"Eucalyptus VPC cloud with multiple availability zones","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/119933","id":"119933","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] Can you point me to where the loadbalancer AccessLog is named?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-03-29T15:42:52.132-0500","updated":"2017-03-29T15:42:52.132-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/119934","id":"119934","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1] It is here: https://github.com/eucalyptus/load-balancer-servo/blob/master/servo/mon/access_logger.py#L119","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-03-29T15:50:25.259-0500","updated":"2017-03-29T15:50:25.259-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120208","id":"120208","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] The lb's created with the attached stack are created with only private ip's, no public ips. The call to config.get_public_ip() is returning 0.0.0.0  and this is added to the accesslog file name. I am not sure how we want to proceed here? Is this even really a bug? We do not want to publish private ip's in the log flle name anyway do we? ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-03T16:02:48.983-0500","updated":"2017-04-03T16:02:48.983-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120210","id":"120210","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1] I think there are 3 cases that manifests the problem differently.\r\n1) ELB in edge-mode (non VPC): The problem won't manifest because public ip is available via user-data.\r\n2) internal ELB in VPC: Only private IP is available and we should use private IP according to AWS definition (\"The IP address of the load balancer node that handled the request. For an internal load balancer, this is a private IP address.\")\r\n3) public ELB in VPC: Now this is problematic because we should publish public IP but it is not available through user-data (because primary NIC has only private IP that connects to system VPC through NAT gateway; secondary NIC has public IP but it is not available via user-data). \r\n\r\nSo the logic like this would probably catch all 3 cases:\r\n\r\n{code:java}\r\ndef get_accesslog_ip():\r\n    try:\r\n        ip = config.get_public_ip() # this is via user-data\r\n        if ip is None: \r\n            ip = extract_from_secondary_nic()  // case 3\r\n        if ip is None:\r\n            ip = config.get_private_ip() # case 2: we need to implement this function like we do for config.get_public_ip\r\n        if ip is None: // this shouldn't happen, but in case...\r\n            ip = \"0.0.0.0\"\r\n        return ip\r\n    catch Exception:\r\n        return \"0.0.0.0\"\r\n\r\n# for implementation of extract_from_secondary_nic(), you can refer to: https://github.com/eucalyptus/load-balancer-servo/blob/master/scripts/servo-prep#L124\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-03T16:33:18.341-0500","updated":"2017-04-03T16:33:18.341-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120442","id":"120442","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] How can I launch a VPC LB with a public IP?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-05T21:17:11.165-0500","updated":"2017-04-06T00:16:09.785-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120444","id":"120444","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1] If you create an LB in VPC, there will be 2 ENIs attached to each ELB VM. The secondary ENI will be always assigned a public IP (it takes a few seconds to a minute after VM becomes running). \r\n\r\nTo authorize SSH, you need to authorize port 22 to the security group the secondary ENI belong. Note that the group is owned by LB's OWNER (not loadbalancing system account).  \r\n\r\nTo test an LB without public IP, you need to create an internal ELB. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-06T00:26:25.379-0500","updated":"2017-04-06T00:26:25.379-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120526","id":"120526","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] I am trying to test https://github.com/mmunn1/load-balancer-servo/commit/a319a96e7365e38340f6f89315cbc6eacca3d362  \r\nI cannot seem to get the new code to run? I check it out and install it but it seems that the old code always runs? In a new service instance that i start manually, I run install-servo.sh on the new servo code, I then create a new image and point services.loadbalancing.worker.image to the newly created image. I then start the create a new loadbalancer but the new code does not seem to run? What am I missing here?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-06T18:39:54.175-0500","updated":"2017-04-06T18:39:54.175-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120529","id":"120529","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] This is the revised code, I will try and test it tomorrow. https://github.com/mmunn1/load-balancer-servo/commit/9bde8511695489b67db01e4c28d1b198a8baa26d","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-06T19:49:16.778-0500","updated":"2017-04-06T19:49:16.778-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120552","id":"120552","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"I created a pull request for this issue https://github.com/eucalyptus/load-balancer-servo/pull/21","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-07T23:33:21.022-0500","updated":"2017-04-07T23:33:21.022-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120602","id":"120602","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1] I left a comment in the PR.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-10T14:11:17.723-0500","updated":"2017-04-10T14:11:17.723-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120603","id":"120603","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~spark] https://github.com/eucalyptus/load-balancer-servo/pull/22\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-10T14:28:39.568-0500","updated":"2017-04-10T14:28:39.568-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120827","id":"120827","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"VPC loadbalancer accesslogs names now include proper ip address.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-14T16:28:10.304-0500","updated":"2017-04-14T16:28:10.304-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120853","id":"120853","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"I've found an issue in case 3) where private IP (not public) is retrieved via ip addr show. I'll add one extra step to query NIC metadata using mac address from 'ip addr' (e.g., 169.254.169.254/latest/meta-data/network/interfaces/macs/d0:0d:f6:37:08:71/public-ipv4s). ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-17T17:38:09.827-0500","updated":"2017-04-17T17:38:09.827-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54805/comment/120889","id":"120889","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.4.1-0.25878.35.20170413git36456cc.el7}}\r\n\r\n*Steps*\r\n\r\n# Deploy Eucalyptus 4.4.1 VPC cloud with multiple AZs - [hspencer-684-maint-4.4|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint_4.4/684/]\r\n{code}\r\n[root@c-36 ~]# euca-describe-availability-zones\r\nAVAILABILITYZONE\tblack-dollar\tavailable\r\nAVAILABILITYZONE\tblack-market\tavailable\r\n{code}\r\n# Create non-eucalyptus account:\r\n{code}\r\n[root@c-36 ~]# euare-accountcreate -a development-operations -w > .euca/devops-admin.ini\r\n{code}\r\n# Create and import keypair:\r\n{code}\r\n[root@c-36 ~]# ssh-keygen -t rsa -b 4096 -C \"Development Operations Admin Key\"\r\n[root@c-36 ~]# euca-import-keypair -f devops-admin-pk.pub devops-admin --region devops-admin@\r\nKEYPAIR\tdevops-admin\teb:c2:75:5d:96:eb:72:d4:4c:f7:79:e7:7c:1f:6c:ef\r\n{code}\r\n# Bundle, upload and register Ubuntu Xenial Cloud Image:\r\n{code}\r\n[root@c-36 ~]# euca-describe-images --region devops-admin@\r\nIMAGE\temi-53ab4ccc\tubuntu-xenial-x86_64-hvm-20170419/xenial-server-cloudimg-amd64-disk1.raw.manifest.xml\t000294836819\tavailable\tprivate\tx86_64\tmachine\t\tinstance-store\thvm\r\n{code}\r\n# Using linked {{cfn-elb-twoaz-accesslog-cloudwatch-instance-vpc.json}} template, create stack:\r\n{code}\r\n[root@c-36 ~]# euform-create-stack NginxStack --template-file cfn-elb-twoaz-accesslog-cloudwatch-instance-vpc.json --parameter ImageId=emi-53ab4ccc --parameter KeyName=devops-admin --parameter EndPoint=http://cloudformation.g-15-03.autoqa.qa1.eucalyptus-systems.com:8773/ --capabilities CAPABILITY_IAM --region devops-admin@\r\narn:aws:cloudformation::000294836819:stack/NginxStack/4b8474d1-f29b-44e0-8bd4-379c7b6dc5cd\r\n[root@c-36 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tNginxStack\tCREATE_COMPLETE\t\tCloudFormation template to deploy an instance and a 2 availability zone ELB, Nginx deployment on Eucalyptus VPC cloud\t2017-04-19T18:26:29.481Z\r\nPARAMETER\tImageId\t\temi-53ab4ccc\r\nPARAMETER\tKeyName\t\tdevops-admin\r\nPARAMETER\tEndPoint\t\thttp://cloudformation.g-15-03.autoqa.qa1.eucalyptus-systems.com:8773/\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nPARAMETER\tMinSize\t\t2\r\nPARAMETER\tMaxSize\t\t4\r\nOUTPUT\tInstanceId\ti-04af416a\r\nOUTPUT\tElasticIP\t10.116.131.108\r\nOUTPUT\tAllocationID\teipalloc-3b3922fd\r\nOUTPUT\tNetworkInterfaceId\teni-48b61fb1\r\nOUTPUT\tEIPAssociationId\teipassoc-c4f14107\r\nOUTPUT\tAccessLogBucket\tnginxstack-s3loggingbucket-xcaawbsvrozpm\r\nOUTPUT\tELBURL\thttp://NginxStac-NginxELB-SJRPVNTZCECCW-000294836819.lb.g-15-03.autoqa.qa1.eucalyptus-systems.com\r\n\r\n$ curl -s -I http://NginxStac-NginxELB-SJRPVNTZCECCW-000294836819.lb.g-15-03.autoqa.qa1.eucalyptus-systems.com\r\nHTTP/1.1 200 OK\r\nServer: nginx/1.10.0 (Ubuntu)\r\nDate: Wed, 19 Apr 2017 18:50:17 GMT\r\nContent-Type: text/html\r\nContent-Length: 436702\r\nLast-Modified: Wed, 19 Apr 2017 18:30:52 GMT\r\nETag: \"58f7acdc-6a9de\"\r\nAccept-Ranges: bytes\r\n{code}\r\n# Using AWS CLI, grant write privileges to '(eucalyptus)loadbalancing' account:\r\n{code}\r\n[root@c-36 ~]# aws --endpoint-url=http://s3.g-15-03.autoqa.qa1.eucalyptus-systems.com:8773/ s3api put-bucket-acl --bucket nginxstack-s3loggingbucket-xcaawbsvrozpm --grant-write \"id=000049759128\" --profile devops-admin\r\n[root@c-36 ~]# aws --endpoint-url=http://s3.g-15-03.autoqa.qa1.eucalyptus-systems.com:8773/ s3api get-bucket-acl --bucket nginxstack-s3loggingbucket-xcaawbsvrozpm --profile devops-admin\r\n{\r\n    \"Owner\": {\r\n        \"DisplayName\": \"development-operations\",\r\n        \"ID\": \"5e281f323937413c44220273f13151453f1421182d2e442e50634264f3ba7502\"\r\n    },\r\n    \"Grants\": [\r\n        {\r\n            \"Grantee\": {\r\n                \"Type\": \"CanonicalUser\",\r\n                \"DisplayName\": \"development-operations\",\r\n                \"ID\": \"5e281f323937413c44220273f13151453f1421182d2e442e50634264f3ba7502\"\r\n            },\r\n            \"Permission\": \"FULL_CONTROL\"\r\n        },\r\n        {\r\n            \"Grantee\": {\r\n                \"Type\": \"CanonicalUser\",\r\n                \"DisplayName\": \"(eucalyptus)loadbalancing\",\r\n                \"ID\": \"25564ac605910495518102a5926621d21e55da1a601659361136124635a502e5\"\r\n            },\r\n            \"Permission\": \"WRITE\"\r\n        }\r\n    ]\r\n}\r\n{code}\r\n# Start curl test:\r\n{code}\r\n$ while true; do curl -s -I http://NginxStac-NginxELB-SJRPVNTZCECCW-000294836819.lb.g-15-03.autoqa.qa1.eucalyptus-systems.com; sleep 1; done > EUCA13232-curl-test.txt\r\n{code}\r\n# List ELB instances, terminate one of them and confirm another replaces the terminated instance:\r\n{code}\r\n[root@c-36 ~]# euca-describe-instances --region elb-admin@\r\nRESERVATION\tr-b8252667\t000049759128\tdefault\r\nINSTANCE\ti-53b6f35c\temi-7ee33972\t\teuca-192-168-116-29.eucalyptus.internal\trunning\t\t0\t\tm1.medium\t2017-04-19T18:28:18.468Z\tblack-dollar\t\t\t\tmonitoring-enabled\t\t192.168.116.29\tvpc-2b6d7cc3\tsubnet-03998c5a\tinstance-store\t\t\t\t\thvm\t\t3a036095-68ca-4208-b754-68c262b68e8a_black-dollar_1\tsg-cf805ab7\t\t\tarn:aws:iam::000049759128:instance-profile/internal/loadbalancer/loadbalancer-vm-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW\tx86_64\r\nNETWORKINTERFACE\teni-cd1d5941\tsubnet-03998c5a\tvpc-2b6d7cc3\t000049759128\tin-use\t192.168.116.29\t\ttrue\r\nATTACHMENT\t\teni-attach-800039d8\t0\tattached\t2017-04-19T18:28:18.471Z\ttrue\r\nGROUP\tsg-cf805ab7\tdefault\r\nPRIVATEIPADDRESS\t192.168.116.29\t\tprimary\r\nNETWORKINTERFACE\teni-7118a882\tsubnet-9d60ed68\tvpc-2dc9cb4d\t000049759128\tin-use\t10.0.0.169\teuca-10-0-0-169.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-7941bf7e\t1\tattached\t2017-04-19T18:29:51.151Z\ttrue\r\nASSOCIATION\t10.116.131.103\t000049759128\t10.0.0.169\r\nGROUP\tsg-93f476a3\tNginxStack-LoadBalancerSecurityGroup-5NRLIJC1DRAPU\r\nPRIVATEIPADDRESS\t10.0.0.169\teuca-10-0-0-169.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-53b6f35c\taws:autoscaling:groupName\teuca-internal-elb-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW-black-dollar\r\nTAG\tinstance\ti-53b6f35c\tservice-type\tloadbalancing\r\nRESERVATION\tr-50e10666\t000049759128\tdefault\r\nINSTANCE\ti-8e8e64db\temi-7ee33972\t\teuca-192-168-59-119.eucalyptus.internal\trunning\t\t0\t\tm1.medium\t2017-04-19T18:28:18.440Z\tblack-market\t\t\t\tmonitoring-enabled\t\t192.168.59.119\tvpc-2b6d7cc3\tsubnet-ea7a2bdd\tinstance-store\t\t\t\t\thvm\t\t1a636e29-007a-449c-8b11-f9e5b12fd508_black-market_1\tsg-cf805ab7\t\t\tarn:aws:iam::000049759128:instance-profile/internal/loadbalancer/loadbalancer-vm-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW\tx86_64\r\nNETWORKINTERFACE\teni-7f15612a\tsubnet-ea7a2bdd\tvpc-2b6d7cc3\t000049759128\tin-use\t192.168.59.119\t\ttrue\r\nATTACHMENT\t\teni-attach-f429c7e6\t0\tattached\t2017-04-19T18:28:18.447Z\ttrue\r\nGROUP\tsg-cf805ab7\tdefault\r\nPRIVATEIPADDRESS\t192.168.59.119\t\tprimary\r\nNETWORKINTERFACE\teni-d8816561\tsubnet-2623b367\tvpc-2dc9cb4d\t000049759128\tin-use\t10.0.1.66\teuca-10-0-1-66.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-07338c05\t1\tattached\t2017-04-19T18:31:02.268Z\ttrue\r\nASSOCIATION\t10.116.131.135\t000049759128\t10.0.1.66\r\nGROUP\tsg-93f476a3\tNginxStack-LoadBalancerSecurityGroup-5NRLIJC1DRAPU\r\nPRIVATEIPADDRESS\t10.0.1.66\teuca-10-0-1-66.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-8e8e64db\taws:autoscaling:groupName\teuca-internal-elb-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW-black-market\r\nTAG\tinstance\ti-8e8e64db\tservice-type\tloadbalancing\r\n\r\n[root@c-36 ~]# euca-terminate-instances i-8e8e64db --region elb-admin@\r\nINSTANCE\ti-8e8e64db\trunning\tshutting-down\r\n[root@c-36 ~]# euca-terminate-instances i-8e8e64db --region elb-admin@\r\nINSTANCE\ti-8e8e64db\tterminated\tterminated\r\n\r\n[root@c-36 ~]# euca-describe-instances --region elb-admin@\r\nRESERVATION\tr-1f906585\t000049759128\tdefault\r\nINSTANCE\ti-9894e976\temi-7ee33972\t\teuca-192-168-49-238.eucalyptus.internal\trunning\t\t0\t\tm1.medium\t2017-04-19T20:56:18.519Z\tblack-market\t\t\t\tmonitoring-enabled\t\t192.168.49.238\tvpc-2b6d7cc3\tsubnet-ea7a2bdd\tinstance-store\t\t\t\t\thvm\t\ta9885d71-8c45-4a45-bc84-b6a31f1e7f7d_black-market_1\tsg-cf805ab7\t\t\tarn:aws:iam::000049759128:instance-profile/internal/loadbalancer/loadbalancer-vm-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW\tx86_64\r\nNETWORKINTERFACE\teni-3902a068\tsubnet-ea7a2bdd\tvpc-2b6d7cc3\t000049759128\tin-use\t192.168.49.238\t\ttrue\r\nATTACHMENT\t\teni-attach-e87060ee\t0\tattached\t2017-04-19T20:56:18.524Z\ttrue\r\nGROUP\tsg-cf805ab7\tdefault\r\nPRIVATEIPADDRESS\t192.168.49.238\t\tprimary\r\nNETWORKINTERFACE\teni-6dab3610\tsubnet-2623b367\tvpc-2dc9cb4d\t000049759128\tin-use\t10.0.1.84\teuca-10-0-1-84.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-b337ab18\t1\tattached\t2017-04-19T20:57:18.952Z\ttrue\r\nASSOCIATION\t10.116.131.120\t000049759128\t10.0.1.84\r\nGROUP\tsg-93f476a3\tNginxStack-LoadBalancerSecurityGroup-5NRLIJC1DRAPU\r\nPRIVATEIPADDRESS\t10.0.1.84\teuca-10-0-1-84.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-9894e976\taws:autoscaling:groupName\teuca-internal-elb-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW-black-market\r\nTAG\tinstance\ti-9894e976\tservice-type\tloadbalancing\r\nRESERVATION\tr-b8252667\t000049759128\tdefault\r\nINSTANCE\ti-53b6f35c\temi-7ee33972\t\teuca-192-168-116-29.eucalyptus.internal\trunning\t\t0\t\tm1.medium\t2017-04-19T18:28:18.468Z\tblack-dollar\t\t\t\tmonitoring-enabled\t\t192.168.116.29\tvpc-2b6d7cc3\tsubnet-03998c5a\tinstance-store\t\t\t\t\thvm\t\t3a036095-68ca-4208-b754-68c262b68e8a_black-dollar_1\tsg-cf805ab7\t\t\tarn:aws:iam::000049759128:instance-profile/internal/loadbalancer/loadbalancer-vm-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW\tx86_64\r\nNETWORKINTERFACE\teni-cd1d5941\tsubnet-03998c5a\tvpc-2b6d7cc3\t000049759128\tin-use\t192.168.116.29\t\ttrue\r\nATTACHMENT\t\teni-attach-800039d8\t0\tattached\t2017-04-19T18:28:18.471Z\ttrue\r\nGROUP\tsg-cf805ab7\tdefault\r\nPRIVATEIPADDRESS\t192.168.116.29\t\tprimary\r\nNETWORKINTERFACE\teni-7118a882\tsubnet-9d60ed68\tvpc-2dc9cb4d\t000049759128\tin-use\t10.0.0.169\teuca-10-0-0-169.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-7941bf7e\t1\tattached\t2017-04-19T18:29:51.151Z\ttrue\r\nASSOCIATION\t10.116.131.103\t000049759128\t10.0.0.169\r\nGROUP\tsg-93f476a3\tNginxStack-LoadBalancerSecurityGroup-5NRLIJC1DRAPU\r\nPRIVATEIPADDRESS\t10.0.0.169\teuca-10-0-0-169.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-53b6f35c\taws:autoscaling:groupName\teuca-internal-elb-000294836819-NginxStac-NginxELB-SJRPVNTZCECCW-black-dollar\r\nTAG\tinstance\ti-53b6f35c\tservice-type\tloadbalancing\r\n{code}\r\n# Stop curl test.  Using AWS CLI, list bucket contents to confirm access log files contain public IP addresses of ELB instances (including file from terminated instance):\r\n{code}\r\n[root@c-36 ~]# aws --endpoint-url=http://s3.g-15-03.autoqa.qa1.eucalyptus-systems.com:8773/ s3 ls s3://nginxstack-s3loggingbucket-xcaawbsvrozpm --recursive --profile devops-admin\r\n2017-04-19 11:55:09        151 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T1855Z_10.116.131.135_85xfh7pb.log\r\n2017-04-19 13:50:05       1806 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T2050Z_10.116.131.135_8ygodziu.log\r\n2017-04-19 14:00:03      17910 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T2100Z_10.116.131.103_yydstooh.log\r\n2017-04-19 14:00:09       7676 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T2100Z_10.116.131.120_mrcouvsu.log\r\n2017-04-19 14:05:04       4214 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T2105Z_10.116.131.103_v2s1knp8.log\r\n2017-04-19 14:05:09        150 Logs/AWSLogs/000294836819/elasticloadbalancing/eucalyptus/2017/4/19/000294836819_elasticloadbalancing_eucalyptus_NginxStac-NginxELB-SJRPVNTZCECCW_20170419T2105Z_10.116.131.120_yut5ongp.log\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-19T16:26:11.233-0500","updated":"2017-04-19T16:26:11.233-0500"}],"maxResults":14,"total":14,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13232/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}