{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54802","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54802","key":"EUCA-13230","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17801","id":"17801","description":"Eucalyptus 5.0.0","name":"5.0.0","archived":false,"released":false}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"resolution":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":null,"customfield_10308":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13230/watchers","watchCount":2,"isWatching":false},"created":"2017-02-14T09:18:13.015-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":["NeedsKnownIssue"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"customfield_11901":null,"issuelinks":[{"id":"49101","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/49101","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"inwardIssue":{"id":"54606","key":"EUCA-13219","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54606","fields":{"summary":"RunInstancesType error from Cloudformation SWF Activity","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"updated":"2017-02-14T23:07:19.394-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10201","id":"10201","name":"AWS Compatibility"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\n_Eucalyptus Version_\r\n{{4.4.0-0.25788.147.20170202git6e5a63d.el7}}\r\n\r\nPer AWS documentation, {{AWS::EC2::EIPAssociation}} resource can use either [{{InstanceId}}|http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip-association.html#cfn-ec2-eipassociation-instanceid] property or [{{NetworkInterfaceId}}|http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-eip-association.html#cfn-ec2-eipassociation-networkinterfaceid] property.  Stacks work fine if the {{InstanceId}} property is used.  When {{NetworkInterfaceId}} property is used, the following error can be viewed in the stack events:\r\n{code}\r\n..\r\nEVENT\tEIPNetworkInterface\tc50e05d5-c449-43f7-af5b-bd9abd320803\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:29:44.742Z\tROLLBACK_IN_PROGRESS\tCreate stack failed.  Rollback requested by user.\r\nEVENT\tEIPNetworkInterface\t8e78bda0-0e10-425b-9120-cad7af6c37b4\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:29:34.272Z\tCREATE_FAILED\tThe following resource(s) failed to create: [Instance].\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_FAILED-1487082573676\tAWS::EC2::Instance\tInstance\t\t2017-02-14T14:29:33.676Z\tCREATE_FAILED\tChannel was closed before the response was received.:RunInstancesType:354a274d-7c68-4aa7-8852-972e897a453d::5c629808-7c69-4065-ae75-b7190946bc59:return=true:epoch=null:status=null\r\n...\r\n{code}\r\n\r\n*Signs*\r\n\r\nI created stacks using the MVP template [cfn-eipassociation-vpc.json|https://github.com/eucalyptus/nephoria/blob/master/nephoria/testcases/cloudformation/mvp_templates/vpc/cfn-eipassociation-vpc.json] and the attached template {{cfn-eipassociation-networkinterfaceid-vpc.json}}.  From the {{DescribeStack}} output, you can see that the stack where {{AWS::EC2::EIPAssociation}} resource uses {{NetworkInterfaceId}} fails.\r\n{code}\r\n[root@h-04 ~]# euform-create-stack EIPInstance --template-file cfn-eipassociation-instance-vpc.json --parameter ImageId=emi-63ef779d --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/EIPInstance/e4dc3f59-5144-41c3-9a18-3a0b3e01db73\r\n[root@h-04 ~]# euform-create-stack EIPNetworkInterface --template-file cfn-eipassociation-networkinterfaceid-vpc.json --parameter ImageId=emi-63ef779d --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\r\n\r\n[root@h-04 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tEIPInstance\tCREATE_COMPLETE\t\tElastic IP Test - EIP association to instance in VPC\t2017-02-14T14:27:57.063Z\r\nPARAMETER\tImageId\t\temi-63ef779d\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nOUTPUT\tInstanceId\ti-4d919e5e\r\nOUTPUT\tElasticIP\t10.116.152.152\r\nOUTPUT\tAllocationID\teipalloc-35b9d7d3\r\nOUTPUT\tNetworkInterfaceId\teni-be61721f\r\nOUTPUT\tNetworkInterfacePrimaryPrivateIP\t10.0.0.27\r\nOUTPUT\tEIPAssociationId\teipassoc-8590cbad\r\nSTACK\tEIPNetworkInterface\tROLLBACK_COMPLETE\t\tElastic IP Test - EIP association to network interface of instance in VPC\t2017-02-14T14:28:26.498Z\r\nPARAMETER\tImageId\t\temi-63ef779d\r\nPARAMETER\tInstanceType\t\tm1.medium\r\n{code}\r\nStack output from the failed stack:\r\n{code}\r\n[root@h-04 ~]# euform-describe-stack-events EIPNetworkInterface --region devops-admin@\r\nEVENT\tEIPNetworkInterface\t605ced03-87c8-46cd-b5bb-42384c13fba5\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:33:57.635Z\tROLLBACK_COMPLETE\r\nEVENT\tEIPNetworkInterface\tVPC-DELETE_COMPLETE-1487082837356\tAWS::EC2::VPC\tVPC\tvpc-e54ed63b\t2017-02-14T14:33:57.356Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tVPC-DELETE_IN_PROGRESS-1487082836714\tAWS::EC2::VPC\tVPC\tvpc-e54ed63b\t2017-02-14T14:33:56.714Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnet-DELETE_COMPLETE-1487082836189\tAWS::EC2::Subnet\tSubnet\tsubnet-42f9cd70\t2017-02-14T14:33:56.189Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-DELETE_COMPLETE-1487082836155\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-16ce7e36\t2017-02-14T14:33:56.155Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-DELETE_IN_PROGRESS-1487082835505\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-16ce7e36\t2017-02-14T14:33:55.505Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnet-DELETE_IN_PROGRESS-1487082835471\tAWS::EC2::Subnet\tSubnet\tsubnet-42f9cd70\t2017-02-14T14:33:55.471Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-DELETE_COMPLETE-1487082834871\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-d45d43c3\t2017-02-14T14:33:54.871Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInternetGateway-DELETE_COMPLETE-1487082588783\tAWS::EC2::InternetGateway\tInternetGateway\tigw-095477bd\t2017-02-14T14:29:48.783Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInternetGateway-DELETE_IN_PROGRESS-1487082588208\tAWS::EC2::InternetGateway\tInternetGateway\tigw-095477bd\t2017-02-14T14:29:48.208Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRouteTable-DELETE_COMPLETE-1487082587706\tAWS::EC2::RouteTable\tRouteTable\trtb-4c0e0f79\t2017-02-14T14:29:47.706Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tAttachGateway-DELETE_COMPLETE-1487082587598\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-3TXBGSJ63X60W\t2017-02-14T14:29:47.598Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-DELETE_COMPLETE-1487082587556\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-a510b426\t2017-02-14T14:29:47.556Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIP-DELETE_COMPLETE-1487082587523\tAWS::EC2::EIP\tEIP\t10.116.152.92\t2017-02-14T14:29:47.523Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tRouteTable-DELETE_IN_PROGRESS-1487082586924\tAWS::EC2::RouteTable\tRouteTable\trtb-4c0e0f79\t2017-02-14T14:29:46.924Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tAttachGateway-DELETE_IN_PROGRESS-1487082586824\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-3TXBGSJ63X60W\t2017-02-14T14:29:46.824Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-DELETE_IN_PROGRESS-1487082586582\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-a510b426\t2017-02-14T14:29:46.582Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tEIP-DELETE_IN_PROGRESS-1487082586531\tAWS::EC2::EIP\tEIP\t10.116.152.92\t2017-02-14T14:29:46.531Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRoute-DELETE_COMPLETE-1487082586039\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-ZIET1C4MJJIF8\t2017-02-14T14:29:46.039Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInstance-DELETE_COMPLETE-1487082585955\tAWS::EC2::Instance\tInstance\t\t2017-02-14T14:29:45.955Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-DELETE_COMPLETE-1487082585872\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-3521fb70\t2017-02-14T14:29:45.872Z\tDELETE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tRoute-DELETE_IN_PROGRESS-1487082585364\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-ZIET1C4MJJIF8\t2017-02-14T14:29:45.364Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-DELETE_IN_PROGRESS-1487082585264\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-3521fb70\t2017-02-14T14:29:45.264Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tInstance-DELETE_IN_PROGRESS-1487082585222\tAWS::EC2::Instance\tInstance\t\t2017-02-14T14:29:45.222Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-DELETE_IN_PROGRESS-1487082585189\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-d45d43c3\t2017-02-14T14:29:45.189Z\tDELETE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tc50e05d5-c449-43f7-af5b-bd9abd320803\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:29:44.742Z\tROLLBACK_IN_PROGRESS\tCreate stack failed.  Rollback requested by user.\r\nEVENT\tEIPNetworkInterface\t8e78bda0-0e10-425b-9120-cad7af6c37b4\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:29:34.272Z\tCREATE_FAILED\tThe following resource(s) failed to create: [Instance].\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_FAILED-1487082573676\tAWS::EC2::Instance\tInstance\t\t2017-02-14T14:29:33.676Z\tCREATE_FAILED\tChannel was closed before the response was received.:RunInstancesType:354a274d-7c68-4aa7-8852-972e897a453d::5c629808-7c69-4065-ae75-b7190946bc59:return=true:epoch=null:status=null\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_COMPLETE-1487082513941\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-3521fb70\t2017-02-14T14:28:33.941Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_IN_PROGRESS-1487082513638\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-3521fb70\t2017-02-14T14:28:33.638Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_IN_PROGRESS-1487082513283\tAWS::EC2::EIPAssociation\tEIPAssociation\t\t2017-02-14T14:28:33.283Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_IN_PROGRESS-1487082513249\tAWS::EC2::Instance\tInstance\t\t2017-02-14T14:28:33.249Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_COMPLETE-1487082512690\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-a510b426\t2017-02-14T14:28:32.690Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_COMPLETE-1487082511648\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-d45d43c3\t2017-02-14T14:28:31.648Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1487082511333\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-d45d43c3\t2017-02-14T14:28:31.333Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_COMPLETE-1487082511314\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-ZIET1C4MJJIF8\t2017-02-14T14:28:31.314Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_IN_PROGRESS-1487082511225\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-a510b426\t2017-02-14T14:28:31.225Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_IN_PROGRESS-1487082510941\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-ZIET1C4MJJIF8\t2017-02-14T14:28:30.941Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1487082510939\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\t\t2017-02-14T14:28:30.939Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_IN_PROGRESS-1487082510858\tAWS::EC2::NetworkInterface\tNetworkInterface\t\t2017-02-14T14:28:30.858Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_IN_PROGRESS-1487082510591\tAWS::EC2::Route\tRoute\t\t2017-02-14T14:28:30.591Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_COMPLETE-1487082510299\tAWS::EC2::Subnet\tSubnet\tsubnet-42f9cd70\t2017-02-14T14:28:30.299Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_COMPLETE-1487082510199\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-16ce7e36\t2017-02-14T14:28:30.199Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_COMPLETE-1487082510090\tAWS::EC2::RouteTable\tRouteTable\trtb-4c0e0f79\t2017-02-14T14:28:30.090Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_COMPLETE-1487082509766\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-3TXBGSJ63X60W\t2017-02-14T14:28:29.766Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_IN_PROGRESS-1487082509483\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-3TXBGSJ63X60W\t2017-02-14T14:28:29.483Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_IN_PROGRESS-1487082509449\tAWS::EC2::RouteTable\tRouteTable\trtb-4c0e0f79\t2017-02-14T14:28:29.449Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_IN_PROGRESS-1487082509399\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-16ce7e36\t2017-02-14T14:28:29.399Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_IN_PROGRESS-1487082509390\tAWS::EC2::Subnet\tSubnet\tsubnet-42f9cd70\t2017-02-14T14:28:29.390Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_IN_PROGRESS-1487082509247\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\t\t2017-02-14T14:28:29.247Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_IN_PROGRESS-1487082509230\tAWS::EC2::RouteTable\tRouteTable\t\t2017-02-14T14:28:29.230Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_IN_PROGRESS-1487082509090\tAWS::EC2::Subnet\tSubnet\t\t2017-02-14T14:28:29.090Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_IN_PROGRESS-1487082509056\tAWS::EC2::NetworkAcl\tNetworkAcl\t\t2017-02-14T14:28:29.056Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_COMPLETE-1487082508631\tAWS::EC2::VPC\tVPC\tvpc-e54ed63b\t2017-02-14T14:28:28.631Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_COMPLETE-1487082508088\tAWS::EC2::EIP\tEIP\t10.116.152.92\t2017-02-14T14:28:28.088Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_COMPLETE-1487082508063\tAWS::EC2::InternetGateway\tInternetGateway\tigw-095477bd\t2017-02-14T14:28:28.063Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_IN_PROGRESS-1487082507630\tAWS::EC2::VPC\tVPC\tvpc-e54ed63b\t2017-02-14T14:28:27.630Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_IN_PROGRESS-1487082507626\tAWS::EC2::EIP\tEIP\t10.116.152.92\t2017-02-14T14:28:27.626Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_IN_PROGRESS-1487082507572\tAWS::EC2::InternetGateway\tInternetGateway\tigw-095477bd\t2017-02-14T14:28:27.572Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_IN_PROGRESS-1487082507412\tAWS::EC2::EIP\tEIP\t\t2017-02-14T14:28:27.412Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_IN_PROGRESS-1487082507303\tAWS::EC2::InternetGateway\tInternetGateway\t\t2017-02-14T14:28:27.303Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_IN_PROGRESS-1487082507278\tAWS::EC2::VPC\tVPC\t\t2017-02-14T14:28:27.278Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\t4f134b66-b32b-46da-bb0b-88e4f7342f86\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/9204cd95-9aa0-4bd0-aefd-c40ca795010f\t2017-02-14T14:28:26.775Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39300","id":"39300","filename":"cfn-eipassociation-networkinterfaceid-vpc.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T09:18:10.664-0600","size":5460,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39300/cfn-eipassociation-networkinterfaceid-vpc.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39307","id":"39307","filename":"cfn-eipassociation-networkinterfaceid-vpc-reorder.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T17:05:55.486-0600","size":5449,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/39307/cfn-eipassociation-networkinterfaceid-vpc-reorder.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39308","id":"39308","filename":"EIPTestOne-Events.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T17:23:23.575-0600","size":28346,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39308/EIPTestOne-Events.txt"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/39309","id":"39309","filename":"EIPTestTwo-Events.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T17:23:22.888-0600","size":28346,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/39309/EIPTestTwo-Events.txt"}],"summary":"Cloudformation:  Stack fails when using NetworkInterfaceId property in AWS::EC2::EIPAssociation resource","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i042pz:","customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2017-02-14T15:34:26.630-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["ethomas(ethomas)","hspencer(hspencer)","sjones(sjones)"],"customfield_10116":null,"environment":"Eucalyptus VPC cloud","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54802/comment/117607","id":"117607","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Using the {{cfn-eipassociation-networkinterfaceid-vpc.json}} template on AWS, the stack deploys without any issues. Stack was deployed using [{{aws-shell}}|https://github.com/awslabs/aws-shell]:\r\n{code}\r\naws> cloudformation create-stack --stack-name EIPNetworkInterfaceTest --template-body file://cfn-eipassociation-networkinterfaceid-vpc.json --parameters ParameterKey=ImageId,ParameterValue=\r\n{\r\n    \"StackId\": \"arn:aws:cloudformation:us-west-2:017179026131:stack/EIPNetworkInterfaceTest/2b4d8ac0-f2c5-11e6-9b02-50d5ca789e1e\"\r\n}\r\naws> cloudformation describe-stacks\r\n{\r\n    \"Stacks\": [\r\n        {\r\n            \"StackId\": \"arn:aws:cloudformation:us-west-2:017179026131:stack/EIPNetworkInterfaceTest/2b4d8ac0-f2c5-11e6-9b02-50d5ca789e1e\",\r\n            \"Description\": \"Elastic IP Test - EIP association to network interface of instance in VPC\",\r\n            \"Parameters\": [\r\n                {\r\n                    \"ParameterValue\": \"ami-ea16ad8a\",\r\n                    \"ParameterKey\": \"ImageId\"\r\n                },\r\n                {\r\n                    \"ParameterValue\": \"m3.medium\",\r\n                    \"ParameterKey\": \"InstanceType\"\r\n                }\r\n            ],\r\n            \"Tags\": [],\r\n            \"Outputs\": [\r\n                {\r\n                    \"Description\": \"Elastic IP\",\r\n                    \"OutputKey\": \"ElasticIP\",\r\n                    \"OutputValue\": \"35.160.48.7\"\r\n                },\r\n                {\r\n                    \"Description\": \"Resource ID of EIPAssociation\",\r\n                    \"OutputKey\": \"EIPAssociationId\",\r\n                    \"OutputValue\": \"eipassoc-6257c718\"\r\n                },\r\n                {\r\n                    \"Description\": \"InstanceId of the newly created EC2 instance\",\r\n                    \"OutputKey\": \"InstanceId\",\r\n                    \"OutputValue\": \"i-017a9132736170c22\"\r\n                },\r\n                {\r\n                    \"Description\": \"Allocation ID of the Elastic IP\",\r\n                    \"OutputKey\": \"AllocationID\",\r\n                    \"OutputValue\": \"eipalloc-821b17e5\"\r\n                },\r\n                {\r\n                    \"Description\": \"Private IP address of NetworkInterface\",\r\n                    \"OutputKey\": \"NetworkInterfacePrimaryPrivateIP\",\r\n                    \"OutputValue\": \"10.0.0.218\"\r\n                },\r\n                {\r\n                    \"Description\": \"Resource ID for NetworkInterface\",\r\n                    \"OutputKey\": \"NetworkInterfaceId\",\r\n                    \"OutputValue\": \"eni-34afc367\"\r\n                }\r\n            ],\r\n            \"CreationTime\": \"2017-02-14T14:52:13.046Z\",\r\n            \"StackName\": \"EIPNetworkInterfaceTest\",\r\n            \"NotificationARNs\": [],\r\n            \"StackStatus\": \"CREATE_COMPLETE\",\r\n            \"DisableRollback\": false\r\n        }\r\n    ]\r\n}\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T09:24:35.845-0600","updated":"2017-02-14T09:24:35.845-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54802/comment/117618","id":"117618","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"It looks like this is due to the \"Instance\" and \"EIPAssociation\" resources being created concurrently causing errors in the ec2 service.\r\n\r\nA work around is to explicitly add a dependency to order the resource creation:\r\n\r\n{code}\r\n        \"Instance\": {\r\n            \"DependsOn\": \"EIPAssociation\",\r\n            \"Type\": \"AWS::EC2::Instance\",\r\n                \"Properties\": {\r\n                    \"ImageId\" : { \"Ref\":\"ImageId\" },\r\n                    \"InstanceType\" : { \"Ref\":\"InstanceType\"},\r\n                    \"NetworkInterfaces\" : [{\r\n                        \"DeviceIndex\"  : \"0\",\r\n                        \"Description\" : \"Default interface for instance\",\r\n                        \"NetworkInterfaceId\" : { \"Ref\": \"NetworkInterface\" }\r\n                    }],\r\n                    \"Tags\" : [ {\"Key\" : \"Application\", \"Value\" : { \"Ref\" : \"AWS::StackId\"} } ]\r\n            }\r\n         }\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T15:34:26.630-0600","updated":"2017-02-14T15:34:26.630-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54802/comment/117623","id":"117623","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones]/[~ethomas],\r\n\r\nI tested the following:\r\n* Ran two stacks on AWS using the same template\r\n* Ran another stack on Eucalyptus with the attached {{cfn-eipassociation-networkinterfaceid-vpc-reorder.json}}, which puts the {{AWS::EC2::Instance}} resource before the {{AWS::EC2::EIPAssociation}} resource.\r\n\r\n*Results*\r\n\r\n* On AWS, both stacks completed. On both stacks, {{AWS::EC2::EIPAssociation}} resource reached {{CREATE_COMPLETE}} before {{AWS::EC2::Instance}} resource (stack events output attached)\r\n* On Eucalyptus, the stack deployed with {{cfn-eipassociation-networkinterfaceid-vpc-reorder.json}} template completed successfully:\r\n{code}\r\n[root@h-04 ~]# euform-create-stack EIPNetworkInterface --template-file cfn-eipassociation-networkinterfaceid-vpc-reorder.json --parameter ImageId=emi-63ef779d --region devops-admin@\r\narn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/0740a782-5a24-431e-a44c-0349e676a3cb\r\n[root@h-04 ~]# euform-describe-stacks EIPNetworkInterface --region devops-admin@\r\nSTACK\tEIPNetworkInterface\tCREATE_COMPLETE\t\tElastic IP Test - EIP association to network interface of instance in VPC\t2017-02-14T22:38:46.636Z\r\nPARAMETER\tImageId\t\temi-63ef779d\r\nPARAMETER\tInstanceType\t\tm1.medium\r\nOUTPUT\tInstanceId\ti-4d893525\r\nOUTPUT\tElasticIP\t10.116.152.86\r\nOUTPUT\tAllocationID\teipalloc-2b9a071b\r\nOUTPUT\tNetworkInterfaceId\teni-624d1519\r\nOUTPUT\tNetworkInterfacePrimaryPrivateIP\t10.0.0.204\r\nOUTPUT\tEIPAssociationId\teipassoc-bb3a8c0b\r\n\r\n[root@h-04 ~]# euform-describe-stack-resources -n EIPNetworkInterface --region devops-admin@\r\nRESOURCE\tSubnet\tsubnet-f4381a6f\tAWS::EC2::Subnet\t\tCREATE_COMPLETE\r\nRESOURCE\tRouteTable\trtb-a7f2fa9f\tAWS::EC2::RouteTable\t\tCREATE_COMPLETE\r\nRESOURCE\tNetworkAcl\tacl-2b89b42b\tAWS::EC2::NetworkAcl\t\tCREATE_COMPLETE\r\nRESOURCE\tNetworkInterface\teni-624d1519\tAWS::EC2::NetworkInterface\t\tCREATE_COMPLETE\r\nRESOURCE\tEIP\t10.116.152.86\tAWS::EC2::EIP\t\tCREATE_COMPLETE\r\nRESOURCE\tAttachGateway\tEIPNetworkInterface-AttachGateway-JOFF6UNNDAIND\tAWS::EC2::VPCGatewayAttachment\t\tCREATE_COMPLETE\r\nRESOURCE\tRoute\tEIPNetworkInterface-Route-RZDB544SK9HLO\tAWS::EC2::Route\t\tCREATE_COMPLETE\r\nRESOURCE\tEIPAssociation\teipassoc-bb3a8c0b\tAWS::EC2::EIPAssociation\t\tCREATE_COMPLETE\r\nRESOURCE\tInternetGateway\tigw-b0a5a26d\tAWS::EC2::InternetGateway\t\tCREATE_COMPLETE\r\nRESOURCE\tVPC\tvpc-6288bdf0\tAWS::EC2::VPC\t\tCREATE_COMPLETE\r\nRESOURCE\tSubnetNetworkAclAssociation\taclassoc-6a944426\tAWS::EC2::SubnetNetworkAclAssociation\t\tCREATE_COMPLETE\r\nRESOURCE\tInstance\ti-4d893525\tAWS::EC2::Instance\t\tCREATE_COMPLETE\r\n\r\n[root@h-04 ~]# euform-describe-stack-events EIPNetworkInterface --region devops-admin@\r\nEVENT\tEIPNetworkInterface\t28e975b0-9a64-4226-aacc-e57cdd9257d9\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/0740a782-5a24-431e-a44c-0349e676a3cb\t2017-02-14T22:39:36.847Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_COMPLETE-1487111976225\tAWS::EC2::Instance\tInstance\ti-4d893525\t2017-02-14T22:39:36.225Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_COMPLETE-1487111934065\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-bb3a8c0b\t2017-02-14T22:38:54.065Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_IN_PROGRESS-1487111933794\tAWS::EC2::Instance\tInstance\ti-4d893525\t2017-02-14T22:38:53.794Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_IN_PROGRESS-1487111933720\tAWS::EC2::EIPAssociation\tEIPAssociation\teipassoc-bb3a8c0b\t2017-02-14T22:38:53.720Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tInstance-CREATE_IN_PROGRESS-1487111933365\tAWS::EC2::Instance\tInstance\t\t2017-02-14T22:38:53.365Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tEIPAssociation-CREATE_IN_PROGRESS-1487111933331\tAWS::EC2::EIPAssociation\tEIPAssociation\t\t2017-02-14T22:38:53.331Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_COMPLETE-1487111932755\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-624d1519\t2017-02-14T22:38:52.755Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_COMPLETE-1487111931597\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-6a944426\t2017-02-14T22:38:51.597Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_COMPLETE-1487111931363\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-RZDB544SK9HLO\t2017-02-14T22:38:51.363Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_IN_PROGRESS-1487111931357\tAWS::EC2::NetworkInterface\tNetworkInterface\teni-624d1519\t2017-02-14T22:38:51.357Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1487111931305\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\taclassoc-6a944426\t2017-02-14T22:38:51.305Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_IN_PROGRESS-1487111931097\tAWS::EC2::Route\tRoute\tEIPNetworkInterface-Route-RZDB544SK9HLO\t2017-02-14T22:38:51.097Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnetNetworkAclAssociation-CREATE_IN_PROGRESS-1487111930953\tAWS::EC2::SubnetNetworkAclAssociation\tSubnetNetworkAclAssociation\t\t2017-02-14T22:38:50.953Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkInterface-CREATE_IN_PROGRESS-1487111930920\tAWS::EC2::NetworkInterface\tNetworkInterface\t\t2017-02-14T22:38:50.920Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRoute-CREATE_IN_PROGRESS-1487111930778\tAWS::EC2::Route\tRoute\t\t2017-02-14T22:38:50.778Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_COMPLETE-1487111930353\tAWS::EC2::Subnet\tSubnet\tsubnet-f4381a6f\t2017-02-14T22:38:50.353Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_COMPLETE-1487111930269\tAWS::EC2::RouteTable\tRouteTable\trtb-a7f2fa9f\t2017-02-14T22:38:50.269Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_COMPLETE-1487111930115\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-JOFF6UNNDAIND\t2017-02-14T22:38:50.115Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_COMPLETE-1487111930023\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-2b89b42b\t2017-02-14T22:38:50.023Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_IN_PROGRESS-1487111929716\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\tEIPNetworkInterface-AttachGateway-JOFF6UNNDAIND\t2017-02-14T22:38:49.716Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_IN_PROGRESS-1487111929590\tAWS::EC2::Subnet\tSubnet\tsubnet-f4381a6f\t2017-02-14T22:38:49.590Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_IN_PROGRESS-1487111929565\tAWS::EC2::RouteTable\tRouteTable\trtb-a7f2fa9f\t2017-02-14T22:38:49.565Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tAttachGateway-CREATE_IN_PROGRESS-1487111929363\tAWS::EC2::VPCGatewayAttachment\tAttachGateway\t\t2017-02-14T22:38:49.363Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_IN_PROGRESS-1487111929356\tAWS::EC2::NetworkAcl\tNetworkAcl\tacl-2b89b42b\t2017-02-14T22:38:49.356Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tSubnet-CREATE_IN_PROGRESS-1487111929255\tAWS::EC2::Subnet\tSubnet\t\t2017-02-14T22:38:49.255Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tRouteTable-CREATE_IN_PROGRESS-1487111929213\tAWS::EC2::RouteTable\tRouteTable\t\t2017-02-14T22:38:49.213Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tNetworkAcl-CREATE_IN_PROGRESS-1487111929121\tAWS::EC2::NetworkAcl\tNetworkAcl\t\t2017-02-14T22:38:49.121Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_COMPLETE-1487111928628\tAWS::EC2::VPC\tVPC\tvpc-6288bdf0\t2017-02-14T22:38:48.628Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_COMPLETE-1487111928336\tAWS::EC2::InternetGateway\tInternetGateway\tigw-b0a5a26d\t2017-02-14T22:38:48.336Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_COMPLETE-1487111928152\tAWS::EC2::EIP\tEIP\t10.116.152.86\t2017-02-14T22:38:48.152Z\tCREATE_COMPLETE\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_IN_PROGRESS-1487111927749\tAWS::EC2::EIP\tEIP\t10.116.152.86\t2017-02-14T22:38:47.749Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_IN_PROGRESS-1487111927744\tAWS::EC2::InternetGateway\tInternetGateway\tigw-b0a5a26d\t2017-02-14T22:38:47.744Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_IN_PROGRESS-1487111927710\tAWS::EC2::VPC\tVPC\tvpc-6288bdf0\t2017-02-14T22:38:47.710Z\tCREATE_IN_PROGRESS\tResource creation Initiated\r\nEVENT\tEIPNetworkInterface\tInternetGateway-CREATE_IN_PROGRESS-1487111927505\tAWS::EC2::InternetGateway\tInternetGateway\t\t2017-02-14T22:38:47.505Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tEIP-CREATE_IN_PROGRESS-1487111927461\tAWS::EC2::EIP\tEIP\t\t2017-02-14T22:38:47.461Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\tVPC-CREATE_IN_PROGRESS-1487111927419\tAWS::EC2::VPC\tVPC\t\t2017-02-14T22:38:47.419Z\tCREATE_IN_PROGRESS\r\nEVENT\tEIPNetworkInterface\ta59f39bd-7ffe-4e16-8bf2-acd3368f93cd\tAWS::CloudFormation::Stack\tEIPNetworkInterface\tarn:aws:cloudformation::000727120439:stack/EIPNetworkInterface/0740a782-5a24-431e-a44c-0349e676a3cb\t2017-02-14T22:38:46.906Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-02-14T17:22:57.193-0600","updated":"2017-02-14T17:22:57.193-0600"}],"maxResults":3,"total":3,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13230/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}