{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"30321","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321","key":"EUCA-9470","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14205","id":"14205","description":"Eucalyptus 4.0.1","name":"4.0.1","archived":false,"released":true,"releaseDate":"2014-08-13"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10104":[],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":"2014-07-11T12:42:26.640-0500","customfield_10704":null,"customfield_10308":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9470/watchers","watchCount":9,"isWatching":false},"created":"2014-05-27T23:02:40.696-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2014-06-13T13:40:44.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"labels":["regression"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"issuelinks":[{"id":"25022","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/25022","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"30329","key":"EUCA-9475","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30329","fields":{"summary":"Addresses are not released when instances are terminated","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"25356","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/25356","type":{"id":"10101","name":"Cloners","inward":"is cloned by","outward":"clones","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10101"},"inwardIssue":{"id":"30877","key":"EUCA-9588","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30877","fields":{"summary":"CLONE - for 4.1 - instance restore fails when launch index is > 0, CLC locks up","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"25030","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/25030","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"30329","key":"EUCA-9475","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30329","fields":{"summary":"Addresses are not released when instances are terminated","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"updated":"2014-12-08T17:00:28.034-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"description":"Hi All,\r\n\r\nSetup a cloud with following topology\r\n\r\nCLC/UFS with RiakCs - 1\r\nCC/SC - 1\r\nNC - 1\r\nSC - Overlay\r\nNetwork - EDGE\r\n\r\nFollowing packages\r\n\r\n{code}\r\n# rpm -qa | grep euca\r\neucalyptus-release-4.0-1.el6.noarch\r\neuca2ools-3.1.0-0.0.196.el6.noarch\r\neucalyptus-common-java-4.0.0-0.0.1051.el6.x86_64\r\neucalyptus-cloud-4.0.0-0.0.1051.el6.x86_64\r\neucalyptus-sos-plugins-0.1.6-0.el6.noarch\r\neuca2ools-release-3.1-1.el6.noarch\r\neucalyptus-4.0.0-0.0.1051.el6.x86_64\r\neucalyptus-common-java-libs-4.0.0-0.0.1051.el6.x86_64\r\neucalyptus-admin-tools-4.0.0-0.0.1051.el6.noarch\r\neucalyptus-load-balancer-image-1.0.5-0.206.el6.x86_64\r\neucalyptus-imaging-worker-image-1.0.0-0.174.el6.x86_64\r\n{code}\r\n\r\nFollowing is euca-describe-services\r\n\r\n{code}\r\n# euca-describe-services\r\nSERVICE\tbootstrap         \tbootstrap \t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Empyrean\tarn:euca:bootstrap:::10.104.1.212/ \r\nSERVICE\treporting         \tbootstrap \t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Reporting\tarn:euca:bootstrap::reporting:10.104.1.212/\r\nSERVICE\tcluster           \tcloud4    \tcc01                 \tENABLED \t27  \thttp://10.104.10.58:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:cloud4:cluster:cc01/\r\nSERVICE\tstorage           \tcloud4    \tsc01                 \tENABLED \t27  \thttp://10.104.10.58:8773/services/Storage\tarn:euca:eucalyptus:cloud4:storage:sc01/\r\nSERVICE\tjetty             \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Jetty\tarn:euca:eucalyptus::jetty:10.104.1.212/\r\nSERVICE\teucalyptus        \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.104.1.212/\r\nSERVICE\tloadbalancingbackend\teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/LoadBalancingBackend\tarn:euca:eucalyptus::loadbalancingbackend:10.104.1.212/\r\nSERVICE\timaging           \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Imaging\tarn:euca:eucalyptus::imaging:10.104.1.212/\r\nSERVICE\tcloudwatchbackend \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/CloudWatchBackend\tarn:euca:eucalyptus::cloudwatchbackend:10.104.1.212/\r\nSERVICE\tautoscalingbackend\teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/AutoScalingBackend\tarn:euca:eucalyptus::autoscalingbackend:10.104.1.212/\r\nSERVICE\tdns               \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Dns\tarn:euca:eucalyptus::dns:10.104.1.212/\r\nSERVICE\tnotifications     \teucalyptus\t10.104.1.212         \tENABLED \t27  \thttp://10.104.1.212:8773/services/Notifications\tarn:euca:eucalyptus::notifications:10.104.1.212/\r\nSERVICE\tuser-api          \tmycloud   \tmycloud              \tENABLED \t27  \thttp://10.104.1.212:8773/services/User-API\tarn:euca:bootstrap:mycloud:user-api:mycloud/\r\nSERVICE\tautoscaling       \tmycloud   \tmycloud.autoscaling  \tENABLED \t27  \thttp://10.104.1.212:8773/services/AutoScaling\tarn:euca:bootstrap:mycloud:autoscaling:mycloud.autoscaling/\r\nSERVICE\tcloudwatch        \tmycloud   \tmycloud.cloudwatch   \tENABLED \t27  \thttp://10.104.1.212:8773/services/CloudWatch\tarn:euca:bootstrap:mycloud:cloudwatch:mycloud.cloudwatch/\r\nSERVICE\tcompute           \tmycloud   \tmycloud.compute      \tENABLED \t27  \thttp://10.104.1.212:8773/services/compute\tarn:euca:bootstrap:mycloud:compute:mycloud.compute/\r\nSERVICE\teuare             \tmycloud   \tmycloud.euare        \tENABLED \t27  \thttp://10.104.1.212:8773/services/Euare\tarn:euca:bootstrap:mycloud:euare:mycloud.euare/\r\nSERVICE\tloadbalancing     \tmycloud   \tmycloud.loadbalancing\tENABLED \t27  \thttp://10.104.1.212:8773/services/LoadBalancing\tarn:euca:bootstrap:mycloud:loadbalancing:mycloud.loadbalancing/\r\nSERVICE\tobjectstorage     \tmycloud   \tmycloud.objectstorage\tENABLED \t27  \thttp://10.104.1.212:8773/services/objectstorage\tarn:euca:bootstrap:mycloud:objectstorage:mycloud.objectstorage/\r\nSERVICE\ttokens            \tmycloud   \tmycloud.tokens       \tENABLED \t27  \thttp://10.104.1.212:8773/services/Tokens\tarn:euca:bootstrap:mycloud:tokens:mycloud.tokens/\r\n{code}\r\n\r\nAfter uploading a precise x86_64 HVM image, I ran 3 instances on the cloud. Enabled monitoring on all 3 instances and decreased the instance timeout from 720 to 1.\r\n\r\nNext I stopped the eucalyptus-nc service on the NC and waited for the CLC to kick off the termination of the instances after the timeout is hit (1 minute).\r\n\r\nNoticed that the CLC terminated all instances but kept showing NC as {{ENABLED}} in its {{euca-describe-nodes}} etc.\r\n\r\nThen started the eucalyptus-nc service back and noticed following error on the CLC\r\n\r\n{code}\r\n2014-05-27 20:53:17 DEBUG 000001379 JobRunShell              | Calling execute on job OsgJobs.job2\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:22 DEBUG 000001234 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:22 DEBUG 000001234 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:22 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:22 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:22 DEBUG 000001242 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:22 DEBUG 000001242 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.10.58 => Host 10.104.10.58 #27 /10.104.10.58 coordinator=10.104.1.212 booted nodb started=1401248432592 [/10.104.10.58, /10.105.10.58]\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.10.58 finished.\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.10.58 => Host 10.104.10.58 #27 /10.104.10.58 coordinator=10.104.1.212 booted nodb started=1401248432592 [/10.104.10.58, /10.105.10.58]\r\n2014-05-27 20:53:22 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.10.58 finished.\r\n2014-05-27 20:53:25 DEBUG 000000028 S3ProviderClient         | Checking\r\n2014-05-27 20:53:25 DEBUG 000000028 S3ProviderClient         | Check completed successfully\r\n2014-05-27 20:53:25 DEBUG 000002212 Nodes                    | Updated node info map: OLD:10.105.1.213:null \r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | No kernelId  for: i-288d461b because vbr does not contain a kernel: [[type:ephemeral, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sdb, resourceLocation:none, id:none, size:3007315968, format:ext3], [type:machine, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sda, resourceLocation:http://imaging@10.104.1.212:8773/services/objectstorage/3b3de1-download-manifests/DM-r-72577955?Expires=1401259537&AWSAccessKeyId=AKIBIZPRJ8SW3D2ALAT0&Signature=nFxuXNjLfHb9S2GprVleILDZ%2FY8%3D, id:emi-d43c2323, size:2361393152, format:none]]\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | No ramdiskId  for: i-288d461b because vbr does not contain a ramdisk: [[type:ephemeral, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sdb, resourceLocation:none, id:none, size:3007315968, format:ext3], [type:machine, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sda, resourceLocation:http://imaging@10.104.1.212:8773/services/objectstorage/3b3de1-download-manifests/DM-r-72577955?Expires=1401259537&AWSAccessKeyId=AKIBIZPRJ8SW3D2ALAT0&Signature=nFxuXNjLfHb9S2GprVleILDZ%2FY8%3D, id:emi-d43c2323, size:2361393152, format:none]]\r\n2014-05-27 20:53:25 ERROR 000002621 Emis                     | com.eucalyptus.context.IllegalContextAccessException: Cannot access context implicitly using lookup(V) outside of a service.\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | Failed to restore user data for : i-288d461b because of: unable to decode base64 string: String index out of range: -4\r\n2014-05-27 20:53:25  INFO 000002236 Address                  | :1401249205471:Address:ADDRESS_STATE:TOP:Address 10.104.3.11 arn:aws:euare:000000000001:user/nobody available 0.0.0.0  AddressTransition system:unallocated->impending(true)\r\n2014-05-27 20:53:25  WARN 000002621 Allocations              | Aborting resource token: ResourceToken:i-5d209251:resources=TypedContext:{com.eucalyptus.util.TypedKey(NetworkResources)=[com.eucalyptus.compute.common.network.PublicIPResource(), com.eucalyptus.compute.common.network.PrivateIPResource()]}\r\n2014-05-27 20:53:25 DEBUG 000002621 ResourceToken            | ResourceToken:i-5d209251:resources=TypedContext:{com.eucalyptus.util.TypedKey(NetworkResources)=[com.eucalyptus.compute.common.network.PublicIPResource(), com.eucalyptus.compute.common.network.PrivateIPResource()]}\r\n2014-05-27 20:53:25 ERROR 000002621 VmInstance               | Failed to restore instance i-288d461b because of: null\r\njava.lang.reflect.UndeclaredThrowableException\r\n\tat com.sun.proxy.$Proxy78.restoreInstanceResources(Unknown Source)\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$DispatchingVmInstanceLifecycleHelper.restoreInstanceResources(VmInstanceLifecycleHelpers.groovy)\r\n\tat com.eucalyptus.vm.VmInstance$RestoreAllocation.apply(VmInstance.java:514)\r\n\tat com.eucalyptus.cluster.callback.VmStateCallback.handleRestore(VmStateCallback.java:296)\r\n\tat com.eucalyptus.cluster.callback.VmStateCallback.handleReportedState(VmStateCallback.java:235)\r\n\tat com.eucalyptus.cluster.callback.VmStateCallback.fire(VmStateCallback.java:180)\r\n\tat com.eucalyptus.cluster.callback.VmStateCallback.fire(VmStateCallback.java:107)\r\n\tat com.eucalyptus.util.async.AsyncRequest$1.fire(AsyncRequest.java:124)\r\n\tat com.eucalyptus.util.async.AsyncRequest$1.fire(AsyncRequest.java:101)\r\n\tat com.eucalyptus.util.async.Callbacks$BasicCallbackProcessor.run(Callbacks.java:144)\r\n\tat com.eucalyptus.util.concurrent.AbstractListenableFuture$3.call(AbstractListenableFuture.java:182)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n\tat java.lang.Thread.run(Thread.java:744)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$_DispatchingVmInstanceLifecycleHelper_closure1_closure3.doCall(VmInstanceLifecycleHelpers.groovy:105)\r\n\tat sun.reflect.GeneratedMethodAccessor415.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1085)\r\n\tat groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:909)\r\n\tat groovy.lang.Closure.call(Closure.java:423)\r\n\tat groovy.lang.Closure.call(Closure.java:439)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:1324)\r\n\tat org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:1296)\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$_DispatchingVmInstanceLifecycleHelper_closure1.doCall(VmInstanceLifecycleHelpers.groovy:105)\r\n\tat sun.reflect.GeneratedMethodAccessor432.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1085)\r\n\tat groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:909)\r\n\tat groovy.lang.Closure.call(Closure.java:423)\r\n\tat org.codehaus.groovy.runtime.ConvertedClosure.invokeCustom(ConvertedClosure.java:51)\r\n\tat org.codehaus.groovy.runtime.ConversionHandler.invoke(ConversionHandler.java:81)\r\n\tat com.sun.proxy.$Proxy77.invoke(Unknown Source)\r\n\t... 15 more\r\nCaused by: java.lang.IllegalAccessError: tried to access field com.eucalyptus.cloud.VmInstanceLifecycleHelpers$PublicIPVmInstanceLifecycleHelper.logger from class com.eucalyptus.cloud.VmInstanceLifecycleHelpers$_PublicIPVmInstanceLifecycleHelper_restoreAddress_closure4\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$_PublicIPVmInstanceLifecycleHelper_restoreAddress_closure4.doCall(VmInstanceLifecycleHelpers.groovy:491)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:606)\r\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\r\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1085)\r\n\tat groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)\r\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:909)\r\n\tat groovy.lang.Closure.call(Closure.java:423)\r\n\tat groovy.lang.Closure.call(Closure.java:439)\r\n\tat com.eucalyptus.entities.Entities.transaction(Entities.java:283)\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$PublicIPVmInstanceLifecycleHelper.restoreAddress(VmInstanceLifecycleHelpers.groovy:456)\r\n\tat com.eucalyptus.cloud.VmInstanceLifecycleHelpers$PublicIPVmInstanceLifecycleHelper.restoreInstanceResources(VmInstanceLifecycleHelpers.groovy:450)\r\n\t... 45 more\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | No kernelId  for: i-4ae530b2 because vbr does not contain a kernel: [[type:ephemeral, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sdb, resourceLocation:none, id:none, size:3007315968, format:ext3], [type:machine, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sda, resourceLocation:http://imaging@10.104.1.212:8773/services/objectstorage/3b3de1-download-manifests/DM-r-72577955?Expires=1401259537&AWSAccessKeyId=AKIBIZPRJ8SW3D2ALAT0&Signature=nFxuXNjLfHb9S2GprVleILDZ%2FY8%3D, id:emi-d43c2323, size:2361393152, format:none]]\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | No ramdiskId  for: i-4ae530b2 because vbr does not contain a ramdisk: [[type:ephemeral, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sdb, resourceLocation:none, id:none, size:3007315968, format:ext3], [type:machine, class:class edu.ucsb.eucalyptus.cloud.VirtualBootRecord, blockStorage:false, guestDeviceName:sda, resourceLocation:http://imaging@10.104.1.212:8773/services/objectstorage/3b3de1-download-manifests/DM-r-72577955?Expires=1401259537&AWSAccessKeyId=AKIBIZPRJ8SW3D2ALAT0&Signature=nFxuXNjLfHb9S2GprVleILDZ%2FY8%3D, id:emi-d43c2323, size:2361393152, format:none]]\r\n2014-05-27 20:53:25 ERROR 000002621 Emis                     | com.eucalyptus.context.IllegalContextAccessException: Cannot access context implicitly using lookup(V) outside of a service.\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | Failed to restore user data for : i-4ae530b2 because of: unable to decode base64 string: String index out of range: -4\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:32 DEBUG 000001243 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:32 DEBUG 000001243 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:32 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:32 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:32 DEBUG 000001244 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:32 DEBUG 000001244 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.10.58 => Host 10.104.10.58 #27 /10.104.10.58 coordinator=10.104.1.212 booted nodb started=1401248432592 [/10.104.10.58, /10.105.10.58]\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.10.58 finished.\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.10.58 => Host 10.104.10.58 #27 /10.104.10.58 coordinator=10.104.1.212 booted nodb started=1401248432592 [/10.104.10.58, /10.105.10.58]\r\n2014-05-27 20:53:32 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.10.58 finished.\r\n2014-05-27 20:53:33 DEBUG 000001062 Faults                   | Fault notifications: waking up to service error queue.\r\n2014-05-27 20:53:33 DEBUG 000001062 Faults                   | Fault notifications: no state changes pending, discarding pending faults\r\n2014-05-27 20:53:42 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:42 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:42 DEBUG 000001245 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:42 DEBUG 000001245 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:42 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 => Host 10.104.1.212 #27 /10.104.1.212 coordinator=10.104.1.212 booted db:synched(synced) dbpool:ok started=1401247226657 [/10.104.1.212, /10.105.1.212]\r\n2014-05-27 20:53:42 DEBUG 000000068 Hosts                    | Hosts.entrySet(): 10.104.1.212 finished.\r\n2014-05-27 20:53:42 DEBUG 000001250 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:42 DEBUG 000001250 Component                | com.eucalyptus.component.Component.initRemoteService(Component.java:227)\t\r\n                          | com.eucalyptus.component.Component.initService(Component.java:214)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:168)\t\r\n                          | com.eucalyptus.bootstrap.Hosts$3.apply(Hosts.java:163)\r\n2014-05-27 20:53:42 DEBUG 000000067 Hosts                    | Hosts.entrySet(): 10.104.10.58 => Host 10.104.10.58 #27 /10.104.10.58 coordinator=10.104.1.212 booted nodb started=1401248432592 [/10.104.10.58, /10.105.10.58]\r\n{code}\r\n\r\nIn {{euca-describe-instances}} there are 3 instances shown as terminated and one has appeared after this activity which is stuck at pending forever.\r\n\r\nI tried to run new instances and all went running on the NC but are stuck at CLC showing pending as the status.\r\n\r\nAlso the CC is doing transition? according  to CLC logs, continuously\r\n\r\n{code}\r\n2014-05-27 20:56:25 ERROR 000000043 Topology                 | CHECK:null  arn:euca:eucalyptus:cloud4:cluster:cc01/ ENABLED->ENABLED=ENABLED [Transition request state=ENABLED rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:cloud4:cluster:cc01/:state=ENABLED:mark=true:transition=TRANSITION arn:euca:eucalyptus:cloud4:cluster:cc01/ #5935 ENABLED_CHECK ActiveTransition name=ENABLED_CHECK from=ENABLED/false to=ENABLED/false error=NOTREADY action=CHECK id=5935 startTime=Tue May 27 20:53:25 PDT 2014]\r\n2014-05-27 20:56:25 DEBUG 000000033 S3ProviderClient         | Checking\r\n2014-05-27 20:56:25 DEBUG 000000033 S3ProviderClient         | Check completed successfully\r\n2014-05-27 20:56:25 ERROR 000000040 Topology                 | CHECK:null  arn:euca:eucalyptus:cloud4:cluster:cc01/ ENABLED->ENABLED=ENABLED [Transition request state=ENABLED rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:cloud4:cluster:cc01/:state=ENABLED:mark=true:transition=TRANSITION arn:euca:eucalyptus:cloud4:cluster:cc01/ #5935 ENABLED_CHECK ActiveTransition name=ENABLED_CHECK from=ENABLED/false to=ENABLED/false error=NOTREADY action=CHECK id=5935 startTime=Tue May 27 20:53:25 PDT 2014]\r\n2014-05-27 20:56:25 DEBUG 000002123 AbstractListenableFuture | Listener failed to execute within the time limit (30): ListenableFuture.ExecPair.listener BasicCallbackProcessor:callback=.util.async.AsyncRequest$1 [com.eucalyptus.util.concurrent.AbstractListenableFuture$ExecPair$1.apply(AbstractListenableFuture.java:266)] [com.eucalyptus.system.Threads.filteredStack(Threads.java:565)] using executor com.eucalyptus.system.Threads$ThreadPool@35081871\r\n{code}\r\n\r\neuca-describe-instances before instance restore\r\n\r\n{code}\r\n# euca-describe-instances \r\nRESERVATION\tr-72577955\t408003559024\tdefault\r\nINSTANCE\ti-780c4d14\temi-d43c2323\t10.104.3.11\t10.104.3.53\trunning\tsshlogin\t0\t\tm1.small\t2014-05-28T03:45:30.509Z\tcloud4\t\t\t\tmonitoring-enabled\t10.104.3.11\t10.104.3.53\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nTAG\tinstance\ti-780c4d14\teuca:node\t10.105.1.213\r\nINSTANCE\ti-288d461b\temi-d43c2323\t10.104.3.12\t10.104.3.42\trunning\tsshlogin\t1\t\tm1.small\t2014-05-28T03:45:30.566Z\tcloud4\t\t\t\tmonitoring-enabled\t10.104.3.12\t10.104.3.42\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nTAG\tinstance\ti-288d461b\teuca:node\t10.105.1.213\r\nINSTANCE\ti-4ae530b2\temi-d43c2323\t10.104.3.13\t10.104.3.48\trunning\tsshlogin\t2\t\tm1.small\t2014-05-28T03:45:30.607Z\tcloud4\t\t\t\tmonitoring-enabled\t10.104.3.13\t10.104.3.48\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nTAG\tinstance\ti-4ae530b2\teuca:node\t10.105.1.213\r\n{code}\r\n\r\n\r\n\r\neuca-describe-instances after instance restore\r\n\r\n{code}\r\n# euca-describe-instances verbose\r\nRESERVATION\tr-72577955\t408003559024\tdefault\r\nINSTANCE\ti-780c4d14\temi-d43c2323\t\t\tterminated\tsshlogin\t0\t\tm1.small\t2014-05-28T03:45:30.509Z\tcloud4\t\tmonitoring-enabled\t\t\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nINSTANCE\ti-288d461b\temi-d43c2323\t\t\tterminated\tsshlogin\t1\t\tm1.small\t2014-05-28T03:45:30.566Z\tcloud4\t\tmonitoring-enabled\t\t\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nINSTANCE\ti-4ae530b2\temi-d43c2323\t\t\tterminated\tsshlogin\t2\t\tm1.small\t2014-05-28T03:45:30.607Z\tcloud4\t\tmonitoring-enabled\t\t\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nINSTANCE\ti-5d209251\temi-d43c2323\t10.104.3.33\t10.104.3.33\tpending\tsshlogin\t1\t\tm1.small\t2014-05-28T03:53:25.477Z\tcloud4\t\t\t\tmonitoring-disabled\t10.104.3.33\t10.104.3.33\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nRESERVATION\tr-dbea6ade\t408003559024\tdefault\r\nINSTANCE\ti-873d5071\temi-d43c2323\t10.104.3.12\t10.104.3.52\tpending\tsshlogin\t0\t\tm1.small\t2014-05-28T03:55:11.441Z\tcloud4\t\t\t\tmonitoring-disabled\t10.104.3.12\t10.104.3.52\t\t\tinstance-store\t\t\t\t\thvm\t\t\tsg-0c95a504\t\t\t\r\nTAG\tinstance\ti-873d5071\teuca:node\t10.105.1.213\r\n{code}\r\n\r\nSystem is available for live diagnose. Please let me know if there are any questions.\r\n\r\nCheers!\r\nDeependra","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"instance restore fails when launch index is > 0, CLC locks up","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"customfield_12100":"0|i02qan:","customfield_10000":"3_*:*_1_*:*_10568_*|*_10001_*:*_1_*:*_1368278483_*|*_10000_*:*_1_*:*_90689293_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_2391807626","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2014-05-28T00:28:05.246-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dshekhawat(dshekhawat)","sjones(sjones)","tjcramer(tjcramer)","tony(tony)","viglesias(viglesias)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71496","id":"71496","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"This same thing was working just fine in 3.4.2 hence marked with regression label.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2014-05-27T23:03:15.610-0500","updated":"2014-05-27T23:03:15.610-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71500","id":"71500","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"Looks like this is the first ERROR message:\r\n\r\n{noformat}\r\n2014-05-27 20:53:25 ERROR 000002621 VmInstance               | Failed to restore instance i-288d461b because of: null\r\njava.lang.reflect.UndeclaredThrowableException\r\n        at com.sun.proxy.$Proxy78.restoreInstanceResources(Unknown Source)\r\n        at com.eucalyptus.cloud.VmInstanceLifecycleHelpers$DispatchingVmInstanceLifecycleHelper.restoreInstanceResources(VmInstanceLifecycleHelpers.groovy)\r\n        at com.eucalyptus.vm.VmInstance$RestoreAllocation.apply(VmInstance.java:514)\r\n        at com.eucalyptus.cluster.callback.VmStateCallback.handleRestore(VmStateCallback.java:296)\r\n        at com.eucalyptus.cluster.callback.VmStateCallback.handleReportedState(VmStateCallback.java:235)\r\n        at com.eucalyptus.cluster.callback.VmStateCallback.fire(VmStateCallback.java:180)\r\n        at com.eucalyptus.cluster.callback.VmStateCallback.fire(VmStateCallback.java:107)\r\n        at com.eucalyptus.util.async.AsyncRequest$1.fire(AsyncRequest.java:124)\r\n        at com.eucalyptus.util.async.AsyncRequest$1.fire(AsyncRequest.java:101)\r\n        at com.eucalyptus.util.async.Callbacks$BasicCallbackProcessor.run(Callbacks.java:144)\r\n        at com.eucalyptus.util.concurrent.AbstractListenableFuture$3.call(AbstractListenableFuture.java:182)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:744)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at com.eucalyptus.cloud.VmInstanceLifecycleHelpers$_DispatchingVmInstanceLifecycleHelper_closure1_closure3.doCall(VmInstanceLifecycleHelpers.groovy:105)\r\n        at sun.reflect.GeneratedMethodAccessor415.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\r\n        at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:1085)\r\n        at groovy.lang.ExpandoMetaClass.invokeMethod(ExpandoMetaClass.java:1110)\r\n        at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:909)\r\n        at groovy.lang.Closure.call(Closure.java:423)\r\n        at groovy.lang.Closure.call(Closure.java:439)\r\n        at org.codehaus.groovy.runtime.DefaultGroovyMethods.each(DefaultGroovyMethods.java:1324)\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-28T00:28:05.246-0500","updated":"2014-05-28T00:28:05.246-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71501","id":"71501","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"And before that at DEBUG level:\r\n\r\n{noformat}\r\n2014-05-27 20:53:25 DEBUG 000002621 VmInstance               | Failed to restore user data for : i-288d461b because of: unable to decode base\r\n64 string: String index out of range: -4\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-28T00:28:55.687-0500","updated":"2014-05-28T00:28:55.687-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71511","id":"71511","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"After the restore had fail, and if I run a new instance, I end up having 2 instances on the CC that seems to have same public IP\r\n\r\n{code}\r\n2014-05-28 00:23:09 DEBUG 000020609 monitor_thread           | syncing network state\r\n2014-05-28 00:23:09 DEBUG 000020609 syncNetworkState         | syncNetworkState(): syncing public/private IP mapping ground truth with local state\r\n2014-05-28 00:23:09 DEBUG 000020609 instIpSync               | instanceId=i-f194cdfb CCpublicIp=10.104.3.11 CCprivateIp=10.104.3.52 CCprivateMac=d0:0d:f1:94:cd:fb CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.104.3.11 NCprivateIp=10.104.3.52 NCprivateMac=d0:0d:f1:94:cd:fb NCvlan=-1 NCnetworkIndex=-1\r\n2014-05-28 00:23:09 DEBUG 000020609 instIpSync               | instanceId=i-b472888e CCpublicIp=10.104.3.13 CCprivateIp=10.104.3.33 CCprivateMac=d0:0d:b4:72:88:8e CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.104.3.13 NCprivateIp=10.104.3.33 NCprivateMac=d0:0d:b4:72:88:8e NCvlan=-1 NCnetworkIndex=-1\r\n2014-05-28 00:23:09 DEBUG 000020609 instIpSync               | instanceId=i-1fe5709f CCpublicIp=10.104.3.12 CCprivateIp=10.104.3.46 CCprivateMac=d0:0d:1f:e5:70:9f CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.104.3.12 NCprivateIp=10.104.3.46 NCprivateMac=d0:0d:1f:e5:70:9f NCvlan=-1 NCnetworkIndex=-1\r\n2014-05-28 00:23:09 DEBUG 000020609 instIpSync               | instanceId=i-034df65a CCpublicIp=10.104.3.12 CCprivateIp=10.104.3.43 CCprivateMac=d0:0d:03:4d:f6:5a CCvlan=-1 CCnetworkIndex=-1 NCpublicIp=10.104.3.12 NCprivateIp=10.104.3.43 NCprivateMac=d0:0d:03:4d:f6:5a NCvlan=-1 NCnetworkIndex=-1\r\n{code}\r\n\r\nAs the old instance did not get restored properly now the CC has 2 instances with same public IP, this is because the CLC has marked the old instance as terminated. This is another problem generating from this issue.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2014-05-28T02:24:03.555-0500","updated":"2014-05-28T02:24:03.555-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71512","id":"71512","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"body":"By the way just for the record, I have reproduced the issue with instance timeout at 10 and 20 minutes.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dshekhawat","name":"dshekhawat","key":"dshekhawat","accountId":"557058:dc10d216-39f8-4d84-a5ff-7d4daf8a44ed","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7cda271db1cec24c198fdfb42ec8a8ae?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddshekhawat%26avatarId%3D15400%26noRedirect%3Dtrue"},"displayName":"Deependra Shekhawat","active":false,"timeZone":"Asia/Kolkata"},"created":"2014-05-28T02:38:33.374-0500","updated":"2014-05-28T02:38:33.374-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71540","id":"71540","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"Just to keep us all current through the ticket.   I know [~viglesias], [~tony] and now [~shaon] are working on reproduction but have, as of this moment, not been able to reproduce this issue.   We're continuing the investigation. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-28T13:06:13.058-0500","updated":"2014-05-28T13:06:13.058-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71547","id":"71547","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"This issue will occur in any network mode when restoring an instance with a launch index > 0. The restoring thread enters an infinite loop leading to other issues.\r\n\r\nThe logging issue for the PublicIPVmInstanceLifecycleHelper should also be addressed but does not seem critical for 4.0 (though the fix is trivial)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-28T13:43:47.780-0500","updated":"2014-05-28T13:43:47.780-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/71585","id":"71585","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"After discussion the situation this can occur is the following:\r\n1. User runs instances with -n 2 (or greater)\r\n2. NC containing instances goes out of service for some reason (network error, etc...)\r\n3. Instances are marked as terminated by the CLC after 720 minutes (12 hours)\r\n4. NC then is re-constituted into the system and CLC attempts to restore instance(s).\r\n\r\nThen the symptom as described in this report will occur.\r\n\r\nWorkaround:\r\n   Terminate the instance(s) and restart the CLC\r\n\r\nFix will be in 4.0.1","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-29T00:14:00.388-0500","updated":"2014-05-29T00:14:00.388-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30321/comment/73660","id":"73660","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"Fix Verified.\r\n\r\nInstalled Packages\r\nName        : eucalyptus\r\nArch        : x86_64\r\nVersion     : 4.0.1\r\nRelease     : 0.0.22216.18.20140710gitd416042.el6\r\n\r\nInstance restore succeeds when the launch index > 0.  Tested using provided steps to reproduce. EUCA-9707 filed for log messages as a result of this verification.\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2014-07-11T12:42:26.653-0500","updated":"2014-07-11T12:42:26.653-0500"}],"maxResults":9,"total":9,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-9470/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}