{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"58501","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58501","key":"EUCA-13397","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/19100","id":"19100","description":"Eucalyptus 4.4.2","name":"4.4.2","archived":false,"released":true,"releaseDate":"2017-08-30"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10100","value":"Yes","id":"10100"},"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2017-08-03T17:52:34.256-0500","customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13397/watchers","watchCount":8,"isWatching":false},"created":"2017-05-12T12:01:30.720-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-06-07T15:53:26.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18601","id":"18601","description":"Eucalyptus 4.4.1","name":"4.4.1","archived":false,"released":true,"releaseDate":"2017-05-09"}],"issuelinks":[{"id":"52303","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/52303","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"58300","key":"EUCA-13394","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58300","fields":{"summary":"Empty SG causes eucanetd DOS ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ccassler","name":"ccassler","key":"ccassler","accountId":"557058:8fb32702-a3cf-42d3-9846-95c74f801354","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue"},"displayName":"Casey Cassler","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-08-03T17:52:34.283-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10006","description":"A fix has been committed, and will be part of the next release","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Release Pending","id":"10006","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12800","id":"12800","name":"eucanetd","description":"Used to track component level items associated with Edge."}],"timeoriginalestimate":null,"customfield_13000":null,"description":"ssh access between instances with configured SG rules fails. \r\n\r\nSteps to reproduce:\r\n\r\nCreate security group SG1, allow ssh from your desktop. \r\nCreate security group SG2, allow ssh from SG1.\r\n\r\nStart VM2 with SG2 on NC2.\r\n\r\nStart VM1 with SG1 on NC1.\r\n\r\nSsh from VM1->VM2 fails\r\n\r\nThis was reproduced in the PRC.\r\n\r\nCLC: 10.104.10.19\r\nNC1: 10.104.10.29 - VM1 (i-90c3d031) - 10.104.3.82\r\nNC2: 10.104.10.34 - VM2 (i-6d3b8b96) - 10.104.3.70\r\n\r\nResults:\r\n\r\n{code:java}\r\nRoberts-MacBook-Pro:bundle-issue Rob$ ssh -i ~/Keys/my441-2.pem cloud-user@10.104.3.82\r\n[cloud-user@euca-10-104-3-100 ~]$ ls -l\r\ntotal 4\r\n-rw------- 1 cloud-user cloud-user 1675 May 11 22:47 my441-2.pem\r\n[cloud-user@euca-10-104-3-100 ~]$ ssh -i my441-2.pem cloud-user@10.104.3.70\r\nssh: connect to host 10.104.3.70 port 22: Connection timed out\r\n[cloud-user@euca-10-104-3-100 ~]$\r\n{code}\r\n\r\nLogging has been turned up to DEBUG mode on both NCs. Nothing is popping out at me.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Eucanetd doesn't check ref_sgs as a condition to cause a network refresh","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=radams","name":"radams","key":"radams","accountId":"557058:de58031e-0aa1-4e2e-b28d-244f7ddbd1a2","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"radams","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=radams","name":"radams","key":"radams","accountId":"557058:de58031e-0aa1-4e2e-b28d-244f7ddbd1a2","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/00dc07d69ce19416eabc3d100ba716b8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"radams","active":true,"timeZone":"US/Central"},"customfield_12100":"0|i044i7:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_1119599922_*|*_10000_*:*_1_*:*_532985159_*|*_10002_*:*_1_*:*_19827_*|*_10001_*:*_1_*:*_608033927_*|*_10003_*:*_1_*:*_4931624730_*|*_10006_*:*_1_*:*_0","customfield_10001":"2017-05-18T09:12:50.309-0500","customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["ccassler(ccassler)","radams(radams)","sgraham(sgraham)","tony(tony)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13397/votes","votes":1,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58501/comment/122125","id":"122125","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"FWIW, we run a similar test in QA in the net suite. https://github.com/eucalyptus/nephoria/blob/382601f0be269592dca1ae0054969026422cd800/nephoria/testcases/ec2/network/net_tests_classic.py#L1015-L1030\r\n\r\nIt is passing in maint-4.4 http://jenkins.qa1.eucalyptus-systems.com/job/nephoria-legacy-net-test/4461/\r\n\r\nThe QA test is the same as this description except it's across zones not same zone different node. (However, being in another zone it's also different node ¯\\_(ツ)_/¯ )","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2017-05-18T17:30:28.931-0500","updated":"2017-05-18T17:30:28.931-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58501/comment/122126","id":"122126","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"[~tony] I wasn't able to repro using the steps above, but I was able to see that eucanetd didn't update when an addition rule was added to the existing security group (additional security group reference type rule)\r\n\r\nI created the following rules:\r\n{code}\r\nGROUP   sg-c20677b8     000286094520    thirds  thirds\r\nGROUP   sg-445c2899     000286094520    four    four\r\nGROUP   sg-429d7170     000286094520    second  second yo\r\n\r\nPERMISSION      000286094520    second  ALLOWS  tcp     22      22      FROM    USER    000286094520    NAME    first   ID      sg-926b65fb     ingress\r\nPERMISSION      000286094520    second  ALLOWS  tcp     22      22      FROM    USER    000286094520    NAME    thirds  ID      sg-c20677b8     ingress\r\nGROUP   sg-926b65fb     000286094520    first   first yo\r\nPERMISSION      000286094520    first   ALLOWS  tcp     22      22      FROM    CIDR    10.104.10.63/32 ingress\r\nGROUP   sg-0914b59f     000286094520    default default group\r\nPERMISSION      000286094520    default ALLOWS  tcp     22      22      FROM    CIDR    0.0.0.0/0       ingress\r\n{code}\r\n\r\nThen added a rule using group 'four' to the 'second' security group:\r\n{code}\r\nPERMISSION      000286094520    second  ALLOWS  tcp     22      22      FROM    USER    000286094520    NAME    four    ID      sg-445c2899     ingress\r\n{code}\r\n\r\nOn the node controller without the fix I saw this in the iptables output:\r\n{code}\r\nChain sg-429d7170 (1 references)\r\ntarget     prot opt source               destination         \r\nACCEPT     all  --  anywhere             anywhere             match-set sg-429d7170 src\r\nACCEPT     tcp  --  anywhere             anywhere             match-set sg-926b65fb src tcp dpt:ssh\r\nACCEPT     tcp  --  anywhere             anywhere             match-set sg-c20677b8 src tcp dpt:ssh\r\n{code}\r\n\r\nWith the hotfix/fix in place, you see the following:\r\n{code}\r\nChain sg-429d7170 (1 references)\r\ntarget     prot opt source               destination         \r\nACCEPT     all  --  anywhere             anywhere             match-set sg-429d7170 src\r\nACCEPT     tcp  --  anywhere             anywhere             match-set sg-445c2899 src tcp dpt:ssh\r\nACCEPT     tcp  --  anywhere             anywhere             match-set sg-926b65fb src tcp dpt:ssh\r\nACCEPT     tcp  --  anywhere             anywhere             match-set sg-c20677b8 src tcp dpt:ssh\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-05-18T19:05:41.577-0500","updated":"2017-05-18T19:05:41.577-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58501/comment/123101","id":"123101","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"merged to maint-4.4: \r\n{code}\r\neucalyptus/maint-4.4 51e1d46 Steven Graham: EUCA-13397 - Eucanetd doesn't check ref_sgs as a condition to cause a network refresh....\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2017-06-07T15:59:21.816-0500","updated":"2017-06-07T15:59:21.816-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/58501/comment/126009","id":"126009","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ccassler","name":"ccassler","key":"ccassler","accountId":"557058:8fb32702-a3cf-42d3-9846-95c74f801354","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue"},"displayName":"Casey Cassler","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified.  I was not able to reproduce [~sgraham]'s scenario.  All security group rules I added were also added to the iptables configuration and I was able to reach the instances behind them.\r\n{code}\r\n[root@g-26-05 ~]# euca-describe-groups --region testuser@\r\nGROUP\tsg-3ee526b0\t000790737236\tallow-from-sg-2\tallow-from-sg-2\t\r\nPERMISSION\t000790737236\tallow-from-sg-2\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-other-sg\tID\tsg-ca43e92b\tingress\r\nGROUP\tsg-ca43e92b\t000790737236\tallow-from-other-sg\tallow-from-other-sg\t\r\nPERMISSION\t000790737236\tallow-from-other-sg\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-my-computer\tID\tsg-94c67fb3\tingress\r\nPERMISSION\t000790737236\tallow-from-other-sg\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-sg-3\tID\tsg-5bf0dffe\tingress\r\nPERMISSION\t000790737236\tallow-from-other-sg\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-sg-2\tID\tsg-3ee526b0\tingress\r\nGROUP\tsg-687212fe\t000790737236\tdefault\tdefault group\t\r\nGROUP\tsg-5bf0dffe\t000790737236\tallow-from-sg-3\tallow-from-sg-3\t\r\nPERMISSION\t000790737236\tallow-from-sg-3\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-sg-2\tID\tsg-3ee526b0\tingress\r\nGROUP\tsg-94c67fb3\t000790737236\tallow-from-my-computer\tallow-from-my-computer\t\r\nPERMISSION\t000790737236\tallow-from-my-computer\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-sg-2\tID\tsg-3ee526b0\tingress\r\nPERMISSION\t000790737236\tallow-from-my-computer\tALLOWS\ttcp\t22\t22\tFROM\tUSER\t000790737236\tNAME\tallow-from-other-sg\tID\tsg-ca43e92b\tingress\r\nPERMISSION\t000790737236\tallow-from-my-computer\tALLOWS\ttcp\t22\t22\tFROM\tCIDR\t10.5.1.3/32\tingress\r\n{code}\r\nNC1:\r\n{code}\r\n[root@c-07 ~]# iptables -nvL sg-94c67fb3\r\nChain sg-94c67fb3 (1 references)\r\n pkts bytes target     prot opt in     out     source               destination         \r\n    0     0 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-94c67fb3 src\r\n    3   180 ACCEPT     tcp  --  *      *       10.5.1.3             0.0.0.0/0            tcp dpt:22\r\n    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-ca43e92b src tcp dpt:22\r\n    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-3ee526b0 src tcp dpt:22\r\n{code}\r\nNC2:\r\n{code}\r\n[root@c-14 ~]# iptables -nvL sg-ca43e92b\r\nChain sg-ca43e92b (1 references)\r\n pkts bytes target     prot opt in     out     source               destination         \r\n    0     0 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-ca43e92b src\r\n    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-3ee526b0 src tcp dpt:22\r\n    0     0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-5bf0dffe src tcp dpt:22\r\n    1    60 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0            match-set sg-94c67fb3 src tcp dpt:22\r\n{code}\r\nVerified on:\r\n{code}\r\n[root@c-07 ~]# rpm -qi eucalyptus\r\nName        : eucalyptus\r\nVersion     : 4.4.1\r\nRelease     : 0.25930.61.20170731git17c94f6.el7\r\nArchitecture: x86_64\r\nInstall Date: Thu 03 Aug 2017 10:31:13 AM PDT\r\nGroup       : Unspecified\r\nSize        : 248449\r\nLicense     : GPLv3\r\nSignature   : (none)\r\nSource RPM  : eucalyptus-4.4.1-0.25930.61.20170731git17c94f6.el7.src.rpm\r\nBuild Date  : Mon 31 Jul 2017 01:40:45 PM PDT\r\nBuild Host  : buildsys.qa1.eucalyptus-systems.com\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ccassler","name":"ccassler","key":"ccassler","accountId":"557058:8fb32702-a3cf-42d3-9846-95c74f801354","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ace94e80ebc0a3b718cc5422760b57de?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dccassler%26avatarId%3D14700%26noRedirect%3Dtrue"},"displayName":"Casey Cassler","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-08-03T17:52:34.276-0500","updated":"2017-08-03T17:52:34.276-0500"}],"maxResults":4,"total":4,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}