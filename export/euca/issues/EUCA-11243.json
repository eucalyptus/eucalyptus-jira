{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"37649","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37649","key":"EUCA-11243","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@7a0d8ea1[id=128,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 10,goal=<null>,startDate=2015-09-09T20:38:52.383Z,endDate=2015-10-02T20:38:00.000Z,completeDate=2015-11-03T02:34:19.117Z,sequence=128]"],"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10703":null,"resolutiondate":null,"customfield_10308":null,"customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11243/watchers","watchCount":2,"isWatching":false},"created":"2015-08-06T18:58:02.112-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2016-03-21T15:24:01.129-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12700","id":"12700","name":"OSG","description":"Object Storage Gateway"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Summary*:\r\nIf you set the service path to \"/services/Walrus\" with boto and attempt to connect to the CLC, a 307 temporary redirect will get sent back with an incorrect URL: /services/objectstorage/services/Walrus. \r\n\r\n*Reproduction Info:*\r\n10.111.5.92 - CLC\r\n10.111.5.86 - UFS\r\n\r\nWhen I run this script, I get a 404 The specified bucket does not exist error...which doesn't make sense given that I'm doing a bucket list. \r\n{code}\r\n#!/usr/bin/python\r\nimport boto\r\nimport pdb\r\nfrom boto.s3.connection import OrdinaryCallingFormat\r\n\r\ns3conn = boto.connect_s3( aws_access_key_id= \"-NOPE-\",\r\naws_secret_access_key = \"-NOPE-\",\r\nis_secure=False,\r\nport=8773,\r\npath=\"/services/Walrus\",\r\nhost=\"10.111.5.92\",\r\ncalling_format=OrdinaryCallingFormat(),\r\ndebug=2)\r\n\r\n#pdb.set_trace()\r\n#s3conn.create_bucket(\"sgraham\")\r\nfoo = s3conn.get_all_buckets()\r\nfor i in foo:\r\n        print i\r\n{code}\r\n\r\nOuptut \r\n{code}\r\n[root@b-39 ~]# ./foo2.py \r\nsend: u'GET /services/Walrus/ HTTP/1.1\\r\\nHost: 10.111.5.92:8773\\r\\nAccept-Encoding: identity\\r\\nDate: Thu, 06 Aug 2015 23:25:24 GMT\\r\\nContent-Length: 0\\r\\nAuthorization: AWS AKIAAJETXBFTQEBC7USA:yTJL0K1THpA4/JfQMdnsEUJZELI=\\r\\nUser-Agent: Boto/2.38.0 Python/2.6.6 Linux/2.6.32-504.30.3.el6.x86_64\\r\\n\\r\\n'\r\nreply: 'HTTP/1.1 307 Temporary Redirect\\r\\n'\r\nheader: Location: http://10.111.5.86:8773/services/objectstorage/services/Walrus/\r\nheader: Connection: close\r\nheader: Date: Thu, 06 Aug 2015 23:25:24 UTC\r\nsend: u'GET /services/objectstorage/services/Walrus/ HTTP/1.1\\r\\nHost: 10.111.5.86:8773\\r\\nAccept-Encoding: identity\\r\\nDate: Thu, 06 Aug 2015 23:25:24 GMT\\r\\nContent-Length: 0\\r\\nAuthorization: AWS AKIAAJETXBFTQEBC7USA:yTJL0K1THpA4/JfQMdnsEUJZELI=\\r\\nUser-Agent: Boto/2.38.0 Python/2.6.6 Linux/2.6.32-504.30.3.el6.x86_64\\r\\n\\r\\n'\r\nreply: 'HTTP/1.1 404 Not Found\\r\\n'\r\nheader: Content-Length: 270\r\nheader: Content-Type: application/xml\r\nheader: Date: Thu, 06 Aug 2015 23:25:24 GMT\r\nheader: x-amz-request-id: 768e00ed-5e23-421c-8035-a39db0d47ec3\r\nTraceback (most recent call last):\r\n  File \"./foo2.py\", line 17, in <module>\r\n    foo = s3conn.get_all_buckets()\r\n  File \"/usr/lib/python2.6/site-packages/boto/s3/connection.py\", line 440, in get_all_buckets\r\n    response.status, response.reason, body)\r\nboto.exception.S3ResponseError: S3ResponseError: 404 Not Found\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?><Error xmlns=\"http://s3.amazonaws.com/doc/2006-03-01/\"><Code>NoSuchBucket</Code><Message>The specified bucket does not exist.</Message><Resource>services</Resource><RequestId>768e00ed-5e23-421c-8035-a39db0d47ec3</RequestId></Error>\r\n{code}\r\n\r\nThe Location header has two service paths appended:\r\n{code}\r\nheader: Location: http://10.111.5.86:8773/services/objectstorage/services/Walrus/\r\n{code}\r\n\r\nIf the {{path}} is set to \"/services/objectstorage\" then the redirect works correctly:\r\n{code}\r\n[root@b-39 ~]# ./foo.py \r\nsend: u'GET /services/objectstorage/ HTTP/1.1\\r\\nHost: 10.111.5.92:8773\\r\\nAccept-Encoding: identity\\r\\nDate: Thu, 06 Aug 2015 23:50:59 GMT\\r\\nContent-Length: 0\\r\\nAuthorization: AWS AKIAAJETXBFTQEBC7USA:m5H2CqcF1thuHKUTQR4AKNO7xig=\\r\\nUser-Agent: Boto/2.38.0 Python/2.6.6 Linux/2.6.32-504.30.3.el6.x86_64\\r\\n\\r\\n'\r\nreply: 'HTTP/1.1 307 Temporary Redirect\\r\\n'\r\nheader: Location: http://10.111.5.86:8773/services/objectstorage/\r\nheader: Connection: close\r\nheader: Date: Thu, 06 Aug 2015 23:50:59 UTC\r\nsend: u'GET /services/objectstorage/ HTTP/1.1\\r\\nHost: 10.111.5.86:8773\\r\\nAccept-Encoding: identity\\r\\nDate: Thu, 06 Aug 2015 23:50:59 GMT\\r\\nContent-Length: 0\\r\\nAuthorization: AWS AKIAAJETXBFTQEBC7USA:m5H2CqcF1thuHKUTQR4AKNO7xig=\\r\\nUser-Agent: Boto/2.38.0 Python/2.6.6 Linux/2.6.32-504.30.3.el6.x86_64\\r\\n\\r\\n'\r\nreply: 'HTTP/1.1 200 OK\\r\\n'\r\nheader: Content-Length: 964\r\nheader: Content-Type: application/xml\r\nheader: Date: Thu, 06 Aug 2015 23:50:59 GMT\r\nheader: x-amz-request-id: 68d03c58-2af9-4190-935d-331ed8ecd3fa\r\n<Bucket: eucalyptus-service-image-1.28>\r\n<Bucket: eutester-installed>\r\n<Bucket: initrd.img-3.2.0-23-_by_eutester_eutester_pv>\r\n<Bucket: precise-server-cloud_by_eutester_eutester_pv>\r\n<Bucket: sgraham>\r\n<Bucket: vmlinuz-3.2.0-23-vir_by_eutester_eutester_pv>\r\n{code}\r\n\r\n*workaround*: Use /services/objectstorage as the path with S3 requests. ","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Redirect from CLC to OSG has URL path of /services/objectstorage/services/Walrus","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"customfield_12100":"0|i0021r:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":null,"customfield_10001":"2016-03-03T18:49:58.137-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["dmitrii(dmitrii)","sgraham(sgraham)","vasya(vasya)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37649/comment/100406","id":"100406","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"adding to [~vasya]'s backlog","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-03-16T09:37:27.083-0500","updated":"2016-03-16T09:37:27.083-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11243/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}