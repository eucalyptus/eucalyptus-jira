{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"20462","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/20462","key":"EUCA-7902","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2013-04-12T04:44:19.706-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7902/watchers","watchCount":4,"isWatching":false},"lastViewed":null,"created":"2013-04-12T04:29:51.333-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[{"id":"17341","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/17341","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"18863","key":"EUCA-6522","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/18863","fields":{"summary":"Providing support for more volumes per filer","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811}}}}],"assignee":null,"updated":"2015-05-08T17:16:59.560-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Hi\r\n\r\nWe have hit to a problem using EBS volumes with NetApp storage systems.\r\nProblem is that NetApp has maximum volume limit of 500 volumes in one filer. And as Euca creates one volume for each EBS LUN result is that maximum EBS volume count is 499. (one volume is needed as system root volume).\r\n\r\nSo end users can create only 499 EBS volumes/snapshots.\r\n\r\nThere is simple work workaround how you can overcome 500 volume limit on Netapp. Only setback is that code has to be changed littlebit.\r\nSimply create one for few bigger volumes where you put all EBS LUNs. And for EBS snapshots clone individual LUNs, not volumes. In this way you do not even need NetApp FlexClone license, what is quite expensive. You can clone luns without that license.\r\n\r\nAnd I would suggest that this should support multiple volumes as this way you can spread EBS volume creation voer multiple aggregates. And that part is more important in Cluster mode.\r\n\r\n\r\nHere is example how to do it on the filer console with commands and syntaxes.\r\n\r\nFirst I created new empty volume to the aggregate and set correct volume options\r\n\r\neseefil83> vol create lun_test aggr1 500g\r\nCreation of volume 'lun_test' with size 500g on containing aggregate\r\n'aggr1' has completed.\r\neseefil83> snap sched lun_test 0\r\neseefil83> snap reserve lun_test 0\r\neseefil83> vol options lun_test fractional_reserve 0\r\neseefil83> vol autosize lun_test -m 1t -i 10g on\r\n\r\nThen I created two simple 50G luns for this test. Note these are on same volume.\r\n\r\neseefil83> lun create -s 50g -t linux /vol/lun_test/lun1.lun\r\neseefil83> lun create -s 50g -t linux /vol/lun_test/lun2.lun\r\n\r\neseefil83> lun show  \r\n          /vol/lun_test/lun1.lun        50g (53687091200)   (r/w, online)\r\n          /vol/lun_test/lun2.lun        50g (53687091200)   (r/w, online)\r\n\r\nNext step is to create snapshot to that volume. This is because lun clone needs base snapshot for cloning.\r\nAnd then simply create lun clone what is pointing lun from just created snapshot.\r\n\r\neseefil83> snap create lun_test lunsnap\r\neseefil83> lun clone create /vol/lun_test/snap1.lun -b /vol/lun_test/lun1.lun lunsnap\r\n\r\nAs you can see, now we have those to manually created LUNs and one cloned lun. Detailed list of clone shows that it is based on lun in snapshot what we just created. Lun is not yet splitted, only cloned\r\n\r\nAlso in this point you already can create igroups, lun mappings etc just normal way. Lun is ready to use.\r\n\r\neseefil83> lun show\r\n          /vol/lun_test/lun1.lun        50g (53687091200)   (r/w, online)\r\n          /vol/lun_test/lun2.lun        50g (53687091200)   (r/w, online)\r\n          /vol/lun_test/snap1.lun       50g (53687091200)   (r/w, online)\r\n\r\neseefil83> lun show -v /vol/lun_test/snap1.lun\r\n          /vol/lun_test/snap1.lun       50g (53687091200)   (r/w, online)\r\n                   Serial#: 1k/AO+Bw13e2\r\n                   Backed by: /vol/lun_test/.snapshot/lunsnap/lun1.lun\r\n                   Share: none\r\n                   Space Reservation: enabled\r\n                   Multiprotocol Type: linux\r\n                   Occupied Size:       0 (0)            \r\n                   Creation Time: Thu Feb 14 10:22:41 EET 2013\r\n                   Cluster Shared Volume Information: 0x0 \r\n\r\nSplitting clone is simply made using one command. And after that, the snapshot created for clone is now obsole and has to be deleted. Deleting snapshot is really important part. As there can be only 255 snapshots per volume you will run  out of snapshots in notime.\r\n\r\neseefil83> lun clone split start /vol/lun_test/snap1.lun \r\neseefil83> Thu Feb 14 10:23:43 EET [eseefil83:lun.clone.split.started:info]: Clone split was started on LUN /vol/lun_test/snap1.lun.  \r\neseefil83> Thu Feb 14 10:23:49 EET [eseefil83:lun.clone.split.completed:info]: Clone split was completed on LUN /vol/lun_test/snap1.lun.  \r\n\r\neseefil83> snap delete lun_test lunsnap\r\n\r\nFinal check, cloned lun is not backed up anymore, so it is now successfully splitted.\r\n\r\neseefil83> lun show -v /vol/lun_test/snap1.lun            \r\n          /vol/lun_test/snap1.lun       50g (53687091200)   (r/w, online)\r\n                   Serial#: 1k/AO+Bw13e2\r\n                   Share: none\r\n                   Space Reservation: enabled\r\n                   Multiprotocol Type: linux\r\n                   Occupied Size:       0 (0)            \r\n                   Creation Time: Thu Feb 14 10:22:41 EET 2013\r\n                   Cluster Shared Volume Information: 0x0 \r\neseefil83> lun show\r\n          /vol/lun_test/lun1.lun        50g (53687091200)   (r/w, online)\r\n          /vol/lun_test/lun2.lun        50g (53687091200)   (r/w, online)\r\n          /vol/lun_test/snap1.lun       50g (53687091200)   (r/w, online)\r\n\r\nQuestions, askâ€¦\r\n\r\n-\tJ\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Using Lun cloning instead of Vol cloning","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mikkilj","name":"mikkilj","key":"mikkilj","accountId":"557058:a66fc514-6c13-44cb-8e89-939661e0bbad","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jari MikkilÃ¤","active":true,"timeZone":"Europe/Helsinki"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mikkilj","name":"mikkilj","key":"mikkilj","accountId":"557058:a66fc514-6c13-44cb-8e89-939661e0bbad","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e595ae6f5f10c7ce2808dd614ce2e23?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jari MikkilÃ¤","active":true,"timeZone":"Europe/Helsinki"},"customfield_12100":"0|i01z5z:","customfield_10000":"10000_*:*_1_*:*_868400_*|*_5_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2013-04-12T04:44:19.729-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["mikkilj(mikkilj)","lwade(lwade)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7902/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/20462/comment/43186","id":"43186","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"https://eucalyptus.atlassian.net/browse/SAN-59","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-04-12T04:44:19.729-0500","updated":"2013-04-12T04:44:19.729-0500"}],"maxResults":1,"total":1,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}