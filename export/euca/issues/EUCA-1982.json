{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"13002","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002","key":"EUCA-1982","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10208","value":"CentOS 5","id":"10208"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/5","id":"5","description":"All attempts at reproducing this issue failed, or not enough information was available to reproduce the issue. Reading the code produces no clues as to why this behavior would occur. If more information appears later, please reopen the issue.","name":"Cannot Reproduce"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10401","value":"Standard","id":"10401"},"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10308":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10704":null,"resolutiondate":"2014-10-28T14:51:41.516-0500","customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10203","value":"Xen","id":"10203"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-1982/watchers","watchCount":10,"isWatching":false},"created":"2012-05-08T10:06:31.903-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":"RT-8095","labels":["dan-troub-32","top200"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10002","id":"10002","description":"Eucalyptus 3.0.0","name":"3.0.0","archived":false,"released":true,"releaseDate":"2012-02-15"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10003","id":"10003","description":"Eucalyptus 3.0.1","name":"3.0.1","archived":false,"released":true,"releaseDate":"2012-03-15"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10004","id":"10004","description":"Eucalyptus 3.0.2","name":"3.0.2","archived":false,"released":true,"releaseDate":"2012-04-25"}],"issuelinks":[{"id":"11002","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/11002","type":{"id":"10500","name":"Document","inward":"is documented by","outward":"documents","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10500"},"outwardIssue":{"id":"12370","key":"EUCA-1736","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/12370","fields":{"summary":"CLC refuses to run images whose sizes equal requested vmTypes' sizes","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/5","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/trivial.svg","name":"Trivial","id":"5"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:04:12.426-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"If an image size is less than the disk size and the sum of the image size plus swap (500MB) is larger than the selected instance type, then the instance may terminate. A specific image terminates upon run with no user level error indications. Request fails at the cloud before reaching the CC and NC.","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/12814","id":"12814","filename":"test-1982.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T15:27:01.331-0500","size":33886,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/12814/test-1982.txt"}],"aggregatetimeestimate":null,"summary":"A specific image terminates upon run with no user level error indication","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":"3_*:*_3_*:*_20809145949_*|*_10001_*:*_4_*:*_53645496838_*|*_10000_*:*_2_*:*_3335846788_*|*_10005_*:*_1_*:*_66058126_*|*_5_*:*_2_*:*_9384564_*|*_4_*:*_1_*:*_16085_*|*_10007_*:*_1_*:*_170361277","customfield_12100":"0|i00s9r:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2012-05-08T10:06:36.686-0500","customfield_10200":0.0,"customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["agrimm(agrimm)","nurmi(nurmi)","dmitrii(dmitrii)","mmunn1(mmunn1)","nbeard(nbeard)","vasya(vasya)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/26807","id":"26807","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Originally posted on 2012-04-11 20:15:27 by nbeard\n\nWed Apr 11 13:15:27 2012: Request 8095 was acted upon.\n Transaction: Ticket created by neil.beard\n       Queue: Engineering-Support\n     Subject: A specific image terminates upon run with no user level error\n indication\n       Owner: harold.spencer.jr\n  Requestors: neil.beard@eucalyptus.com\n      Status: new\n Ticket <URL: https://support.eucalyptus.com/Ticket/Display.html?id=8095 >\n\n\nAffected Versions: [All]\nAffected Kernel: N/A\nEucalyptus Version 3.0.1\n\nA specific image terminates upon run with no user level error indications.\nRequest fails at the cloud before reaching the CC and NC.\n\nDescription\n\nIf an image size is less than the disk size and the sum of the image size plus\nswap (500MB) is larger than the selected instance type, then the instance may\nterminate. An image will have a certain size before it is bundled and uploaded\nto Walrus. This image size is approximately the same amount of \"disk\" memory\nthat will be need. Out of this same \"disk\" space, 500MB is reserved for Swap.\nThe remaining \"disk\" space is available as ephemeral.\n\nThis example will be using a stock centos image:\n\n\n[root@Pod-01 euca-large-centos-2012.1.14-x86_64]# ls -l\ntotal 4735008\n-rw-r--r-- 1 1000 1000 4831838208 Jan 14 15:54\neuca-large-centos-2012.1.14-x86_64.img\n-rw-r--r-- 1 root root 9635177 Nov 12 17:42 initrd.img-2.6.32-5-amd64\n-rw-r--r-- 1 root root 2420384 Nov 12 17:42 vmlinuz-2.6.32-5-amd64\n\nNote: This image may not run under the type of C1.medium as 4832MB+500MB=5332MB\nis slightly greater than 5GB of the c1.medium.\n\n[root@Pod-01 euca-centos-5.3-x86_64]# euca-describe-availability-zones verbose\nAVAILABILITYZONE Lab-01 192.168.35.13\narn:euca:eucalyptus:Lab-01:cluster:CC-Pod03/\nAVAILABILITYZONE |- vm types free / max cpu ram disk\nAVAILABILITYZONE |- m1.small 0000 / 0010 1 128 2\nAVAILABILITYZONE |- c1.medium 0000 / 0010 1 256 5\nAVAILABILITYZONE |- m1.large 0000 / 0005 2 512 10\nAVAILABILITYZONE |- m1.xlarge 0000 / 0002 2 1024 20\nAVAILABILITYZONE |- c1.xlarge 0000 / 0002 4 2048 20\n\n[root@Pod-01 eucalyptus]# euca-describe-image-attribute -B emi-CD6E37FD\nblockDeviceMapping emi-CD6E37FD blockDeviceMap /dev/sda1: root\nblockDeviceMapping emi-CD6E37FD blockDeviceMap sda2: ephemeral0 (4.8GB in this\nexample)\nblockDeviceMapping emi-CD6E37FD blockDeviceMap sda3: swap Fixed 500M\n\nThe following is an example of the cloud-output.log. Note, no user level error\nmessages are generat\n\n[root@Pod-01 eucalyptus]# grep i-ABBD42A9 cloud-output.log | sort -t \":\" -k2,4\n\n\n|\n:1332872858382:ClusterAllocator:6d1a4206-1087-4c4e-aeb7-7b5950d84bd2:arn:aws:euare::234161552748:user/Neil:VM_PREPARE:[/euca:RunInstancesType]\nownerFullName=arn:aws:euare:234161552748:user/Neil userData=null minCount=1\nmaxCount=1\npartition=Partition:name=Lab-01:cc-cert-serial=1106128690948253:nc-cert-serial=1106144014787338\nsshKeyPair=SshKeyPair:234161552748:neil-beard:fingerPrint=ba:db:52:53:25:a3:43:fc:52:dc:67:92:ab:a3:23:90:16:45:1d:c8\nbootSet=BootableSet:machine=arn:aws:euca:eucalyptus:965590394582:image/emi-CD6E37FD/:ramdisk=arn:aws:euca:eucalyptus:000000000001:image/eri-94DB3AB9/:kernel=arn:aws:euca:eucalyptus:000000000001:image/eki-E6B13926/:isLinux=true\nvmType=VmType c1.medium cores=1 disk=5 mem=256\nprimaryNetwork=NetworkRulesGroup:234161552748:default:description=default\ngroup:networkRules=[]\nnetworkGroups=[default:NetworkRulesGroup:234161552748:default:description=default\ngroup:networkRules=[]] reservationId=r-098743D9\nallocationTokens=[ResourceToken:i-ABBD42A9:192.168.56.2:tag=1715:idx=17]\nreservationIndex=291 instanceIds=[0:i-ABBD42A9] expiration=Wed Jan 01 00:00:00\nPST 3000]\n\nTue Mar 27 11:27:38 2012 ERROR Allocations | Aborting resource token:\nResourceToken:i-ABBD42A9:192.168.56.2:tag=1715:idx=17\n\nTue Mar 27 11:27:38 2012 ERROR ClusterAllocator |\ncom.eucalyptus.entities.TransientEntityException:\nVmInstance:networkConfig=VmNetworkConfig:macAddress=d0:0d:AB:BD:42:A9:privateAddress=0.0.0.0:publicAddress=0.0.0.0:privateDnsName=euca-0-0-0-0.eucalyptus.internal:publicDnsName=euca-0-0-0-0.eucalyptus.ts-lab.eucalyptus-systems.com:vmId=VmId:reservationId=r-098743D9:instanceId=i-ABBD42A9:bootRecord=VmBootRecord:machineImage=arn:aws:euca:eucalyptus:965590394582:image/emi-CD6E37FD/:kernel=arn:aws:euca:eucalyptus:000000000001:image/eki-E6B13926/:ramdisk=arn:aws:euca:eucalyptus:000000000001:image/eri-94DB3AB9/:platform=linux:persistentVolumes=[]:sshKeyPair=neil-beard:vmType=VmType\nc1.medium cores=1 disk=5\nmem=256:usageStats=VmUsageStats:blockBytes=0:networkBytes=0:launchRecord=VmLaunchRecord:launchIndex=0:launchTime=2012-03-27\n11:27:38.0:runtimeState=VmRuntimeState:reason=User\nterminated.:reasonDetails=[]:consoleOutput=::transientVolumeState=VmVolumeState:attachments=[]:placement=VmPlacement:clusterName=CC-Pod01:partitionName=Lab-01:privateNetwork=false:networkGroups=[NetworkRulesGroup:234161552748:default:description=default\ngroup:networkRules=[]]:networkIndex=PrivateNetworkIndex:default tag=1715 idx=17\n\nTue Mar 27 11:27:38 2012 INFO TerminateInstancesType |\n:1332872858640:TerminateInstancesType:VM_TERMINATING:[TerminateInstancesType\ninstancesSet=[i-ABBD42A9] correlationId=1d7749da-f937-4128-8410-40a84670af8a\nuserId=eucalyptus effectiveUserId=eucalyptus _return=true statusMessage=null\n_epoch=null _services=[] _disabledServices=[] _notreadyServices=[]]\n\nTue Mar 27 11:27:38 2012 INFO VmRuntimeState | i-ABBD42A9 state change: PENDING\n-> SHUTTING_DOWN (previously PENDING)\n\nTue Mar 27 12:27:39 2012 ERROR VmInstances | java.util.NoSuchElementException:\nexample: [VmInstance networkConfig=null vmId=null bootRecord=null\nusageStats=null launchRecord=null runtimeState=null transientVolumeState=null\nplacement=null expiration=null privateNetwork=null networkGroups=[]\nnetworkIndex=null ownerUserId=null ownerUserName=null ownerAccountNumber=null\nownerAccountName=null uniqueName=null ownerFullNameCached=null state=null\nlastState=null stateChangeStack=null displayName=i-ABBD42A9 id=null\nversion=null creationTimestamp=null lastUpdateTimestamp=null naturalId=null]\n\nTue Mar 27 11:27:39 2012 INFO TerminateInstancesType |\n:1332872859731:TerminateInstancesType:VM_TERMINATING:[TerminateInstancesType\ninstancesSet=[i-ABBD42A9] correlationId=d857d0cb-4fc3-4510-9956-3debc30cb677\nuserId=eucalyptus effectiveUserId=eucalyptus _return=true statusMessage=null\n_epoch=null _services=[] _disabledServices=[] _notreadyServices=[]]\n\nTue Mar 27 11:27:39 2012 INFO VmRuntimeState | i-ABBD42A9 state change:\nSHUTTING_DOWN -> TERMINATED (previously PENDING)\n\n\nSolution\n\nIn this example one solution is to use the instance type with the next large\ndisk size or change the intended type to allocate more disk.\n\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-05-08T10:06:36.686-0500","updated":"2012-05-08T10:06:36.686-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/26808","id":"26808","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Originally posted on 2012-04-11 20:22:45 by nbeard\nExecutive Summary.\n\n  \n* A bug exist where the size of an image + Kernel + Swap is not checked before attempting to run an image. * The euca2ools only test the size of the raw image against the disk of the target vm type.   \n* If a image size is less than the vm type And the image + Kernel + Swap is greater than the disk of the vm-image then the instance fails as described in this bug.  \n  \nThis bug can reproduced at will.\n\n  \nNeil\n\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-05-08T10:06:37.169-0500","updated":"2012-05-08T10:06:37.169-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/26809","id":"26809","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Originally posted on 2012-04-11 20:22:57 by nbeard\n\n<URL: https://support.eucalyptus.com/Ticket/Display.html?id=8095 >\n\nExecutive Summary.\n\n* A bug exist where the size of an image + Kernel + Swap is not checked before\nattempting to run an image. * The euca2ools only test the size of the raw image\nagainst the disk of the target vm type.\n* If a image size is less than the vm type And the image + Kernel + Swap is\ngreater than the disk of the vm-image then the instance fails as described in\nthis bug.\n\nThis bug can reproduced at will.\n\nNeil\n\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-05-08T10:06:37.716-0500","updated":"2012-05-08T10:06:37.716-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/26810","id":"26810","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Originally posted on 2012-04-12 16:20:08 by dstagnaro\n\nThu Apr 12 09:20:08 2012: Request 8095 was acted upon.\n Transaction: Given to dmitrii.zagorodnov by darren.stagnaro\n       Queue: Engineering-Support\n     Subject: A specific image terminates upon run with no user level error indication\n       Owner: dmitrii.zagorodnov\n  Requestors: neil.beard@eucalyptus.com\n      Status: new\n Ticket <URL: https://support.eucalyptus.com/Ticket/Display.html?id=8095 >\n\n\nThis transaction appears to have no content\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-05-08T10:06:38.204-0500","updated":"2012-05-08T10:06:38.204-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/27509","id":"27509","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"There is code in CLC to check whether (EMI size + swap) exceed disk size of the requested VM type. If they do,  run-instance request is rejected with a client-visible error message. To understand whether the math on that check is incorrect or whether something else went wrong in your case, I'd like to clarify the sizes you were using.\r\n\r\nThe hard-coded swap size is 512MB. Given the size of your image, it should just fit into the 5-GB VM type:\r\n\r\n(4831838208 + 512*1024*1024)-(5*1024*1024*1024) = 0\r\n\r\nI am guessing that the instance is accepted because the image does, indeed, fit. Why it fails later down the road is unclear.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-05-24T18:43:29.954-0500","updated":"2012-05-24T18:43:29.954-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/27534","id":"27534","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"body":"added a comment - 25/May/12 9:15 AM\r\nI have concluded that the system is only checking the image size and not taking swap into consideration. This clusion may be error but the symptom would in my opinion support this.\r\n1. Identify an image of some size. In this case about 4.8 GB.\r\nroot@Pod-01 euca-large-centos-2012.1.14-x86_64# ls -l\r\ntotal 4735008\r\nrw-rr- 1 1000 1000 4831838208 Jan 14 15:54\r\neuca-large-centos-2012.1.14-x86_64.img\r\n2. Identify a vm_type that has a disk allocation larger than the Image size. In this example m1.small is too small at 2 Gig. If we attempt to use m1.small then we do get an error message. For this example we will select the next size up, c1.medium, 5 GB.\r\nroot@Pod-01 euca-centos-5.3-x86_64# euca-describe-availability-zones verbose\r\nAVAILABILITYZONE Lab-01 192.168.35.13\r\narn:euca:eucalyptus:Lab-01:cluster:CC-Pod03/\r\nAVAILABILITYZONE |- vm types free / max cpu ram disk\r\nAVAILABILITYZONE |- m1.small 0000 / 0010 1 128 2\r\nAVAILABILITYZONE |- c1.medium 0000 / 0010 1 256 5\r\n3. Attempting to run the image with vmtype c1.medium will terminate without an error message. I would expect a similar message that is given if we run using m1.small.\r\nIt is my conclusion that the reason it did not generate user level error is that the cloud controller is only testing the image size and is not taking the swap space into consideration. While this particular conclusion may be in error, the symptoms would appear to support it.\r\nThank you!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-05-25T13:04:28.083-0500","updated":"2012-05-25T13:04:28.083-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/28327","id":"28327","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"body":"pending comment on behavior of the system for 3.1 (has changed since 3.0.2)\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nurmi","name":"nurmi","key":"nurmi","accountId":"557058:68718820-f5e0-4305-a46c-f867a6bc9565","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7ac3bd8409137b5a6a6f8fc7d6e5f94b?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnurmi%26avatarId%3D10601%26noRedirect%3Dtrue"},"displayName":"Daniel Nurmi","active":true,"timeZone":"US/Central"},"created":"2012-06-19T12:28:05.595-0500","updated":"2012-06-19T12:28:05.595-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/33023","id":"33023","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Not able to reproduce with 3.1.2. I am pretty sure that swap space *is* taken into account when CLC decides whether or not a particular EMI fits into a particular VM type. The image in Neil's example does, in fact, fit, which is why it is accepted. The reason the instance quietly went to terminated under a VM with a large disk lies somewhere else. \r\n\r\nClosing for now. But if this problem can be reproduced, I am happy to take a look at why. We'd need to dig deeper into cloud-output.log or perhaps nc.log, if the instance ID appears there.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T14:35:09.017-0500","updated":"2012-10-01T14:35:09.017-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/33026","id":"33026","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"body":"Dmitrii,\n\nDo you have a 3.1.2 system upon which I may attempt to replicate this?\n\nNeil","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T15:08:46.694-0500","updated":"2012-10-01T15:08:46.694-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/33029","id":"33029","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"body":"Hello Dmitrii,\r\n\r\nI have just replicated the reported symptom with my lab PRC system running euca 3.1.1. From what I have observed, it would appear that it does not take swap space into account but that is only a hypothesis. \r\n\r\nThank you!\r\n\r\nNeil Beard","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=nbeard","name":"nbeard","key":"nbeard","accountId":"557058:0d3a01f5-ec79-48de-8d8f-79bd6a2c5cb3","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/f26add140f84a617d35f2b4cbed36f47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dnbeard%26avatarId%3D10207%26noRedirect%3Dtrue"},"displayName":"Neil Beard","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T15:27:01.335-0500","updated":"2012-10-01T15:27:01.335-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/33031","id":"33031","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Reopening as this is definitely a bug. Thanks to Neil Beard for reproducing it and helping me identify the bug.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T17:11:33.582-0500","updated":"2012-10-01T17:11:33.582-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/33032","id":"33032","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"The problem is that client-facing check simply compares the size of EMI to the disk size of the VM type:\n\n{code:title=VerifyMetadata.java}\n        if ( bootSet.isBlockStorage( ) ) {\n        } else if ( Platform.windows.equals( bootSet.getMachine( ).getPlatform( ) ) && bootSet.getMachine( ).getImageSizeBytes( ) > ( ( 1024L * 1024L * 1024L * vmType.getDisk( ) ) + ( 1024L * 1024L * 10 ) ) ) {\n          throw new VerificationException( \"Unable to run instance \" + bootSet.getMachine( ).getDisplayName( ) +\n                                           \" in which the size \" + bootSet.getMachine( ).getImageSizeBytes( ) +\n                                           \" bytes of the instance is greater than the vmType \" + vmType.getDisplayName( ) + \" size \" + vmType.getDisk( )\n                                           + \" GB.\" );\n        } else if ( bootSet.getMachine( ).getImageSizeBytes( ) >= ( ( 1024L * 1024L * 1024L * vmType.getDisk( ) ) ) ) {\n            throw new VerificationException( \"Unable to run instance \" + bootSet.getMachine( ).getDisplayName( ) +\n                    \" in which the size \" + bootSet.getMachine( ).getImageSizeBytes( ) +\n                    \" bytes of the instance is greater than the vmType \" + vmType.getDisplayName( ) + \" size \" + vmType.getDisk( )\n                    + \" GB.\" );\n        }\n{code}\n\nWhereas a later pre-run check includes, correctly, the size of swap and minimal ephemeral partition size:\n\n{code:title=VmTypes.java}\n    Long imgSize = img.getImageSizeBytes( );\n    Long diskSize = vmType.getDisk( )*1024l*1024l*1024l;\n\n    ...\n\n        vmTypeInfo = VmTypes.InstanceStoreVmTypeInfoMapper.INSTANCE.apply( vmType );\n        long ephemeralSize = diskSize - imgSize - SWAP_SIZE_BYTES;\n        if (ephemeralSize < MIN_EPHEMERAL_SIZE_BYTES) {\n        \tthrow new InvalidMetadataException( \"image too large to accommodate swap and ephemeral [size=\" + imgSize / ( 1024l * 1024l ) + \"MB] for instance type \" + vmType.getName( ) + \" [disk=\"\n                    + vmType.getDisk( ) * 1024l + \"MB]\" );\n        }\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-10-01T17:18:33.274-0500","updated":"2012-10-01T17:18:33.274-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/41135","id":"41135","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"Assigning to the Services Team for evaluation. My previous comment indicates what the problem is, but I am not sure of the best way to solve the problem. I am happy to work on this with the Services Team.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-03-06T04:34:41.215-0600","updated":"2013-03-06T04:34:41.215-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/76157","id":"76157","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer] has this been reproduced in 4.0?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-09T16:06:17.244-0500","updated":"2014-09-09T16:06:17.244-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/76369","id":"76369","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vasya],[~dmitrii] Is this issue resolved by EUCA-9324?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-09-17T12:31:59.943-0500","updated":"2014-09-17T12:31:59.943-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/76370","id":"76370","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1], the EUCA-9324 is not related to this issue. Have you checked that the issue still exists? This is an old bug that might not be relevant anymore.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-09-17T12:56:14.296-0500","updated":"2014-09-17T12:56:14.296-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/13002/comment/78431","id":"78431","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"I cannot reproduce this issue in 4.1 testing.  I start an instance with an disc size of 5368709120 (5G)  and an image size of 5242880000 with no errors.\r\n\r\n  5368709120  Disc size (5G)\r\n  5242880000 Image Size \r\n + 524288000 Swap (500 MB hardcoded)\r\n---------------------------------------------\r\n  5767168000\r\n\r\n  So Image size plus swap size is greater than the Disc size and should have reproduced this issue.\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-10-28T14:51:11.605-0500","updated":"2014-10-28T14:51:11.605-0500"}],"maxResults":17,"total":17,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-1982/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}