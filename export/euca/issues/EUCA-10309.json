{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"34068","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34068","key":"EUCA-10309","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15500","id":"15500","description":"Eucalyptus 4.1.1","name":"4.1.1","archived":false,"released":true,"releaseDate":"2015-05-11"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2015-01-18T18:13:02.795-0600","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10309/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2015-01-09T21:25:08.500-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_12600":"{repository={count=3, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":3,\"lastUpdated\":\"2015-01-13T16:05:47.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":3,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10102":null,"labels":["AWSCompat-PM"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-06-06T16:32:45.761-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12900","id":"12900","name":"CloudFormation"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nInspired by EUCA-10204, tested using 'DeletionPolicy' set to 'Snapshot' as Resource attribute in cloudformation template with a resource type of AWS::EC2::Volume.  Per [AWS documentation|http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-attribute-deletionpolicy.html], when this resource attribute is used with AWS::EC2::Volume resource type, a snapshot is created before the volume is deleted:\r\n{quote}\r\nSnapshot\r\n\r\nFor resources that support snapshots (AWS::EC2::Volume, AWS::RDS::DBInstance, and AWS::Redshift::Cluster), AWS CloudFormation creates a snapshot for the resource before deleting it. Note that when AWS CloudFormation completes the stack deletion, the stack will be in the Delete_Complete state; however, the snapshots that are created with this policy continue to exist and continue to incur applicable charges until you delete those snapshots.\r\n{quote}\r\n\r\nWhen using this on Eucalyptus 4.1 ([Group #2 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-Group#2]), when the stack is deleted, DELETE_FAILED is returned.\r\n\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tVolumeAZTwo\tDELETE_IN_PROGRESS\tUser Initiated\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:56.557Z\r\nOUTPUT\tVolumeId\tvol-41a23e93\r\nSTACK\tVolumeAZOne\tDELETE_IN_PROGRESS\tUser Initiated\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:31.057Z\r\nOUTPUT\tVolumeId\tvol-4a17e3d4\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Applied the following IAM access policy to a non-admin account user:\r\n{code}\r\n# euare-grouplistpolicies -g Testers -v --region admin-hspencer2@group2\r\nec2-volume-snapshot\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419265568046\",\r\n      \"Action\": [\r\n        \"ec2:CreateSnapshot\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:CreateVolume\",\r\n        \"ec2:DeleteSnapshot\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:DeleteVolume\",\r\n        \"ec2:DescribeSnapshots\",\r\n        \"ec2:DescribeTags\",\r\n        \"ec2:DescribeVolumeAttribute\",\r\n        \"ec2:DescribeVolumes\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n# Created a volume in availability zone 'one':\r\n{code}\r\n# cat cfn-volume-template.json\r\n{\r\n  \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n  \"Description\" : \"Cloudformation Example => Create Volume with Deletion Policy to Create Snapshot\",\r\n\r\n\r\n  \"Resources\" : {\r\n     \"MyEBSVolume\" : {\r\n         \"Type\" : \"AWS::EC2::Volume\",\r\n         \"Properties\" : {\r\n             \"Size\" : \"5\",\r\n             \"AvailabilityZone\" : \"one\"\r\n         },\r\n         \"DeletionPolicy\" : \"Snapshot\"\r\n     }\r\n  },\r\n\r\n  \"Outputs\" : {\r\n      \"VolumeId\": {\r\n          \"Value\": {\r\n              \"Ref\": \"MyEBSVolume\"\r\n          },\r\n          \"Description\": \"ID of Volume Created\"\r\n      }\r\n  }\r\n}\r\n\r\n\r\n# euform-create-stack VolumeAZOne --template-file cfn-volume-template.json --region tessai-group2@group2\r\narn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\r\n{code}\r\n# Created volume in availability zone 'two':\r\n{code}\r\n# cat cfn-volume-two-template.json\r\n{\r\n  \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n  \"Description\" : \"Cloudformation Example => Create Volume with Deletion Policy to Create Snapshot\",\r\n\r\n\r\n  \"Resources\" : {\r\n     \"MyEBSVolume\" : {\r\n         \"Type\" : \"AWS::EC2::Volume\",\r\n         \"Properties\" : {\r\n             \"Size\" : \"5\",\r\n             \"AvailabilityZone\" : \"two\"\r\n         },\r\n         \"DeletionPolicy\" : \"Snapshot\"\r\n     }\r\n  },\r\n\r\n  \"Outputs\" : {\r\n      \"VolumeId\": {\r\n          \"Value\": {\r\n              \"Ref\": \"MyEBSVolume\"\r\n          },\r\n          \"Description\": \"ID of Volume Created\"\r\n      }\r\n  }\r\n}\r\n\r\n\r\n# euform-create-stack VolumeAZTwo --template-file cfn-volume-two-template.json --region tessai-group2@group2\r\narn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\r\n{code}\r\n# Confirmed that the stacks deployed successfully:\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tVolumeAZTwo\tCREATE_COMPLETE\tComplete!\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:56.557Z\r\nOUTPUT\tVolumeId\tvol-41a23e93\r\nSTACK\tVolumeAZOne\tCREATE_COMPLETE\tComplete!\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:31.057Z\r\nOUTPUT\tVolumeId\tvol-4a17e3d4\r\n{code}\r\n# Confirmed the status of the volumes\r\n{code}\r\n# euca-describe-volumes vol-41a23e93 vol-4a17e3d4 --region tessai-group2@group2\r\n\r\nVOLUME\tvol-4a17e3d4\t5\t\tone\tavailable\t2015-01-10T02:49:32.626Z\tstandard\r\nTAG\tvolume\tvol-4a17e3d4\taws:cloudformation:logical-id\tMyEBSVolume\r\nTAG\tvolume\tvol-4a17e3d4\taws:cloudformation:stack-id\tarn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\r\nTAG\tvolume\tvol-4a17e3d4\taws:cloudformation:stack-name\tVolumeAZOne\r\nVOLUME\tvol-41a23e93\t5\t\ttwo\tavailable\t2015-01-10T02:49:58.078Z\tstandard\r\nTAG\tvolume\tvol-41a23e93\taws:cloudformation:logical-id\tMyEBSVolume\r\nTAG\tvolume\tvol-41a23e93\taws:cloudformation:stack-id\tarn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\r\nTAG\tvolume\tvol-41a23e93\taws:cloudformation:stack-name\tVolumeAZTwo\r\n{code}\r\n# Deleted the stacks\r\n{code}\r\n# euform-delete-stack VolumeAZOne --region tessai-group2@group2\r\n# euform-delete-stack VolumeAZTwo --region tessai-group2@group2\r\n\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tVolumeAZTwo\tDELETE_IN_PROGRESS\tUser Initiated\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:56.557Z\r\nOUTPUT\tVolumeId\tvol-41a23e93\r\nSTACK\tVolumeAZOne\tDELETE_IN_PROGRESS\tUser Initiated\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:31.057Z\r\nOUTPUT\tVolumeId\tvol-4a17e3d4\r\n{code}\r\n# Observed stack deletion failed about 15 minutes later\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSat Jan 10 03:03:41 UTC 2015\r\nSTACK\tVolumeAZTwo\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:56.557Z\r\nOUTPUT\tVolumeId\tvol-41a23e93\r\nSTACK\tVolumeAZOne\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:31.057Z\r\nOUTPUT\tVolumeId\tvol-4a17e3d4\r\n{code}\r\n# Described stack events for each stack\r\n{code}\r\n# euform-describe-stack-events VolumeAZTwo --region tessai-group2@group2\r\nEVENT\tVolumeAZTwo\tc73667fc-2c18-4750-841b-162bac5341f9\tAWS::CloudFormation::Stack\tVolumeAZTwo\tarn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\t2015-01-10T03:03:39.042Z\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-DELETE_FAILED-1420859017527\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T03:03:37.527Z\tDELETE_FAILED\tResource MyEBSVolume deletion failed for stack arn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-DELETE_IN_PROGRESS-1420858712454\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T02:58:32.454Z\tDELETE_IN_PROGRESS\r\nEVENT\tVolumeAZTwo\tf0cdcec1-b9f3-43af-80ca-d5ab27d1997a\tAWS::CloudFormation::Stack\tVolumeAZTwo\tarn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\t2015-01-10T02:58:31.824Z\tDELETE_IN_PROGRESS\tUser Initiated\r\nEVENT\tVolumeAZTwo\t4eec1bb9-4d27-429b-8a99-07f6ce0e32cc\tAWS::CloudFormation::Stack\tVolumeAZTwo\tarn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\t2015-01-10T02:50:18.945Z\tCREATE_COMPLETE\tComplete!\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-CREATE_COMPLETE-1420858218068\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T02:50:18.068Z\tCREATE_COMPLETE\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-CREATE_IN_PROGRESS-1420858217629\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T02:50:17.629Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-CREATE_IN_PROGRESS-1420858217004\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T02:50:17.004Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-CREATE_IN_PROGRESS-1420858198235\tAWS::EC2::Volume\tMyEBSVolume\tvol-41a23e93\t2015-01-10T02:49:58.235Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZTwo\tMyEBSVolume-CREATE_IN_PROGRESS-1420858197512\tAWS::EC2::Volume\tMyEBSVolume\t\t2015-01-10T02:49:57.512Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZTwo\taa7c0ae4-2e33-4968-95bb-e885c0e8e4e4\tAWS::CloudFormation::Stack\tVolumeAZTwo\tarn:aws:cloudformation::804704720152:stack/VolumeAZTwo/6d3957d7-9f81-4cde-8664-6329764d0c15\t2015-01-10T02:49:56.888Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n\r\n\r\n# euform-describe-stack-events VolumeAZOne --region tessai-group2@group2\r\nEVENT\tVolumeAZOne\t2d8e152b-75c0-4010-8f87-d26d6d20c27c\tAWS::CloudFormation::Stack\tVolumeAZOne\tarn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\t2015-01-10T03:03:38.854Z\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\r\nEVENT\tVolumeAZOne\tMyEBSVolume-DELETE_FAILED-1420859017323\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T03:03:37.323Z\tDELETE_FAILED\tResource MyEBSVolume deletion failed for stack arn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\r\nEVENT\tVolumeAZOne\tMyEBSVolume-DELETE_IN_PROGRESS-1420858705796\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T02:58:25.796Z\tDELETE_IN_PROGRESS\r\nEVENT\tVolumeAZOne\te12dbff5-bea3-4952-ab83-1aa59a021eb4\tAWS::CloudFormation::Stack\tVolumeAZOne\tarn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\t2015-01-10T02:58:25.148Z\tDELETE_IN_PROGRESS\tUser Initiated\r\nEVENT\tVolumeAZOne\tf31d3a22-ff82-402d-b33d-a47dd10573bc\tAWS::CloudFormation::Stack\tVolumeAZOne\tarn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\t2015-01-10T02:49:48.989Z\tCREATE_COMPLETE\tComplete!\r\nEVENT\tVolumeAZOne\tMyEBSVolume-CREATE_COMPLETE-1420858188157\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T02:49:48.157Z\tCREATE_COMPLETE\r\nEVENT\tVolumeAZOne\tMyEBSVolume-CREATE_IN_PROGRESS-1420858187746\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T02:49:47.746Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZOne\tMyEBSVolume-CREATE_IN_PROGRESS-1420858187041\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T02:49:47.041Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZOne\tMyEBSVolume-CREATE_IN_PROGRESS-1420858172903\tAWS::EC2::Volume\tMyEBSVolume\tvol-4a17e3d4\t2015-01-10T02:49:32.903Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZOne\tMyEBSVolume-CREATE_IN_PROGRESS-1420858171984\tAWS::EC2::Volume\tMyEBSVolume\t\t2015-01-10T02:49:31.984Z\tCREATE_IN_PROGRESS\r\nEVENT\tVolumeAZOne\tcd0e9693-29b0-43d0-af9e-a45589e7e34f\tAWS::CloudFormation::Stack\tVolumeAZOne\tarn:aws:cloudformation::804704720152:stack/VolumeAZOne/9981d1c2-f1a9-4507-8183-358e3e5fa6d4\t2015-01-10T02:49:31.378Z\tCREATE_IN_PROGRESS\tUser Initiated\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Cloudformation:  DeletionPolicy Snapshot for Volume Resource Causing Stack Deletion Failure","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_60068_*|*_10000_*:*_1_*:*_226397211_*|*_10001_*:*_1_*:*_102934661_*|*_10003_*:*_1_*:*_436682376_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i0318v:","customfield_10001":"2015-01-13T16:55:00.351-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["ethomas(ethomas)","hspencer(hspencer)"],"customfield_10116":null,"customfield_10117":null,"environment":"* [Group #2 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-Group#2] - Eucalyptus version: 4.1.0-0.0.22963.319.20150109git45359c4.el6\r\n* NetApp ","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34068/comment/81529","id":"81529","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"On AWS, when the stack is deleted, a snapshot is created.\r\n{code}\r\n$ aws cloudformation delete-stack --stack-name VolumeTest --profile harold-work\r\n$ aws cloudformation describe-stacks --profile harold-work\r\nSTACKS\t2015-01-10T02:54:29.468Z\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\tFalse\tarn:aws:cloudformation:us-east-1:048212016277:stack/VolumeTest/fef72bf0-9873-11e4-bd5c-50d5018a1236\tVolumeTest\tDELETE_IN_PROGRESS\tUser Initiated\r\nOUTPUTS\tID of Volume Created\tVolumeId\tvol-3c8e1877\r\n\r\n$ aws ec2 describe-snapshots --profile harold-work | grep vol-3c8e1877\r\nSNAPSHOTS\tNone\tFalse\t\t048212016277\t100%\tsnap-b6ce673e\t2015-01-10T03:00:03.000Z\tcompleted\tvol-3c8e1877\t5\r\n\r\n$ aws cloudformation describe-stacks --profile harold-work\r\n$\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-09T21:26:49.314-0600","updated":"2015-01-09T21:26:49.314-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34068/comment/81538","id":"81538","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Update*\r\n\r\nRe-running DeleteStack deletes the stacks, however there isn't a snapshot that is created.\r\n{code}\r\n# euform-describe-stacks --region tessai-group2@group2\r\nSTACK\tVolumeAZTwo\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:56.557Z\r\nOUTPUT\tVolumeId\tvol-41a23e93\r\nSTACK\tVolumeAZOne\tDELETE_FAILED\tThe following resource(s) failed to delete: [MyEBSVolume].\tCloudformation Example => Create Volume with Deletion Policy to Create Snapshot\t2015-01-10T02:49:31.057Z\r\nOUTPUT\tVolumeId\tvol-4a17e3d4\r\n\r\n# euform-delete-stack VolumeAZTwo --region tessai-group2@group2\r\n# euform-delete-stack VolumeAZOne --region tessai-group2@group2\r\n# euform-describe-stacks --region tessai-group2@group2\r\n#\r\n# euca-describe-volumes --region tessai-group2@group2\r\n#\r\n# euca-describe-snapshots --region tessai-group2@group2\r\n#\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-10T10:28:46.633-0600","updated":"2015-01-10T10:28:46.633-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34068/comment/81759","id":"81759","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"body":"A snapshot is created on delete volume if DeletionPolicy:Snapshot is used.  It should have the same tags as the volume it was based on.  It may take a little longer to delete the stack as it waits until the snapshot is complete before it starts deleting the volume.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=ethomas","name":"ethomas","key":"ethomas","accountId":"557058:8f092f9a-0724-44c0-84a3-0220705f856a","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a01d066493c57e5dee4b94dc87395576?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Evan Thomas","active":false,"timeZone":"America/Los_Angeles"},"created":"2015-01-13T16:55:00.351-0600","updated":"2015-01-13T16:55:00.351-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/34068/comment/82122","id":"82122","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~ethomas], \r\n\r\nGreat work here.  Verified issue is fixed.\r\n\r\nEucalyptus Version: 4.1.0-0.0.23023.353.20150116git0f5f4f1.el6\r\n\r\n*Steps*\r\n\r\n# On [Group #1 cloud|https://eucalyptus.atlassian.net/wiki/display/QA/Euca+4.1+Quality+Dashboard#Euca4.1QualityDashboard-Group#1], applied the following IAM access policy to a group under a given account:\r\n{code}\r\n# euare-grouplistpolicies -v -g Testers --region admin-hspencer@group1\r\neuca10309\r\n{\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1419017169361\",\r\n      \"Action\": [\r\n        \"cloudformation:CreateStack\",\r\n        \"cloudformation:DescribeStacks\",\r\n        \"cloudformation:GetTemplate\",\r\n        \"cloudformation:DeleteStack\",\r\n        \"cloudformation:DescribeStackEvents\",\r\n        \"cloudformation:DescribeStackResource\",\r\n        \"cloudformation:DescribeStackResources\",\r\n        \"cloudformation:ValidateTemplate\",\r\n        \"cloudformation:ListStacks\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    },\r\n    {\r\n      \"Sid\": \"Stmt1419265568046\",\r\n      \"Action\": [\r\n        \"ec2:CreateSnapshot\",\r\n        \"ec2:CreateTags\",\r\n        \"ec2:CreateVolume\",\r\n        \"ec2:DeleteSnapshot\",\r\n        \"ec2:DeleteTags\",\r\n        \"ec2:DeleteVolume\",\r\n        \"ec2:DescribeSnapshots\",\r\n        \"ec2:DescribeTags\",\r\n        \"ec2:DescribeVolumeAttribute\",\r\n        \"ec2:DescribeVolumes\"\r\n      ],\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\n{code}\r\n# euare-grouplistusers -g Testers --region admin-hspencer@group1\r\narn:aws:iam::439629811643:group/Testers\r\n   users\r\n   arn:aws:iam::439629811643:user/tessai\r\n{code}\r\n# Using the following cloudformation template, created the following cloudformation stack:\r\n{code}\r\n# cat cfn-euca10309-template.json\r\n{\r\n  \"AWSTemplateFormatVersion\" : \"2010-09-09\",\r\n\r\n  \"Description\" : \"Cloudformation Example => Create 3 Volumes; two with Deletion Policy to Create Snapshot\",\r\n\r\n\r\n  \"Resources\" : {\r\n     \"MyEBSVolume1\" : {\r\n         \"Type\" : \"AWS::EC2::Volume\",\r\n         \"Properties\" : {\r\n             \"Size\" : \"5\",\r\n             \"AvailabilityZone\" : \"one\"\r\n         },\r\n         \"DeletionPolicy\" : \"Snapshot\"\r\n     },\r\n     \"MyEBSVolume2\" : {\r\n         \"Type\" : \"AWS::EC2::Volume\",\r\n         \"Properties\" : {\r\n             \"Size\" : \"5\",\r\n             \"AvailabilityZone\" : \"one\"\r\n         },\r\n         \"DeletionPolicy\" : \"Snapshot\"\r\n     },\r\n     \"MyEBSVolume3\" : {\r\n         \"Type\" : \"AWS::EC2::Volume\",\r\n         \"Properties\" : {\r\n             \"Size\" : \"5\",\r\n             \"AvailabilityZone\" : \"one\"\r\n         }\r\n     }\r\n  },\r\n\r\n  \"Outputs\" : {\r\n      \"VolumeId1\": {\r\n          \"Value\": {\r\n              \"Ref\": \"MyEBSVolume1\"\r\n          },\r\n          \"Description\": \"ID of Volume Created\"\r\n      },\r\n      \"VolumeId2\": {\r\n          \"Value\": {\r\n              \"Ref\": \"MyEBSVolume2\"\r\n          },\r\n          \"Description\": \"ID of Volume Created\"\r\n      },\r\n      \"VolumeId3\": {\r\n          \"Value\": {\r\n              \"Ref\": \"MyEBSVolume3\"\r\n          },\r\n          \"Description\": \"ID of Volume Created\"\r\n      }\r\n  }\r\n}\r\n{code}\r\n{code}\r\n# euform-create-stack VolumesAZOne --template-file cfn-euca10309-template.json --region tessai-group1@group1\r\narn:aws:cloudformation::439629811643:stack/VolumesAZOne/7087d2f3-3394-4d44-863c-0d4ef32bd2fc\r\n\r\n# euform-describe-stacks VolumesAZOne --region tessai-group1@group1\r\nSTACK\tVolumesAZOne\tCREATE_COMPLETE\tComplete!\tCloudformation Example => Create 3 Volumes; two with Deletion Policy to Create Snapshot\t2015-01-18T22:55:32.759Z\r\nOUTPUT\tVolumeId1\tvol-35d6b2a6\r\nOUTPUT\tVolumeId2\tvol-86ae740d\r\nOUTPUT\tVolumeId3\tvol-7a063592\r\n{code}\r\n# Delete the stack\r\n{code}\r\n# euform-delete-stack VolumesAZOne --region tessai-group1@group1\r\n#\r\n{code}\r\n# Confirm the stack is deleted, then confirm if the snapshots were created:\r\n{code}\r\n# euform-describe-stacks VolumesAZOne --region tessai-group1@group1\r\n#\r\n\r\n# euca-describe-snapshots --region tessai-group1@group1\r\nSNAPSHOT\tsnap-ab32a74e\tvol-86ae740d\tcompleted\t2015-01-18T23:00:53.662Z\t100%\t439629811643\t5\r\nTAG\tsnapshot\tsnap-ab32a74e\taws:cloudformation:logical-id\tMyEBSVolume2\r\nTAG\tsnapshot\tsnap-ab32a74e\taws:cloudformation:stack-id\tarn:aws:cloudformation::439629811643:stack/VolumesAZOne/7087d2f3-3394-4d44-863c-0d4ef32bd2fc\r\nTAG\tsnapshot\tsnap-ab32a74e\taws:cloudformation:stack-name\tVolumesAZOne\r\nSNAPSHOT\tsnap-c6a0ecc2\tvol-35d6b2a6\tcompleted\t2015-01-18T23:00:53.560Z\t100%\t439629811643\t5\r\nTAG\tsnapshot\tsnap-c6a0ecc2\taws:cloudformation:logical-id\tMyEBSVolume1\r\nTAG\tsnapshot\tsnap-c6a0ecc2\taws:cloudformation:stack-id\tarn:aws:cloudformation::439629811643:stack/VolumesAZOne/7087d2f3-3394-4d44-863c-0d4ef32bd2fc\r\nTAG\tsnapshot\tsnap-c6a0ecc2\taws:cloudformation:stack-name\tVolumesAZOne\r\n{code}\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-01-18T18:13:02.811-0600","updated":"2015-01-18T18:13:02.811-0600"}],"maxResults":4,"total":4,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10309/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}