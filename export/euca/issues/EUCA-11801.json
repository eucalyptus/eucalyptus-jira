{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"39690","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39690","key":"EUCA-11801","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17200","id":"17200","description":"Eucalyptus 4.2.2","name":"4.2.2","archived":false,"released":true,"releaseDate":"2016-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@4b081819[id=130,rapidViewId=92,state=CLOSED,name=4.3.0 Sprint 1,goal=<null>,startDate=2015-12-01T17:45:13.503Z,endDate=2015-12-18T17:45:00.000Z,completeDate=2016-01-04T20:09:42.831Z,sequence=130]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2016-04-07T22:19:46.965-0500","customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11801/watchers","watchCount":1,"isWatching":false},"created":"2015-12-02T20:20:41.407-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2015-12-04T22:10:23.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"customfield_11901":null,"issuelinks":[{"id":"33923","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/33923","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"39423","key":"EUCA-11746","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39423","fields":{"summary":"ENI description in Global Network Information","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-10-28T00:34:55.238-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"When launching an instance into a VPC the primary network interface will be created if not specified. The security groups for that network interface should match those for the instance, but are currently empty:\r\n\r\n{code}\r\n#\r\n# euca-describe-network-interfaces eni-8319964d --debug\r\n2015-12-02 17:35:42,345 DEBUG   DescribeNetworkInterfaces parsed arguments: {'filters': None, 'security_token': None, 'url': None, 'NetworkInterfaceId': ['eni-8319964d'], 'show_empty_fields': False, 'key_id': None, 'secret_key': None, 'region': None}\r\n2015-12-02 17:35:42,345 INFO    Config finding global option default-region\r\n2015-12-02 17:35:42,345 INFO    Config   novalue for default-region\r\n2015-12-02 17:35:42,345 INFO    Config finding global option max-retries\r\n2015-12-02 17:35:42,345 INFO    Config   novalue for max-retries\r\n2015-12-02 17:35:42,345 INFO    Config finding global option timeout\r\n2015-12-02 17:35:42,345 INFO    Config   novalue for timeout\r\n2015-12-02 17:35:42,345 WARNING EC2 added fake region name undefined-1433\r\n2015-12-02 17:35:42,345 DEBUG   HmacV4Auth using auth info from environment\r\n2015-12-02 17:35:42,345 INFO    DescribeNetworkInterfaces parameters: {'Action': 'DescribeNetworkInterfaces', 'Version': '2014-06-15', 'NetworkInterfaceId.1': 'eni-8319964d'}\r\n2015-12-02 17:35:42,345 DEBUG   DescribeNetworkInterfaces sending flattened params as form data\r\n2015-12-02 17:35:42,349 INFO    EC2 sending request (attempt 1 of 3)\r\n2015-12-02 17:35:42,360 DEBUG   HmacV4Auth payload hash: abac201bfcec90675098e0f173442e14d14cb7751ab36fa2444fdeabda27a51b\r\n2015-12-02 17:35:42,360 DEBUG   HmacV4Auth scope: 20151203/undefined-1433/ec2/aws4_request\r\n2015-12-02 17:35:42,360 DEBUG   HmacV4Auth canonical URI: /\r\n2015-12-02 17:35:42,360 DEBUG   HmacV4Auth canonical query: \r\n2015-12-02 17:35:42,360 DEBUG   HmacV4Auth canonical headers: ['accept:*/*', 'accept-encoding:gzip, deflate', 'connection:keep-alive', 'content-length:85', 'content-type:application/x-www-form-urlencoded', 'host:compute.a-38.autoqa.qa1.eucalyptus-systems.com:8773', 'x-amz-content-sha256:abac201bfcec90675098e0f173442e14d14cb7751ab36fa2444fdeabda27a51b', 'x-amz-date:20151203T013542Z']\r\n2015-12-02 17:35:42,361 DEBUG   HmacV4Auth signed headers: accept;accept-encoding;connection;content-length;content-type;host;x-amz-content-sha256;x-amz-date\r\n2015-12-02 17:35:42,361 DEBUG   HmacV4Auth canonical request: 'POST\\n/\\n\\naccept:*/*\\naccept-encoding:gzip, deflate\\nconnection:keep-alive\\ncontent-length:85\\ncontent-type:application/x-www-form-urlencoded\\nhost:compute.a-38.autoqa.qa1.eucalyptus-systems.com:8773\\nx-amz-content-sha256:abac201bfcec90675098e0f173442e14d14cb7751ab36fa2444fdeabda27a51b\\nx-amz-date:20151203T013542Z\\n\\naccept;accept-encoding;connection;content-length;content-type;host;x-amz-content-sha256;x-amz-date\\nabac201bfcec90675098e0f173442e14d14cb7751ab36fa2444fdeabda27a51b'\r\n2015-12-02 17:35:42,361 DEBUG   HmacV4Auth string to sign: 'AWS4-HMAC-SHA256\\n20151203T013542Z\\n20151203/undefined-1433/ec2/aws4_request\\n338db6492914cf9590c3f90f8ee1cb2087fdd2e36503a87e4d1766a9bc97d801'\r\n2015-12-02 17:35:42,361 DEBUG   HmacV4Auth signature: 31acf09d40efdb44b182be4e24fd7ba9ec41618562709cc27f569493782997eb\r\n2015-12-02 17:35:42,362 DEBUG   HmacV4Auth signed headers: accept;accept-encoding;connection;content-length;content-type;host;x-amz-content-sha256;x-amz-date\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request method: POST\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request url:    http://compute.a-38.autoqa.qa1.eucalyptus-systems.com:8773/\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request header: Accept: */*\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request header: Accept-Encoding: gzip, deflate\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request header: Authorization: AWS4-HMAC-SHA256 Credential=AKIAAF2KPAWEDYCQ6ABG/20151203/undefined-1433/ec2/aws4_request, SignedHeaders=accept;accept-encoding;connection;content-length;content-type;host;x-amz-content-sha256;x-amz-date, Signature=31acf09d40efdb44b182be4e24fd7ba9ec41618562709cc27f569493782997eb\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request header: Connection: keep-alive\r\n2015-12-02 17:35:42,362 DEBUG   EC2 request header: Content-Length: 85\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request header: Content-Type: application/x-www-form-urlencoded\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request header: Host: compute.a-38.autoqa.qa1.eucalyptus-systems.com:8773\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request header: User-Agent: euca2ools/3.3.0-2-g8605c97 (CPython 2.6.6; Linux 2.6.32-573.8.1.el6.x86_64; x86_64) requestbuilder/0.4.0 requests/2.6.0\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request header: X-Amz-Content-SHA256: abac201bfcec90675098e0f173442e14d14cb7751ab36fa2444fdeabda27a51b\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request header: X-Amz-Date: 20151203T013542Z\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request data:   Action: DescribeNetworkInterfaces\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request data:   NetworkInterfaceId.1: eni-8319964d\r\n2015-12-02 17:35:42,363 DEBUG   EC2 request data:   Version: 2014-06-15\r\n2015-12-02 17:35:42,458 DEBUG   EC2 response time: 0.094 seconds\r\n2015-12-02 17:35:42,458 INFO    EC2 response status: 200\r\n2015-12-02 17:35:42,459 DEBUG   EC2 response header: content-length: 1576\r\n2015-12-02 17:35:42,459 DEBUG   EC2 response header: content-type: application/xml; charset=UTF-8\r\n2015-12-02 17:35:42,459 DEBUG   EC2 response header: date: Thu, 03 Dec 2015 01:35:42 UTC\r\n2015-12-02 17:35:42,459 DEBUG   DescribeNetworkInterfaces -- response content --\r\n<DescribeNetworkInterfacesResponse xmlns=\"http://ec2.amazonaws.com/doc/2014-06-15/\"><requestId>adbed249-21a9-44da-9dc8-56ad6264ad1c</requestId><networkInterfaceSet><item><networkInterfaceId>eni-8319964d</networkInterfaceId><subnetId>subnet-9c9ae4a2</subnetId><vpcId>vpc-d1afb212</vpcId><availabilityZone>one</availabilityZone><description>Primary network interface</description><ownerId>000191121965</ownerId><requesterManaged>false</requesterManaged><status>in-use</status><macAddress>d0:0d:83:19:96:4d</macAddress><privateIpAddress>172.31.6.57</privateIpAddress><privateDnsName>euca-172-31-6-57.eucalyptus.internal</privateDnsName><sourceDestCheck>true</sourceDestCheck><groupSet/><attachment><attachmentId>eni-attach-a48e3608</attachmentId><instanceId>i-f54844b7</instanceId><instanceOwnerId>000191121965</instanceOwnerId><deviceIndex>0</deviceIndex><status>attached</status><attachTime>2015-12-03T01:14:23.441Z</attachTime><deleteOnTermination>true</deleteOnTermination></attachment><association><publicIp>10.116.154.102</publicIp><publicDnsName>euca-10-116-154-102.eucalyptus.a-38.autoqa.qa1.eucalyptus-systems.com</publicDnsName></association><privateIpAddressesSet><item><privateIpAddress>172.31.6.57</privateIpAddress><privateDnsName>euca-172-31-6-57.eucalyptus.internal</privateDnsName><primary>true</primary><association><publicIp>10.116.154.102</publicIp><publicDnsName>euca-10-116-154-102.eucalyptus.a-38.autoqa.qa1.eucalyptus-systems.com</publicDnsName></association></item></privateIpAddressesSet></item></networkInterfaceSet></DescribeNetworkInterfacesResponse>\r\n2015-12-02 17:35:42,460 DEBUG   DescribeNetworkInterfaces -- end of response content --\r\nNETWORKINTERFACE\teni-8319964d\tsubnet-9c9ae4a2\tvpc-d1afb212\t000191121965\tin-use\t172.31.6.57\teuca-172-31-6-57.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-12-03T01:14:23.441Z\ttrue\r\nASSOCIATION\t10.116.154.102\t\t172.31.6.57\r\nPRIVATEIPADDRESS\t172.31.6.57\teuca-172-31-6-57.eucalyptus.internal\tprimary\r\n#\r\n#\r\n{code}\r\n\r\nThis is an API issue, the instance runs with the expected security groups.","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"EC2 VPC network interface security groups incorrect for ENI created on launch","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_110004614_*|*_10000_*:*_1_*:*_71656730_*|*_10002_*:*_1_*:*_341618850_*|*_10001_*:*_1_*:*_96373686_*|*_10003_*:*_1_*:*_10356691690_*|*_10006_*:*_1_*:*_0","customfield_12100":"0|i03jim:r","customfield_10001":"2016-04-07T22:19:46.973-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["mclark(mclark)","sjones(sjones)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11801/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39690/comment/96710","id":"96710","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"On upgrade existing primary ENIs with security groups that do not match their instance will be updated with the correct group information. This can be verified after upgrade by describing the instance and/or network interface.\r\n\r\nRunning an instance should show the GROUP line for the ENI (below the NETWORKINTERFACE line) in the response:\r\n\r\n{code}\r\n#\r\n# euca-run-instances -k root emi-2f6be1ab\r\nRESERVATION\tr-d762c752\t000409481344\tdefault\r\nINSTANCE\ti-d09dcfc0\temi-2f6be1ab\teuca-10-116-154-77.eucalyptus.d-31.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-15-210.eucalyptus.internal\tpending\troot\t0\t\tm1.small\t2015-12-06T07:23:00.368Z\tone\t\t\t\tmonitoring-disabled\t10.116.154.77\t172.31.15.210\tvpc-769e57ae\tsubnet-b53ad2e7\tinstance-store\t\t\t\t\thvm\t\t\tsg-404901a3\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-a94bb24c\tsubnet-b53ad2e7\tvpc-769e57ae\t000409481344\tin-use\t172.31.15.210\teuca-172-31-15-210.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-12-06T07:23:00.377Z\ttrue\r\nASSOCIATION\t10.116.154.77\t\t172.31.15.210\r\nGROUP\tsg-404901a3\tdefault\r\nPRIVATEIPADDRESS\t172.31.15.210\teuca-172-31-15-210.eucalyptus.internal\tprimary\r\n#\r\n#\r\n{code}\r\n\r\ndescribing the instance should also show the GROUP:\r\n\r\n{code}\r\n#\r\n# euca-describe-instances i-d09dcfc0\r\nRESERVATION\tr-d762c752\t000409481344\tdefault\r\nINSTANCE\ti-d09dcfc0\temi-2f6be1ab\teuca-10-116-154-77.eucalyptus.d-31.autoqa.qa1.eucalyptus-systems.com\teuca-172-31-15-210.eucalyptus.internal\trunning\troot\t0\t\tm1.small\t2015-12-06T07:23:00.368Z\tone\t\t\t\tmonitoring-disabled\t10.116.154.77\t172.31.15.210\tvpc-769e57ae\tsubnet-b53ad2e7\tinstance-store\t\t\t\t\thvm\t\t\tsg-404901a3\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-a94bb24c\tsubnet-b53ad2e7\tvpc-769e57ae\t000409481344\tin-use\t172.31.15.210\teuca-172-31-15-210.eucalyptus.internal\ttrue\r\nATTACHMENT\t\t0\tattached\t2015-12-06T07:23:00.377Z\ttrue\r\nASSOCIATION\t10.116.154.77\t\t172.31.15.210\r\nGROUP\tsg-404901a3\tdefault\r\nPRIVATEIPADDRESS\t172.31.15.210\teuca-172-31-15-210.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-d09dcfc0\teuca:node\t10.111.1.118\r\n#\r\n#\r\n{code}\r\n\r\ndescribing the network interface with GROUP info:\r\n\r\n{code}\r\n#\r\n# euca-describe-network-interface-attribute  --group-set eni-a94bb24c\r\nNETWORKINTERFACE\teni-a94bb24c\tgroupSet\r\nGROUP\tsg-404901a3\tdefault\r\n#\r\n#\r\n{code}\r\n\r\nthe network view (/var/run/eucalyptus/global_network_info.xml) should include the securityGroups for the instance (reformatted for display):\r\n\r\n{code}\r\n    <instance name=\"i-d09dcfc0\">\r\n      <ownerId>000409481344</ownerId>\r\n      <macAddress>d0:0d:a9:4b:b2:4c</macAddress>\r\n      <publicIp>10.116.154.77</publicIp>\r\n      <privateIp>172.31.15.210</privateIp>\r\n      <vpc>vpc-769e57ae</vpc>\r\n      <subnet>subnet-b53ad2e7</subnet>\r\n      <networkInterfaces>\r\n        <networkInterface name=\"eni-a94bb24c\">\r\n          <ownerId>000409481344</ownerId>\r\n          <deviceIndex>0</deviceIndex>\r\n          <macAddress>d0:0d:a9:4b:b2:4c</macAddress>\r\n          <privateIp>172.31.15.210</privateIp>\r\n          <publicIp>10.116.154.77</publicIp>\r\n          <sourceDestCheck>true</sourceDestCheck>\r\n          <securityGroups>\r\n            <value>sg-404901a3</value>\r\n          </securityGroups>\r\n        </networkInterface>\r\n      </networkInterfaces>\r\n      <securityGroups>\r\n        <value>sg-404901a3</value>\r\n      </securityGroups>\r\n    </instance>\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-12-07T11:49:32.811-0600","updated":"2015-12-07T11:49:32.811-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/39690/comment/101189","id":"101189","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"{code}\r\nIn [19]: from nephoria.testcontroller import TestController\r\n\r\nIn [20]: tc = TestController('10.111.5.132', password='foobar', log_level='INFO')\r\n\r\nIn [21]: i = tc.admin.ec2.get_instances()[0]\r\n\r\nIn [22]: i.groups\r\nOut[22]: [<boto.ec2.group.Group at 0x10fe1d690>]\r\n\r\nIn [23]: i.groups[0].__dict__\r\nOut[23]: \r\n{'id': u'sg-ec9be14a',\r\n 'item': '',\r\n 'name': u'euca-internal-imaging-service-SecurityGroup-AAYIWNK4SHLVY'}\r\n\r\nIn [24]: i.interfaces\r\nOut[24]: [NetworkInterface:eni-9647176a]\r\n\r\nIn [25]: i.interfaces[0].groups\r\nOut[25]: [<boto.ec2.group.Group at 0x10fe1d790>]\r\n\r\nIn [26]: i.interfaces[0].groups.__dict__\r\nOut[26]: \r\n{'groupSet': '',\r\n 'is_truncated': False,\r\n 'key_marker': None,\r\n 'marker': None,\r\n 'markers': [('item', boto.ec2.group.Group)],\r\n 'next_generation_marker': None,\r\n 'next_key_marker': None,\r\n 'next_marker': None,\r\n 'next_token': None,\r\n 'next_upload_id_marker': None,\r\n 'next_version_id_marker': None,\r\n 'status': True,\r\n 'version_id_marker': None}\r\n\r\nIn [27]: i.interfaces[0].groups[0].__dict__\r\nOut[27]: \r\n{'id': u'sg-ec9be14a',\r\n 'item': '',\r\n 'name': u'euca-internal-imaging-service-SecurityGroup-AAYIWNK4SHLVY'}\r\n\r\nIn [28]: tc.sysadmin.clc_machine.get_eucalyptus_version()\r\nOut[28]: '4.2.2'\r\n\r\nIn [29]: tc.sysadmin.clc_machine.start_interactive_ssh()\r\nOpened channel, starting interactive mode...\r\nLast login: Thu Apr  7 20:05:49 2016 from euca-vpn-10-5-1-102.eucalyptus-systems.com\r\n[root@d-08 ~]# cd /var/run/eucalyptus/\r\n[root@d-08 eucalyptus]# cat global_network_info.xml | xmllint --format - | grep -A25 'instance name=\"i-e694d460\"'\r\n    <instance name=\"i-e694d460\">\r\n      <ownerId>000049522573</ownerId>\r\n      <macAddress>d0:0d:96:47:17:6a</macAddress>\r\n      <publicIp>10.116.153.133</publicIp>\r\n      <privateIp>172.31.13.133</privateIp>\r\n      <vpc>vpc-67328520</vpc>\r\n      <subnet>subnet-7c159303</subnet>\r\n      <networkInterfaces>\r\n        <networkInterface name=\"eni-9647176a\">\r\n          <ownerId>000049522573</ownerId>\r\n          <deviceIndex>0</deviceIndex>\r\n          <macAddress>d0:0d:96:47:17:6a</macAddress>\r\n          <privateIp>172.31.13.133</privateIp>\r\n          <publicIp>10.116.153.133</publicIp>\r\n          <sourceDestCheck>true</sourceDestCheck>\r\n          <securityGroups>\r\n            <value>sg-ec9be14a</value>\r\n          </securityGroups>\r\n        </networkInterface>\r\n      </networkInterfaces>\r\n      <securityGroups>\r\n        <value>sg-ec9be14a</value>\r\n      </securityGroups>\r\n    </instance>\r\n  </instances>\r\n  <dhcpOptionSets>\r\n\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-04-07T22:19:46.973-0500","updated":"2016-04-07T22:19:46.973-0500"}],"maxResults":2,"total":2,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}