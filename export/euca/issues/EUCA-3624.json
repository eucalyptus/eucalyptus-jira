{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"16106","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106","key":"EUCA-3624","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10112","id":"10112","description":"Eucalyptus 3.2.0","name":"3.2.0","archived":false,"released":true,"releaseDate":"2012-12-19"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10400","value":"Premium","id":"10400"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10304":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/11305","id":"11305","name":"3.2.2","archived":false,"released":true,"releaseDate":"2013-04-01"}],"customfield_10700":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"customfield_10308":null,"resolutiondate":"2013-03-22T13:10:02.757-0500","customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3624/watchers","watchCount":12,"isWatching":false},"created":"2012-09-24T13:03:15.136-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","labels":["Support","top200"],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/10201","id":"10201","description":"Eucalyptus 3.1.1","name":"3.1.1","archived":false,"released":true,"releaseDate":"2012-08-24"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/11300","id":"11300","name":"3.2.1","archived":false,"released":true,"releaseDate":"2013-02-14"}],"customfield_11901":null,"issuelinks":[{"id":"16344","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/16344","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"outwardIssue":{"id":"19629","key":"EUCA-5268","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19629","fields":{"summary":"detaching of volumes correlates with I/O errors in host OS's log","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"16335","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/16335","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"19628","key":"EUCA-5267","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19628","fields":{"summary":"when NC kills child helpers, it doesn't wait, so creates zombies","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"16334","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/16334","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"19629","key":"EUCA-5268","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/19629","fields":{"summary":"detaching of volumes correlates with I/O errors in host OS's log","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"13311","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/13311","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"15212","key":"EUCA-3287","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/15212","fields":{"summary":"iscsi device handling and LUN mapping","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"16723","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/16723","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"20092","key":"EUCA-5509","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/20092","fields":{"summary":"Open ticket with KVM related to EUCA-3624","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14818&avatarType=issuetype","name":"Task","subtask":false,"avatarId":14818}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"updated":"2014-06-16T16:08:17.276-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Recently came across a certain condition which seemed to cause issues whereby some I/O on EBS volumes would fail from within the guest. \r\n\r\nDigging into /var/log/messages on the NC, we find this:\r\n\r\n{code}\r\nAug  5 16:11:27 testbox kernel: scsi 143:0:0:2: Direct-Access     NETAPP   LUN              810a PQ: 0 ANSI: 5 \r\nAug  5 16:11:27 testbox kernel: sd 143:0:0:2: Attached scsi generic sg4 type 0 \r\nAug  5 16:11:27 testbox kernel: sd 143:0:0:2: [sdd] 4194304 512-byte logical blocks: (2.14 GB/2.00 GiB)\r\nAug  5 16:11:27 testbox kernel: sd 143:0:0:2: [sdd] Write Protect is off\r\nAug  5 16:11:27 testbox kernel: sd 143:0:0:2: [sdd] Write cache: disabled, read cache: enabled, doesn't support DPO or FUA\r\nAug  5 16:11:27 testbox kernel: sdd: unknown partition table\r\nAug  5 16:11:27 testbox kernel: sd 143:0:0:2: [sdd] Attached SCSI disk\r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.\r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] \r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] Sense Key : Illegal Request [current] \r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] Add. Sense: Logical unit not supported\r\nAug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] CDB: Read(10): 28 00 00 3f ff 80 00 00 08 00\r\nAug  5 16:11:57 testbox kernel: end_request: I/O error, dev sdd, sector 419417\r\n{code}\r\n\r\nNote:\r\n\r\n*Aug  5 16:11:57 testbox kernel: sd 143:0:0:2: [sdd] Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.*\r\n\r\n\r\nThe situation is an interesting one.  With this cloud, we have eutester doing some scheduled tests every 30 mins.  These test include the creation, attach, write test and then detach of NetApp SAN EBS volume to a new instance.  This means that every 30 minutes (in reality longer against the same NC due to instance scheduling) a volume of exactly the same size is created and then attached.\r\n\r\nThe errors above seem to suggest that the LUN assignment as not been updated; i.e. the SCSI bus needs a rescan.\r\n\r\nLooking through more of the logs on this single NC, we see, a little later:\r\n\r\n{code}\r\nAug  5 23:11:30 testbox kernel: scsi 143:0:0:2: Direct-Access     NETAPP   LUN              810a PQ: 0 ANSI: 5 \r\nAug  5 23:11:30 testbox kernel: sd 143:0:0:2: Attached scsi generic sg4 type 0 \r\nAug  5 23:11:30 testbox kernel: sd 143:0:0:2: [sdd] 4194304 512-byte logical blocks: (2.14 GB/2.00 GiB)\r\nAug  5 23:11:30 testbox kernel: sd 143:0:0:2: [sdd] Write Protect is off\r\nAug  5 23:11:30 testbox kernel: sd 143:0:0:2: [sdd] Write cache: disabled, read cache: enabled, doesn't support DPO or FUA\r\nAug  5 23:11:30 testbox kernel: sdd: unknown partition table\r\nAug  5 23:11:30 testbox kernel: sd 143:0:0:2: [sdd] Attached SCSI disk\r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.\r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] \r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] Sense Key : Illegal Request [current] \r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] Add. Sense: Logical unit not supported\r\nAug  5 23:12:04 testbox kernel: sd 143:0:0:2: [sdd] CDB: Read(10): 28 00 00 3f ff 80 00 00 08 00\r\nAug  5 23:12:04 testbox kernel: end_request: I/O error, dev sdd, sector 4194176\r\nAug  5 23:12:04 testbox kernel: Buffer I/O error on device sdd, logical block 524272\r\n{code}\r\n\r\nWe see the same host, bus, target and LUN ID (143:0:0:2).  Either the NetApp reuses the same LUN (despite the volume being deleted by eutester) or the kernel has not updated the mappings.  I guess the latter is most likely.\r\n\r\nI think we need to run the following at some point after each volume attach:\r\n\r\necho \"- - -\" > /sys/class/scsi_host/hostX/scan\r\n\r\nA better method is probably to install sg3_utils and run rescan-scsi-bus.sh.  Last I heard there were caveats with this though, like it doesn't detect iSCSI LUN removal properly.  \r\n\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Rescan SCSI bus to remap LUN assignments","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"customfield_12100":"0|i00tlr:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"10001_*:*_1_*:*_2112866952_*|*_10000_*:*_1_*:*_598577352_*|*_5_*:*_2_*:*_62375226_*|*_4_*:*_1_*:*_68103_*|*_10007_*:*_1_*:*_12692120014","customfield_10001":"2012-11-29T08:13:06.362-0600","customfield_10002":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10000","value":"Customer Affecting","id":"10000"}],"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["awithrow(awithrow)","branoz(branoz)","dmitrii(dmitrii)","hspencer(hspencer)","lwade(lwade)","neil(neil)","zhill(zhill)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/32835","id":"32835","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Note, this is using NetApp SAN adapter.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2012-09-24T13:06:48.067-0500","updated":"2012-09-24T13:06:48.067-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/36434","id":"36434","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey Swathi,\n\nAny update for us on this issue?  Is there any additional information that you need?\n\nCheers,\n\nHarold Spencer, Jr.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-29T08:13:06.362-0600","updated":"2012-11-29T08:13:06.362-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/36447","id":"36447","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"https://access.redhat.com/knowledge/solutions/53023","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2012-11-29T10:26:46.039-0600","updated":"2012-11-29T10:26:46.039-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/36546","id":"36546","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"So we're seeing that NC's which have been up for a long time and have had many instances + volumes have very \"dirty\" SCSI buses.  There appeared to be a large number of stale device nodes (/dev/sd*). We have seen data loss as instances seem to think they have the right underlying device on the NC passed-through but actually they don't, this results in operations to block device(s) within the instance failing.  I'm raising the severity of this issue accordingly. \n\nhttps://access.redhat.com/knowledge/node/3941","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2012-11-30T03:55:05.205-0600","updated":"2012-11-30T03:55:05.205-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39155","id":"39155","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I think I might be getting to the bottom of this one, slowly.  I've been playing with the NetApp in house for the first time today and it looks like what might be happening is that the LUN is mapped across multiple NC's, when it shouldn't be.  This seems to induce the errors detected at the scsi layers which throws the LUN assignment warning:\n\n{code}\nsd 9:0:0:0: [sdc] Warning! Received an indication that the LUN assignments on this target have changed. The Linux SCSI layer does not automatically remap LUN assignments.\n{code}\n\n... however, with multiple attempts at logining in and out of session across multiple NC's to connect to the same LUN, I've only been able to reproduce this once.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-01-30T08:43:22.081-0600","updated":"2013-01-30T08:43:22.081-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39198","id":"39198","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Ok, looks like I might have recreated it.  I can do this by unmapping a LUN which an initiator is attached to.  The device disappears from the host but the kernel still complains:\n\n{code}\nBuffer I/O error on device sdc, logical block 262143\nsd 15:0:0:0: [sdc] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nsd 15:0:0:0: [sdc] Sense Key : Illegal Request [current] \nsd 15:0:0:0: [sdc] Add. Sense: Logical unit not supported\nsd 15:0:0:0: [sdc] CDB: Read(10): 28 00 00 00 00 00 00 00 20 00\nBuffer I/O error on device sdc, logical block 0\n{code}\n\nfdisk shows there is no more sdc:\n\n{code}\nDisk /dev/sde: 5368 MB, 5368709120 bytes\n166 heads, 62 sectors/track, 1018 cylinders\nUnits = cylinders of 10292 * 512 = 5269504 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 4096 bytes / 65536 bytes\nDisk identifier: 0x00000000\n\n\nDisk /dev/sdf: 2147 MB, 2147483648 bytes\n67 heads, 62 sectors/track, 1009 cylinders\nUnits = cylinders of 4154 * 512 = 2126848 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 4096 bytes / 65536 bytes\nDisk identifier: 0x00000000\n\n\nDisk /dev/sdg: 2147 MB, 2147483648 bytes\n67 heads, 62 sectors/track, 1009 cylinders\nUnits = cylinders of 4154 * 512 = 2126848 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 4096 bytes / 65536 bytes\nDisk identifier: 0x706ee1f5\n\n   Device Boot      Start         End      Blocks   Id  System\n/dev/sdg1               1        1009     2095662   83  Linux\nPartition 1 does not start on physical sector boundary.\n\nDisk /dev/sdd: 1073 MB, 1073741824 bytes\n34 heads, 61 sectors/track, 1011 cylinders\nUnits = cylinders of 2074 * 512 = 1061888 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O size (minimum/optimal): 4096 bytes / 65536 bytes\nDisk identifier: 0x00000000\n{code}\n\nIf I rescan the SCSI bus across the board:\n\n{code}\nfind /sys/class/scsi_host/host*/scan | while read line; do echo - - - > $line; done\n{code}\n\n.. then the errors go away and the scsi layer is happy.\n\n\n\n\n\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-01-31T04:27:19.478-0600","updated":"2013-01-31T04:27:19.478-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39199","id":"39199","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I should note that this scenario is a way to reproduce it, we should consider that essentially any addition or removal of a device should be followed by a bus rescan.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-01-31T04:36:21.575-0600","updated":"2013-01-31T04:36:21.575-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39200","id":"39200","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Hey [~swathi],\n\nAny additional information on this issue?  Let us know if you need additional information.\n\nCheers,\n\nHarold Spencer, Jr.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-01-31T04:43:26.351-0600","updated":"2013-01-31T04:43:26.351-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39201","id":"39201","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I guess this is happening because a NetApp uses a single target with all LUN's beneath.  So perhaps the iscsi disconnect basically doesn't do anything, i.e. there is really no action to be taken on the host apart from removing from the VM and rescanning the bus.  With other SAN's and the open source implementation we have separate sessions, so we do a session logout.  Is that correct?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-01-31T04:44:45.553-0600","updated":"2013-01-31T04:44:45.553-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39339","id":"39339","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=branoz","name":"branoz","key":"branoz","accountId":"557058:7e8427f2-60e0-4eb2-9e1e-6845a0b42807","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brano Zarnovican","active":false,"timeZone":"US/Central"},"body":"For the past few days, I have been working on almost exactly the same issue with Netapp against Openstack (https://bugs.launchpad.net/nova/+bug/1112483).\n\nIf you ask Netapp to map LUN to an initiator, he will by default use the lowest unused LUN id. Hence, if you map two LUNs (A, B), unmap first (A) and map third (C), he will reuse LUN id 0. The result would be LUN0==C, LUN1==B. When linux will access B or C, he will get a notification that LUN mapping has changed on remote end. This is ignored by iSCSI client (with a warning). The problem is that kernel will not rescan LUN C and he will keep working with it as if the size is A (which was mapped on LUN 0 before). Then you get all kind of errors when reading with 'dd' for example.\n\nEven if you cannot close the whole iSCSI session to the target, you can still delete individual LUN devices\n{noformat}\necho 1 > /sys/block/sdX/device/delete\n{noformat}\n\nIf you stop using LUN \"A\", delete his device. When LUN \"C\" is mapped in his place, iSCSI client should call rescan. This will make kernel to report correct attributes of C.\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=branoz","name":"branoz","key":"branoz","accountId":"557058:7e8427f2-60e0-4eb2-9e1e-6845a0b42807","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/faccc1efaddf2ea08473fd247f97bb47?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Brano Zarnovican","active":false,"timeZone":"US/Central"},"created":"2013-02-05T06:33:46.826-0600","updated":"2013-02-05T06:33:46.826-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39342","id":"39342","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Great, thanks for taking the time to comment on this [~branoz].  Your validation of this is helpful.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-05T10:21:41.276-0600","updated":"2013-02-05T10:22:00.299-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39343","id":"39343","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"As [~branoz] mentioned, issue relates to bug seen on OpenStack Nova.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-05T10:30:18.722-0600","updated":"2013-02-05T10:30:18.722-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39802","id":"39802","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I believe the conclusion here is that we need to remove the kernels underlying entry for the block device when we disconnect, or rescan upon disconnect so that the scsi layer as an up-to-date picture of the devices currently attached.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-18T05:38:19.089-0600","updated":"2013-02-18T05:38:19.089-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39849","id":"39849","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"[~swathi], rumor is that you may have fixed this one already.  Can you comment on such and if so where it has been put back? ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-18T17:41:15.384-0600","updated":"2013-02-18T17:41:15.384-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39851","id":"39851","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"[~lwade], we should be doing lun delete in the detach perl script on the NC. In 3.2.0+ we use:\necho 1 > /sys/class/iscsi_session/sessionX/device/targetY:0:0/Y:0:0$LUN/delete\n\nThat should remove the lun from the session. The script then rescans the session. This is all done after the LUN is unmapped from the Netapp (the SC does its cleanup first before the NC gets the detach call). If that was the last lun on the session then the session for that node is terminated with a logout.\n\n3.2.0 changed the ISCSI management a bit because we moved from sendtarget discovery to static target management. [~lwade] have you continued to see this behavior on 3.2.x systems? That would be a good datapoint for [~swathi] since the host scripts have changed significantly since 3.1.x.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-18T17:57:01.774-0600","updated":"2013-02-18T17:57:01.774-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39868","id":"39868","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"[~zhill] - I'll look to retest today. \r\n\r\nEdit - I don't think that goes deep enough into the scsi layer to remove the devices from the kernels knowledge.  Anyhow, I'll test....\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-19T03:30:39.716-0600","updated":"2013-02-19T07:17:27.617-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/39943","id":"39943","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Nope, didn't think so.  We're not going deep enough to remove the devices properly:\r\n\r\n{code}\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 00 00 00 00 00 40 00\r\nFeb 20 06:00:57 g-19-06 kernel: __ratelimit: 129 callbacks suppressed\r\nFeb 20 06:00:57 g-19-06 kernel: __ratelimit: 136 callbacks suppressed\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 0\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 1\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 2\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 3\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 4\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 5\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 6\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 7\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 0\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 7f ff 80 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: Buffer I/O error on device sdd, logical block 1048560\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 7f ff 80 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 7f ff f0 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 7f ff f0 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 00 00 08 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Sense Key : Illegal Request [current] \r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] Add. Sense: Logical unit not supported\r\nFeb 20 06:00:57 g-19-06 kernel: sd 7:0:0:1: [sdd] CDB: Read(10): 28 00 00 7f ff f8 00 00 08 00\r\nFeb 20 06:00:57 g-19-06 kernel: end_request: I/O error, dev sdd, sector 8388600\r\nFeb 20 06:00:57 g-19-06 kernel: end_request: I/O error, dev sdd, sector 8388600\r\nFeb 20 06:00:57 g-19-06 kernel: end_request: I/O error, dev sdd, sector 8388600\r\nFeb 20 06:00:57 g-19-06 kernel: end_request: I/O error, dev sdd, sector 8388600\r\nFeb 20 06:00:57 g-19-06 udevd-work[16003]: error opening ATTR{/sys/devices/platform/host7/session2/target7:0:0/7:0:0:1/block/sdd/queue/iosched/slice_idle} for writing: No such file or directory\r\nFeb 20 06:00:57 g-19-06 udevd-work[16003]: error opening ATTR{/sys/devices/platform/host7/session2/target7:0:0/7:0:0:1/block/sdd/queue/iosched/quantum} for writing: No such file or directory\r\nFeb 20 06:00:57 g-19-06 udevd-work[16003]: error opening ATTR{/sys/devices/platform/host7/session2/target7:0:0/7:0:0:1/block/sdd/queue/iosched/slice_idle} for writing: No such file or directory\r\nFeb 20 06:00:57 g-19-06 udevd-work[16003]: error opening ATTR{/sys/devices/platform/host7/session2/target7:0:0/7:0:0:1/block/sdd/queue/iosched/quantum} for writing: No such file or directory\r\n{code}\r\n\r\nThis was when attaching and detaching a volume of the same size as one already attached to an instance receiving I/O.  Version was 3.2.1.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-20T08:02:25.040-0600","updated":"2013-02-20T08:03:44.492-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40620","id":"40620","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"It now appears that in 3.2 with the sensor stuff we have the result from this bug is that we now DoS libvirt (and in some regards the NC) with, presumably, attempts to get block stats on non-existent or incorrect devices.  This is now super-duper-ultra-mega-uber-critical, instead of \"blocker\". \r\n\r\nAfter running the test above, the nc.log begins to complain in regards to sensors:\r\n\r\n{code}\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadOps:summation:vda\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteOps:summation:vda\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadBytes:summation:vda\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteBytes:summation:vda\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vda\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vda\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadOps:summation:vdb\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteOps:summation:vdb\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadBytes:summation:vdb\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteBytes:summation:vdb\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vdb\r\n2013-02-20 05:50:52  INFO | reset in sensor values detected, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vdb\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadOps:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteOps:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadBytes:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteBytes:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vdc\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadOps:summation:vdd\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteOps:summation:vdd\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadBytes:summation:vdd\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteBytes:summation:vdd\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vdd\r\n2013-02-20 05:50:52  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vdd\r\n2013-02-20 05:50:53  INFO | [i-C7F3441B][vol-43303C98] detached as host device '/dev/sdd' and guest device 'vdc'\r\n2013-02-20 05:51:03  INFO | [i-C7F3441B][vol-227638BD] detached as host device '/dev/sdc' and guest device 'vdb'\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:DiskReadOps:summation)\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:DiskWriteOps:summation)\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:DiskReadBytes:summation)\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:DiskWriteBytes:summation)\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:VolumeTotalReadTime:summation)\r\n2013-02-20 05:51:43 ERROR | inconsistency in sensor database (valuesLen=1 is not consistent across dimensions for i-C7F3441B:VolumeTotalWriteTime:summation)\r\n2013-02-20 05:51:51  INFO | [i-C7F3441B][vol-43303C98] volume attached as host device '/dev/sdc' to guest device 'vdf'\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadOps:summation:vda\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteOps:summation:vda\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskReadBytes:summation:vda\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:DiskWriteBytes:summation:vda\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vda\r\n2013-02-20 05:55:50  WARN | mismatch in sensor data being merged into in-memory cache, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vda\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadOps:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteOps:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadBytes:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteBytes:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:VolumeTotalWriteTime:summation:vdd\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadOps:summation:vdf\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteOps:summation:vdf\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskReadBytes:summation:vdf\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:DiskWriteBytes:summation:vdf\r\n2013-02-20 05:55:50  INFO | reset in sensor values detected, clearing history for i-C7F3441B:VolumeTotalReadTime:summation:vdf\r\n{code}\r\n\r\nAbout 5 hours later, this then leads to:\r\n\r\n{code}\r\n2013-02-20 10:57:41 ERROR | timed out waiting for hypervisor checker pid=1081\r\n2013-02-20 10:57:51 ERROR | waitpid() timed out: pid=1083\r\n2013-02-20 10:57:51 ERROR | timed out waiting for hypervisor checker pid=1083\r\n2013-02-20 10:58:01 ERROR | waitpid() timed out: pid=1086\r\n2013-02-20 10:58:01 ERROR | timed out waiting for hypervisor checker pid=1086\r\n2013-02-20 10:58:11 ERROR | waitpid() timed out: pid=1094\r\n2013-02-20 10:58:11 ERROR | timed out waiting for hypervisor checker pid=1094\r\n2013-02-20 10:58:21 ERROR | waitpid() timed out: pid=1095\r\n2013-02-20 10:58:21 ERROR | timed out waiting for hypervisor checker pid=1095\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:DiskReadOps:summation)\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:DiskWriteOps:summation)\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:DiskReadBytes:summation)\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:DiskWriteBytes:summation)\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:VolumeTotalReadTime:summation)\r\n2013-02-20 10:58:50 ERROR | inconsistency in sensor database (valuesLen=4 is not consistent across dimensions for i-C7F3441B:VolumeTotalWriteTime:summation)\r\n{code}\r\n\r\nShortly followed by complete failure:\r\n\r\n{code}\r\n2013-02-20 11:28:38 ERROR | failed to connect to qemu:///system\r\n2013-02-20 11:30:52 ERROR | timed out on libvirt refreshing thread\r\n2013-02-20 11:30:52 ERROR | libvirt: poll on socket failed: Interrupted system call (code=38)\r\n{code}\r\n\r\nA day later it results in:\r\n\r\n{code}\r\n2013-02-21 18:54:56 ERROR | timed out waiting for hypervisor checker pid=7013\r\n2013-02-21 18:55:01 ERROR | failed to fork to check hypervisor connection\r\n2013-02-21 18:55:06 ERROR | failed to fork to check hypervisor connection\r\n{code}\r\n\r\nI then returned to this system today and found continued errors:\r\n\r\n{code}\r\n2013-02-25 04:25:07 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:12 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:17 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:22 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:27 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:32 ERROR | failed to fork to check hypervisor connection\r\n2013-02-25 04:25:36  WARN | failed to invoke getstats for sensor data (Resource temporarily unavailable)\r\n2013-02-25 04:25:36  WARN | failed to invoke getstats for sensor data\r\n{code}\r\n\r\nI can still interact with the hypervisor:\r\n\r\n{code}\r\n[root@g-19-06 ~]# virsh list\r\n Id    Name                           State\r\n----------------------------------------------------\r\n 1     i-C7F3441B                     running\r\n\r\n[root@g-19-06 ~]# virsh dominfo 1\r\nId:             1\r\nName:           i-C7F3441B\r\nUUID:           ed0d3570-30d4-fb3f-49d5-0e9e1ff63f69\r\nOS Type:        hvm\r\nState:          running\r\nCPU(s):         1\r\nCPU time:       506.3s\r\nMax memory:     262144 kB\r\nUsed memory:    262144 kB\r\nPersistent:     no\r\nAutostart:      disable\r\nManaged save:   no\r\n{code}\r\n\r\nInstance launch and volume operations on this NC FAIL.\r\n\r\nThere are a huge load of zombie httpd processes:\r\n\r\n{code}\r\nTasks: 1233 total,   1 running, 211 sleeping,   0 stopped, 1021 zombie\r\n{code}\r\n\r\n{code}\r\n[root@g-19-06 ~]# ps -ef | grep defunct | wc -l\r\n1021\r\n{code}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-25T07:53:17.366-0600","updated":"2013-02-25T08:24:08.590-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40621","id":"40621","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"This can be reproduced quite easily.  One method is to create a number of EBS volumes of the same size and attach all of them to a single instance.  Keep writing some data into one of them and detach another.  Then, create another volume of the same size and attach this one to the instance.  Monitoring the NC throughout.  Create EBS volume churn in regards to the iSCSI devices attached to the NC.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-25T07:54:52.496-0600","updated":"2013-02-25T07:56:28.318-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40651","id":"40651","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"I'm setting the target version to 3.2.2 so we can track this one.  ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-25T14:41:35.707-0600","updated":"2013-02-25T14:41:35.707-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40652","id":"40652","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"body":"Yeah, if this is just a matter or a scsi bus rescan, the fix is\r\ntrivial. Have we confirmed that a bus rescan will indeed fix the\r\nproblem?\r\n\r\nOn Feb 25, 2013, at 9:06 AM, \"Darren Stagnaro (JIRA)\"\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-25T14:48:12.440-0600","updated":"2013-02-25T14:48:12.440-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40660","id":"40660","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Giving this bug to Neil so Swathi can focus on the vServer work. Neil, feel free to hand it back to me if necessary.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-25T20:00:13.390-0600","updated":"2013-02-25T20:00:13.390-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40671","id":"40671","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"No, I don't think we should be doing a full rescan.  On an NC with churn I'm not convinced this is the best thing to do (constantly rescanning the whole bus).  I prefer the solution [~branoz] outlines, triggering a delete of the device.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-26T03:36:20.660-0600","updated":"2013-02-26T03:36:40.872-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40673","id":"40673","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"I've been doing some more testing this morning, and it looks like I've been overlooking something, behaviour has changed in 3.2 with the lun delete we are doing.  I think we now have a related issue and we have infact solved this one.  The downside is that this new issue is likely to be much more complicated to solve.\n\nSteps to reproduce what I'm seeing:\n\n1) Create 3 volumes in an AZ on the NetApp\n2) Attach those 3 volumes to an instance on an NC\n3) Detach a single volume from the instance, monitoring dmesg/messages on the NC when doing this.\n\nRather than having to write anything to any of these EBS volumes, we get these errors without any activity:\n\n{code}\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 00 00 00 00 00 40 00\nFeb 26 03:43:42 g-19-04 kernel: __ratelimit: 129 callbacks suppressed\nFeb 26 03:43:42 g-19-04 kernel: __ratelimit: 137 callbacks suppressed\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 0\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 1\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 2\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 3\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 4\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 5\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 6\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 7\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 0\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 7f ff 80 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: Buffer I/O error on device sde, logical block 1048560\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 7f ff 80 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 7f ff f0 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 7f ff f0 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 00 00 00 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 00 00 08 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Sense Key : Illegal Request [current] \nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] Add. Sense: Logical unit not supported\nFeb 26 03:43:42 g-19-04 kernel: sd 6:0:0:2: [sde] CDB: Read(10): 28 00 00 7f ff f8 00 00 08 00\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388544\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388592\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8388600\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 2048\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 0\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 8\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 24\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 24\nFeb 26 03:43:42 g-19-04 kernel: end_request: I/O error, dev sde, sector 24\nFeb 26 03:43:42 g-19-04 udevd-work[1115]: error opening ATTR{/sys/devices/platform/host6/session1/target6:0:0/6:0:0:2/block/sde/queue/iosched/slice_idle} for writing: No such file or directory\nFeb 26 03:43:42 g-19-04 udevd-work[1115]: error opening ATTR{/sys/devices/platform/host6/session1/target6:0:0/6:0:0:2/block/sde/queue/iosched/quantum} for writing: No such file or directory\nFeb 26 03:43:42 g-19-04 udevd-work[1115]: error opening ATTR{/sys/devices/platform/host6/session1/target6:0:0/6:0:0:2/block/sde/queue/iosched/slice_idle} for writing: No such file or directory\nFeb 26 03:43:42 g-19-04 udevd-work[1115]: error opening ATTR{/sys/devices/platform/host6/session1/target6:0:0/6:0:0:2/block/sde/queue/iosched/quantum} for writing: No such file or directory\n{code}\n\nI think qemu-kvm is keeping the device open for something at time of detach and that's what is causing these errors.  I'd hypothesis that this _something_ is the sensor / blkstats stuff we're doing, since this is what the nc complains about upon detach.  Are we not halting collection of stats before doing the detach?\n\nI'll continue investigations.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-26T05:50:05.239-0600","updated":"2013-02-26T05:50:05.239-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40674","id":"40674","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"What I'm NOT seeing any more is the device left in /sys/block/ after detach.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-26T05:55:13.241-0600","updated":"2013-02-26T05:55:13.241-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40694","id":"40694","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"body":"I am removing the \"Security\" flag for this. DoS is always possible. This does not give a user extra privileges. Please see Zach's comment above. This will only make getting the fix harder for most users.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T10:34:42.280-0600","updated":"2013-02-26T10:38:56.287-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40695","id":"40695","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"body":"So sounds like this is a sensor data issue now and not a bus rescan problem (since we are using static targets in 3.2.x). Do we have a way to turn off sensor data on the NC to see if the problem goes away and is definitely related to data gathering?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=neil","name":"neil","key":"neil","accountId":"557058:bdcb5450-c2ec-4e86-a815-f842a934f480","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/7497770f3e2aaa247f356838f1fd8ba2?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dneil%26avatarId%3D10703%26noRedirect%3Dtrue"},"displayName":"Neil Soman","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T10:36:26.796-0600","updated":"2013-02-26T10:37:20.001-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40710","id":"40710","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Yup, as Zach points out since we do this:\n\n{code}\n echo 1 > /sys/class/iscsi_session/sessionX/device/targetY:0:0/Y:0:0$LUN/delete\n{code}\n\nThe kernel is recognising device removal correctly.  \n\nRegarding reporting, yeah that's what I'd love to know, is this possible [~dmitrii]? ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-26T11:54:12.854-0600","updated":"2013-02-26T11:54:12.854-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40712","id":"40712","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"[~lwade] Yes, we've seen these small number of errors before. I think Qemu/KVM does the detach somewhat asynchronously. I think there is a slight race condition where the detach in KVM is still in progress when we tear down the device on the NC host. I never found a way to force or determine precisely when the KVM detach is complete. When we tell it to detach it does some house-cleaning (flushing buffers etc) for a short amount of time before actually completing the detach from the VM. Perhaps a small amount wait time after the call to libvirt would help, but looking at the KVM/Qemu code it doesn't seem that they use a timeout, they just try to flush buffers for a certain number of iterations (you can't flush a buffer completely because it may never empty:) ).\n\nOur current order of events is:\n1. NC receives detach\n2. NC removes device from instance using libvirt detach\n3. On return from libvirt-detach, the NC then disconnects the iscsi device and cleans up.\n\nI will ping Dmitrii and see if a simple time-delay will be sufficient.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T12:44:08.876-0600","updated":"2013-02-26T12:44:08.876-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40713","id":"40713","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"One more question [~lwade], when you detached volumes were they mounted in the VM? If the volume is still mounted we cannot guarantee cleanly detach, but if not we should be able to handle it well.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T12:45:36.060-0600","updated":"2013-02-26T12:45:36.060-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40716","id":"40716","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Thanks [~zhill].  To answer your question, no they were not mounted. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-26T13:43:07.924-0600","updated":"2013-02-26T13:43:07.924-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40725","id":"40725","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok, I suggest that we create a new ticket for the new behavior.. I'm losing track of what is a 3.1.x issue and what is a 3.2.x issue. If the 3.1.x issue is serious (sounds like it is) then we may indeed need to flag as security. Vika will comment shortly (we just talked in the office).","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T15:46:35.738-0600","updated":"2013-02-26T15:46:35.738-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40742","id":"40742","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"[~lwade], it looks like on your 3.2.0 system the volume operations are not related to the lockup of the NC. Nor to the sensor errors that are cluttering the log, for that matter. Here is what I am seeing (by correlating {{nc.log}} and {{/var/log/messages-20130224}}) on g-19-06:\n\n* By *2013-02-20 06:00:57* you've completed a series of volume operations (5 attaches and 3 detaches, the latter of which all resulted in the I/O errors of the type shown by you above) but the NC continued operating\n\n* Between *10:30:36* and *11:36:33* NC is experiencing difficulties connecting to the hypervisor, showing errors like\n** {{timed out waiting for hypervisor checker pid=...}}\n** {{timed out on libvirt refreshing thread}}\n** {{failed to connect to qemu:///system}}\n\n* The same hypervisor connection errors repeat on the next day, Feb 21st, starting at *16:09:05*.\n\n* Each of the connection errors leaves behind a zombie process (a bug for which I've filed EUCA-5267) and eventually, by *18:55:01*, NC exceeds the limit on forked processes and fork starts to fail, rendering the NC useless. That is the state in which it is today. I expect that a restart will clear out the zombies and will make NC operational again.\n\n* Interestingly, the two periods of hypervisor non-connectivity correlate closely with something in the {{messages}} log:\n** Between *Feb 20 10:32:25* and *11:24:55* it shows multiple consequent messages of the form\n{code}\ng-19-06 sssd[be[default]]: Starting up\n{code}\n** And then again between *Feb 21 16:10:45* and *19:40:35*\n\nI don't know much about {{sssd}}, but I know that restarting it helped restore LDAP authentication on my dev box. (Thanks to [~hspencer] for pointing that out.) So, my theory is that NC's inability to connect to libvirt was somehow caused by LDAP outages here within Eucalyptus datacenter (they occurred on the 20th and the 21st). Because of the zombie bug, which we should be able to fix for 3.2.2, the long periods of not being able to connect ultimately rendered NC useless.\n\nAs for the I/O errors, I created EUCA-5268 to track the behavior in 3.2.x, since it seems to be different from the (worse) behavior in 3.1.x. [~zhill] and I will look into adding a delay to try to avoid them. But, to my knowledge, there are no grave consequences associated with those symptoms.\n\nBy the way, I grepped out the useless sensor-related errors with the following one-liner:\n\n{code}\negrep '(ERROR|tach)' /var/log/eucalyptus/nc.log  | grep -v error=1 | grep -v inconsistency | grep -v negative | less\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T18:39:07.992-0600","updated":"2013-02-26T18:39:07.992-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40747","id":"40747","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"Ok, I've instrumented the disconnect script on [~lwade]'s setup (g-19-04). I found the following:\r\n\r\n{code}\r\nFeb 26 18:32:38 g-19-04 kernel: __ratelimit: 128 callbacks suppressed\r\nFeb 26 18:32:38 g-19-04 kernel: sd 6:0:0:3: [sdf] Result: hostbyte=DID_OK driverbyte=DRIVER_SENSE\r\nFeb 26 18:32:38 g-19-04 kernel: sd 6:0:0:3: [sdf] Sense Key : Illegal Request [current] \r\nFeb 26 18:32:38 g-19-04 kernel: sd 6:0:0:3: [sdf] Add. Sense: Logical unit not supported\r\nFeb 26 18:32:38 g-19-04 kernel: sd 6:0:0:3: [sdf] CDB: Read(10): 28 00 00 00 00 00 00 00 40 00\r\nFeb 26 18:32:38 g-19-04 kernel: __ratelimit: 128 callbacks suppressed\r\nFeb 26 18:32:38 g-19-04 kernel: __ratelimit: 128 callbacks suppressed\r\nFeb 26 18:32:38 g-19-04 kernel: Buffer I/O error on device sdf, logical block 0\r\nFeb 26 18:32:38 g-19-04 kernel: Buffer I/O error on device sdf, logical block 1\r\nFeb 26 18:32:38 g-19-04 kernel: Buffer I/O error on device sdf, logical block 2\r\nFeb 26 18:32:38 g-19-04 kernel: Buffer I/O error on device sdf, logical block 3\r\nFeb 26 18:32:38 g-19-04 kernel: Buffer I/O error on device sdf, logical block 4\r\n...\r\n{code}\r\nThe errors end at 18:32:38 in /var/log/messages.\r\n\r\nNow, the interesting part from nc.log:\r\n{code}\r\n2013-02-26 18:32:38 DEBUG 000016241 doDetachVolume           | [i-54343BCF][vol-3AF842ED] volume detaching (localDev=/dev/sdf force=0 grab_inst_sem=1)\r\n2013-02-26 18:32:38 DEBUG 000016241 get_iscsi_target         | invoking `//usr/lib/eucalyptus/euca_rootwrap //usr/share/eucalyptus/get_iscsitarget.pl /,,HBA,3,not_required,,10.105.2.103,iqn.1992-08.com.netapp:sn.142265393`\r\n2013-02-26 18:32:38 DEBUG 000016241 get_iscsi_target         | get storage script returned: 0, stdout: '/dev/sdf', stderr: ''\r\n2013-02-26 18:32:38 DEBUG 000016241 sensor_refresh_resources | polled statistics for 0 instance(s)\r\n2013-02-26 18:32:38 DEBUG 000016241 sensor_refresh_resources | unable to get metrics for instance i-54343BCF (OK if it was terminated---should soon expire from the cache)\r\n2013-02-26 18:32:38 DEBUG 000016241 sensor_expire_cache_entr | invoked\r\n2013-02-26 18:32:38 DEBUG 000016241 get_xpath_content        | failed to parse XML in '/var/lib/eucalyptus/instances/work/ANMUU3T6HV17DCC2C5FVQ/i-54343BCF/vol-3AF842ED-libvirt.xml'\r\n2013-02-26 18:32:38 DEBUG 000016241 doDetachVolume           | [i-54343BCF][vol-3AF842ED] attempting to disconnect iscsi target\r\n2013-02-26 18:32:48 DEBUG 000016241 disconnect_iscsi_target  | disconnect script returned: 0, stdout: '', stderr: 'Starting sleep delay at Tue Feb 26 18:32:38 2013Resuming disconnect at Tue Feb 26 18:32:48 2013Tried deleting lun 0 times\r\n'\r\n{code}\r\n\r\nI added the 'Starting sleep delay...' part to the disconnect_iscsitarget_main.pl script that wraps a 10sec sleep of the script before it does anything. So, that gives us a nice separation between the libvirt/KVM operation of detach as issued by the NC and the iscsi operation.\r\n\r\nNow, note the timestamp that the sleep finishes at: 18:32:48.\r\n\r\nSo, the IO errors in /var/log/message are stopping 10seconds before the iscsi disconnect is even being triggered. That tells us that those messages are a result of the KVM detach operation *only* and have nothing to do with iSCSI LUN mapping etc. I suspect we would see the same results even if we didn't actually do an ISCSI detach and just left the session active. I think this is a KVM issue with how it removes the device from the guest OS.\r\n\r\nI'm not sure there is anything we can do about this. We can look at the impact of the virtio drivers as opposed to non-virtio, but I suspect that this is a benign error that indicates that some requests from the guest OS were terminated due to the detach.\r\n\r\nAt this point, unless others are seeing actual functional problems, I think this is a non-issue.\r\n\r\nFeel free to add any new info you get or correct me if there are functional problems, but for 3.2+ I think we're okay.\r\n\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-02-26T20:42:50.457-0600","updated":"2013-02-27T04:34:01.982-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/40774","id":"40774","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Thanks for all the investigation here.  What I can surmise:\n\n- EUCA-3624 was infact resolved by changes in 3.2\n- Behaviour seen on PRC cloud highlights issue EUCA-5267, which is messy but not critical or service affecting.  \n- Outage in the PRC was caused by a dependency failure in sssd which was linked to our LDAP outage.\n- This ticket is no longer seen as security-related.\n\nAre we all in agreement?\n\n[~zhill], [~dmitrii], can we open a support case with RH for the KVM detach.  We probably need to get it somewhere upstream?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-02-27T04:40:06.203-0600","updated":"2013-02-27T04:40:06.203-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/41315","id":"41315","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Proposing resolution of this ticket :)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-03-08T08:12:15.548-0600","updated":"2013-03-08T08:12:15.548-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/42112","id":"42112","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"This is likely a bug in one of our dependencies.  ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-03-21T19:49:19.437-0500","updated":"2013-03-21T19:49:19.437-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/42139","id":"42139","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Hi [~awithrow], the status of this ticket is incorrect.  It should be confirmed and marked as fixed.  This was fixed in 3.2. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2013-03-22T09:40:05.565-0500","updated":"2013-03-22T09:40:05.565-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/42140","id":"42140","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"My bad, [~awithrow]. [~lwade] is right, the problem seen in 3.1 was fixed in 3.2. That's what the ticket got filed for.\n\nWhat we won't (or, to be precise, can't) fix are the errors appearing upon a disconnect.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-03-22T09:53:42.349-0500","updated":"2013-03-22T09:53:42.349-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/16106/comment/42154","id":"42154","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"Thanks [~lwade]!  I'll correct the state.  ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-03-22T13:08:54.677-0500","updated":"2013-03-22T13:08:54.677-0500"}],"maxResults":40,"total":40,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-3624/votes","votes":3,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}