{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"24609","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609","key":"EUCA-7814","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12806","id":"12806","description":"Eucalyptus 4.0.0","name":"4.0.0","archived":false,"released":true,"releaseDate":"2014-05-30"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10302":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@379110cd[id=66,rapidViewId=45,state=CLOSED,name=4.1.0 Sprint 1,goal=<null>,startDate=2014-06-30T13:48:10.163Z,endDate=2014-07-21T13:48:00.000Z,completeDate=2014-07-24T15:48:24.089Z,sequence=66]","com.atlassian.greenhopper.service.sprint.Sprint@7086f440[id=54,rapidViewId=75,state=CLOSED,name=4.0 Sprint 7,goal=<null>,startDate=2014-04-05T00:26:27.500Z,endDate=2014-04-26T00:26:00.000Z,completeDate=2014-04-29T13:33:10.513Z,sequence=54]","com.atlassian.greenhopper.service.sprint.Sprint@21289879[id=42,rapidViewId=75,state=CLOSED,name=4.0 Sprint 4,goal=<null>,startDate=2014-01-25T17:49:13.076Z,endDate=2014-02-13T17:49:00.000Z,completeDate=2014-02-14T21:09:23.083Z,sequence=42]","com.atlassian.greenhopper.service.sprint.Sprint@52fbca7d[id=43,rapidViewId=75,state=CLOSED,name=4.0 Sprint 4+,goal=<null>,startDate=2014-02-14T21:12:53.357Z,endDate=2014-02-21T21:12:00.000Z,completeDate=2014-02-26T00:51:28.706Z,sequence=43]","com.atlassian.greenhopper.service.sprint.Sprint@6d53bf97[id=59,rapidViewId=75,state=CLOSED,name=4.0 Sprint 8,goal=<null>,startDate=2014-04-29T13:38:45.824Z,endDate=2014-05-27T22:00:00.000Z,completeDate=2014-06-09T16:26:51.613Z,sequence=59]","com.atlassian.greenhopper.service.sprint.Sprint@2ab06289[id=45,rapidViewId=75,state=CLOSED,name=4.0 Sprint 5,goal=<null>,startDate=2014-02-26T00:53:38.454Z,endDate=2014-03-14T23:53:00.000Z,completeDate=2014-03-25T00:32:05.213Z,sequence=45]","com.atlassian.greenhopper.service.sprint.Sprint@4f3eccf6[id=48,rapidViewId=75,state=CLOSED,name=4.0 Sprint 6,goal=<null>,startDate=2014-03-25T00:36:26.495Z,endDate=2014-04-05T00:36:00.000Z,completeDate=2014-04-05T00:14:49.766Z,sequence=48]"],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2014-05-09T07:28:23.537-0500","customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7814/watchers","watchCount":12,"isWatching":false},"lastViewed":null,"created":"2013-10-09T17:32:03.700-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=2, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":2,\"lastUpdated\":\"2014-02-12T15:45:59.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":2,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"labels":["DNS","OMG"],"customfield_10301":null,"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"customfield_11901":null,"issuelinks":[{"id":"20779","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/20779","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"24619","key":"EUCA-7819","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24619","fields":{"summary":"Multi-Cluster Setup Is A Pain","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"22100","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22100","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"25748","key":"EUCA-8406","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/25748","fields":{"summary":"CC restart causes DHCP to offer CLC instead of system.dns.nameserveraddress","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"23259","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/23259","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"26967","key":"EUCA-8612","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/26967","fields":{"summary":"Instance configuration settings for DNS/subdomain","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/5","id":"5","description":"The sub-task of the issue","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14816&avatarType=issuetype","name":"Sub-task","subtask":true,"avatarId":14816}}}},{"id":"23105","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/23105","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"27349","key":"DOC-1168","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/27349","fields":{"summary":"Update to VM name server configuration","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"22874","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22874","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"27039","key":"EUCA-8642","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/27039","fields":{"summary":"Allow system.dns.nameserveraddress to accept multi-valued list","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14811&avatarType=issuetype","name":"New Feature","subtask":false,"avatarId":14811}}}},{"id":"22730","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22730","type":{"id":"10400","name":"Subtask","inward":"has a subtask of","outward":"is a subtask of","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10400"},"inwardIssue":{"id":"26840","key":"DOC-1142","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/26840","fields":{"summary":"Best Practices Regarding Eucalyptus DNS","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-07-03T09:10:51.849-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10005","id":"10005","name":"DNS"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nIn Managed/Managed (No VLAN) networking modes, the variable VNET_DNS does not do what is documented in the eucalyptus.conf:\r\n\r\n{code}\r\n# The address of the DNS server to supply to instances in DHCP responses.\r\n# Networking modes: Static, Managed, Managed (No VLAN)\r\nVNET_DNS=\"10.1.1.254\"\r\n{code}\r\n\r\nInstead, the cloud property _system.dns.nameserveraddress_ needs to be used to configure the DNS server that will be passed to instances via the CC DHCP server.\r\n\r\n*Signs*\r\n\r\n_NOTE:  During this testing, the VNET_DNS value in the CC eucalyptus.conf stayed the same:  VNET_DNS=\"10.1.1.254\"_\r\n\r\nAfter setting up Managed mode on 3.4, the cloud properties regarding DNS were as follows:\r\n\r\n{code}\r\n# euca-describe-properties | grep dns\r\nPROPERTY\tbootstrap.webservices.use_dns_delegation\tfalse\r\nPROPERTY\tbootstrap.webservices.use_instance_dns\tfalse\r\nPROPERTY\texperimental.dns.enabled\ttrue\r\nPROPERTY\texperimental.dns.instancedata.enabled\ttrue\r\nPROPERTY\texperimental.dns.ns.enabled\ttrue\r\nPROPERTY\texperimental.dns.recursive.enabled\ttrue\r\nPROPERTY\texperimental.dns.services.enabled\ttrue\r\nPROPERTY\texperimental.dns.split_horizon.enabled\ttrue\r\nPROPERTY\texperimental.dns.spoof_regions.enabled\ttrue\r\nPROPERTY\texperimental.dns.spoof_regions.region_name\t{}\r\nPROPERTY\texperimental.dns.spoof_regions.spoof_aws_default_regions\ttrue\r\nPROPERTY\texperimental.dns.spoof_regions.spoof_aws_regions\tfalse\r\nPROPERTY\tloadbalancing.loadbalancer_dns_subdomain\tlb\r\nPROPERTY\tsystem.dns.dnsdomain\tlocalhost\r\nPROPERTY\tsystem.dns.nameserver\tnshost.localhost\r\nPROPERTY\tsystem.dns.nameserveraddress\t127.0.0.1\r\nPROPERTY\tsystem.dns.registrationid\t42bf49fb-feed-4b3d-858e-c95f2ea20c41\r\nPROPERTY\twalrus.bucketnamesrequirednscompliance\tfalse\r\n{code}\r\n\r\nAfter launching an instance, I could ssh into the instance, but could not resolve anything:\r\n\r\n{code}\r\n# ssh -i euca-admin.priv ubuntu@10.104.7.21\r\nThe authenticity of host '10.104.7.21 (10.104.7.21)' can't be established.\r\nRSA key fingerprint is d9:b2:5b:6c:13:02:24:d6:f4:19:af:d3:b1:dc:99:8d.\r\nAre you sure you want to continue connecting (yes/no)? yes\r\nWarning: Permanently added '10.104.7.21' (RSA) to the list of known hosts.\r\n\r\nThe programs included with the Ubuntu system are free software;\r\nthe exact distribution terms for each program are described in the\r\nindividual files in /usr/share/doc/*/copyright.\r\n\r\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\r\napplicable law.\r\n\r\nWelcome to Ubuntu 13.04 (GNU/Linux 3.8.0-31-generic x86_64)\r\n\r\n * Documentation:  https://help.ubuntu.com/\r\n\r\n  System information as of Wed Oct  9 14:39:05 UTC 2013\r\n\r\n  System load:  0.0               Processes:           83\r\n  Usage of /:   53.1% of 1.32GB   Users logged in:     0\r\n  Memory usage: 5%                IP address for eth0: 172.17.186.109\r\n  Swap usage:   0%\r\n\r\n  Graph this data and manage this system at https://landscape.canonical.com/\r\n\r\n  Get cloud support with Ubuntu Advantage Cloud Guest:\r\n    http://www.ubuntu.com/business/services/cloud\r\n\r\n  Use Juju to deploy your cloud instances and workloads:\r\n    https://juju.ubuntu.com/#cloud-raring\r\n\r\n0 packages can be updated.\r\n0 updates are security updates.\r\n\r\nubuntu@ip-172-17-186-109:~$ sudo apt-get update\r\nsudo: unable to resolve host ip-172-17-186-109\r\nErr http://security.ubuntu.com raring-security Release.gpg\r\n  Something wicked happened resolving 'security.ubuntu.com:http' (-11 - System error)\r\nIgn http://security.ubuntu.com raring-security Release\r\nErr http://archive.ubuntu.com raring Release.gpg\r\n  Something wicked happened resolving 'archive.ubuntu.com:http' (-11 - System error)\r\nIgn http://security.ubuntu.com raring-security/main amd64 Packages/DiffIndex\r\nIgn http://security.ubuntu.com raring-security/universe amd64 Packages/DiffIndex\r\nErr http://archive.ubuntu.com raring-updates Release.gpg\r\n  Something wicked happened resolving 'archive.ubuntu.com:http' (-11 - System error)\r\n.....\r\nubuntu@ip-172-17-186-109:~$ cat /etc/resolv.conf\r\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\r\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\r\nnameserver 127.0.0.1\r\nsearch eucalyptus.internal\r\n{code}\r\n\r\nAfter changing the cloud property system.dns.nameserveraddress:\r\n{code}\r\n[root@odc-c-06 ~]# euca-modify-property -p system.dns.nameserveraddress=10.1.1.254\r\nPROPERTY\tsystem.dns.nameserveraddress\t10.1.1.254 was 127.0.0.1\r\n{code}\r\n\r\nI re-launched a new instance, and ssh'ed into the instance.  The /etc/resolv.conf file in the instance showed 10.1.1.254 and I was able to resolve lookups.\r\n{code}\r\n[root@odc-c-06 ~]# ssh -i euca-admin.priv ubuntu@10.104.7.21\r\nThe authenticity of host '10.104.7.21 (10.104.7.21)' can't be established.\r\nRSA key fingerprint is 49:61:4b:6b:fe:f6:f3:e0:1d:19:08:08:87:bf:09:ba.\r\nAre you sure you want to continue connecting (yes/no)? yes\r\nWarning: Permanently added '10.104.7.21' (RSA) to the list of known hosts.\r\n\r\nThe programs included with the Ubuntu system are free software;\r\nthe exact distribution terms for each program are described in the\r\nindividual files in /usr/share/doc/*/copyright.\r\n\r\nUbuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by\r\napplicable law.\r\n\r\nWelcome to Ubuntu 13.04 (GNU/Linux 3.8.0-31-generic x86_64)\r\n\r\n * Documentation:  https://help.ubuntu.com/\r\n\r\n  System information as of Wed Oct  9 21:43:40 UTC 2013\r\n\r\n  System load:  0.06              Processes:           85\r\n  Usage of /:   53.1% of 1.32GB   Users logged in:     0\r\n  Memory usage: 7%                IP address for eth0: 172.17.190.201\r\n  Swap usage:   0%\r\n\r\n  Graph this data and manage this system at https://landscape.canonical.com/\r\n\r\n  Get cloud support with Ubuntu Advantage Cloud Guest:\r\n    http://www.ubuntu.com/business/services/cloud\r\n\r\n  Use Juju to deploy your cloud instances and workloads:\r\n    https://juju.ubuntu.com/#cloud-raring\r\n\r\n0 packages can be updated.\r\n0 updates are security updates.\r\n\r\nubuntu@ip-172-17-190-201:~$ cat /etc/resolv.conf\r\n# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)\r\n#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\r\nnameserver 10.1.1.254\r\nsearch eucalyptus.internal\r\nubuntu@ip-172-17-190-201:~$ exit\r\nlogout\r\nConnection to 10.104.7.21 closed.\r\n[root@odc-c-06 ~]# ssh -i euca-admin.priv ubuntu@10.104.7.21\r\nWelcome to Ubuntu 13.04 (GNU/Linux 3.8.0-31-generic x86_64)\r\n\r\n * Documentation:  https://help.ubuntu.com/\r\n\r\n  System information as of Wed Oct  9 21:44:38 UTC 2013\r\n\r\n  System load:  0.02              Processes:           83\r\n  Usage of /:   53.1% of 1.32GB   Users logged in:     0\r\n  Memory usage: 13%               IP address for eth0: 172.17.190.201\r\n  Swap usage:   0%\r\n\r\n  Graph this data and manage this system at https://landscape.canonical.com/\r\n\r\n  Get cloud support with Ubuntu Advantage Cloud Guest:\r\n    http://www.ubuntu.com/business/services/cloud\r\n\r\n  Use Juju to deploy your cloud instances and workloads:\r\n    https://juju.ubuntu.com/#cloud-raring\r\n\r\n0 packages can be updated.\r\n0 updates are security updates.\r\n\r\nLast login: Wed Oct  9 21:43:42 2013 from odc-c-06.prc.eucalyptus-systems.com\r\nubuntu@ip-172-17-190-201:~$ sudo apt-get update\r\nsudo: unable to resolve host ip-172-17-190-201\r\nGet:1 http://security.ubuntu.com raring-security Release.gpg [933 B]\r\nGet:2 http://security.ubuntu.com raring-security Release [40.8 kB]\r\nHit http://Legend.clouds.archive.ubuntu.com raring Release.gpg\r\nGet:3 http://security.ubuntu.com raring-security/main Sources [46.6 kB]\r\nGet:4 http://Legend.clouds.archive.ubuntu.com raring-updates Release.gpg [933 B]\r\nHit http://Legend.clouds.archive.ubuntu.com raring Release\r\nGet:5 http://security.ubuntu.com raring-security/universe Sources [9,271 B]\r\nGet:6 http://security.ubuntu.com raring-security/main amd64 Packages [121 kB]\r\nGet:7 http://Legend.clouds.archive.ubuntu.com raring-updates Release [40.8 kB]\r\nGet:8 http://security.ubuntu.com raring-security/universe amd64 Packages [38.4 kB]\r\nGet:9 http://security.ubuntu.com raring-security/main Translation-en [62.4 kB]\r\nGet:10 http://Legend.clouds.archive.ubuntu.com raring/main Sources [963 kB]\r\nGet:11 http://security.ubuntu.com raring-security/universe Translation-en [23.8 kB]\r\nIgn http://security.ubuntu.com raring-security/main Translation-en_US\r\nIgn http://security.ubuntu.com raring-security/universe Translation-en_US\r\nGet:12 http://Legend.clouds.archive.ubuntu.com raring/universe Sources [5,838 kB]\r\nHit http://Legend.clouds.archive.ubuntu.com raring/main amd64 Packages\r\nHit http://Legend.clouds.archive.ubuntu.com raring/universe amd64 Packages\r\nHit http://Legend.clouds.archive.ubuntu.com raring/main Translation-en\r\nHit http://Legend.clouds.archive.ubuntu.com raring/universe Translation-en\r\nGet:13 http://Legend.clouds.archive.ubuntu.com raring-updates/main Sources [74.4 kB]\r\nGet:14 http://Legend.clouds.archive.ubuntu.com raring-updates/universe Sources [72.8 kB]\r\nGet:15 http://Legend.clouds.archive.ubuntu.com raring-updates/main amd64 Packages [190 kB]\r\nGet:16 http://Legend.clouds.archive.ubuntu.com raring-updates/universe amd64 Packages [149 kB]\r\nGet:17 http://Legend.clouds.archive.ubuntu.com raring-updates/main Translation-en [89.5 kB]\r\nGet:18 http://Legend.clouds.archive.ubuntu.com raring-updates/universe Translation-en [77.2 kB]\r\nIgn http://Legend.clouds.archive.ubuntu.com raring/main Translation-en_US\r\nIgn http://Legend.clouds.archive.ubuntu.com raring/universe Translation-en_US\r\nIgn http://Legend.clouds.archive.ubuntu.com raring-updates/main Translation-en_US\r\nIgn http://Legend.clouds.archive.ubuntu.com raring-updates/universe Translation-en_US\r\nFetched 7,838 kB in 32s (242 kB/s)\r\nReading package lists... Done\r\n{code}\r\n\r\n*Actions*\r\n\r\n* Set up Eucalyptus 3.4 cloud in Managed/Managed (No VLAN) mode\r\n* Edit CC's eucalyptus.conf file to DNS nameserver\r\n* Launch an instance\r\n* Test to see if instance can resolve outside hosts (i.e. google.com, security.ubuntu.com, etc.)\r\n\r\n_To Confirm Cloud Property Behavior_\r\n\r\n* Change system.dns.nameserveraddress from localhost to IP of DNS server\r\n* Launch another instance\r\n* Test to see if instance can resolve outside hosts (i.e. google.com, security.ubuntu.com, etc.)\r\n\r\n*Pertinent Data*\r\n\r\nVersion of Eucalyptus 3.4:\r\n\r\n_CLC_\r\n{code}\r\neucalyptus-admin-tools-3.4.0-0.0.1592.20131004git8aa607bc.el6.noarch\r\neucalyptus-walrus-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\npython-eucadmin-3.4.0-0.0.1592.20131004git8aa607bc.el6.noarch\r\neucalyptus-common-java-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-cloud-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-load-balancer-image-1.0.2-0.127.131002git65fc4e1.el6.x86_64\r\neuca2ools-3.0.2-0.0.120.el6.noarch\r\neucalyptus-common-java-libs-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-enterprise-storage-san-equallogic-libs-3.4.0-0.0.1525.20131003git8600d52c.el6.x86_64\r\n{code}\r\n\r\n_CC_\r\n{code}\r\neucalyptus-gl-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\npython-eucadmin-3.4.0-0.0.1592.20131004git8aa607bc.el6.noarch\r\neucalyptus-cc-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-admin-tools-3.4.0-0.0.1592.20131004git8aa607bc.el6.noarch\r\neucalyptus-common-java-libs-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-sc-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\neucalyptus-common-java-3.4.0-0.0.1592.20131004git8aa607bc.el6.x86_64\r\n{code}\r\n\r\n*Workaround*\r\n\r\nInstead of using {code}VNET_DNS{code} variable, use cloud property {code}system.dns.nameserveraddress{code}.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/18714","id":"18714","filename":"Test Results - EUCA-7814.txt","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T13:30:35.399-0600","size":14545,"mimeType":"text/plain","content":"https://eucalyptus.atlassian.net/secure/attachment/18714/Test+Results+-+EUCA-7814.txt"}],"summary":"VNET_DNS in eucalyptus.conf on CC Has No Meaning in Managed/Managed (NO VLAN) Modes","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_2_*:*_941384245_*|*_10001_*:*_3_*:*_9450079654_*|*_10002_*:*_1_*:*_421245434_*|*_10000_*:*_1_*:*_71372385_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_2_*:*_7396498157","customfield_12100":"0|i00apj:","customfield_10001":"2013-10-10T13:21:36.078-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["chuck(chuck)","hspencer(hspencer)","shaon(shaon)","lwade(lwade)","mmunn1(mmunn1)","spark(spark)","sjones(sjones)","viglesias(viglesias)"],"customfield_10116":null,"environment":"*non-HA*\r\n\r\n{code}\r\n# euca-describe-services\r\nSERVICE\twalrus         \twalrus         \tStirItUp       \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Walrus \tarn:euca:bootstrap:walrus:walrus:StirItUp/\r\nSERVICE\tjetty          \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Jetty  \tarn:euca:eucalyptus::jetty:10.104.10.6/\r\nSERVICE\tbootstrap      \tbootstrap      \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Empyrean\tarn:euca:bootstrap:::10.104.10.6/\r\nSERVICE\tcluster        \tLegend         \tIsThisLove     \tENABLED   \t44  \thttp://10.104.1.185:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:Legend:cluster:IsThisLove/\r\nSERVICE\treporting      \tbootstrap      \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Reporting\tarn:euca:bootstrap::reporting:10.104.10.6/\r\nSERVICE\ttokens         \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Tokens \tarn:euca:eucalyptus::tokens:10.104.10.6/\r\nSERVICE\teuare          \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Euare  \tarn:euca:eucalyptus::euare:10.104.10.6/\r\nSERVICE\tdns            \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Dns    \tarn:euca:eucalyptus::dns:10.104.10.6/\r\nSERVICE\tstorage        \tLegend         \tNoWomanNoCry   \tENABLED   \t44  \thttp://10.104.1.185:8773/services/Storage\tarn:euca:eucalyptus:Legend:storage:NoWomanNoCry/\r\nSERVICE\tloadbalancing  \tloadbalancing  \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/LoadBalancing\tarn:euca:eucalyptus:loadbalancing:loadbalancing:10.104.10.6/\r\nSERVICE\tnotifications  \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Notifications\tarn:euca:eucalyptus::notifications:10.104.10.6/\r\nSERVICE\teucalyptus     \teucalyptus     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.104.10.6/\r\nSERVICE\tautoscaling    \tautoscaling    \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/AutoScaling\tarn:euca:eucalyptus:autoscaling:autoscaling:10.104.10.6/\r\nSERVICE\tcloudwatch     \tcloudwatch     \t10.104.10.6    \tENABLED   \t44  \thttp://10.104.10.6:8773/services/CloudWatch\tarn:euca:eucalyptus:cloudwatch:cloudwatch:10.104.10.6/\r\n{code}","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7814/votes","votes":1,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/55703","id":"55703","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"body":"I tried the following with MANAGED-NOVLAN,\r\n\r\n{noformat}\r\nPROPERTY\tPARTI00.cluster.networkmode\tMANAGED-NOVLAN\r\nPROPERTY\tsystem.dns.nameserveraddress\t127.0.0.1\r\n{noformat}\r\n\r\neucalyptus.conf on CC,\r\n{noformat}\r\n[root@g-05-01 ~]# grep DNS /etc/eucalyptus/eucalyptus.conf\r\nVNET_DNS=\"10.1.1.254\"\r\n{noformat}\r\n\r\nI changed the VNET_DNS, started an instance and found the following inside the instance,\r\n{noformat}\r\nroot@i:~# cat /etc/resolv.conf\r\ndomain eucalyptus.internal\r\nsearch eucalyptus.internal\r\nnameserver 127.0.0.1\r\nnameserver 10.1.1.254\r\n{noformat}\r\n\r\nTopology:\r\n{noformat}\r\nCENTOS  6.4     64      REPO    [UI CLC WS]\r\nCENTOS  6.4     64      REPO    [CC00 SC00]\r\nVMWARE  ESXI-5.1        64      REPO    [NC00]\r\nVMWARE  ESXI-5.1        64      REPO    [NC00]\r\n{noformat}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=shaon","name":"shaon","key":"shaon","accountId":"557058:1e5e1aa5-5986-4a9e-b9ed-814f7000cd4f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/70d1c1681d03ea38518d3b4f59db4385?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dshaon%26avatarId%3D11900%26noRedirect%3Dtrue"},"displayName":"Imran Hossain Shaon","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-11T18:07:47.182-0500","updated":"2013-10-11T18:07:47.182-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/61660","id":"61660","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"I did some testing to understand this behavior further and document best practices.  My testing is below:\r\n\r\nI was playing around with [Eucalyptus DNS|http://www.eucalyptus.com/docs/eucalyptus/3.4/index.html#shared/setting_up_dns.html], looking to see if there was any possible best practices that could be documented for non-HA and HA deployments - specifically the following variables:\r\n\r\n* the cloud property system.dns.nameserveraddress \r\n* VNET_DNS variable in the CC’s eucalyptus.conf file\r\n\r\nIn Managed/Managed-NOVLAN networking modes, these variables populate the /etc/resolv.conf for the instance - where the value of _system.dns.nameserveraddress_ is first, then followed by the value for VNET_DNS.  I did my tests on a single cluster, non-HA.  Here are the cloud properties for Eucalyptus DNS:\r\n{code}\r\nPROPERTY\tbootstrap.webservices.use_dns_delegation\ttrue\r\nPROPERTY\tbootstrap.webservices.use_instance_dns\ttrue\r\nPROPERTY\tdns.enabled\ttrue\r\nPROPERTY\tdns.instancedata.enabled\ttrue\r\nPROPERTY\tdns.ns.enabled\ttrue\r\nPROPERTY\tdns.recursive.enabled\ttrue\r\nPROPERTY\tdns.services.enabled\ttrue\r\nPROPERTY\tdns.split_horizon.enabled\ttrue\r\nPROPERTY\tdns.spoof_regions.enabled\ttrue\r\nPROPERTY\tdns.spoof_regions.region_name\t{}\r\nPROPERTY\tdns.spoof_regions.spoof_aws_default_regions\ttrue\r\nPROPERTY\tdns.spoof_regions.spoof_aws_regions\tfalse\r\nPROPERTY\tloadbalancing.loadbalancer_dns_subdomain\tlb\r\nPROPERTY\tsystem.dns.dnsdomain\teuca-hasp.eucalyptus-systems.com\r\nPROPERTY\tsystem.dns.nameserver\tnshost.localhost\r\nPROPERTY\tsystem.dns.registrationid\t04de74e9-e70e-4a2a-84ba-302765f7d651\r\nPROPERTY\twalrus.bucketnamesrequirednscompliance\ttrue\r\n{code}\r\nThe authoritative DNS server for eucalyptus-systems.com is 10.1.1.254. The authoritative DNS server for euca-hasp.eucalyptus-systems.com is the CLC fronted - 10.104.1.216.  Here are the following scenarios I tested:\r\n\r\n*Test 1*\r\n\r\n* system.dns.nameserveraddress\t8.8.8.8\r\n* VNET_DNS=“10.1.1.254\"\r\n\r\n*Test 2*\r\n\r\n* system.dns.nameserveraddress\t10.1.1.254\r\n* VNET_DNS=“8.8.8.8\"\r\n\r\n*Test 3*\r\n\r\n* system.dns.nameserveraddress\t10.104.1.216\r\n* VNET_DNS=“8.8.8.8”\r\n\r\n*Test 4*\r\n\r\n* system.dns.nameserveraddress\t10.104.1.216\r\n* VNET_DNS=“10.1.1.254\"\r\n\r\nFor each test, I tested resolving the following from within the instance (using dig and nslookup):\r\n\r\n* walrus.euca-hasp.eucalyptus-systems.com\r\n* The instance public DNS name\r\n* The instance private DNS name\r\n* www.google.com (did this on _Test 2_ and _Test 3_ because it would work on _Test 1_ due to using 8.8.8.8 as the first name server)\r\n\r\nThe test results are attached to this ticket.  In short, _Test 3_ and _Test 4_ resolved in all situations.   Based upon these tests, it seems that we should recommend in our Eucalyptus DNS documentation, when using Managed/Managed-NOVLAN, that the value for system.dns.nameserveraddress should be the CLC IP address. \r\n\r\nI have the following questions:\r\n\r\n* When using Managed/Managed-NOVLAN/Static networking modes with Eucalyptus DNS in HA, what should be used for the system.dns.nameserveraddress and VNET_DNS configuration?\r\n* Does VNET_DNS support multiple values?\r\n* We state the modifiable cloud properties for Eucalyptus here - http://www.eucalyptus.com/docs/eucalyptus/3.4/index.html#euca2ools-guide/euca-properties.html.  However, we don’t mention any of the following variables as configurable.  Should we document them as being configurable?:\r\n{code}\r\nPROPERTY\tdns.instancedata.enabled\r\nPROPERTY\tdns.ns.enabled\r\nPROPERTY\tdns.recursive.enabled\r\nPROPERTY\tdns.services.enabled\r\nPROPERTY\tdns.split_horizon.enabled\r\nPROPERTY\tdns.spoof_regions.enabled\r\nPROPERTY\tdns.spoof_regions.region_name\r\nPROPERTY\tdns.spoof_regions.spoof_aws_default_regions\r\nPROPERTY\tdns.spoof_regions.spoof_aws_regions\r\nPROPERTY\tloadbalancing.loadbalancer_dns_subdomain\r\n{code}\r\n\r\nI think having the answers to these questions and confirming if _Test 3_ and _Test 4_ are recommended ways to configure those properties,  can help improve our documentation regarding Eucalyptus DNS.\r\n\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T13:29:26.459-0600","updated":"2014-01-22T13:29:26.459-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/61661","id":"61661","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Test Results from _Test 1_, _Test 2_, _Test 3_, and _Test 4_.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-01-22T13:30:35.403-0600","updated":"2014-01-22T13:30:35.403-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/61997","id":"61997","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"Can we consider just removing VNET_DNS ? There was talk of deprecating it. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2014-01-28T03:18:54.489-0600","updated":"2014-01-28T03:19:05.971-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62370","id":"62370","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Ok, ran a few tests and here's some of the results and things may be working as designed as I see the CC updating the DNS entry and every new instance launched after the changes, picks up the new entry. But first, we have to keep in mind that the CC sets the DHCP lease to 24 hours which, for all running instances prior to the change, will results in these instances to take the new DNS server valuer at a minimum 12 hours into their lease when they typically request a renewal of their lease.\r\n\r\nFor the following tests, I changed the DHCP lease time to 5 minutes so instances starts to request DHCP updates at about 2-1/2 minutes into their lease.\r\n\r\nOne question I have is about the use of VNET_DNS versus the system.dns.nameserveraddress property on CLC. We seem to have 2 independent (or dependent?) knobs to configure this and VNET_DNS always has a lower priority in the resulting resolv.conf file inside the instance. What is the role of VNET_DNS and system.dns.nameserveraddress? Do they have the same meaning? Do we need both?\r\n\r\n# Modifying system.dns.nameserveraddress property on CLC\r\n** I originally had 127.0.0.1 set as property on CLC\r\n** I had 2 instances running prior to changing the property on CLC\r\n** After changing the property to 192.168.1.7, I launched a new instance and it had the updated DNS server on the first line but the other 2 instances still had the 127.0.0.1\r\n** About 2-1/2 minutes later, the 2 instances picked up the changes and not showed the 192.168.1.7 IP instead of 127.0.0.1\r\n\r\nFrom this previous test, I was able to noticed that, if the CC is restarted, it will offer the CLC IP instead of system.dns.nameserveraddress value which is documented in EUCA-8406. If an instance is started, the DHCP config will be updated to offer system.dns.nameserveraddress instead of CLC. But the problem is that, if no instances are started within 12 hours, instances will automatically start picking the CLC IP address for DNS resolution...\r\n\r\n# Modifying the VNET_DNS entry on CC\r\n** Requires a restart of CC in order to take effect\r\n** In general same behavior as with modifying system.dns.nameserveraddress\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-04T14:03:26.270-0600","updated":"2014-02-04T14:03:26.270-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62388","id":"62388","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"re: \r\n\r\n{quote}One question I have is about the use of VNET_DNS versus the system.dns.nameserveraddress property on CLC. We seem to have 2 independent (or dependent?) knobs to configure this and VNET_DNS always has a lower priority in the resulting resolv.conf file inside the instance. What is the role of VNET_DNS and system.dns.nameserveraddress? Do they have the same meaning? Do we need both?{quote}\r\n\r\nNo, I don't think we should have both.  Ref EUCA-8642 here.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2014-02-04T16:44:34.201-0600","updated":"2014-02-04T16:44:34.201-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62450","id":"62450","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"{panel:title=[~nurmi]'s notes from today's meeting}\r\nmy understanding of the *GOAL* for 4.0, WRT DNS nameserver selection (i.e. the nameserver IP or list of IPs that ends up in dhcpd.conf, served to VMs when they get their addresses).\r\n\r\nlets say there is one cloud property that can take an IP of a nameserver\r\n\r\n1) if: cloud property is unset, instance dns is disabled\r\n   then: backend chooses 127.0.0.1 as nameserver\r\n\r\n2) if: cloud property is set, and instance dns is disabled\r\n   then: clc sends IP of cloud property, backend chooses that value as\r\n   nameserver\r\n\r\n3) if: cloud property is unset, and instance dns is enabled\r\n   then: clc sends IP of cloud controller (DNS service), backend chooses\r\n   that value as nameserver\r\n\r\n4) if: cloud property is set, and instance_dns is enabled\r\n   then: clc sends IP of of cloud controller (DNS service) first, and IP of\r\n   cloud property second, backend chooses both of them in order\r\n\r\n*) if, for any of the above cases,VNET_DNS is set on the backend,\r\n backend will include it last, behind all of the others with one\r\n exception: when neither property not instnace DNS is set (case 1\r\n above), then backend will choose value of VNET_DNS as nameserver)\r\n{panel}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T15:57:05.819-0600","updated":"2014-02-05T15:57:05.819-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62462","id":"62462","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I'm concerned about the lack of configuration for point 4 above. Could there be deployments where you would want to have instance DNS enabled but not use the CLC IP? (perhaps you have your own DNS server that is delegating to the CLC for some sub-domains, or perhaps you want to use 169.254.169.254 rather than the active CLC IP)\r\n\r\nI would suggest simply using the configured value of the cloud property when set and documenting what that value should be.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T18:47:20.947-0600","updated":"2014-02-05T18:47:20.947-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62463","id":"62463","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"body":"I agree with [~sjones]. The caveat with that deployment is that split horizon will not work but that can be a conscious choice.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=viglesias","name":"viglesias","key":"viglesias","accountId":"557058:49b276ff-ebf9-4dd6-ada3-b568a2898707","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/5608e0aa05bd6e5d73b855a08079cceb?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dviglesias%26avatarId%3D10405%26noRedirect%3Dtrue"},"displayName":"Victor Iglesias","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T18:50:20.597-0600","updated":"2014-02-05T18:50:20.597-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62468","id":"62468","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"[~sjones], I think you are making a great point here. Like you, I don't think the cloud should let you configure something and force something else on top of your decisions. I think the best thing to do is to let the user make a conscious decision of their DNS server configuration. Considering that we are looking at deprecating the VNET_DNS option in the long run, this would leave only a centralize place for configuration of DNS which should simplify things. Also, I think that turning this option into an ordered list where you can specify one than more server in priority order would also help being flexible alongside documentation that provide guidance.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T19:23:09.703-0600","updated":"2014-02-05T19:23:09.703-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62492","id":"62492","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"body":"If it helps, I don't really see the point of VNET_DNS at all (re: [~nurmi]'s notes).  We've had a number of users already comment on how this seems pointless and misleading.  To me it seems like keeping the instance DNS stuff in a cloud property *only* is most sensible and least confusing to the user, since it provides a central point of configuration.  Perhaps the default value of this property is the CLC IP.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lwade","name":"lwade","key":"lwade","accountId":"557058:2fc477e4-c115-44ac-a23b-69acd1771151","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/beca0913accb99cac83a11f82082ef21?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlwade%26avatarId%3D11103%26noRedirect%3Dtrue"},"displayName":"Lester Wade","active":true,"timeZone":"Europe/London"},"created":"2014-02-05T20:55:31.868-0600","updated":"2014-02-05T20:55:40.158-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62493","id":"62493","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Point taken [~lwade]. As we discussed today, the goal will be to phase out VNET_DNS but we cannot just yank it for 4.0... ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-05T20:59:12.700-0600","updated":"2014-02-05T20:59:12.700-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62611","id":"62611","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"Done with implementation. Code change ready for review below. Currently going through QA sequence and tested the following use case:\r\n\r\n(* The CLC property can be set as a comma-separated list of IP in order of priority. VNET_DNS is still a single entry)\r\n\r\n# CLC property unset (or default 127.0.0.1) and CC VNET_DNS unset\r\nThe instance resolv.conf only contains 127.0.0.1 as nameserver entry\r\n# CLC property set to \"10.111.1.27,192.168.7.1\" and CC VNET_DNS unset\r\nThe instance resolv.conf contains only 10.111.1.27 and 192.168.7.1 as name server in this order.\r\n# CLC property set to \"10.111.1.27,192.168.7.1\" and CC VNET_DNS set to \"10.1.1.254\"\r\nThe instance resolv.conf contains 10.111.1.27, 192.168.7.1 and 10.1.1.254 as nameserver in this order\r\n# CLC property unset and CC VNET_DNS set to \"10.1.1.254\"\r\nThe instance resolv.conf contains only 10.1.1.254\"\r\n\r\nHere's the code change:\r\n{code}\r\ncommit 0da6d8b02a673b95136ef63ec90eabb90abfd6b9\r\nAuthor: chuck <chuck@eucalyptus.com> 2014-02-07 14:31:14\r\nCommitter: chuck <chuck@eucalyptus.com> 2014-02-07 14:31:14\r\nParent: 3435c45969da40a3d5e13ba5249568c6c993cc3b (EUCA-8672: pad encryption data            also revert the changes that used Base64.standard, as it breaks the existing installations)\r\nChild: 32542ca5817677d954b65199e112f09419180591 (Fix compilation warning)\r\nBranches: dev/chuck/4.0.7814.rev, origin/dev/chuck/4.0.7814.rev\r\n\r\nclc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/NetworkStateCallback.java\r\ndiff --git a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/NetworkStateCallback.java b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/NetworkStateCallback.java\r\nindex b4d0b5c..c007cf2 100644\r\n--- a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/NetworkStateCallback.java\r\n+++ b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/NetworkStateCallback.java\r\n@@ -85,7 +85,7 @@\r\n       {\r\n         regarding( );\r\n         setClusterControllers( Lists.newArrayList( Clusters.getInstance( ).getClusterAddresses( ) ) );\r\n-        setNameserver( Internets.localHostAddress( ) );\r\n+        setNameserver( edu.ucsb.eucalyptus.cloud.entities.SystemConfiguration.getSystemConfiguration( ).getNameserverAddress( ) );\r\n         setDnsDomainName( SystemConfiguration.getSystemConfiguration( ).getDnsDomain( ).replaceAll(\"^\\\\.\",\"\") );\r\n       }\r\n     } );\r\n\r\n------------------------------ cluster/handlers.c -----------------------------\r\ndiff --git a/cluster/handlers.c b/cluster/handlers.c\r\nindex 826eece..e11f5cc 100644\r\n--- a/cluster/handlers.c\r\n+++ b/cluster/handlers.c\r\n@@ -1880,7 +1880,7 @@\r\n //!\r\n //!\r\n //! @param[in]  pMeta a pointer to the node controller (NC) metadata structure\r\n-//! @param[in]  nameserver\r\n+//! @param[in]  nameservers comma separated list of name servers to give to the instances\r\n //! @param[in]  ccs\r\n //! @param[in]  ccsLen\r\n //! @param[out] outvnetConfig\r\n@@ -1891,16 +1891,19 @@\r\n //!\r\n //! @note\r\n //!\r\n-int doDescribeNetworks(ncMetadata * pMeta, char *nameserver, char **ccs, int ccsLen, vnetConfig * outvnetConfig)\r\n+int doDescribeNetworks(ncMetadata * pMeta, char *nameservers, char **ccs, int ccsLen, vnetConfig * outvnetConfig)\r\n {\r\n-    int rc;\r\n+    int i = 0;\r\n+    int rc = 0;\r\n+    int nbNameServers = 0;\r\n+    char *nameServerList[NUMBER_OF_NAME_SERVERS] = { NULL };\r\n \r\n     rc = initialize(pMeta, FALSE);\r\n     if (rc || ccIsEnabled()) {\r\n         return (1);\r\n     }\r\n \r\n-    LOGDEBUG(\"invoked: userId=%s, nameserver=%s, ccsLen=%d\\n\", SP(pMeta ? pMeta->userId : \"UNSET\"), SP(nameserver), ccsLen);\r\n+    LOGDEBUG(\"invoked: userId=%s, nameservers='%s', ccsLen=%d\\n\", SP(pMeta ? pMeta->userId : \"UNSET\"), SP(nameservers), ccsLen);\r\n \r\n     // ensure that we have the latest network state from the CC (based on instance cache) before responding to CLC\r\n     rc = checkActiveNetworks();\r\n@@ -1909,8 +1912,14 @@\r\n     }\r\n \r\n     sem_mywait(VNET);\r\n-    if (nameserver) {\r\n-        vnetconfig->euca_ns = dot2hex(nameserver);\r\n+    if (nameservers) {\r\n+        memset(vnetconfig->eucaNameServer, 0, sizeof(vnetconfig->eucaNameServer));\r\n+        if ((nbNameServers = euca_tokenizer(nameservers, \",\", nameServerList, NUMBER_OF_NAME_SERVERS)) > 0) {\r\n+            for (i = 0; i < nbNameServers; i++) {\r\n+                vnetconfig->eucaNameServer[i] = dot2hex(nameServerList[i]);\r\n+                EUCA_FREE(nameServerList[i]);\r\n+            }\r\n+        }\r\n     }\r\n     if (!strcmp(vnetconfig->mode, NETMODE_MANAGED) || !strcmp(vnetconfig->mode, NETMODE_MANAGED_NOVLAN)) {\r\n         rc = vnetSetCCS(vnetconfig, ccs, ccsLen);\r\n@@ -1947,10 +1956,14 @@\r\n //!\r\n //! @note\r\n //!\r\n-int doStartNetwork(ncMetadata * pMeta, char *accountId, char *uuid, char *netName, int vlan, char *nameserver, char **ccs, int ccsLen)\r\n+int doStartNetwork(ncMetadata * pMeta, char *accountId, char *uuid, char *netName, int vlan, char *nameservers, char **ccs, int ccsLen)\r\n {\r\n-    int rc, ret;\r\n-    char *brname;\r\n+    int i = 0;\r\n+    int rc = 0;\r\n+    int ret = 0;\r\n+    int nbNameServers = 0;\r\n+    char *brname = NULL;\r\n+    char *nameServerList[NUMBER_OF_NAME_SERVERS] = { NULL };\r\n \r\n     rc = initialize(pMeta, FALSE);\r\n     if (rc || ccIsEnabled()) {\r\n@@ -1958,14 +1971,20 @@\r\n     }\r\n \r\n     LOGINFO(\"starting network %s with VLAN %d\\n\", SP(netName), vlan);\r\n-    LOGDEBUG(\"invoked: userId=%s, accountId=%s, nameserver=%s, ccsLen=%d\\n\", SP(pMeta ? pMeta->userId : \"UNSET\"), SP(accountId), SP(nameserver), ccsLen);\r\n+    LOGDEBUG(\"invoked: userId=%s, accountId=%s, nameservers=%s, ccsLen=%d\\n\", SP(pMeta ? pMeta->userId : \"UNSET\"), SP(accountId), SP(nameservers), ccsLen);\r\n \r\n     if (!strcmp(vnetconfig->mode, NETMODE_SYSTEM) || !strcmp(vnetconfig->mode, NETMODE_STATIC) || !strcmp(vnetconfig->mode, NETMODE_EDGE)) {\r\n         ret = 0;\r\n     } else {\r\n         sem_mywait(VNET);\r\n-        if (nameserver) {\r\n-            vnetconfig->euca_ns = dot2hex(nameserver);\r\n+        if (nameservers) {\r\n+            memset(vnetconfig->eucaNameServer, 0, sizeof(vnetconfig->eucaNameServer));\r\n+            if ((nbNameServers = euca_tokenizer(nameservers, \",\", nameServerList, NUMBER_OF_NAME_SERVERS)) > 0) {\r\n+                for (i = 0; i < nbNameServers; i++) {\r\n+                    vnetconfig->eucaNameServer[i] = dot2hex(nameServerList[i]);\r\n+                    EUCA_FREE(nameServerList[i]);\r\n+                }\r\n+            }\r\n         }\r\n \r\n         rc = vnetSetCCS(vnetconfig, ccs, ccsLen);\r\n\r\n--------------------------- cluster/server-marshal.c --------------------------\r\ndiff --git a/cluster/server-marshal.c b/cluster/server-marshal.c\r\nindex 7b5e0cf..d17dbfc 100644\r\n--- a/cluster/server-marshal.c\r\n+++ b/cluster/server-marshal.c\r\n@@ -653,7 +653,7 @@\r\n     char *incc = NULL;\r\n     char statusMessage[256] = { 0 };\r\n     char **clusterControllers = NULL;\r\n-    char *nameserver = NULL;\r\n+    char *nameservers = NULL;\r\n     char *vnetSubnet = NULL;\r\n     char *vnetNetmask = NULL;\r\n     int clusterControllersLen = 0;\r\n@@ -665,7 +665,7 @@\r\n     snt = adb_DescribeNetworks_get_DescribeNetworks(describeNetworks, env);\r\n     EUCA_MESSAGE_UNMARSHAL(describeNetworksType, snt, (&ccMeta));\r\n \r\n-    nameserver = adb_describeNetworksType_get_nameserver(snt, env);\r\n+    nameservers = adb_describeNetworksType_get_nameserver(snt, env);\r\n \r\n     clusterControllersLen = adb_describeNetworksType_sizeof_clusterControllers(snt, env);\r\n     clusterControllers = EUCA_ZALLOC(clusterControllersLen, sizeof(char *));\r\n@@ -677,7 +677,7 @@\r\n     snrt = adb_describeNetworksResponseType_create(env);\r\n     status = AXIS2_TRUE;\r\n     if (!DONOTHING) {\r\n-        rc = doDescribeNetworks(&ccMeta, nameserver, clusterControllers, clusterControllersLen, outvnetConfig);\r\n+        rc = doDescribeNetworks(&ccMeta, nameservers, clusterControllers, clusterControllersLen, outvnetConfig);\r\n         if (rc) {\r\n             LOGERROR(\"doDescribeNetworks() failed with %d\\n\", rc);\r\n             status = AXIS2_FALSE;\r\n@@ -1229,7 +1229,7 @@\r\n     char statusMessage[256] = { 0 };\r\n     char *netName = NULL;\r\n     char **clusterControllers = NULL;\r\n-    char *nameserver = NULL;\r\n+    char *nameservers = NULL;\r\n     char *uuid = NULL;\r\n     char *accountId = NULL;\r\n     int vlan = 0;\r\n@@ -1241,7 +1241,7 @@\r\n \r\n     vlan = adb_startNetworkType_get_vlan(snt, env);\r\n     netName = adb_startNetworkType_get_netName(snt, env);\r\n-    nameserver = adb_startNetworkType_get_nameserver(snt, env);\r\n+    nameservers = adb_startNetworkType_get_nameserver(snt, env);\r\n     uuid = adb_startNetworkType_get_uuid(snt, env);\r\n     accountId = adb_startNetworkType_get_accountId(snt, env);\r\n     if (!accountId) {\r\n@@ -1257,7 +1257,7 @@\r\n     snrt = adb_startNetworkResponseType_create(env);\r\n     status = AXIS2_TRUE;\r\n     if (!DONOTHING) {\r\n-        rc = doStartNetwork(&ccMeta, accountId, uuid, netName, vlan, nameserver, clusterControllers, clusterControllersLen);\r\n+        rc = doStartNetwork(&ccMeta, accountId, uuid, netName, vlan, nameservers, clusterControllers, clusterControllersLen);\r\n         if (rc) {\r\n             LOGERROR(\"doStartNetwork() failed with %d\\n\", rc);\r\n             status = AXIS2_FALSE;\r\n\r\n-------------------------------- net/vnetwork.c -------------------------------\r\ndiff --git a/net/vnetwork.c b/net/vnetwork.c\r\nindex 3a26200..8be3abf 100644\r\n--- a/net/vnetwork.c\r\n+++ b/net/vnetwork.c\r\n@@ -350,7 +350,7 @@\r\n             euca_strncpy(vnetconfig->dhcpuser, dhcpuser, 32);\r\n \r\n         if (domainname) {\r\n-            euca_strncpy(vnetconfig->euca_domainname, domainname, 256);\r\n+            euca_strncpy(vnetconfig->eucaDomainName, domainname, 256);\r\n         } else {\r\n             strncpy(vnetconfig->euca_domainname, \"eucalyptus\", strlen(\"eucalyptus\") + 1);\r\n         }\r\n\r\n-------------------------------- net/vnetwork.h -------------------------------\r\ndiff --git a/net/vnetwork.h b/net/vnetwork.h\r\nindex 1a0b90a..f541678 100644\r\n--- a/net/vnetwork.h\r\n+++ b/net/vnetwork.h\r\n@@ -98,8 +98,12 @@\r\n #define NUMBER_OF_PUBLIC_IPS                     2048\r\n #define NUMBER_OF_PRIVATE_IPS                    2048\r\n #define NUMBER_OF_CCS                               8\r\n+#define NUMBER_OF_NAME_SERVERS                     32\r\n #define MAX_ETH_DEV_PATH                           16\r\n #define MAX_SEC_GROUPS                           NUMBER_OF_VLANS\r\n+\r\n+#define LOCALHOST_HEX                            0x7F000001\r\n+#define LOCALHOST_STRING                         \"127.0.0.1\"\r\n \r\n //! @{\r\n //! @name Defines the various supported network mode names\r\n@@ -178,24 +182,24 @@\r\n } tunnelData;\r\n \r\n typedef struct vnetConfig_t {\r\n-    char eucahome[MAX_PATH];\r\n-    char path[MAX_PATH];\r\n-    char dhcpdaemon[MAX_PATH];\r\n-    char dhcpuser[32];\r\n-    char pubInterface[32];\r\n-    char privInterface[32];\r\n-    char bridgedev[32];\r\n-    char mode[32];\r\n-    char macPrefix[6];\r\n-    u32 localIps[32];\r\n-    u32 nw;\r\n-    u32 nm;\r\n-    u32 euca_ns;\r\n-    u32 cloudIp;\r\n-    char euca_domainname[256];\r\n-    int role;\r\n-    int enabled;\r\n-    int initialized;\r\n+    char eucahome[MAX_PATH];   //!< Home path for the eucalyptus installation\r\n+    char path[MAX_PATH];       //!< Path to the VNET run dir (e.g. /opt/eucalyptus/var/run/eucalyptus/net)\r\n+    char dhcpdaemon[MAX_PATH]; //!< Name of the DHCP daemon application\r\n+    char dhcpuser[32];         //!< System DHCP user\r\n+    char pubInterface[32];     //!< Name of the public interface\r\n+    char privInterface[32];    //!< Name of the private interface\r\n+    char bridgedev[32];        //!< Name of the bridge device\r\n+    char mode[32];             //!< Networking mode name (e.g. STATIC, EDGE, MANAGED, etc.)\r\n+    char macPrefix[6];         //!< Mac prefix to combine with the host IP\r\n+    u32 localIps[32];          //!<\r\n+    u32 nw;                    //!< this is the configured network for this virtual network\r\n+    u32 nm;                    //!< this is the network mask for this virtual network\r\n+    u32 eucaNameServer[NUMBER_OF_NAME_SERVERS];    //!< This is the list of DNS servers received from CLC for this vitual network\r\n+    u32 cloudIp;               //!< This is the IP of the CLC communicating with us\r\n+    char eucaDomainName[256];  //!< This is the domain name configured by the CLC for this virtual network\r\n+    int role;                  //!< This is the role of this network (i.e. CLC, CC or NC)\r\n+    boolean enabled;           //!< Set to TRUE if this virtual network is enabled. Othersize set to FALSE\r\n+    boolean initialized;       //!< Set to TRUE if this virtual network is initialized properly. Otherwise set to FALSE\r\n     int numaddrs;\r\n     int addrIndexMin;\r\n     int addrIndexMax;\r\n\r\n------------------------------ util/euca_string.c -----------------------------\r\ndiff --git a/util/euca_string.c b/util/euca_string.c\r\nindex 7ee1538..054b416 100644\r\n--- a/util/euca_string.c\r\n+++ b/util/euca_string.c\r\n@@ -657,3 +657,48 @@\r\n         return (memcmp(aMacConv, aMac, (6 * sizeof(u8))));\r\n     return (-1);\r\n }\r\n+\r\n+//!\r\n+//! Take a given string and split it into a list of up to nbTokens tokens based on a given delimiter\r\n+//!\r\n+//! @param[in] list the string containing the list of tokens delimited by \\p delim\r\n+//! @param[in] delim the delimiter string to use to split the list\r\n+//! @param[in,out] tokens an array of pointers to string that will end up containing the tokens\r\n+//! @param[in] nbTokens the size of the tokens array\r\n+//!\r\n+//! @return -1 on failure or the number of tokens it was able to find\r\n+//!\r\n+//! @pre \\p list, \\p delim and \\p tokens MUST not be null\r\n+//!\r\n+//! @post The list of tokens is filled with allocated strings and the original \\p list isn't modified.\r\n+//!\r\n+//! @note the caller is responsible to free all tokens.\r\n+//!\r\n+int euca_tokenizer(char *list, char *delim, char *tokens[], int nbTokens)\r\n+{\r\n+    int count = 0;\r\n+    char *ptr = NULL;\r\n+    char *token = NULL;\r\n+    char *dupList = NULL;\r\n+    char *savePtr = NULL;\r\n+\r\n+    // Validate our parameters\r\n+    if ((list == NULL) || (delim == NULL) || (tokens == NULL))\r\n+        return (-1);\r\n+\r\n+    // Duplicate the list to avoid modifying it\r\n+    if ((dupList = strdup(list)) == NULL) {\r\n+        return (-1);\r\n+    }\r\n+\r\n+    // retrieve our tokens\r\n+    ptr = dupList;\r\n+    while(((token = strtok_r(ptr, delim, &savePtr)) != NULL) && (count < nbTokens)) {\r\n+        tokens[count++] = strdup(token);\r\n+        ptr = savePtr;\r\n+    }\r\n+\r\n+    // Free out list\r\n+    EUCA_FREE(dupList);\r\n+    return (count);\r\n+}\r\n\r\n------------------------------ util/euca_string.h -----------------------------\r\ndiff --git a/util/euca_string.h b/util/euca_string.h\r\nindex af5fb21..6910dc5 100644\r\n--- a/util/euca_string.h\r\n+++ b/util/euca_string.h\r\n@@ -136,6 +136,8 @@\r\n int euca_machexcmp(char *psMac, u8 aMac[6]);\r\n //! @}\r\n \r\n+int euca_tokenizer(char *list, char *delim, char *tokens[], int nbTokens);\r\n+\r\n /*----------------------------------------------------------------------------*\\\r\n  |                                                                            |\r\n  |                           STATIC INLINE PROTOTYPES                         |\r\n\r\n{code}\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-07T16:40:34.887-0600","updated":"2014-02-07T16:40:34.887-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62618","id":"62618","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~chuck] one question. Do we perform sanity check on <system.dns.nameserver>? I see no handlers with the property..","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-07T17:33:52.539-0600","updated":"2014-02-07T17:33:52.539-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62619","id":"62619","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"[~spark], I did not look at this and I'm not familiar on how we handle properties in general. On the CLC I only resolved the situation presented in EUCA-8642. Let me know if we also need to add validation of this property if this is common practice.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-07T18:07:10.181-0600","updated":"2014-02-07T18:07:10.181-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62780","id":"62780","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"[~chuck] Both fixes look good to me. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-11T17:51:07.238-0600","updated":"2014-02-11T17:51:07.238-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/62810","id":"62810","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"The code is not in the testing branch. QA should develop tests around the new configuration logic presented in one of my previous comment (the one with \"[~nurmi]'s notes from today\" comment). Also validating the validation of the system.dns.nameserveraddress entries accepted should be covered.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-02-12T13:41:20.362-0600","updated":"2014-02-12T13:41:20.362-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/69292","id":"69292","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~chuck] \r\nWas the fix committed?  \r\nHow can I test this issue?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-05T17:26:41.819-0500","updated":"2014-05-05T17:26:41.819-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/69592","id":"69592","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"[~chuck]  this fix is not working according to the steps outlined in\r\n https://eucalyptus.atlassian.net/browse/EUCA-7814?focusedCommentId=62611&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-62611","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T15:29:20.993-0500","updated":"2014-05-08T15:29:20.993-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/69609","id":"69609","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mmunn1],\r\n\r\nI tested and things seem to work in 'testing'. My system uses Managed mode. Try the following tests:\r\n\r\n{noformat}\r\n1:\r\n- euca-modify-property -p system.dns.nameserveraddress=\"\r\n- set VNET_DNS on CC to \"\"\r\n- Restart CC\r\n- Launch an instance and notice only 127.0.0.1 as nameserver within instance /etc/resolv.conf\r\n- Terminate instance\r\n\r\n2:\r\n- euca-modify-property -p system.dns.nameserveraddress=\"<CLC_IP>\"\r\n- Launch an instance and notice <CLC_IP> and 127.0.0.1 as nameserver within instance /etc/resolv.conf in this specific order. \r\n- Terminate instance\r\n\r\n3:\r\n- euca-modify-property -p system.dns.nameserveraddress=\"<CLC_IP>,10.1.1.254\"\r\n- Launch an instance and notice <CLC_IP>, 10.1.1.254 and 127.0.0.1 as nameserver within instance /etc/resolv.conf in this specific order. \r\n- Terminate instance\r\n\r\n4:\r\n- Set VNET_DNS to \"8.8.8.8\" on CC \r\n- restart CC\r\n- Launch an instance and notice <CLC_IP>, 10.1.1.254, 8.8.8.8 and 127.0.0.1 as nameserver within instance /etc/resolv.conf in this specific order.\r\n- Terminate instance\r\n\r\n5:\r\n- euca-modify-property -p system.dns.nameserveraddress=\"\r\n- Launch an instance and notice only 8.8.8.8 and 127.0.0.1 as nameserver within instance /etc/resolv.conf in that order\r\n- Terminate instance\r\n{noformat}\r\n\r\nAlso make sure the property on CLC is validated for format properly.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=chuck","name":"chuck","key":"chuck","accountId":"557058:95e4b012-7cd1-4fd1-995d-eba573d35653","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/39b69736417cafd9d6dddeb1c2e00169?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dchuck%26avatarId%3D12900%26noRedirect%3Dtrue"},"displayName":"Chuck","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-05-08T17:41:42.332-0500","updated":"2014-05-08T17:41:42.332-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24609/comment/69641","id":"69641","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"body":"Fix is working per Charle's usecase above","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mmunn1","name":"mmunn1","key":"mmunn1","accountId":"557058:6e62b7e8-e48f-469d-ac54-e9449dec5cd9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/6638eee119e9c0bdcca16883c5415349?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmmunn1%26avatarId%3D11300%26noRedirect%3Dtrue"},"displayName":"Michael Munn","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-09T07:28:23.558-0500","updated":"2014-05-09T07:28:23.558-0500"}],"maxResults":21,"total":21,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}