{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"17234","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17234","key":"EUCA-4205","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10104":[],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2012-11-26T12:59:26.925-0600","customfield_10308":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4205/watchers","watchCount":3,"isWatching":false},"created":"2012-11-20T14:03:58.083-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[{"id":"14096","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/14096","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"14466","key":"EUCA-2863","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14466","fields":{"summary":"duplicate address assignments   to same instance on CC","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"14028","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/14028","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"outwardIssue":{"id":"17149","key":"EUCA-4172","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17149","fields":{"summary":"Address state updated outside of any transaction","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:16:42.632-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"description":"I was testing elastic ip for multi-cluster by allocating, assigning, deallocating IPs for instances on different clusters.  At some point one of the instances become associated with 2 IP's.  Trying to deallocate one of them the system will just assign it another one.  Both IP's will work to reach the instance but take up available IP for the system.  I do not think it's specific to multi-cluster that is just where I forst observed the behavior.\r\n\r\nHere you can see instance i-E6FD4440 has 2 IP associated with it. It's also interesting that the user is eucalyptus for these reservations and for the other instance the reservation is for admin\r\n{code}\r\n[root@eucahost-51-78 ~]# euca-describe-addresses \r\nADDRESS\t192.168.46.100\tavailable (arn:aws:euare::724460471514:user/admin)\tstandard\r\nADDRESS\t192.168.46.101\ti-AA303F0B (arn:aws:euare::724460471514:user/admin)\tstandard\r\nADDRESS\t192.168.46.113\tavailable (arn:aws:euare::724460471514:user/admin)\tstandard\r\nADDRESS\t192.168.46.118\tavailable (arn:aws:euare::724460471514:user/admin)\tstandard\r\nADDRESS\t192.168.46.119\ti-E6FD4440 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\r\nADDRESS\t192.168.46.120\ti-E6FD4440 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\r\nADDRESS\t192.168.46.131\tnobody\tstandard\r\nADDRESS\t192.168.46.132\tnobody\tstandard\r\nADDRESS\t192.168.46.133\tnobody\tstandard\r\nADDRESS\t192.168.46.134\tnobody\tstandard\r\nADDRESS\t192.168.46.94\tnobody\tstandard\r\nADDRESS\t192.168.46.95\tnobody\tstandard\r\nADDRESS\t192.168.46.96\tnobody\tstandard\r\nADDRESS\t192.168.46.97\tnobody\tstandard\r\nADDRESS\t192.168.46.98\tnobody\tstandard\r\nADDRESS\t192.168.46.99\tnobody\tstandard\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Multiple ip assigned to one instance","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01o73:","customfield_10000":"10001_*:*_1_*:*_435034649_*|*_10000_*:*_1_*:*_79494209_*|*_5_*:*_1_*:*_0","customfield_10001":"2012-11-21T11:14:20.722-0600","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["awithrow(awithrow)","kedwards(kedwards)","sjones(sjones)","tony(tony)"],"environment":"[CLC WS SC00 CC00]\r\n[SC01 CC01]\r\n[NC00]\r\n[NC01]\r\n","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-4205/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17234/comment/35945","id":"35945","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"body":"Tony, please put in your steps to reproduce for the developers so they can take a look into this. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=awithrow","name":"awithrow","key":"awithrow","accountId":"557058:489310fd-31eb-49f8-8552-e87970faf51b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a5a27d1c4012a61174df794fd8406eb5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Aaron Withrow","active":false,"timeZone":"America/Los_Angeles"},"created":"2012-11-21T11:14:20.722-0600","updated":"2012-11-21T11:14:20.722-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17234/comment/35948","id":"35948","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"I have reproduced the problem.\n# euca-allocate-address\n# associate the new address to a running instance\n# disassociate the address (instance goes back to original IP, allocated IP is available)\n# associate the allocated address to the instance again\n# disassociate the address (instance goes back to original IP, allocated IP is available)\n# allocate a new address (the instance should be using the original IP and 2 IPs are in available state)\n# associate the instance to one of the allocated adresses\n# associate the instance with the other allocated address\n# now your insrance has 2 IPs associated with it\n\nPROOF:\n{code}\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.39\ti-81BB424D (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\tnobody\tstandard\nADDRESS\t192.168.41.50\tnobody\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-describe-instances \nRESERVATION\tr-F30641C7\t867314606207\tdefault\nINSTANCE\ti-8E8A44A8\temi-9EBE402B\t192.168.41.48\t10.174.65.221\trunning\tadmin-keypair\t0\t\tc1.xlarge\t2012-11-21T06:26:42.415Z\tPARTI00\t\t\t\tmonitoring-disabled\t192.168.41.48\t10.174.65.221\t\t\tebs\t\t\t\t\t\t\t\t\t\nRESERVATION\tr-B50A426C\t867314606207\tdefault\nINSTANCE\ti-81BB424D\temi-7DC03819\t192.168.41.39\t10.174.65.203\trunning\tadmin-keypair\t0\t\tm1.small\t2012-11-20T23:38:32.005Z\tPARTI00\teki-B89C3D1A\teri-28B339EA\t\tmonitoring-disabled\t192.168.41.39\t10.174.65.203\t\t\tinstance-store\t\t\t\t\t\t\t\t\t\n[root@eucahost-51-195 ~]# euca-allocate-address\nADDRESS\t192.168.41.49\n[root@eucahost-51-195 ~]# euca-associate-address -i i-81BB424D 192.168.41.49\nADDRESS\t192.168.41.49\ti-81BB424D\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.39\tnobody\tstandard\nADDRESS\t192.168.41.50\tnobody\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-disassociate-address 192.168.41.49\nADDRESS\t192.168.41.49\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.39\ti-81BB424D (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\tavailable (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.50\tnobody\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-allocate-address \nADDRESS\t192.168.41.50\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.39\ti-81BB424D (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\tavailable (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.50\tavailable (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-associate-address -i i-81BB424D 192.168.41.49\nADDRESS\t192.168.41.49\ti-81BB424D\n[root@eucahost-51-195 ~]# euca-associate-address -i i-81BB424D 192.168.41.50\nADDRESS\t192.168.41.50\ti-81BB424D\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.50\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.39\tnobody\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-disassociate-address 192.168.41.49\nADDRESS\t192.168.41.49\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.39\ti-81BB424D (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\tavailable (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.50\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n[root@eucahost-51-195 ~]# euca-associate-address -i i-81BB424D 192.168.41.49\nADDRESS\t192.168.41.49\ti-81BB424D\n[root@eucahost-51-195 ~]# euca-describe-addresses \nADDRESS\t192.168.41.48\ti-8E8A44A8 (arn:aws:euare::000000000000:user/eucalyptus)\tstandard\nADDRESS\t192.168.41.49\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.50\ti-81BB424D (arn:aws:euare::867314606207:user/admin)\tstandard\nADDRESS\t192.168.41.39\tnobody\tstandard\nADDRESS\t192.168.41.59\tnobody\tstandard\nADDRESS\t192.168.41.7\tnobody\tstandard\nADDRESS\t192.168.41.8\tnobody\tstandard\nADDRESS\t192.168.41.9\tnobody\tstandard\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2012-11-21T11:41:21.914-0600","updated":"2012-11-21T11:41:21.914-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/17234/comment/35956","id":"35956","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The issue can be reproduced by:\r\n\r\n# euca-run-instances emi-XXXXXXXX\r\n# euca-allocate-address\r\n# euca-allocate-address\r\n# associate the instance to one of the allocated addresses\r\n# associate the instance with the other allocated address\r\n# now your instance has 2 IPs associated with it\r\n\r\nThis is a timing aspect to this, so the issue may not always reproduce with the above steps (but usually does)\r\n\r\nThis issue is largely addressed by the changes for EUCA-4172 as that fix ensures that we record the instances public IP as soon as possible. With EUCA-4172 in place it is still possible to end up with duplicate assignments as follows:\r\n\r\n{code}\r\n(euca-associate-address -i i-6158416D 10.101.53.4 &); sleep 0.2; euca-associate-address -i i-6158416D 10.101.53.5\r\n{code}\r\n\r\nThe timing is important as the the second association must occur after the original address for the instance has been freed, but before the new address assignment completes.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2012-11-21T13:24:40.186-0600","updated":"2012-11-21T13:24:40.186-0600"}],"maxResults":3,"total":3,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}