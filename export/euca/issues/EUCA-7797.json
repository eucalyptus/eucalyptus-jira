{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"24401","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401","key":"EUCA-7797","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10307","value":"Managed","id":"10307"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@15ff1e47[id=27,rapidViewId=34,state=CLOSED,name=3.4 Sprint 5,goal=<null>,startDate=2013-09-17T19:21:02.124Z,endDate=2013-10-04T22:21:00.000Z,completeDate=2013-10-09T15:31:36.581Z,sequence=27]","com.atlassian.greenhopper.service.sprint.Sprint@62e39af7[id=29,rapidViewId=64,state=CLOSED,name=3.4 Sprint 6,goal=<null>,startDate=2013-10-09T15:36:36.638Z,endDate=2013-10-21T15:36:00.000Z,completeDate=2013-10-24T18:46:44.066Z,sequence=29]"],"customfield_10303":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"resolutiondate":"2013-10-14T15:54:34.491-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10302","value":"VMWare ESX 5.0","id":"10302"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7797/watchers","watchCount":9,"isWatching":false},"created":"2013-09-30T15:24:40.045-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2013-10-08T17:26:36.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12105","id":"12105","description":"Eucalyptus 3.4.0","name":"3.4.0","archived":false,"released":true,"releaseDate":"2013-10-24"}],"issuelinks":[{"id":"20786","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/20786","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"24619","key":"EUCA-7819","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24619","fields":{"summary":"Multi-Cluster Setup Is A Pain","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2014-06-16T16:13:09.871-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10002","id":"10002","name":"Cloud Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Changing vmtypes in vmware cluster while there are running VMs causes vmware broker to go out of service. Assuming this is caused by changing the 'vm type(s)' of the vm(s) which are currently running. \r\nI was able to reproduce this with running 2 large VMs on 2 nodes/esx hosts which occupy all the resources. I've then changed the vmtypes at several points in the instance(s) lifecycle (pending, running)\r\nThis is reproducible but I haven't narrowed it down to the min steps. So far to reproduce I have done the following:\r\n-Max out the resources in the cluster by running 2 m3.xlarge windows instances. This occupies all 8 cores available on the two esxnodes. \r\n-From the admin console, change the vm type while the instances are in pending, then in running state. I've both reduced and increased each value (cpu, mem, disk). It appears that increasing these values while the instance is in 'running' state is what causes the fault.  (m3.xlarge       4         4096         30)\r\n\r\nThis environment is Multi-cluster w/ 1 kvm cluster and 1 vmware cluster. When this fault occurs, the CCs in both clusters and vmware broker transition to the 'NOT_READY' state.  \r\nNote. During my last reproduction attempt I accidentally over subscribed the nodes (there are 3 instances when node resources should have enforced only 2, EUCA-7255). This may contribute to the fault, not sure yet.  \r\n\r\n{code}\r\n[root@b-02 ~]# euca-describe-services \r\nSERVICE\teuare          \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Euare   \tarn:euca:eucalyptus::euare:10.111.1.2/\r\nSERVICE\tbootstrap      \tbootstrap      \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Empyrean\tarn:euca:bootstrap:::10.111.1.2/\r\nSERVICE\tcluster        \tPARTI00        \tCC_14          \tNOTREADY  \t235 \thttp://10.111.1.14:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_14/\r\nSERVICE\tcluster        \tPARTI01        \tCC_54          \tNOTREADY  \t235 \thttp://10.111.1.54:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI01:cluster:CC_54/\r\nSERVICE\tvmwarebroker   \tPARTI01        \tvmwarebroker-10.111.1.54\tNOTREADY  \t235 \thttp://10.111.1.54:8773/services/VMwareBroker\tarn:euca:eucalyptus:PARTI01:vmwarebroker:vmwarebroker-10.111.1.54/\r\nSERVICE\tnotifications  \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Notifications\tarn:euca:eucalyptus::notifications:10.111.1.2/\r\nSERVICE\tautoscaling    \tautoscaling    \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/AutoScaling\tarn:euca:eucalyptus:autoscaling:autoscaling:10.111.1.2/\r\nSERVICE\twalrus         \twalrus         \tWS_2           \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Walrus  \tarn:euca:bootstrap:walrus:walrus:WS_2/\r\nSERVICE\tdns            \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Dns     \tarn:euca:eucalyptus::dns:10.111.1.2/\r\nSERVICE\tjetty          \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Jetty   \tarn:euca:eucalyptus::jetty:10.111.1.2/\r\nSERVICE\tcloudwatch     \tcloudwatch     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/CloudWatch\tarn:euca:eucalyptus:cloudwatch:cloudwatch:10.111.1.2/\r\nSERVICE\tloadbalancing  \tloadbalancing  \t10.111.1.2     \tNOTREADY  \t235 \thttp://10.111.1.2:8773/services/LoadBalancing\tarn:euca:eucalyptus:loadbalancing:loadbalancing:10.111.1.2/\r\nSERVICE\tstorage        \tPARTI00        \tSC_14          \tENABLED   \t235 \thttp://10.111.1.14:8773/services/Storage\tarn:euca:eucalyptus:PARTI00:storage:SC_14/\r\nSERVICE\tstorage        \tPARTI01        \tSC_99          \tENABLED   \t235 \thttp://10.111.1.99:8773/services/Storage\tarn:euca:eucalyptus:PARTI01:storage:SC_99/\r\nSERVICE\treporting      \tbootstrap      \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Reporting\tarn:euca:bootstrap::reporting:10.111.1.2/\r\nSERVICE\teucalyptus     \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Eucalyptus\tarn:euca:eucalyptus:::10.111.1.2/\r\nSERVICE\ttokens         \teucalyptus     \t10.111.1.2     \tENABLED   \t235 \thttp://10.111.1.2:8773/services/Tokens  \tarn:euca:eucalyptus::tokens:10.111.1.2/\r\n\r\n[root@b-02 ~]# euca-describe-instances\r\nRESERVATION\tr-85DC4187\t832486915720\ttest\r\nINSTANCE\ti-77EE446F\temi-FDF03613\t10.111.101.109\t1.109.163.173\trunning\ttest\t0\t\tm3.xlarge\t2013-09-30T19:21:54.791Z\tPARTI01\t\t\tmonitoring-disabled\t10.111.101.109\t1.109.163.173\t\t\tinstance-store\t\t\t\t\thvm\t\t\t\t\t\t\r\nTAG\tinstance\ti-77EE446F\teuca:node\t10.111.1.180\r\nRESERVATION\tr-E516445B\t832486915720\ttest\r\nINSTANCE\ti-7CB74414\temi-FDF03613\t10.111.101.107\t1.109.163.171\trunning\ttest\t0\t\tm3.xlarge\t2013-09-30T19:21:38.350Z\tPARTI01\t\t\tmonitoring-disabled\t10.111.101.107\t1.109.163.171\t\t\tinstance-store\t\t\t\t\thvm\t\t\t\t\t\t\r\nTAG\tinstance\ti-7CB74414\teuca:node\t10.111.1.180\r\nINSTANCE\ti-879440AC\temi-FDF03613\t10.111.101.108\t1.109.163.169\trunning\ttest\t1\t\tm3.xlarge\t2013-09-30T19:21:38.403Z\tPARTI01\t\t\tmonitoring-disabled\t10.111.101.108\t1.109.163.169\t\t\tinstance-store\t\t\t\t\thvm\t\t\t\t\t\t\r\nTAG\tinstance\ti-879440AC\teuca:node\t10.111.1.116\r\n\r\n[root@b-02 ~]# euca-describe-instance-types \r\nINSTANCETYPE\tName         CPUs  Memory (MB)  Disk (GB)\r\nINSTANCETYPE\tm1.small        1          256          5\r\nINSTANCETYPE\tt1.micro        1          256          5\r\nINSTANCETYPE\tm1.medium       1          512         10\r\nINSTANCETYPE\tc1.medium       2          512         10\r\nINSTANCETYPE\tm1.large        2          512         10\r\nINSTANCETYPE\tm1.xlarge       2         1024         10\r\nINSTANCETYPE\tc1.xlarge       2         2048         10\r\nINSTANCETYPE\tm2.xlarge       2         2048         10\r\nINSTANCETYPE\tm2.2xlarge      2         4096         30\r\nINSTANCETYPE\tm3.2xlarge      4         4096         30\r\nINSTANCETYPE\tm3.xlarge       4         4096         30\r\nINSTANCETYPE\tcc1.4xlarge     8         3072         60\r\nINSTANCETYPE\tm2.4xlarge      8         4096         60\r\nINSTANCETYPE\thi1.4xlarge     8         6144        120\r\nINSTANCETYPE\tcc2.8xlarge    16         6144        120\r\nINSTANCETYPE\tcg1.4xlarge    16        12288        200\r\nINSTANCETYPE\tcr1.8xlarge    16        16384        240\r\nINSTANCETYPE\ths1.8xlarge    48       119808      24000\r\n\r\n{code}\r\n\r\n\r\nvmware broker logs:\r\n2013-09-30 12:58:00  INFO 000000045 Broker                   | disabling VMware Broker\r\n2013-09-30 12:58:00 ERROR 000000045 Topology                 | CHECK:null  arn:euca:eucalyptus:PARTI01:vmwarebroker:vmwarebroker-10.111.1.54/ ENABLED->ENABLED=NOTREADY [Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.54/eucalyptus/cluster]\r\n2013-09-30 12:58:00 DEBUG 000000678 VSphereEndpoint          | 10.111.1.133: {678} hosts query thread initiated (current ops: 0, threads: 1, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n2013-09-30 12:58:00 DEBUG 000000678 VSphereEndpoint          | 10.111.1.133: {678} query thread will poll hosts\r\n2013-09-30 12:58:00 DEBUG 000000681 VSphereEndpoint          | 10.111.1.133: {681} getting session read lock\r\n2013-09-30 12:58:00 DEBUG 000000681 VSphereEndpoint          | 10.111.1.133: {681} releasing session read lock, to upgrade\r\n2013-09-30 12:58:00 DEBUG 000000681 VSphereEndpoint          | 10.111.1.133: {681} getting session write lock\r\n2013-09-30 12:58:00 DEBUG 000000681 VSphereEndpoint          | 10.111.1.133: {681} got session write lock\r\n2013-09-30 12:58:00 DEBUG 000000681 hereConfigurationManager | polling hosts on endpoint https://10.111.1.133/sdk\r\n2013-09-30 12:58:00 DEBUG 000000679 VSphereEndpoint          | 10.111.1.133: {679} instances query thread initiated (current ops: 0, threads: 2, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n...\r\n...\r\n...\r\n2013-09-30 12:58:12 DEBUG 000000070 Hosts                    | Hosts.entrySet(): 10.111.1.14 finished.\r\n2013-09-30 12:58:13 DEBUG 000000598 Timers                   | com.eucalyptus.component.ServiceOperations$1@53ad447f: completed in 27 msec.\r\n2013-09-30 12:58:14 DEBUG 000000599 Timers                   | com.eucalyptus.component.ServiceOperations$1@47f3a840: completed in 35 msec.\r\n2013-09-30 12:58:14  INFO 000124139 Broker                   | enabling VMware Broker\r\n2013-09-30 12:58:14  INFO 000124139 BrokerInstance           | 10.111.1.180: read from DB instance i-7CB74414\r\n2013-09-30 12:58:14  INFO 000124139 BrokerInstance           | 10.111.1.116: read from DB instance i-879440AC\r\n2013-09-30 12:58:14  INFO 000124139 BrokerInstance           | 10.111.1.180: read from DB instance i-77EE446F\r\n2013-09-30 12:58:14  INFO 000124139 BrokerHostInfo           | read from DB host 10.111.1.116\r\n2013-09-30 12:58:14  INFO 000124139 BrokerHostInfo           | read from DB host 10.111.1.180\r\n2013-09-30 12:58:14  INFO 000124139 Broker                   | disabling VMware Broker\r\n2013-09-30 12:58:14 ERROR 000000887 Topology                 | ENABLE:ENABLED  arn:euca:eucalyptus:PARTI01:vmwarebroker:vmwarebroker-10.111.1.54/ DISABLED->ENABLED=NOTREADY [Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.54/eucalyptus/cluster]\r\n2013-09-30 12:58:14 ERROR 000000600 EmpyreanService          | java.util.concurrent.ExecutionException: java.lang.RuntimeException: java.util.concurrent.ExecutionException: com.eucalyptus.component.ServiceRegistrationException: Couldn't check if local CC is enabled\r\njava.util.concurrent.ExecutionException: java.lang.RuntimeException: java.util.concurrent.ExecutionException: com.eucalyptus.component.ServiceRegistrationException: Couldn't check if local CC is enabled\r\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:111)\r\n        at com.eucalyptus.empyrean.EmpyreanService.enableService(EmpyreanService.java:330)\r\n        at com.eucalyptus.empyrean.EmpyreanService$EnableService.apply(EmpyreanService.java:148)\r\n        at com.eucalyptus.empyrean.EmpyreanService$EnableService.apply(EmpyreanService.java:141)\r\n        at com.eucalyptus.component.ServiceOperations.executeOperation(ServiceOperations.java:187)\r\n        at com.eucalyptus.component.ServiceOperations.access$200(ServiceOperations.java:94)\r\n        at com.eucalyptus.component.ServiceOperations$1.call(ServiceOperations.java:166)\r\n        at com.eucalyptus.util.Timers$2.call(Timers.java:89)\r\n        at com.eucalyptus.component.ServiceOperations.dispatch(ServiceOperations.java:152)\r\n        at com.eucalyptus.ws.server.ServiceContextHandler.messageReceived(ServiceContextHandler.java:218)\r\n        at com.eucalyptus.ws.server.ServiceContextHandler.handleUpstream(ServiceContextHandler.java:204)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.server.ServiceAccessLoggingHandler.handleUpstream(ServiceAccessLoggingHandler.java:92)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\nat com.eucalyptus.ws.server.ServiceHackeryHandler.handleUpstream(ServiceHackeryHandler.java:158)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$ServiceStateChecksHandler$1.handleUpstream(Handlers.java:370)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$ComponentMessageCheckHandler.handleUpstream(Handlers.java:453)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$MessageEpochChecks$1.handleUpstream(Handlers.java:405)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$InternalOnlyHandler.handleUpstream(Handlers.java:508)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:116)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:116)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:116)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:116)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.handlers.MessageStackHandler.handleUpstream(MessageStackHandler.java:116)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.messageReceived(SimpleChannelHandler.java:142)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.server.NioServerHandler.messageReceived(NioServerHandler.java:132)\r\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\nat org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$BootstrapStateCheck.handleUpstream(Handlers.java:237)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:142)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\r\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)\r\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)\r\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:485)\r\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\r\n        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:109)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:90)\r\n        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\r\n        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\r\n        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\r\n        at org.jboss.netty.handler.execution.MemoryAwareThreadPoolExecutor$MemoryAwareRunnable.run(MemoryAwareThreadPoolExecutor.java:622)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:724)\r\nCaused by: java.lang.RuntimeException: java.util.concurrent.ExecutionException: com.eucalyptus.component.ServiceRegistrationException: Couldn't check if local CC is enabled\r\n        at com.eucalyptus.util.Exceptions.toUndeclared(Exceptions.java:236)\r\n        at com.eucalyptus.util.Exceptions.toUndeclared(Exceptions.java:245)\r\n        at com.eucalyptus.component.Topology$TopologyChange.doTopologyChange(Topology.java:1158)\r\n        at com.eucalyptus.component.Topology$TopologyChange.apply(Topology.java:1136)\r\n        at com.eucalyptus.component.Topology$Transitions.apply(Topology.java:1108)\r\n        at com.eucalyptus.component.Topology$Transitions$2.apply(Topology.java:1048)\r\n        at com.eucalyptus.component.Topology$Transitions$2.apply(Topology.java:1034)\r\nat com.eucalyptus.component.Topology$7.call(Topology.java:987)\r\n        at com.eucalyptus.component.Topology$7.call(Topology.java:975)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n        at com.eucalyptus.system.Threads$Queue.run(Threads.java:682)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n        ... 3 more\r\nCaused by: java.util.concurrent.ExecutionException: com.eucalyptus.component.ServiceRegistrationException: Couldn't check if local CC is enabled\r\n        at com.eucalyptus.util.concurrent.AbstractFuture$Sync.complete(AbstractFuture.java:376)\r\n        at com.eucalyptus.util.concurrent.AbstractFuture$Sync.setException(AbstractFuture.java:353)\r\n        at com.eucalyptus.util.concurrent.AbstractFuture.setException(AbstractFuture.java:185)\r\n        at com.eucalyptus.util.concurrent.AbstractListenableFuture.setException(AbstractListenableFuture.java:185)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.error(AtomicMarkedState.java:285)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.access$500(AtomicMarkedState.java:90)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState$ActiveTransition.fireException(AtomicMarkedState.java:508)\r\n        at com.eucalyptus.component.ServiceTransitions.processTransition(ServiceTransitions.java:365)\r\n        at com.eucalyptus.component.ServiceTransitions.access$000(ServiceTransitions.java:121)\r\n        at com.eucalyptus.component.ServiceTransitions$TransitionActions.leave(ServiceTransitions.java:410)\r\n        at com.eucalyptus.component.ServiceTransitions$TransitionActions.leave(ServiceTransitions.java:377)\r\n        at com.eucalyptus.util.fsm.TransitionImpl.leave(TransitionImpl.java:218)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState$ActiveTransition.leave(AtomicMarkedState.java:524)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.afterLeave(AtomicMarkedState.java:342)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.transition(AtomicMarkedState.java:185)\r\n        at com.eucalyptus.component.ServiceState.transition(ServiceState.java:136)\r\n        at com.eucalyptus.component.ServiceState.transition(ServiceState.java:83)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:141)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:126)\r\n        at com.eucalyptus.util.async.Futures$3$1.run(Futures.java:215)\r\n        ... 6 more\r\nCaused by: com.eucalyptus.component.ServiceRegistrationException: Couldn't check if local CC is enabled\r\n        at com.eucalyptus.broker.vmware.VMwareBrokerBuilder.enforceCCBrokerPairing(VMwareBrokerBuilder.java:97)\r\n        at com.eucalyptus.broker.vmware.VMwareBrokerBuilder.fireEnable(VMwareBrokerBuilder.java:55)\r\n        at com.eucalyptus.component.ServiceTransitions$ServiceLocalTransitionCallbacks$5.fire(ServiceTransitions.java:678)\r\nat com.eucalyptus.component.ServiceTransitions.processTransition(ServiceTransitions.java:358)\r\n        ... 18 more\r\nCaused by: java.lang.IllegalArgumentException: Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.54/eucalyptus/cluster\r\n        at com.eucalyptus.component.Partitions.lookupInternal(Partitions.java:232)\r\n        at com.eucalyptus.component.Topology.lookup(Topology.java:908)\r\n        at com.eucalyptus.broker.vmware.VMwareBrokerBuilder.enforceCCBrokerPairing(VMwareBrokerBuilder.java:90)\r\n        ... 21 more\r\n2013-09-30 12:58:14 DEBUG 000000600 Timers                   | com.eucalyptus.component.ServiceOperations$1@a3e6aee: completed in 145 msec.\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000601 Timers                   | com.eucalyptus.component.ServiceOperations$1@5668905: completed in 118 msec.\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 ServiceConfigurations    | java.lang.IllegalArgumentException: class com.eucalyptus.component.EphemeralConfiguration is not an entity\r\n2013-09-30 12:58:14 DEBUG 000000602 Timers                   | com.eucalyptus.component.ServiceOperations$1@397d0275: completed in 93 msec.\r\n2013-09-30 12:58:15 DEBUG 000000678 VSphereEndpoint          | 10.111.1.133: {678} hosts query thread initiated (current ops: 0, threads: 1, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n2013-09-30 12:58:15 DEBUG 000000678 VSphereEndpoint          | 10.111.1.133: {678} query thread will poll hosts\r\n2013-09-30 12:58:15 DEBUG 000000886 VSphereEndpoint          | 10.111.1.133: {886} getting session read lock\r\n2013-09-30 12:58:15 DEBUG 000000886 VSphereEndpoint          | 10.111.1.133: {886} releasing session read lock, to upgrade\r\n2013-09-30 12:58:15 DEBUG 000000886 VSphereEndpoint          | 10.111.1.133: {886} getting session write lock\r\n2013-09-30 12:58:15 DEBUG 000000886 VSphereEndpoint          | 10.111.1.133: {886} got session write lock\r\n2013-09-30 12:58:15 DEBUG 000000886 hereConfigurationManager | polling hosts on endpoint https://10.111.1.133/sdk\r\n2013-09-30 12:58:15 DEBUG 000000680 VSphereEndpoint          | 10.111.1.133: {680} instances query thread initiated (current ops: 0, threads: 2, connections in use: 2, upload/clone ops: 0/0, queued/running tasks: 0/0)\r\n2013-09-30 12:58:15 DEBUG 000000680 VSphereEndpoint          | 10.111.1.133: {680} query thread will poll instances\r\n2013-09-30 12:58:15 DEBUG 000000681 VSphereEndpoint          | 10.111.1.133: {681} getting session read lock\r\n2013-09-30 12:58:18 DEBUG 000000070 Hosts                    | Hosts.entrySet(): 10.111.1.54 => Host 10.111.1.54 #129 /10.111.1.54 coordinator=10.111.1.2 booted nodb(notsynced) dbpool:ok started=1380150458552 [/1.109.163.162, /1.109.163.162, /10.111.1.54, /10.111.101.107, /10.111.101.108, /10.111.101.109]\r\n2013-09-30 12:58:18 DEBUG 000000070 Hosts                    | Hosts.entrySet(): 10.111.1.54 finished.\r\n\r\nThanks,\r\n-Matt","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Broker goes OOS when changing VM types with running VMs ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i00jhz:","customfield_10000":"3_*:*_2_*:*_355016050_*|*_10001_*:*_2_*:*_320907694_*|*_10002_*:*_1_*:*_18579398_*|*_10000_*:*_1_*:*_4170153_*|*_10006_*:*_1_*:*_0_*|*_10003_*:*_1_*:*_512721171","customfield_10001":"2013-10-03T17:47:44.702-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["dmitrii(dmitrii)","mclark(mclark)","sjones(sjones)","tjcramer(tjcramer)","vasya(vasya)"],"customfield_10117":null,"environment":"10.111.1.2\tCENTOS\t6.3\t64\tREPO\t[CLC WS]\r\n10.111.1.14\tCENTOS\t6.3\t64\tREPO\t[CC00 SC00]\r\n10.111.1.46\tCENTOS\t6.3\t64\tREPO\t[NC00]\r\n10.111.1.54\tCENTOS\t6.3\t64\tREPO\t[CC01]\r\n10.111.1.99\tCENTOS\t6.3\t64\tREPO\t[SC01]\r\n10.111.1.116\tVMWARE\tESXI-5.0\t64\tREPO\t[NC01]\r\n10.111.1.180\tVMWARE\tESXI-5.0\t64\tREPO\t[NC01]","customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/54535","id":"54535","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"CLC logs...:\r\n\r\n{code}\r\n2013-09-30 14:22:13 ERROR 000000039 llerConfigurationBuilder | java.lang.IllegalArgumentException: Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.2/eucalyptus/cluster\r\n2013-09-30 14:22:13 DEBUG 000000039 llerConfigurationBuilder | java.lang.IllegalArgumentException: Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.2/eucalyptus/cluster\r\njava.lang.IllegalArgumentException: Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.2/eucalyptus/cluster\r\n        at com.eucalyptus.component.Partitions.lookupInternal(Partitions.java:232)\r\n        at com.eucalyptus.component.Topology.lookup(Topology.java:908)\r\n        at com.eucalyptus.node.NodeControllerConfigurationBuilder.fireCheck(NodeControllerConfigurationBuilder.java:139)\r\n        at com.eucalyptus.component.ServiceTransitions$ServiceLocalTransitionCallbacks$3.fire(ServiceTransitions.java:648)\r\n        at com.eucalyptus.component.ServiceTransitions.processTransition(ServiceTransitions.java:358)\r\n        at com.eucalyptus.component.ServiceTransitions.access$000(ServiceTransitions.java:121)\r\n        at com.eucalyptus.component.ServiceTransitions$TransitionActions.leave(ServiceTransitions.java:410)\r\n        at com.eucalyptus.component.ServiceTransitions$TransitionActions.leave(ServiceTransitions.java:377)\r\n        at com.eucalyptus.util.fsm.TransitionImpl.leave(TransitionImpl.java:218)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState$ActiveTransition.leave(AtomicMarkedState.java:524)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.afterLeave(AtomicMarkedState.java:342)\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.transition(AtomicMarkedState.java:185)\r\n        at com.eucalyptus.component.ServiceState.transition(ServiceState.java:136)\r\n        at com.eucalyptus.component.ServiceState.transition(ServiceState.java:83)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:141)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:126)\r\n        at com.eucalyptus.component.ServiceTransitions.executeTransition(ServiceTransitions.java:315)\r\n        at com.eucalyptus.component.ServiceTransitions.pathTo(ServiceTransitions.java:181)\r\n        at com.eucalyptus.component.Topology$TopologyChange.doTopologyChange(Topology.java:1145)\r\n        at com.eucalyptus.component.Topology$TopologyChange.apply(Topology.java:1136)\r\n        at com.eucalyptus.component.Topology$Transitions.apply(Topology.java:1108)\r\n        at com.eucalyptus.component.Topology$Transitions.apply(Topology.java:1021)\r\n        at com.eucalyptus.component.Topology$7.call(Topology.java:987)\r\n        at com.eucalyptus.component.Topology$7.call(Topology.java:975)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n        at com.eucalyptus.system.Threads$Queue.run(Threads.java:682)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:724)\r\n2013-09-30 14:22:13 ERROR 000000039 Topology                 | START:DISABLED  arn:euca:bootstrap:PARTI01:node:10.111.1.180/ NOTREADY->DISABLED=NOTREADY [Provided compId is partitioned: arn:euca:eucalyptus::cluster:10.111.1.2/eucalyptus/cluster]\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-30T16:23:08.761-0500","updated":"2013-09-30T16:23:08.761-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/54538","id":"54538","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Just noting that the system was recoverable by restarting the CLC. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-09-30T17:38:42.468-0500","updated":"2013-09-30T17:38:42.468-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/54790","id":"54790","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"I did some manual testing in attempt to recreate this and was not successful. Specifically, no changes to the VM Types that I tried resulted in any state changes of the CC or the VB. (The epoch did not change at all.)\r\n\r\n{code}\r\n# euca-describe-services | egrep '(CC|broker)'\r\nSERVICE cluster         PARTI00         CC_148          ENABLED         39      http://10.111.5.148:8774/axis2/services/EucalyptusCC    arn:euca:eucalyptus:PARTI00:cluster:CC_148/\r\nSERVICE vmwarebroker    PARTI00         vmwarebroker-10.111.5.148       ENABLED         39      http://10.111.5.148:8773/services/VMwareBroker  arn:euca:eucalyptus:PARTI00:vmwarebroker:vmwarebroker-10.111.5.148/\r\n{code}\r\n\r\nMy setup, however, was more modest than [~mclark]'s. I only had one ESXi node in a single cluster. Perhaps the problem has something to do with multiple clusters or multiple nodes?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-10-03T17:47:44.702-0500","updated":"2013-10-03T17:48:06.853-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/55128","id":"55128","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"body":"With additional testing on a two-cluster two-hypervisor setup, I was able to reproduce the problem by\r\n\r\n* running 1 instance on one of the clusters with m3.xlarge (defined as 4 / 4096 / 30)\r\n* a couple seconds later, redefining m3.xlarge to be 4 / 4096 / 60\r\n\r\n{code}\r\neuca-run-instances emi-E0573DAC -t m3.xlarge -n 1 -z PARTI00\r\neuca-modify-instance-type -d 60 -m 4096 m3.xlarge\r\n{code}\r\n\r\nIn one case, the cluster with no instances immediately went to NOTREADY. In another case, both clusters went to NOTREADY. I've run instances on both KVM and VMware clusters, so that does not seem to be relevant. It is not clear whether \"filling up\" the cluster with instances is relevant (in one case, the cluster that went to NOTREADY had two slots free, while the READY cluster had one slot, which got used for the instance).\r\n\r\nThe relevant bit from eucalyptus-cloud.log is:\r\n\r\n{code}\r\n2013-10-07 15:49:20 DEBUG 000075918 Nodes                    | Found service status for 10.111.5.12: ENABLED\r\n2013-10-07 15:49:20 DEBUG 000001143 llerConfigurationBuilder | Found service status for 10.111.5.12: ENABLED\r\n2013-10-07 15:49:20 ERROR 000076151 VmTypes                  | Failed to reset availability for cluster: ServiceConfiguration cluster arn:euca:eucalyptus:PARTI00:cluster:CC_7/ 10.111.5.7:8774:/axis2/services/EucalyptusCC:host-local:ENABLED because of com.eucalyptus.util.fsm.ExistingTransitionException: Transition request state=ENABLED_NET rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI00:cluster:CC_7/:state=ENABLED_RSC:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_7/ #1165363 ENABLED_NET ActiveTransition name=ENABLED_NET from=ENABLED_RSC/false to=ENABLED_NET/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@28237864 id=1165363 startTime=Mon Oct 07 15:49:20 PDT 2013\r\n2013-10-07 15:49:20 DEBUG 000076151 VmTypes                  | Failed to reset availability for cluster: ServiceConfiguration cluster arn:euca:eucalyptus:PARTI00:cluster:CC_7/ 10.111.5.7:8774:/axis2/services/EucalyptusCC:host-local:ENABLED because of com.eucalyptus.util.fsm.ExistingTransitionException: Transition request state=ENABLED_NET rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI00:cluster:CC_7/:state=ENABLED_RSC:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_7/ #1165363 ENABLED_NET ActiveTransition name=ENABLED_NET from=ENABLED_RSC/false to=ENABLED_NET/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@28237864 id=1165363 startTime=Mon Oct 07 15:49:20 PDT 2013\r\ncom.eucalyptus.component.Faults$CheckException: com.eucalyptus.util.fsm.ExistingTransitionException: Transition request state=ENABLED_NET rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI00:cluster:CC_7/:state=ENABLED_RSC:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_7/ #1165363 ENABLED_NET ActiveTransition name=ENABLED_NET from=ENABLED_RSC/false to=ENABLED_NET/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@28237864 id=1165363 startTime=Mon Oct 07 15:49:20 PDT 2013\r\n        at com.eucalyptus.component.Faults.chain(Faults.java:498)\r\n        at com.eucalyptus.component.Faults.failure(Faults.java:518)\r\n        at com.eucalyptus.cluster.Cluster.check(Cluster.java:1338)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.apply(VmTypes.java:130)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.apply(VmTypes.java:123)\r\n        at com.google.common.collect.Iterators.all(Iterators.java:755)\r\n        at com.google.common.collect.Iterables.all(Iterables.java:632)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.reset(VmTypes.java:139)\r\n        at com.eucalyptus.vmtypes.VmTypes.update(VmTypes.java:159)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$2.apply(VmTypesManager.java:151)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$2.apply(VmTypesManager.java:134)\r\n        at com.eucalyptus.entities.Entities$TransactionalFunction.apply(Entities.java:1169)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$4.<init>(VmTypesManager.java:170)\r\n        at com.eucalyptus.vmtypes.VmTypesManager.modifyVmType(VmTypesManager.java:168)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        ....\r\nCaused by: java.util.concurrent.ExecutionException: com.eucalyptus.util.fsm.ExistingTransitionException: Transition request state=ENABLED_NET rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI00:cluster:CC_7/:state=ENABLED_RSC:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_7/ #1165363 ENABLED_NET ActiveTransition name=ENABLED_NET from=ENABLED_RSC/false to=ENABLED_NET/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@28237864 id=1165363 startTime=Mon Oct 07 15:49:20 PDT 2013\r\n        at com.eucalyptus.util.concurrent.AbstractFuture$Sync.complete(AbstractFuture.java:376)\r\n        at com.eucalyptus.util.concurrent.AbstractFuture$Sync.setException(AbstractFuture.java:353)\r\n        at com.eucalyptus.util.concurrent.AbstractFuture.setException(AbstractFuture.java:185)\r\n        at com.eucalyptus.util.concurrent.AbstractListenableFuture.setException(AbstractListenableFuture.java:185)\r\n        at com.eucalyptus.util.async.Futures$3$1.run(Futures.java:225)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:166)\r\n        ... 3 more\r\nCaused by: com.eucalyptus.util.fsm.ExistingTransitionException: Transition request state=ENABLED_NET rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI00:cluster:CC_7/:state=ENABLED_RSC:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI00:cluster:CC_7/ #1165363 ENABLED_NET ActiveTransition name=ENABLED_NET from=ENABLED_RSC/false to=ENABLED_NET/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@28237864 id=1165363 startTime=Mon Oct 07 15:49:20 PDT 2013\r\n        at com.eucalyptus.util.fsm.AtomicMarkedState.transition(AtomicMarkedState.java:172)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:141)\r\n        at com.eucalyptus.util.fsm.Automata$1.call(Automata.java:126)\r\n        at com.eucalyptus.util.async.Futures$3.call(Futures.java:194)\r\n        at com.eucalyptus.util.async.Futures$3.call(Futures.java:181)\r\n        at com.eucalyptus.util.async.Futures$3.call(Futures.java:194)\r\n        at com.eucalyptus.util.async.Futures$3.call(Futures.java:181)\r\n        at com.eucalyptus.cluster.Cluster.check(Cluster.java:1321)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.apply(VmTypes.java:130)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.apply(VmTypes.java:123)\r\n        at com.google.common.collect.Iterators.all(Iterators.java:755)\r\n        at com.google.common.collect.Iterables.all(Iterables.java:632)\r\n        at com.eucalyptus.vmtypes.VmTypes$ClusterAvailability.reset(VmTypes.java:139)\r\n        at com.eucalyptus.vmtypes.VmTypes.update(VmTypes.java:159)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$2.apply(VmTypesManager.java:151)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$2.apply(VmTypesManager.java:134)\r\n        at com.eucalyptus.entities.Entities$TransactionalFunction.apply(Entities.java:1169)\r\n        at com.eucalyptus.vmtypes.VmTypesManager$4.<init>(VmTypesManager.java:170)\r\n        at com.eucalyptus.vmtypes.VmTypesManager.modifyVmType(VmTypesManager.java:168)\r\n        ....\r\n2013-10-07 15:49:20 ERROR 000000024 Topology                 | CHECK:null  arn:euca:eucalyptus:PARTI01:cluster:CC_13/ ENABLED->ENABLED=NOTREADY [Transition re\r\nquest state=ENABLED_ADDRS rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI01:cluster:CC_13/:state=ENABLED_SERVICE_CHECK:mark=tr\r\nue:transition=TRANSITION arn:euca:eucalyptus:PARTI01:cluster:CC_13/ #1165366 ENABLED_ADDRS ActiveTransition name=ENABLED_ADDRS from=ENABLED_SERVICE_CHECK/fals\r\ne to=ENABLED_ADDRS/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@e153d56 id=1165366 startTime=Mon Oct 07 15:49:20 PDT 2013]\r\n2013-10-07 15:49:20  INFO 000000028 setup_db                 | Postgres command : '/usr/pgsql-9.1//bin/pg_ctl' 'status' '-D//var/lib/eucalyptus/db/data'\r\n2013-10-07 15:49:20  INFO 000000028 setup_db                 | stdout: pg_ctl: server is running (PID: 12244)\r\n2013-10-07 15:49:20  INFO 000000028 setup_db                 | stdout: /usr/pgsql-9.1/bin/postgres \"-D\" \"/var/lib/eucalyptus/db/data\" \"-h0.0.0.0/0\" \"-p8777\" \"\r\n-i\"\r\n2013-10-07 15:49:20 DEBUG 000000016 adBalancerASGroupCreator | Load balancer EMI property is unset.  \"\r\n                          |               + \"where the emi should point to the image provided in the eucalyptus-load-balancer-image package.\" \r\n2013-10-07 15:49:20 ERROR 000000036 Topology                 | START:DISABLED  arn:euca:eucalyptus:PARTI01:cluster:CC_13/ NOTREADY->DISABLED=NOTREADY [Transit\r\nion request state=PENDING rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI01:cluster:CC_13/:state=ENABLED_SERVICE_CHECK:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI01:cluster:CC_13/ #1165366 ENABLED_ADDRS ActiveTransition name=ENABLED_ADDRS from=ENABLED_SERVICE_CHECK/false to=ENABLED_ADDRS/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@e153d56 id=1165366 startTime=Mon Oct 07 15:49:20 PDT 2013]\r\n2013-10-07 15:49:20 DEBUG 000000026 adBalancerASGroupCreator | Load balancer EMI property is unset.  \"\r\n                          |               + \"where the emi should point to the image provided in the eucalyptus-load-balancer-image package.\" \r\n2013-10-07 15:49:20 ERROR 000000030 Topology                 | START:DISABLED  arn:euca:eucalyptus:PARTI01:cluster:CC_13/ NOTREADY->DISABLED=NOTREADY [Transition request state=PENDING rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI01:cluster:CC_13/:state=ENABLED_SERVICE_CHECK:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI01:cluster:CC_13/ #1165366 ENABLED_ADDRS ActiveTransition name=ENABLED_ADDRS from=ENABLED_SERVICE_CHECK/false to=ENABLED_ADDRS/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@e153d56 id=1165366 startTime=Mon Oct 07 15:49:20 PDT 2013]\r\n2013-10-07 15:49:20 DEBUG 000000014 adBalancerASGroupCreator | Load balancer EMI property is unset.  \"\r\n                          |               + \"where the emi should point to the image provided in the eucalyptus-load-balancer-image package.\" \r\n2013-10-07 15:49:20 ERROR 000000039 Topology                 | START:DISABLED  arn:euca:eucalyptus:PARTI01:cluster:CC_13/ NOTREADY->DISABLED=NOTREADY [Transition request state=PENDING rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI01:cluster:CC_13/:state=ENABLED_SERVICE_CHECK:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI01:cluster:CC_13/ #1165366 ENABLED_ADDRS ActiveTransition name=ENABLED_ADDRS from=ENABLED_SERVICE_CHECK/false to=ENABLED_ADDRS/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@e153d56 id=1165366 startTime=Mon Oct 07 15:49:20 PDT 2013]\r\n2013-10-07 15:49:20 DEBUG 000000044 adBalancerASGroupCreator | Load balancer EMI property is unset.  \"\r\n                          |               + \"where the emi should point to the image provided in the eucalyptus-load-balancer-image package.\" \r\n2013-10-07 15:49:20 ERROR 000000041 Topology                 | START:DISABLED  arn:euca:eucalyptus:PARTI01:cluster:CC_13/ NOTREADY->DISABLED=NOTREADY [Transition request state=PENDING rejected because of an ongoing transition: State:name=arn:euca:eucalyptus:PARTI01:cluster:CC_13/:state=ENABLED_SERVICE_CHECK:mark=true:transition=TRANSITION arn:euca:eucalyptus:PARTI01:cluster:CC_13/ #1165366 ENABLED_ADDRS ActiveTransition name=ENABLED_ADDRS from=ENABLED_SERVICE_CHECK/false to=ENABLED_ADDRS/false error=NOTREADY action=com.eucalyptus.cluster.Cluster$Refresh$1@e153d56 id=1165366 startTime=Mon Oct 07 15:49:20 PDT 2013]\r\n2013-10-07 15:49:20 DEBUG 000000029 adBalancerASGroupCreator | Load balancer EMI property is unset.  \"\r\n{code}\r\n\r\nIn the example above, I ran the instance on PARTI00 and CC for PARTI01 went to NOTREADY.\r\n\r\nAs, I believe, has been mentioned, the condition is permanent (CC will remain in NOTREADY) until the CLC is restarted.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-10-07T19:12:54.413-0500","updated":"2013-10-07T19:12:54.413-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/55139","id":"55139","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"Reproduced on a setup with a single kvm cluster by running an instance and then modifying instance types until cluster becomes NOTREADY:\r\n\r\n{code}\r\n# euca-run-instances emi-92A63910\r\nRESERVATION\tr-E7504292\t418969187789\tdefault\r\nINSTANCE\ti-96083FBF\temi-92A63910\t0.0.0.0\t0.0.0.0\tpending\t\t0\t\tm1.small\t2013-10-08T01:24:42.418Z\tPARTI00\teki-0B123B29\teri-D2913A0B\t\tmonitoring-disabled\t0.0.0.0\t0.0.0.0\t\t\tinstance-store\t\t\t\t\tparavirtualized\t\t\t\t\t\t\r\n# for N in {1..100}; do euca-modify-instance-type -d 3$((N%2)) m3.2xlarge; euca-describe-services CC_42; sleep 0.1; done\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_42          \tENABLED   \t32  \thttp://10.111.1.42:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_42/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_42          \tENABLED   \t32  \thttp://10.111.1.42:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_42/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_42          \tENABLED   \t32  \thttp://10.111.1.42:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_42/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_42          \tNOTREADY  \t32  \thttp://10.111.1.42:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_42/\r\n..........\r\n{code}\r\n\r\nYou can manually recover the cluster by modifying the service (might need to run more than once):\r\n\r\n{code}\r\n# euca-modify-service -s INITIALIZED CC_42; euca-modify-service -s LOADED CC_42; euca-modify-service -s ENABLED CC_42\r\nRESPONSE true\r\nRESPONSE true\r\nRESPONSE true\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-07T20:43:51.666-0500","updated":"2013-10-07T20:43:51.666-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/55206","id":"55206","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~decker], please review a possible fix for this issue in commit \"ba8da39590d9aa5a0e6921a6e19a3ef555d79194\" (eucalyptus).\r\n\r\nThe above commit causes the following behaviour:\r\n\r\n{code}\r\n#  for N in {1..100}; do euca-modify-instance-type -d 3$((N%2)) m3.2xlarge; euca-describe-services CC_34; sleep 0.1; done\r\n............\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tENABLED   \t31  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tENABLED   \t31  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tENABLED   \t31  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tNOTREADY  \t31  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tNOTREADY  \t31  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tDISABLED  \t33  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tDISABLED  \t33  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t31\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tDISABLED  \t33  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\nINSTANCETYPE\tm3.2xlarge\t4\t4096\t30\r\nSERVICE\tcluster        \tPARTI00        \tCC_34          \tENABLED   \t33  \thttp://10.111.5.34:8774/axis2/services/EucalyptusCC\tarn:euca:eucalyptus:PARTI00:cluster:CC_34/\r\n{code}\r\n\r\nSo the cluster controller still moves to NOTREADY, but will quickly recover. Not sure if this fix will address the originally reported broker issue.\r\n\r\nIf this is sufficient to address this issue then we should move it to a EUCA issue, else I can create a new issue for the fix (if the fix is suitable for 3.4)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-08T11:56:13.770-0500","updated":"2013-10-08T11:56:13.770-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/55210","id":"55210","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones], this is a quite acceptable solution to me.   Thanks!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-08T12:25:04.503-0500","updated":"2013-10-08T12:25:04.503-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/24401/comment/55867","id":"55867","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Verified by running \r\n{code}\r\nfor N in {1..100}; do euca-modify-instance-type -d 3$((N%3)) m2.2xlarge; euca-describe-services CC_XXX; sleep 0.1; done\r\n{code}\r\non KVM and VMware based setups.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-10-14T15:54:34.504-0500","updated":"2013-10-14T15:54:34.504-0500"}],"maxResults":8,"total":8,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-7797/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}