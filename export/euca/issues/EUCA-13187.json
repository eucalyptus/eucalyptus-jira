{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"54109","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109","key":"EUCA-13187","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18601","id":"18601","description":"Eucalyptus 4.4.1","name":"4.4.1","archived":false,"released":true,"releaseDate":"2017-05-09"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10311":null,"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2017-04-21T11:08:12.744-0500","customfield_10308":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13187/watchers","watchCount":3,"isWatching":false},"lastViewed":null,"created":"2017-02-01T19:35:48.641-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2017-03-20T15:55:16.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/18100","id":"18100","description":"Eucalyptus 4.4.0","name":"4.4.0","archived":false,"released":true,"releaseDate":"2017-03-07"}],"issuelinks":[{"id":"51600","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/51600","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"57700","key":"EUCA-13367","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/57700","fields":{"summary":"VM type availability may be incorrect while VMs of different type are in pending","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/4","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/minor.svg","name":"Minor","id":"4"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-04-21T12:09:00.655-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10010","id":"10010","name":"Node Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"It appears that the cloud may be accounting for vm types incorrectly when using PV images. \r\nIn the following example the cloud is decrementing the availability for a given vmtype by 2 (instead of one) for Paravirtualized VMs, for HVM VMs the cloud is decrementing the availability by 1. \r\n\r\nExample showing vm availability for m1.smalls decrementing by 2 instead of 1 when using a PV image...\r\n{code}\r\nIn [265]: user.ec2.show_images(image)\r\n[2017-02-01 17:30:40,618][INFO][EC2ops(admin:testrunner)]: \r\n+---------------------------------------------------------------------------------------------+\r\n|IMAGE ID: emi-224dd80e,    IMAGE NAME:precise-server-cloud_by_eutester_1                     |\r\n+---------------------------------------------------------------------------------------------+\r\n|+-----------+------+------------+------------+------------+--------+--------------+---------+|\r\n|| VIRT TYPE |PUBLIC|  OWNER ID  | KERNEL ID  | RAMDISK ID |PLATFORM|ROOT DEV TYPE |  STATE  ||\r\n|+-----------+------+------------+------------+------------+--------+--------------+---------+|\r\n||paravirtual| True |000776053712|eki-37e55bb3|eri-c21c183e| LINUX  |instance-store|available||\r\n|+-----------+------+------------+------------+------------+--------+--------------+---------+|\r\n+---------------------------------------------------------------------------------------------+\r\n\r\nIn [266]: all_vms = tc.admin.ec2.get_instances()\r\n\r\nIn [267]: tc.admin.ec2.show_instances(all_vms)\r\n[2017-02-01 17:22:35,464][INFO][EC2ops(admin:eucalyptus)]: \r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n|INSTANCE ID          |INSTANCE IMAGE      |INSTANCE STATE     |INSTANCE NETWORK INFO:                                                      |\r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n|ID: i-b26cecc5       |EMI: emi-b38b2ce7   |STATE: running     |NODE:10.111.5.188     KEYPAIR:None                                          |\r\n|TYPE: m1.small       |OS: linux           |AGE: 230           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|RES: None            |VIRT: HVM           |ZONE: one          ||    VPC     |     SUBNET    |  SEC GRPS |P|    PRIV IP    |     PUB IP    ||\r\n|ACCOUNT ID:          |IMAGE NAME:         |ROOTDEV:           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|???                  |eucalyptus-service..|instance-store     ||vpc-0bba02af|subnet-bfe75d07|sg-2a61e8fb|N|  172.31.15.60 | 10.116.161.19 ||\r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n\r\nIn [268]: tc.sysadmin.show_nodes()\r\n[2017-02-01 17:23:15,203][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+----+------------+-------+-----------------------------------------------------------+\r\n|ZONE| NODE NAME  | STATE |                         INSTANCES                         |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n|one |10.111.5.188|ENABLED|i-b26cecc5(running,       m1.small,    instance-store  )   |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n\r\n\r\nIn [269]: tc.admin.ec2.show_vm_types()\r\n[2017-02-01 17:23:30,930][INFO][EC2ops(admin:eucalyptus)]: \r\n----------------------------------------------------------------------\r\n NAME        CPU DISK  RAM    ENI ZONE (AVAILABILE/MAX)               \r\n----------------------------------------------------------------------\r\n m1.small    1   5     256    2    zone: one  (11/12)                 \r\n----------------------------------------------------------------------\r\n t1.micro    1   5     256    2    zone: one  (11/12)                 \r\n----------------------------------------------------------------------\r\n m1.medium   1   10    512    2    zone: one  (5/6)                   \r\n----------------------------------------------------------------------\r\n c1.medium   2   10    512    2    zone: one  (5/6)                   \r\n----------------------------------------------------------------------\r\n m1.large    2   10    512    3    zone: one  (5/6)                   \r\n----------------------------------------------------------------------\r\n m1.xlarge   2   10    1024   4    zone: one  (5/6)                   \r\n----------------------------------------------------------------------\r\n c1.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m3.xlarge   4   15    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.2xlarge  2   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n m3.2xlarge  4   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n cc1.4xlarge 8   60    3072   4    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n m2.4xlarge  8   60    4096   8    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n hi1.4xlarge 8   120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cc2.8xlarge 16  120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cg1.4xlarge 16  200   12288  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cr1.8xlarge 16  240   16384  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n hs1.8xlarge 48  24000 119808 8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n\r\n\r\nIn [270]: ins = user.ec2.run_image(image=image, keypair=key, zone='one', group=group, vmtype='m1.small')[0]\r\n\r\nIn [271]: tc.sysadmin.show_nodes()\r\n[2017-02-01 17:25:23,480][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+----+------------+-------+-----------------------------------------------------------+\r\n|ZONE| NODE NAME  | STATE |                         INSTANCES                         |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n|one |10.111.5.188|ENABLED|  i-5946e3d1(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-b26cecc5(running,       m1.small,    instance-store  ) |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n\r\n\r\nIn [272]: tc.admin.ec2.show_vm_types()\r\n[2017-02-01 17:25:27,229][INFO][EC2ops(admin:eucalyptus)]: \r\n----------------------------------------------------------------------\r\n NAME        CPU DISK  RAM    ENI ZONE (AVAILABILE/MAX)               \r\n----------------------------------------------------------------------\r\n m1.small    1   5     256    2    zone: one  (9/12)                  \r\n----------------------------------------------------------------------\r\n t1.micro    1   5     256    2    zone: one  (9/12)                  \r\n----------------------------------------------------------------------\r\n m1.medium   1   10    512    2    zone: one  (4/6)                   \r\n----------------------------------------------------------------------\r\n c1.medium   2   10    512    2    zone: one  (4/6)                   \r\n----------------------------------------------------------------------\r\n m1.large    2   10    512    3    zone: one  (4/6)                   \r\n----------------------------------------------------------------------\r\n m1.xlarge   2   10    1024   4    zone: one  (4/6)                   \r\n----------------------------------------------------------------------\r\n c1.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m3.xlarge   4   15    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.2xlarge  2   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n m3.2xlarge  4   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n cc1.4xlarge 8   60    3072   4    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n m2.4xlarge  8   60    4096   8    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n hi1.4xlarge 8   120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cc2.8xlarge 16  120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cg1.4xlarge 16  200   12288  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cr1.8xlarge 16  240   16384  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n hs1.8xlarge 48  24000 119808 8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n\r\n\r\nIn [273]: ins2 = user.ec2.run_image(image=image, keypair=key, zone='one', group=group, vmtype='m1.small')[0]\r\n\r\nIn [274]: tc.sysadmin.show_nodes()\r\n[2017-02-01 17:26:50,459][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+----+------------+-------+-----------------------------------------------------------+\r\n|ZONE| NODE NAME  | STATE |                         INSTANCES                         |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n|one |10.111.5.188|ENABLED|  i-1ec117a9(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-5946e3d1(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-b26cecc5(running,       m1.small,    instance-store  ) |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n\r\n\r\nIn [275]: tc.admin.ec2.show_vm_types()\r\n[2017-02-01 17:26:54,976][INFO][EC2ops(admin:eucalyptus)]: \r\n----------------------------------------------------------------------\r\n NAME        CPU DISK  RAM    ENI ZONE (AVAILABILE/MAX)               \r\n----------------------------------------------------------------------\r\n m1.small    1   5     256    2    zone: one  (7/12)                  \r\n----------------------------------------------------------------------\r\n t1.micro    1   5     256    2    zone: one  (7/12)                  \r\n----------------------------------------------------------------------\r\n m1.medium   1   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.medium   2   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.large    2   10    512    3    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.xlarge   2   10    1024   4    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m3.xlarge   4   15    2048   4    zone: one  (2/3)                   \r\n----------------------------------------------------------------------\r\n m2.2xlarge  2   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n m3.2xlarge  4   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n cc1.4xlarge 8   60    3072   4    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n m2.4xlarge  8   60    4096   8    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n hi1.4xlarge 8   120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cc2.8xlarge 16  120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cg1.4xlarge 16  200   12288  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cr1.8xlarge 16  240   16384  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n hs1.8xlarge 48  24000 119808 8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n\r\n{code}\r\n\r\n\r\nNow using an HVM image decrementing by 1..\r\n\r\n{code}\r\nIn [280]: user.ec2.show_images(image_HVM)\r\n[2017-02-01 17:31:11,930][INFO][EC2ops(admin:testrunner)]: \r\n+--------------------------------------------------------------------------------------+\r\n|IMAGE ID: emi-d69d7ca8,    IMAGE NAME:preciseservercloudimgamd64disk1img-1485206751X  |\r\n+--------------------------------------------------------------------------------------+\r\n|+---------+------+------------+---------+----------+--------+--------------+---------+|\r\n||VIRT TYPE|PUBLIC|  OWNER ID  |KERNEL ID|RAMDISK ID|PLATFORM|ROOT DEV TYPE |  STATE  ||\r\n|+---------+------+------------+---------+----------+--------+--------------+---------+|\r\n||   hvm   | True |000183146277|   None  |   None   | LINUX  |instance-store|available||\r\n|+---------+------+------------+---------+----------+--------+--------------+---------+|\r\n+--------------------------------------------------------------------------------------+\r\n\r\n\r\nIn [281]: tc.admin.ec2.show_vm_types()\r\n[2017-02-01 17:32:44,175][INFO][EC2ops(admin:eucalyptus)]: \r\n----------------------------------------------------------------------\r\n NAME        CPU DISK  RAM    ENI ZONE (AVAILABILE/MAX)               \r\n----------------------------------------------------------------------\r\n m1.small    1   5     256    2    zone: one  (7/12)                  \r\n----------------------------------------------------------------------\r\n t1.micro    1   5     256    2    zone: one  (7/12)                  \r\n----------------------------------------------------------------------\r\n m1.medium   1   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.medium   2   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.large    2   10    512    3    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.xlarge   2   10    1024   4    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m3.xlarge   4   15    2048   4    zone: one  (2/3)                   \r\n----------------------------------------------------------------------\r\n m2.2xlarge  2   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n m3.2xlarge  4   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n cc1.4xlarge 8   60    3072   4    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n m2.4xlarge  8   60    4096   8    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n hi1.4xlarge 8   120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cc2.8xlarge 16  120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cg1.4xlarge 16  200   12288  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cr1.8xlarge 16  240   16384  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n hs1.8xlarge 48  24000 119808 8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n\r\n\r\nIn [282]: tc.sysadmin.show_nodes()\r\n[2017-02-01 17:32:50,696][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+----+------------+-------+-----------------------------------------------------------+\r\n|ZONE| NODE NAME  | STATE |                         INSTANCES                         |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n|one |10.111.5.188|ENABLED|  i-1ec117a9(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-5946e3d1(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-b26cecc5(running,       m1.small,    instance-store  ) |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n\r\n\r\nIn [283]: ins = user.ec2.run_image(image=image_HVM, keypair=key, zone='one', group=group, vmtype='m1.small')[0]\r\n\r\nIn [284]: tc.sysadmin.show_nodes()\r\n[2017-02-01 17:33:56,569][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+----+------------+-------+-----------------------------------------------------------+\r\n|ZONE| NODE NAME  | STATE |                         INSTANCES                         |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n|one |10.111.5.188|ENABLED|  i-810da89e(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-1ec117a9(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-5946e3d1(running,       m1.small,    instance-store  ) |\r\n|    |            |       |  i-b26cecc5(running,       m1.small,    instance-store  ) |\r\n+----+------------+-------+-----------------------------------------------------------+\r\n\r\n\r\nIn [285]: tc.admin.ec2.show_vm_types()\r\n[2017-02-01 17:33:59,305][INFO][EC2ops(admin:eucalyptus)]: \r\n----------------------------------------------------------------------\r\n NAME        CPU DISK  RAM    ENI ZONE (AVAILABILE/MAX)               \r\n----------------------------------------------------------------------\r\n m1.small    1   5     256    2    zone: one  (6/12)                  \r\n----------------------------------------------------------------------\r\n t1.micro    1   5     256    2    zone: one  (6/12)                  \r\n----------------------------------------------------------------------\r\n m1.medium   1   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.medium   2   10    512    2    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.large    2   10    512    3    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n m1.xlarge   2   10    1024   4    zone: one  (3/6)                   \r\n----------------------------------------------------------------------\r\n c1.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m2.xlarge   2   10    2048   4    zone: one  (3/3)                   \r\n----------------------------------------------------------------------\r\n m3.xlarge   4   15    2048   4    zone: one  (2/3)                   \r\n----------------------------------------------------------------------\r\n m2.2xlarge  2   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n m3.2xlarge  4   30    4096   4    zone: one  (1/1)                   \r\n----------------------------------------------------------------------\r\n cc1.4xlarge 8   60    3072   4    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n m2.4xlarge  8   60    4096   8    zone: one  (0/1)                   \r\n----------------------------------------------------------------------\r\n hi1.4xlarge 8   120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cc2.8xlarge 16  120   6144   8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cg1.4xlarge 16  200   12288  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n cr1.8xlarge 16  240   16384  8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n hs1.8xlarge 48  24000 119808 8    zone: one  (0/0)                   \r\n----------------------------------------------------------------------\r\n\r\n{code}\r\n\r\n\r\nNode controller is reporting the following resources...\r\n\r\n{code}\r\nIn [295]: node = tc.sysadmin.get_hosts_for_node_controllers()[0]\r\n\r\nIn [296]: tc.sysadmin.show_hosts(node)\r\n[2017-02-01 17:47:32,515][INFO][UserContext:000776053712::eucalyptus::admin]: \r\n+--------------------------------+--------------------------------------------------------------+\r\n| HOST:10.111.5.188              | EUCALYPTUS SERVICES:[ NC ]                                   |\r\n+--------------------------------+--------------------------------------------------------------+\r\n| Euca Versions:                 |   TYPE    NAME            STATE      CLUSTER                 |\r\n| Cloud: 4.4.0                   |   node    10.111.5.188    ENABLED      one                   |\r\n| 2ools: 3.4.0-5-g915fa50        | ----------------------------------------------------         |\r\n| Hostname:                      |   INSTANCES    STATE:    VMTYPE:    ROOT_DEV:                |\r\n| 10.111.5.188                   | ----------------------------------------------------         |\r\n| Mem:                           |   i-810da89e   running   m1.small   instance-store           |\r\n|  Used:       3651  46.7%       |   i-1ec117a9   running   m1.small   instance-store           |\r\n|  Free:       204   2.6%        |   i-5946e3d1   running   m1.small   instance-store           |\r\n|  Swap:       192   2.5%        |   i-b26cecc5   running   m1.small   instance-store           |\r\n| CPU:                           | ----------------------------------------------------         |\r\n|  #0:         5.14%             |  (\"10.111.5.188\"'s VM AVAILABILITY @ 2017-02-01 17:47:17)    |\r\n|  #1:         4.9%              |  ----------------------------------------------------------  |\r\n|  #2:         5.07%             |   VMTYPE      AVAIL  CPU(28/32) MEM(6976/8000) DISK(32/62)   |\r\n|  #3:         5.8%              |  ----------------------------------------------------------  |\r\n| DISK:                          |   m1.small    6 / 12     1      256            5             |\r\n| md0          509m 46%          |   t1.micro    6 / 12     1      256            5             |\r\n| vg01-lv_root 200g 12%          |   m1.medium   3 / 6      1      512            10            |\r\n| tmpfs        782m 0%           |   c1.medium   3 / 6      2      512            10            |\r\n| devtmpfs     3.9g 0%           |   m1.large    3 / 6      2      512            10            |\r\n|                                |   m1.xlarge   3 / 6      2      1024           10            |\r\n|                                |   c1.xlarge   3 / 3      2      2048           10            |\r\n|                                |   m2.xlarge   3 / 3      2      2048           10            |\r\n|                                |   m3.xlarge   2 / 3      4      2048           15            |\r\n|                                |   m2.2xlarge  1 / 1      2      4096           30            |\r\n|                                |   m3.2xlarge  1 / 1      4      4096           30            |\r\n|                                |   cc1.4xlarge 0 / 1      8      3072           60            |\r\n|                                |   m2.4xlarge  0 / 1      8      4096           60            |\r\n|                                |  ----------------------------------------------------------  |\r\n|                                | ------------------------------------------------------       |\r\n|                                |     HOST SERVICE   COMMAND   %CPU   %MEM   PS_UPTIME         |\r\n|                                | ------------------------------------------------------       |\r\n|                                |   eucalyptus-nc:                                             |\r\n|                                |             --->   httpd     0.5    1.3    06:40:16          |\r\n|                                | ------------------------------------------------------       |\r\n+--------------------------------+--------------------------------------------------------------+\r\n\r\n\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Incorrect accounting for cluster availability per vmtype when using PV images","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i042bb:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"3_*:*_1_*:*_425808991_*|*_5_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_73617713_*|*_10001_*:*_2_*:*_3630915475_*|*_10003_*:*_1_*:*_2661202007","customfield_10001":"2017-03-20T12:44:24.865-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_11600":["mclark(mclark)","vasya(vasya)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13187/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109/comment/119616","id":"119616","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Looks like this issue is really old. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-03-20T12:44:24.865-0500","updated":"2017-03-20T12:44:24.865-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109/comment/119629","id":"119629","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"Fixed in d48114106549.\r\n\r\nNote to QA: check PV images started before upgrade.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-03-20T19:48:41.346-0500","updated":"2017-03-20T19:48:41.346-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109/comment/120932","id":"120932","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Reverting due to the following test findings/behavior:\r\nGood:\r\n-PV and HVM instance store instances are accounted for correctly once in the running state. \r\n\r\nBad:\r\n- EBS backed instances are not accounted for once in the running state. They appear to be accounted for briefly in the pending state. \r\n- During pending state it appears only half of the node's are taken into account for availability. For example I have 2 NCs with 12 m1.small slots each totally 24 m1.small slots. When a single instance store VM is in pending the availability is reported as 11 not 23 or 24. Once the VM goes to running state the reported availability is 23. \r\n\r\nThanks, \r\n-M\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-20T15:02:03.319-0500","updated":"2017-04-20T15:02:03.319-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109/comment/120953","id":"120953","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~mclark], your NC has 32 over-committed cores, 62G of disk, and 7206 MB or RAM. The disk is the limiting factor, so CC reports up to 12 (62/5) possible VMs (m1.small) for each NC. The bfEBS instance does not take any disk space so you would still have the same up to 12 possible m1.small instances from each NC after starting a m1.small bfEBS instance. CLC can't do correct calculation up front for number of possible VMs so it holds a sport for each pending instance until instance goes into running state. After that the correct info about actual resources is used.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2017-04-20T18:20:18.756-0500","updated":"2017-04-20T18:20:18.756-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/54109/comment/121004","id":"121004","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Thanks [~vasya]. That makes sense with the EBS backed VMs. \r\n\r\nSeems like there still might be an issue reporting availability during a small window while VMs are in pending state as the count is briefly off by a factor of 10-11 (as shown in the test below).  ie while 1 c1.medium is running and 1 m1.small is in pending state, availability of m1.smalls should not drop by 10-11?  I've found this doesnt happen every time so looking into what/when this happens now. \r\nClosing this ticket as fixed.  I'll open/chase this issue separately. \r\n\r\nThanks!\r\n-M\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2017-04-21T11:08:03.264-0500","updated":"2017-04-21T11:08:03.264-0500"}],"maxResults":5,"total":5,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}