{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"51605","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51605","key":"EUCA-12996","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17800","id":"17800","description":"Eucalyptus 4.3.1","name":"4.3.1","archived":false,"released":true,"releaseDate":"2016-12-14"}],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"customfield_10311":null,"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2016-12-13T02:18:32.464-0600","customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12996/watchers","watchCount":3,"isWatching":false},"created":"2016-12-05T14:12:36.318-0600","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2016-12-06T10:20:57.000-0600\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/17800","id":"17800","description":"Eucalyptus 4.3.1","name":"4.3.1","archived":false,"released":true,"releaseDate":"2016-12-14"}],"customfield_11901":null,"issuelinks":[{"id":"46008","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/46008","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"49701","key":"EUCA-12868","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/49701","fields":{"summary":"CloudWatch metrics take a long time (over 30 minutes) to display data","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"46007","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/46007","type":{"id":"10101","name":"Cloners","inward":"is cloned by","outward":"clones","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10101"},"outwardIssue":{"id":"51031","key":"EUCA-12968","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51031","fields":{"summary":"Describe Sensor Callback receiving null Resource UUID causes cloudwatch to fail to receive data","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"updated":"2017-01-05T16:26:48.257-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10003","id":"10003","name":"Cluster Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"While investigating EUCA-12868 it was discovered that the DescribeSensorCallback results do not always return resource UUID for instance data.  https://eucalyptus.atlassian.net/browse/EUCA-12868?focusedCommentId=113315&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-113315\r\n\r\nThis ticket is specifically to enable CLC to work with a batch of DescribeSensor results that have one or more null Resource UUIDs. Instead of bailing on the first occurrence, it should skip data for that instance, but attempt to process the rest.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/37200","id":"37200","filename":"cfn-ubuntu-nginx-vpc.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-13T02:18:54.172-0600","size":8740,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/37200/cfn-ubuntu-nginx-vpc.json"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/36801","id":"36801","filename":"EUCA_12968_skip_sensor_resources_with_null_uuid.patch","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"created":"2016-12-05T14:12:36.976-0600","size":2043,"mimeType":"text/x-patch","content":"https://eucalyptus.atlassian.net/secure/attachment/36801/EUCA_12968_skip_sensor_resources_with_null_uuid.patch"}],"summary":"Describe Sensor Callback with null Resource UUID for one instance causes CLC to skip data for others","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dmitrii","name":"dmitrii","key":"dmitrii","accountId":"557058:1e0ea807-434b-4b54-967f-1dec4a9ede55","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/efb56b507e22d4fc0d8d5e900e5651d5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddmitrii%26avatarId%3D15900%26noRedirect%3Dtrue"},"displayName":"Dmitrii Calzago","active":false,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i040hz:","customfield_10000":"3_*:*_1_*:*_69435300_*|*_10000_*:*_1_*:*_91408227_*|*_10001_*:*_1_*:*_6119_*|*_10003_*:*_1_*:*_487506548_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2016-12-06T11:59:44.667-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dmitrii(dmitrii)","hspencer(hspencer)","sgraham(sgraham)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12996/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51605/comment/114003","id":"114003","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Trying out the fix on the cloud that showed the missing uuid problem and I'm seeing this in the logs:\r\n{code}\r\njava.lang.IllegalArgumentException:\r\nExpected: not (null or an empty string)\r\n     but: was \"\"\r\n        at com.eucalyptus.util.Parameters.checkParam(Parameters.java:47)\r\n        at com.eucalyptus.util.Parameters.checkParam(Parameters.java:33)\r\n        at com.eucalyptus.reporting.event.InstanceUsageEvent.<init>(InstanceUsageEvent.java:48)\r\n        at com.eucalyptus.cluster.callback.reporting.CloudWatchHelper$2.get(CloudWatchHelper.java:714)\r\n        at com.eucalyptus.cluster.callback.reporting.CloudWatchHelper$2.get(CloudWatchHelper.java:706)\r\n        at com.eucalyptus.cluster.callback.reporting.CloudWatchHelper.addToQueueItems(CloudWatchHelper.java:806)\r\n        at com.eucalyptus.cluster.callback.reporting.CloudWatchHelper.collectMetricData(CloudWatchHelper.java:705)\r\n        at com.eucalyptus.cluster.callback.DescribeSensorCallback.processCloudWatchStats(DescribeSensorCallback.java:104)\r\n        at com.eucalyptus.cluster.callback.DescribeSensorCallback.fire(DescribeSensorCallback.java:91)\r\n        at com.eucalyptus.reporting.modules.backend.DescribeSensorsListener$1$2.run(DescribeSensorsListener.java:139)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n{code}\r\n\r\nInvestigating","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2016-12-06T11:59:44.667-0600","updated":"2016-12-06T11:59:44.667-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51605/comment/114008","id":"114008","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Found it, the resourceUuid can be 'null' or an empty string, this seems to have resolved the issue:\r\n{code}\r\n[root@d-14 clc]# git diff\r\ndiff --git a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/DescribeSensorCallback.java b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/Descr\r\nindex 2b293b2..73c8b6f 100644\r\n--- a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/DescribeSensorCallback.java\r\n+++ b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/DescribeSensorCallback.java\r\n@@ -109,7 +109,9 @@ public class DescribeSensorCallback extends\r\n   private void processReportingStats(final DescribeSensorsResponse msg) throws Exception {\r\n     for (final SensorsResourceType sensorData : msg.getSensorsResources()) {\r\n       if (!RESOURCE_TYPE_INSTANCE.equals(sensorData.getResourceType()) ||\r\n-          !instanceIds.contains( sensorData.getResourceName( )))\r\n+          !instanceIds.contains( sensorData.getResourceName( )) ||\r\n+          sensorData.getResourceUuid( ) == null ||\r\n+          sensorData.getResourceUuid( ).isEmpty() )\r\n         continue;\r\n       \r\n       for (final MetricsResourceType metricType : sensorData.getMetrics()) {\r\ndiff --git a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/reporting/CloudWatchHelper.java b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/r\r\nindex c4470b9..2176dcb 100644\r\n--- a/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/reporting/CloudWatchHelper.java\r\n+++ b/clc/modules/cluster-manager/src/main/java/com/eucalyptus/cluster/callback/reporting/CloudWatchHelper.java\r\n@@ -664,7 +664,9 @@ public class CloudWatchHelper {\r\n \r\n     for (final SensorsResourceType sensorData : msg.getSensorsResources()) {\r\n       if (!RESOURCE_TYPE_INSTANCE.equals(sensorData.getResourceType()) ||\r\n-          !expectedInstanceIds.contains( sensorData.getResourceName()))\r\n+          !expectedInstanceIds.contains( sensorData.getResourceName()) ||\r\n+          sensorData.getResourceUuid() == null || \r\n+          sensorData.getResourceUuid().isEmpty())\r\n         continue;\r\n{code}\r\n\r\nAnd I'm seeing updates in the DB now.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2016-12-06T14:28:49.336-0600","updated":"2016-12-06T14:28:49.336-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51605/comment/114100","id":"114100","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"body":"Merged into maint-4.3\r\n{code}\r\neucalyptus/maint-4.3 611cc2f Steven Graham: EUCA-12996 - Describe Sensor Callback with null Resource UUID for one instance causes CLC to skip data for others...\r\n{code}\r\n\r\nTesting Note:\r\n - it is unlikely that QA will be able to verify this fix fully, given that it is difficult to reproduce the null resourceUuid for the instance on a node controller.\r\n - The only instances that I've seen with this null id are imaging worker instances. In these cases the null resourceUuid will be skipped, all other instances should have data.\r\n - I'd advise to verify cloudwatch functionality in general as a verification that the fix didn't break anything. \r\n\r\nIf someone was interested in trying to hunt down a null resourceUuid for an instance, the following script, run from the NC should show it:\r\n{code}\r\n#!/bin/bash\r\n\r\nexport AXIS2C_HOME=/usr/lib64/axis2c\r\nexport LD_LIBRARY_PATH=$AXIS2C_HOME/lib:$AXIS2C_HOME/modules/rampart\r\n/source/eucalyptus/node/NCclient -n localhost:8775 describeSensors | grep resource 2>&1 \r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sgraham","name":"sgraham","key":"sgraham","accountId":"557058:dab30ab9-44e7-4b70-a841-8b188c40edfc","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/a40e2a7b21096d27f2427d53d5f45fbf?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsgraham%26avatarId%3D18000%26noRedirect%3Dtrue"},"displayName":"Steven Graham","active":true,"timeZone":"US/Central"},"created":"2016-12-07T10:53:25.958-0600","updated":"2016-12-07T10:53:25.958-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/51605/comment/114300","id":"114300","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"*Eucalyptus Version*\r\n\r\n{{4.3.1-0.25170.84.20161212gita298545.el7}}\r\n\r\n*Steps*\r\n\r\n# Set up Eucalyptus 4.3.1 cloud with VPC - [hspencer-272|http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Maint-4.3/272/]\r\n# Created non-eucalyptus account\r\n# Bundled, uploaded and registered Ubuntu Xenial Cloud image\r\n# Used the linked {{cfn-ubuntu-nginx-vpc.json}} template to create an instance with monitoring enabled:\r\n{code}\r\n[root@c-19 ~]# euform-validate-template --template-file cfn-ubuntu-nginx-vpc.json --region devops-admin@\r\nDESCRIPTION\tCloudformation Example => Run instance with userdata to install Nginx Web Server in security group on VPC\r\nPARAMETER\tImageId\tfalse\t\tUbuntu Image id\r\nPARAMETER\tKeyName\tfalse\t\tUser Key Pair\r\n[root@c-19 ~]# vi cfn-ubuntu-nginx-vpc.json\r\n[root@c-19 ~]# euform-create-stack NginxServer --template-file cfn-ubuntu-nginx-vpc.json --parameter ImageId=emi-cff1ae9f --parameter KeyName=devops-admin --region devops-admin@\r\narn:aws:cloudformation::000711111104:stack/NginxServer/1212f135-8013-4452-9043-4e09cc6afd8e\r\n[root@c-19 ~]# euform-describe-stacks --region devops-admin@\r\nSTACK\tNginxServer\tCREATE_COMPLETE\t\tCloudformation Example => Run instance with userdata to install Nginx Web Server in security group on VPC\t2016-12-13T05:22:14.550Z\r\nPARAMETER\tImageId\t\temi-cff1ae9f\r\nPARAMETER\tKeyName\t\tdevops-admin\r\nOUTPUT\tInstanceId\ti-d967e053\r\nOUTPUT\tAZ\tone\r\nOUTPUT\tPublicIP\t10.116.152.118\r\n\r\n[root@c-19 ~]# euca-describe-instances --region devops-admin@\r\nRESERVATION\tr-bce7eb70\t000711111104\tNginxServer-NginxSecurityGroup-EUZP4XBBFTU96\r\nINSTANCE\ti-d967e053\temi-cff1ae9f\teuca-10-116-152-118.eucalyptus.d-20.autoqa.qa1.eucalyptus-systems.com\teuca-10-0-0-143.eucalyptus.internal\trunning\tdevops-admin\t0\t\tm1.medium\t2016-12-13T05:22:25.980Z\tone\t\t\t\tmonitoring-enabled\t10.116.152.118\t10.0.0.143\tvpc-e776c482\tsubnet-90080351\tinstance-store\t\t\t\t\thvm\t\t\tsg-a2c6e52b\t\t\t\tx86_64\r\nNETWORKINTERFACE\teni-003ed2d8\tsubnet-90080351\tvpc-e776c482\t000711111104\tin-use\t10.0.0.143\teuca-10-0-0-143.eucalyptus.internal\ttrue\r\nATTACHMENT\t\teni-attach-0995c5f4\t0\tattached\t2016-12-13T05:22:25.984Z\ttrue\r\nASSOCIATION\t10.116.152.118\t000711111104\t10.0.0.143\r\nGROUP\tsg-a2c6e52b\tNginxServer-NginxSecurityGroup-EUZP4XBBFTU96\r\nPRIVATEIPADDRESS\t10.0.0.143\teuca-10-0-0-143.eucalyptus.internal\tprimary\r\nTAG\tinstance\ti-d967e053\tApplication\tarn:aws:cloudformation::000711111104:stack/NginxServer/1212f135-8013-4452-9043-4e09cc6afd8e\r\nTAG\tinstance\ti-d967e053\taws:cloudformation:logical-id\tNginxInstance\r\nTAG\tinstance\ti-d967e053\taws:cloudformation:stack-id\tarn:aws:cloudformation::000711111104:stack/NginxServer/1212f135-8013-4452-9043-4e09cc6afd8e\r\nTAG\tinstance\ti-d967e053\taws:cloudformation:stack-name\tNginxServer\r\n{code}\r\n# After a few minutes (5+ minutes), ran {{euwatch-list-metrics}} to list metrics for the instance:\r\n{code}\r\n[root@c-19 ~]# euwatch-list-metrics -n AWS/EC2 -d InstanceId=i-d967e053 --region devops-admin@\r\nCPUUtilization\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskReadBytes\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskReadOps\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskWriteBytes\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskWriteOps\tAWS/EC2\t{InstanceId=i-d967e053}\r\nNetworkIn\tAWS/EC2\t{InstanceId=i-d967e053}\r\nNetworkOut\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed_Instance\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed_System\tAWS/EC2\t{InstanceId=i-d967e053}\r\n\r\n[root@c-19 ~]# euwatch-list-metrics --region devops-admin@\r\nCPUUtilization\tAWS/EC2\r\nCPUUtilization\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nCPUUtilization\tAWS/EC2\t{InstanceId=i-d967e053}\r\nCPUUtilization\tAWS/EC2\t{InstanceType=m1.medium}\r\nDiskReadBytes\tAWS/EC2\r\nDiskReadBytes\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nDiskReadBytes\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskReadBytes\tAWS/EC2\t{InstanceType=m1.medium}\r\nDiskReadOps\tAWS/EC2\r\nDiskReadOps\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nDiskReadOps\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskReadOps\tAWS/EC2\t{InstanceType=m1.medium}\r\nDiskWriteBytes\tAWS/EC2\r\nDiskWriteBytes\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nDiskWriteBytes\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskWriteBytes\tAWS/EC2\t{InstanceType=m1.medium}\r\nDiskWriteOps\tAWS/EC2\r\nDiskWriteOps\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nDiskWriteOps\tAWS/EC2\t{InstanceId=i-d967e053}\r\nDiskWriteOps\tAWS/EC2\t{InstanceType=m1.medium}\r\nNetworkIn\tAWS/EC2\r\nNetworkIn\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nNetworkIn\tAWS/EC2\t{InstanceId=i-d967e053}\r\nNetworkIn\tAWS/EC2\t{InstanceType=m1.medium}\r\nNetworkOut\tAWS/EC2\r\nNetworkOut\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nNetworkOut\tAWS/EC2\t{InstanceId=i-d967e053}\r\nNetworkOut\tAWS/EC2\t{InstanceType=m1.medium}\r\nStatusCheckFailed\tAWS/EC2\r\nStatusCheckFailed\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nStatusCheckFailed\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed\tAWS/EC2\t{InstanceType=m1.medium}\r\nStatusCheckFailed_Instance\tAWS/EC2\r\nStatusCheckFailed_Instance\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nStatusCheckFailed_Instance\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed_Instance\tAWS/EC2\t{InstanceType=m1.medium}\r\nStatusCheckFailed_System\tAWS/EC2\r\nStatusCheckFailed_System\tAWS/EC2\t{ImageId=emi-cff1ae9f}\r\nStatusCheckFailed_System\tAWS/EC2\t{InstanceId=i-d967e053}\r\nStatusCheckFailed_System\tAWS/EC2\t{InstanceType=m1.medium}\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-12-13T02:18:32.500-0600","updated":"2016-12-13T02:18:32.500-0600"}],"maxResults":4,"total":4,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}