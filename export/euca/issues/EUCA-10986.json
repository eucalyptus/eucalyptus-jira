{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"36700","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36700","key":"EUCA-10986","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/6","id":"6","description":"The product is working as designed.","name":"Not a Bug"},"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2015-06-18T15:39:32.421-0500","customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10986/watchers","watchCount":2,"isWatching":false},"lastViewed":null,"created":"2015-06-18T14:30:58.233-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12400":null,"customfield_12201":null,"customfield_12600":"{}","customfield_10300":null,"customfield_10102":null,"customfield_10301":null,"labels":["AWSCompat-PM"],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2015-06-18T15:39:32.439-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11503","id":"11503","name":"IAM"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12700","id":"12700","name":"OSG","description":"Object Storage Gateway"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"*Assessment*\r\n\r\nAfter federating clouds (i.e. multiple region setup), when using S3 API tools such as s3cmd, accessing resources in a nonnative region (from a credentials perspective) doesn't to work.\r\n{code}\r\n# ./s3cmd/s3cmd --config=.s3cfg-region1 --signature-v2 ls\r\nERROR: S3 error: The AWS Access Key Id you provided does not exist in our records.\r\n{code}\r\n\r\n*Signs*\r\n\r\nFollowing error can be seen on the nonnative UFS component (cloud-tracking.log):\r\n{code}\r\n2015-06-18 10:08:15 TRACE ServiceContext           | [b42c76a8-b080] :1434647295482:ServiceContext:MSG_REPLY:b42c76a8-b080-4c03-bd02-99209d009fb3:DescribeServicesResp\r\nonseType:17.366 ms\r\ncom.eucalyptus.objectstorage.exceptions.s3.InvalidAccessKeyIdException: The AWS Access Key Id you provided does not exist in our records.\r\n        at com.eucalyptus.objectstorage.pipeline.auth.ObjectStorageLoginModule.authenticate(ObjectStorageLoginModule.java:98)\r\n        at com.eucalyptus.objectstorage.pipeline.auth.ObjectStorageLoginModule.authenticate(ObjectStorageLoginModule.java:80)\r\n        at com.eucalyptus.auth.api.BaseLoginModule.login(BaseLoginModule.java:151)\r\n        at sun.reflect.GeneratedMethodAccessor228.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:606)\r\n        at javax.security.auth.login.LoginContext.invoke(LoginContext.java:762)\r\n        at javax.security.auth.login.LoginContext.access$000(LoginContext.java:203)\r\n        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:690)\r\n        at javax.security.auth.login.LoginContext$4.run(LoginContext.java:688)\r\n        at java.security.AccessController.doPrivileged(Native Method)\r\n        at javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:687)\r\n        at javax.security.auth.login.LoginContext.login(LoginContext.java:595)\r\n        at com.eucalyptus.objectstorage.pipeline.handlers.S3Authentication.authenticateVersion2(S3Authentication.java:92)\r\n        at com.eucalyptus.objectstorage.pipeline.handlers.ObjectStorageAuthenticationHandler.handle(ObjectStorageAuthenticationHandler.java:238)\r\n        at com.eucalyptus.objectstorage.pipeline.handlers.ObjectStorageAuthenticationHandler.incomingMessage(ObjectStorageAuthenticationHandler.java:167)\r\n        at com.eucalyptus.objectstorage.pipeline.handlers.ObjectStorageAuthenticationHandler.handleUpstream(ObjectStorageAuthenticationHandler.java:178)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.messageReceived(SimpleChannelHandler.java:142)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.server.NioServerHandler.messageReceived(NioServerHandler.java:132)\r\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$BootstrapStateCheck.handleUpstream(Handlers.java:228)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.handler.stream.ChunkedWriteHandler.handleUpstream(ChunkedWriteHandler.java:142)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296)\r\n        at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:459)\r\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:536)\r\n        at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:435)\r\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.messageReceived(SimpleChannelHandler.java:142)\r\n        at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88)\r\n        at org.jboss.netty.handler.timeout.IdleStateAwareChannelHandler.handleUpstream(IdleStateAwareChannelHandler.java:36)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at org.jboss.netty.handler.timeout.IdleStateHandler.messageReceived(IdleStateHandler.java:294)\r\n        at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:791)\r\n        at com.eucalyptus.ws.Handlers$NioSslHandler.handleUpstream(Handlers.java:347)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:564)\r\n        at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:559)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268)\r\n        at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255)\r\n        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:88)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.process(AbstractNioWorker.java:109)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioSelector.run(AbstractNioSelector.java:312)\r\n        at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:90)\r\n        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:178)\r\n        at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:108)\r\n        at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42)\r\n        at org.jboss.netty.handler.execution.MemoryAwareThreadPoolExecutor$MemoryAwareRunnable.run(MemoryAwareThreadPoolExecutor.java:622)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n{code}\r\nFull debug output using s3cmd:\r\n{code}\r\n# ./s3cmd/s3cmd --config=.s3cfg-region1 --signature-v2 ls --debug\r\nDEBUG: ConfigParser: Reading file '.s3cfg-region1'\r\nDEBUG: ConfigParser: access_key->AK...17_chars...D\r\nDEBUG: ConfigParser: access_token->\r\nDEBUG: ConfigParser: add_encoding_exts->\r\nDEBUG: ConfigParser: add_headers->\r\nDEBUG: ConfigParser: bucket_location->US\r\nDEBUG: ConfigParser: ca_certs_file->\r\nDEBUG: ConfigParser: cache_file->\r\nDEBUG: ConfigParser: check_ssl_certificate->True\r\nDEBUG: ConfigParser: cloudfront_host->cloudfront.amazonaws.com\r\nDEBUG: ConfigParser: default_mime_type->binary/octet-stream\r\nDEBUG: ConfigParser: delay_updates->False\r\nDEBUG: ConfigParser: delete_after->False\r\nDEBUG: ConfigParser: delete_after_fetch->False\r\nDEBUG: ConfigParser: delete_removed->False\r\nDEBUG: ConfigParser: dry_run->False\r\nDEBUG: ConfigParser: enable_multipart->True\r\nDEBUG: ConfigParser: encoding->UTF-8\r\nDEBUG: ConfigParser: encrypt->False\r\nDEBUG: ConfigParser: expiry_date->\r\nDEBUG: ConfigParser: expiry_days->\r\nDEBUG: ConfigParser: expiry_prefix->\r\nDEBUG: ConfigParser: follow_symlinks->False\r\nDEBUG: ConfigParser: force->False\r\nDEBUG: ConfigParser: get_continue->False\r\nDEBUG: ConfigParser: gpg_command->/usr/bin/gpg\r\nDEBUG: ConfigParser: gpg_decrypt->%(gpg_command)s -d --verbose --no-use-agent --batch --yes --passphrase-fd %(passphrase_fd)s -o %(output_file)s %(input_file)s\r\nDEBUG: ConfigParser: gpg_encrypt->%(gpg_command)s -c --verbose --no-use-agent --batch --yes --passphrase-fd %(passphrase_fd)s -o %(output_file)s %(input_file)s\r\nDEBUG: ConfigParser: gpg_passphrase->...-3_chars...\r\nDEBUG: ConfigParser: guess_mime_type->True\r\nDEBUG: ConfigParser: host_base->objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\nDEBUG: ConfigParser: host_bucket->%(bucket)s.objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\nDEBUG: ConfigParser: human_readable_sizes->False\r\nDEBUG: ConfigParser: ignore_failed_copy->False\r\nDEBUG: ConfigParser: invalidate_default_index_on_cf->False\r\nDEBUG: ConfigParser: invalidate_default_index_root_on_cf->True\r\nDEBUG: ConfigParser: invalidate_on_cf->False\r\nDEBUG: ConfigParser: limitrate->0\r\nDEBUG: ConfigParser: list_md5->False\r\nDEBUG: ConfigParser: log_target_prefix->\r\nDEBUG: ConfigParser: long_listing->False\r\nDEBUG: ConfigParser: max_delete->-1\r\nDEBUG: ConfigParser: mime_type->\r\nDEBUG: ConfigParser: multipart_chunk_size_mb->15\r\nDEBUG: ConfigParser: preserve_attrs->True\r\nDEBUG: ConfigParser: progress_meter->True\r\nDEBUG: ConfigParser: proxy_host->\r\nDEBUG: ConfigParser: proxy_port->0\r\nDEBUG: ConfigParser: put_continue->False\r\nDEBUG: ConfigParser: recursive->False\r\nDEBUG: ConfigParser: recv_chunk->65536\r\nDEBUG: ConfigParser: reduced_redundancy->False\r\nDEBUG: ConfigParser: requester_pays->False\r\nDEBUG: ConfigParser: restore_days->1\r\nDEBUG: ConfigParser: secret_key->EG...37_chars...R\r\nDEBUG: ConfigParser: send_chunk->65536\r\nDEBUG: ConfigParser: server_side_encryption->False\r\nDEBUG: ConfigParser: signature_v2->False\r\nDEBUG: ConfigParser: simpledb_host->sdb.amazonaws.com\r\nDEBUG: ConfigParser: skip_existing->False\r\nDEBUG: ConfigParser: socket_timeout->300\r\nDEBUG: ConfigParser: urlencoding_mode->normal\r\nDEBUG: ConfigParser: use_https->False\r\nDEBUG: ConfigParser: use_mime_magic->True\r\nDEBUG: ConfigParser: verbosity->WARNING\r\nDEBUG: ConfigParser: website_endpoint->http://%(bucket)s.s3-website-%(location)s.amazonaws.com/\r\nDEBUG: ConfigParser: website_error->\r\nDEBUG: ConfigParser: website_index->index.html\r\nDEBUG: Updating Config.Config cache_file ->\r\nDEBUG: Updating Config.Config follow_symlinks -> False\r\nDEBUG: Updating Config.Config signature_v2 -> True\r\nDEBUG: Updating Config.Config verbosity -> 10\r\nDEBUG: Unicodising 'ls' using UTF-8\r\nDEBUG: Command: ls\r\nDEBUG: CreateRequest: resource[uri]=/\r\nDEBUG: Using signature v2\r\nDEBUG: SignHeaders: 'GET\\n\\n\\n\\nx-amz-date:Thu, 18 Jun 2015 19:27:44 +0000\\n/'\r\nDEBUG: Processing request, please wait...\r\nDEBUG: get_hostname(None): objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\nDEBUG: ConnMan.get(): creating new connection: http://objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\nDEBUG: non-proxied HTTPConnection(objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773)\r\nDEBUG: format_uri(): /\r\nDEBUG: Sending request method_string='GET', uri='/', headers={'Authorization': 'AWS AKIAAL66CZ5P537NZRJD:99ltQAVkIxqJ1GkIh/FwVLRijFU=', 'x-amz-date': 'Thu, 18 Jun 2015 19:27:44 +0000'}, body=(0 bytes)\r\nDEBUG: Response: {'status': 403, 'headers': {'content-length': '268', 'content-type': 'text/xml; charset=UTF-8', 'connection': 'close'}, 'reason': 'Forbidden', 'data': '<?xml version=\"1.0\" encoding=\"UTF-8\"?><Error><Code>InvalidAccessKeyId</Code><Message>The AWS Access Key Id you provided does not exist in our records.</Message><Resource>AKIAAL66CZ5P537NZRJD</Resource><RequestId>d5a17322-b051-4028-8623-207bccbd5f1c</RequestId></Error>'}\r\nDEBUG: ConnMan.put(): connection put back to pool (http://objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773#1)\r\nERROR: S3 error: The AWS Access Key Id you provided does not exist in our records.\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up federated cloud (i.e. multiple regions) - see EUCA-10442\r\n# Create account under one region\r\n{code}\r\n# euare-accountcreate -a test1\r\ntest1\t002093902049\r\n{code}\r\n# Download credentials for admin user for test account\r\n{code}\r\n# euca-get-credentials -a test1 -u admin test1-admin.zip\r\n# unzip test1-admin.zip\r\nArchive:  test1-admin.zip\r\nTo setup the environment run: source /path/to/eucarc\r\n  inflating: eucarc\r\n  inflating: iamrc\r\n  inflating: cloud-cert.pem\r\n  inflating: jssecacerts\r\n  inflating: euca2-admin-af5f63d3-pk.pem\r\n  inflating: euca2-admin-af5f63d3-cert.pem\r\n{code}\r\n# Source eucarc; confirm multiple regions display\r\n{code}\r\n# source eucarc\r\n# euca-describe-regions\r\nREGION\tregion-1\thttp://compute.h-33.autoqa.qa1.eucalyptus-systems.com:8773/\r\nREGION\tregion-2\thttp://compute.g-22-07.autoqa.qa1.eucalyptus-systems.com:8773/\r\n{code}\r\n# Use git to clone s3cmd repo\r\n{code}\r\n# yum install python-dateutil git\r\n# git clone https://github.com/s3tools/s3cmd.git\r\n# cd s3cmd\r\n# ./s3cmd --configure\r\n\r\nEnter new values or accept defaults in brackets with Enter.\r\nRefer to user manual for detailed description of all options.\r\n\r\nAccess key and Secret key are your identifiers for Amazon S3. Leave them empty for using the env variables.\r\ncloudfront_host = cloudfront.amazonaws.com\r\nAccess Key [AKIAAL66CZ5P537NZRJD]:\r\nSecret Key [EGb3207W1Pa2vOx6rktTfRcLD01eUpiev7OsnvTR]:\r\nDefault Region [US]:\r\n\r\nEncryption password is used to protect your files from reading\r\nby unauthorized persons while in transfer to S3\r\nEncryption password:\r\nPath to GPG program [/usr/bin/gpg]:\r\n\r\nWhen using secure HTTPS protocol all communication with Amazon S3\r\nservers is protected from 3rd party eavesdropping. This method is\r\nslower than plain HTTP, and can only be proxied with Python 2.7 or newer\r\nUse HTTPS protocol [No]:\r\n\r\nOn some networks all internet access must go through a HTTP proxy.\r\nTry setting it here if you can't connect to S3 directly\r\nHTTP Proxy server name:\r\n\r\nNew settings:\r\n  Access Key: AKIAAL66CZ5P537NZRJD\r\n  Secret Key: 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\r\n  Default Region: US\r\n  Encryption password:\r\n  Path to GPG program: /usr/bin/gpg\r\n  Use HTTPS protocol: False\r\n  HTTP Proxy server name:\r\n  HTTP Proxy server port: 0\r\n\r\nTest access with supplied credentials? [Y/n] n\r\n\r\nSave settings? [y/N] y\r\nConfiguration saved to '/root/.s3cfg'\r\n{code}\r\n# Duplicate .s3cfg to have s3cmd config file for each region\r\n{code}\r\n# grep host .s3cfg-region* | grep object\r\n.s3cfg-region1:host_base = objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\n.s3cfg-region1:host_bucket = %(bucket)s.objectstorage.h-33.autoqa.qa1.eucalyptus-systems.com:8773\r\n.s3cfg-region2:host_base = objectstorage.g-22-07.autoqa.qa1.eucalyptus-systems.com:8773\r\n.s3cfg-region2:host_bucket = %(bucket)s.objectstorage.g-22-07.autoqa.qa1.eucalyptus-systems.com:8773\r\n{code}\r\n# List resources in native region:\r\n{code}\r\n# ./s3cmd/s3cmd --config=.s3cfg-region2 --signature-v2 ls\r\n2015-06-16 21:08  s3://eucalyptus-service-image-1.23\r\n{code}\r\n# List resources in nonnative region\r\n{code}\r\n# ./s3cmd/s3cmd --config=.s3cfg-region1 --signature-v2 ls\r\nERROR: S3 error: The AWS Access Key Id you provided does not exist in our records.\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/24520","id":"24520","filename":"sosreport-UFS-Region1.0909-20150618101310-b979.tar.xz","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T14:30:31.980-0500","size":17878780,"mimeType":"application/x-xz","content":"https://eucalyptus.atlassian.net/secure/attachment/24520/sosreport-UFS-Region1.0909-20150618101310-b979.tar.xz"}],"aggregatetimeestimate":null,"summary":"S3 (OSG) API requests fail against nonnative regions","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":"6_*:*_1_*:*_0_*|*_10000_*:*_1_*:*_4114209","customfield_12100":"0|i039tb:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-06-18T15:28:13.602-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","sjones(sjones)"],"environment":"* Federated cloud (i.e. multiple regions)","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10986/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36700/comment/87993","id":"87993","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], is it possible to run s3cmd with debug output so we can see the key in use?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T15:28:13.602-0500","updated":"2015-06-18T15:28:13.602-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36700/comment/87994","id":"87994","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Issue is not a bug.  I was using 'eucalyptus' system accounts which can't be used across regions (i.e. clouds).  When I used a non-'eucalyptus' account, everything worked as designed.\r\n{code}\r\n# ./s3cmd/s3cmd --config=.s3cfg-region2-test1-admin --signature-v2 ls\r\n2015-06-18 20:34  s3://apache-logs\r\n2015-06-17 21:32  s3://ubuntu-wily-amd64\r\n\r\n# ./s3cmd/s3cmd --config=.s3cfg-region1-test1-admin --signature-v2 ls\r\n2015-06-18 20:38  s3://nginx-logs\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-06-18T15:39:32.436-0500","updated":"2015-06-18T15:39:32.436-0500"}],"maxResults":2,"total":2,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}