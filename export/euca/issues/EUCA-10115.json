{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"33182","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182","key":"EUCA-10115","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14301","id":"14301","description":"Eucalyptus 4.1.0","name":"4.1.0","archived":false,"released":true,"releaseDate":"2015-01-29"}],"aggregatetimespent":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10303":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2014-11-07T19:09:26.663-0600","customfield_10704":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10115/watchers","watchCount":4,"isWatching":false},"created":"2014-10-31T08:13:29.449-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14606","id":"14606","description":"Eucalyptus 4.0.2","name":"4.0.2","archived":false,"released":true,"releaseDate":"2014-10-20"}],"customfield_11901":null,"issuelinks":[{"id":"28229","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/28229","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"33800","key":"EUCA-10218","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33800","fields":{"summary":"Paravirt image remains pending","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}},{"id":"27735","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/27735","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"33362","key":"DOC-1495","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33362","fields":{"summary":"Installation Guide Doesn't Mention Upgrading the Imaging Worker Image for Upgrades","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"updated":"2015-05-08T17:01:56.334-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/12300","id":"12300","name":"Image tools"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nOn a Eucalyptus 4.0.2 cloud with Eucalyptus DNS enabled, the image worker instance will loop with the following DEBUG message in the worker.log:\r\n{code}\r\n2014-10-30 21:15:05,399 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:15:07,401 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:15:09,404 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:15:11,406 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:15:13,409 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n{code}\r\nThis causes the following tasks associated with the imaging service to stay in a pending state:\r\n\r\n* paravirtual instance store-backed EMI to HVM instance store-backed conversion (which happens mostly on upgrades from 3.4.x to 4.0.2)\r\n* import instance\r\n* import volumes\r\n\r\n*Details*\r\n\r\nAfter some triaging, this is happening because the dns.lock file was never created under /var/lib/eucalyptus-imaging-worker/ directory.  The only file present was the ntp.lock file.  The reason why the dns.lock file was never created is due to the fact that the /usr/libexec/eucalyptus-imaging-worker/dns-update script is looking for the 'dns_server' value in the user-data passed to the imaging worker instance.  Looking at the [script|https://github.com/eucalyptus/eucalyptus-imaging-worker/blob/master/scripts/worker-dns-update#L53-L55], the following lines query for that entry:\r\n{code}\r\nuserdata = parse_userdata(out)\r\nsyslog.syslog(\"userdata: {0}\".format(userdata))\r\ndns_server = userdata.get('dns_server', None)\r\n{code}\r\nFrom the instance, if 'curl' is used to grab the 'user-data', the following is returned with 'dns_server' key/value not present:\r\n{code}\r\n# curl http://169.254.169.254/latest/user-data; echo\r\neuca-c2V0dXAtY3JlZGVudGlhbA==\r\nimaging_service_url=imaging.localhost;log_server_port=514;compute_service_url=compute.localhost;ntp_server=pool.ntp.org;euare_service_url=euare.localhost;\r\n{code}\r\nEucalyptus DNS has been enabled per our documentation.  Cloud properties for DNS are as follows:\r\n{code}\r\n# euca-describe-properties | grep dns\r\nPROPERTY\tbootstrap.webservices.use_dns_delegation\ttrue\r\nPROPERTY\tbootstrap.webservices.use_instance_dns\ttrue\r\nPROPERTY\tdns.dns_listener_address_match\t{}\r\nPROPERTY\tdns.enabled\ttrue\r\nPROPERTY\tdns.instancedata.enabled\ttrue\r\nPROPERTY\tdns.ns.enabled\ttrue\r\nPROPERTY\tdns.recursive.enabled\ttrue\r\nPROPERTY\tdns.services.enabled\ttrue\r\nPROPERTY\tdns.services.hostmapping\t{}\r\nPROPERTY\tdns.split_horizon.enabled\ttrue\r\nPROPERTY\tdns.spoof_regions.enabled\tfalse\r\nPROPERTY\tdns.spoof_regions.region_name\t{}\r\nPROPERTY\tdns.spoof_regions.spoof_aws_default_regions\tfalse\r\nPROPERTY\tdns.spoof_regions.spoof_aws_regions\tfalse\r\nPROPERTY\tdns.tcp.timeout_seconds\t30\r\nPROPERTY\tloadbalancing.loadbalancer_dns_subdomain\teulb\r\nPROPERTY\tloadbalancing.loadbalancer_dns_ttl\t60\r\nPROPERTY\tobjectstorage.s3provider.s3usebackenddns\tfalse\r\nPROPERTY\tsystem.dns.dnsdomain\tfuture.euca-hasp.cs.prc.eucalyptus-systems.com\r\nPROPERTY\tsystem.dns.nameserver\todc-f-13.prc.eucalyptus-systems.com\r\nPROPERTY\tsystem.dns.nameserveraddress\t10.104.10.55\r\nPROPERTY\tsystem.dns.registrationid\t690f4050-5fc4-4a1e-a883-4da727d7f9ce\r\n{code}\r\nImaging worker instance has the following nameserver information in the /etc/resolv.conf file:\r\n{code}\r\n# cat /etc/resolv.conf\r\n; generated by /sbin/dhclient-script\r\nsearch future.internal\r\nnameserver 10.104.10.55\r\nnameserver 8.8.8.8\r\n{code}\r\n\r\nLooking at the source code - [clc/modules/imaging-common/src/main/java/com/eucalyptus/imaging/ImagingServiceProperties.java|https://github.com/eucalyptus/eucalyptus/blob/testing/clc/modules/imaging-common/src/main/java/com/eucalyptus/imaging/ImagingServiceProperties.java#L427-L479] - it looks like we are setting the 'dns_server' value, but for some reason, it never gets sent in the 'user-data':\r\n{code}\r\n  public static String getWorkerUserData(String ntpServer, String logServer, String logServerPort) {\r\n    Map<String,String> kvMap = new HashMap<String,String>();\r\n    if(ntpServer != null)\r\n      kvMap.put(\"ntp_server\", ntpServer);\r\n    if(logServer != null)\r\n      kvMap.put(\"log_server\", logServer);\r\n    if(logServerPort != null)\r\n      kvMap.put(\"log_server_port\", logServerPort);\r\n    \r\n    kvMap.put(\"imaging_service_url\", String.format(\"imaging.%s\",DNSProperties.DOMAIN));\r\n    kvMap.put(\"euare_service_url\", String.format(\"euare.%s\", DNSProperties.DOMAIN));\r\n    kvMap.put(\"compute_service_url\",String.format(\"compute.%s\", DNSProperties.DOMAIN));\r\n  \r\n  //final ServiceConfiguration dns = Topology.lookup(Dns.class);\r\n    final List<String> dnsHosts = Lists.newArrayList(Iterables.transform(ServiceConfigurations.list(Eucalyptus.class),\r\n        new Function<ServiceConfiguration, String>() {\r\n          @Override\r\n          public String apply(ServiceConfiguration arg0) {\r\n            return arg0.getInetAddress().getHostAddress();\r\n          }\r\n    }));\r\n    final List<String> enabledDns = Lists.newArrayList(Collections2.transform(Topology.enabledServices(Eucalyptus.class), \r\n        new Function<ServiceConfiguration, String>(){\r\n          @Override\r\n          public String apply(ServiceConfiguration arg0) {\r\n            return arg0.getInetAddress().getHostAddress();\r\n          }\r\n    }));\r\n    \r\n    final StringBuilder sbDns= new StringBuilder();\r\n    for(final String address : enabledDns){\r\n      if(sbDns.length()<=0)\r\n        sbDns.append(address);\r\n      else\r\n        sbDns.append(\",\"+address);\r\n    }\r\n    for(final String address : dnsHosts){\r\n      if(! enabledDns.contains(address)){\r\n        if(sbDns.length()<=0)\r\n          sbDns.append(address);\r\n        else\r\n          sbDns.append(\",\"+address);\r\n      } \r\n    }\r\n    kvMap.put(\"dns_server\", sbDns.toString());\r\n\r\n    final StringBuilder sb = new StringBuilder();\r\n    for (String key : kvMap.keySet()){\r\n      String value = kvMap.get(key);\r\n      sb.append(String.format(\"%s=%s;\", key, value));\r\n    }\r\n    return sb.toString();\r\n  }\r\n{code}\r\n\r\n*Workaround*\r\n\r\nUnfortunately the only way to resolve this issue is to do the following:\r\n\r\n# SSH into the imaging worker instance(s) - this means that the cloud administrator must have created a keypair and defined the 'imaging.imaging_worker_keyname' cloud property\r\n# Create the dns.lock file under /var/lib/eucalyptus-imaging-worker/ directory by using the 'touch' command:\r\n{code}\r\ntouch /var/lib/eucalyptus-imaging-worker/dns.lock\r\n{code}\r\n# After that, both ntp.lock and dns.lock files will be deleted, and the imaging worker instance(s) will service any imaging tasks in the queue.\r\n\r\n*Steps*\r\n\r\n# Set up a Eucalyptus 4.0.1 Cloud with Eucalyptus DNS, Load Balancer, Imaging Service, Cloudformation enabled\r\n# Confirm the cloud is functioning correctly by creating cloud resources\r\n# Upgrade to Eucalyptus 4.0.2\r\n# Confirm the cloud is functioning correctly\r\n# Create a keypair as a cloud administrator and set the 'imaging.imaging_worker_keyname' cloud property\r\n# Perform an import instance task.  For example, use a raw image of [Ubuntu Trusty 14.04 Cloud Image|http://cloud-images.ubuntu.com/trusty/current/trusty-server-cloudimg-amd64-disk1.img]:\r\n{code}\r\neuca-import-instance trusty-server-cloudimg-amd64-disk1.raw --format raw --architecture x86_64 --platform Linux --availability-zone Honest --bucket ubuntu-trusty-imported-20141030 --description \"Ubuntu Cloud Image Trusty 14.04 LTS\" --instance-type m1.medium --key keypair1\r\n{code}\r\n# SSH into the imaging worker instance, and check the worker.log.  Similar messages to the following will be seen:\r\n{code}\r\n2014-10-30 21:16:42,653 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:16:44,655 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n2014-10-30 21:16:46,658 worker [DEBUG]:waiting on dns and ntp setup (reboot if continued)\r\n{code}\r\n# Use 'curl' to check out the user-data being passed to the imaging worker instance:\r\n{code}\r\n# curl http://169.254.169.254/latest/user-data\r\neuca-c2V0dXAtY3JlZGVudGlhbA==\r\nimaging_service_url=imaging.localhost;log_server_port=514;compute_service_url=compute.localhost;ntp_server=pool.ntp.org;euare_service_url=euare.localhost;\r\n{code}\r\n# Check under /var/lib/eucalyptus-imaging-worker/ to confirm that the only file present is the ntp.lock file\r\n\r\n*Pertinent Data*\r\n\r\nThis was discovered while doing helping triage a customer upgrade issue.","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Imaging Worker Loops Due To Lack of ''dns_server' entry in user-data ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i02yz3:","customfield_10000":"10001_*:*_2_*:*_74219125_*|*_10000_*:*_1_*:*_551608488_*|*_10006_*:*_1_*:*_2700_*|*_10003_*:*_1_*:*_8300_*|*_5_*:*_2_*:*_21918616","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2014-11-06T16:01:03.676-0600","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["hspencer(hspencer)","spark(spark)","vasya(vasya)"],"customfield_10116":null,"environment":"* non-HA, single cluster, Eucalyptus DNS, Load Balancer, Cloudformation, Imaging Service enabled\r\n** 1 x CLC, UFS, Eucalyptus DNS, Cloudformation, Imaging Service\r\n** 1 x UFS\r\n** 1 x UFS, Walrus\r\n** 1 x CC (Managed-NOVLAN), SC (DAS)\r\n** 1 x NC","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182/comment/78976","id":"78976","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"I believe this is because imaging change in maint/4.0/testing was not merged into master branch.\r\nhttps://github.com/eucalyptus/eucalyptus-imaging-worker/","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-11-06T16:01:03.676-0600","updated":"2014-11-06T16:01:03.676-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182/comment/79030","id":"79030","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], right now each Eucalyptus version needs its own version of Imaging Worker. I think you have a version mismatch. This is not a bug.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-11-07T12:37:17.388-0600","updated":"2014-11-07T12:37:17.388-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182/comment/79047","id":"79047","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~vasya],\r\n\r\nYou are correct.  I confirmed I was using the old version of Imaging Worker.  Once I upgraded the Imaging Worker image, everything worked.  What threw me off here is that there wasn't any documentation about having to upgrade the Imaging Worker - similar to what we have regarding the [Load Balancer Image|https://www.eucalyptus.com/docs/eucalyptus/4.0.2/index.html#install-guide/upgrade_from_oldv.html].  I will raise a doc ticket and link it accordingly.  Thanks.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-11-07T16:44:07.674-0600","updated":"2014-11-07T16:44:07.674-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182/comment/79061","id":"79061","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"I think the better is to not require upgrading of the existing images. I believe adding back \"dns_server\" entry in userdata will be null op for the new images while providing the backward compatibility to old images.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-11-07T18:42:43.644-0600","updated":"2014-11-07T19:02:35.598-0600"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/33182/comment/79067","id":"79067","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"body":"I was confused with VMs. I think it's ok and recommended to upgrade the image. ","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=spark","name":"spark","key":"spark","accountId":"557058:2ed923b8-7172-41f0-a425-8796bd9a62f9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fec440044f6e652174838d59d9233f29?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dspark%26avatarId%3D10900%26noRedirect%3Dtrue"},"displayName":"Sang-Min Park","active":false,"timeZone":"America/Los_Angeles"},"created":"2014-11-07T19:09:09.069-0600","updated":"2014-11-07T19:09:09.069-0600"}],"maxResults":5,"total":5,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-10115/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}