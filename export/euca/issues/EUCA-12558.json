{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"46010","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010","key":"EUCA-12558","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"}],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12601","value":"CentOS 7","id":"12601"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/12401","value":"VPC-MIDO","id":"12401"}],"customfield_11401":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_11400":null,"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@7f7e6bc2[id=138,rapidViewId=92,state=CLOSED,name=4.3.0 Sprint 9,goal=,startDate=2016-06-02T00:33:27.822Z,endDate=2016-08-13T00:33:00.000Z,completeDate=2016-08-13T02:22:49.091Z,sequence=138]"],"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10703":null,"customfield_10308":null,"customfield_10704":null,"resolutiondate":"2016-08-12T20:03:54.559-0500","customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12558/watchers","watchCount":5,"isWatching":false},"lastViewed":null,"created":"2016-07-13T23:41:37.296-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{repository={count=1, dataType=repository}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"repository\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2016-07-14T14:43:42.000-0500\",\"dataType\":\"repository\"},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16800","id":"16800","description":"Eucalyptus 4.3.0","name":"4.3.0","archived":false,"released":true,"releaseDate":"2016-08-09"}],"issuelinks":[{"id":"40725","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/40725","type":{"id":"10103","name":"Relates","inward":"relates to","outward":"relates to","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10103"},"inwardIssue":{"id":"46122","key":"EUCA-12578","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46122","fields":{"summary":"Packets are dropped at CC in managed modes ","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/1","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/blocker.svg","name":"Blocker","id":"1"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"updated":"2016-10-28T00:22:36.772-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11504","id":"11504","name":"EC2"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"It appears a user can create more ENIs than there are available IPs in a subnet. It looks like the ENIs begin to get duplicate IPs after exceeding the available IP range. These ENIs  can be assigned to instances and can result in duplicate private IPs within that subnet. \r\n\r\nBelow shows that 503 ENIs were created in a subnet that should support ~250 private IP addresses.  Later it shows 2 ENIs with duplicate IPs and 2 instances launched with the resulting IPs. \r\n\r\nThanks, \r\n-M\r\n\r\n{code}\r\nIn [197]: enis = user.ec2.connection.get_all_network_interfaces(filters={'subnet-id':subnet.id})\r\n\r\nIn [198]: len(enis)\r\nOut[198]: 503\r\n\r\nIn [199]: user.ec2.show_subnet(subnet)\r\n[07-13 21:40:03][INFO][EC2ops(admin:testrunner)]: \r\n+-----------------------------------------------------------------------------------------+\r\n|  SUBNET SUMMARY: \"subnet-2982d305\"                                                      |\r\n+-----------------------------------------------------------------------------------------+\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||VPC ID      |CIDR BLOCK          |AVAIL ADDRS|MAP PUB IP|STATE       |ZONE|ZONE DEFAULT||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||vpc-3f225129|    172.1.1.0/24    |    250    |  False   | available  |one |   False    ||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n|SUBNET \"subnet-2982d305\" TAGS:                                                           |\r\n|+------------------------+---------+                                                     |\r\n||TAG NAME                |TAG VALUE|                                                     |\r\n|+------------------------+---------+                                                     |\r\n||VpcBasics_CREATED_NUMBER|0        |                                                     |\r\n|+------------------------+---------+                                                     |\r\n|                                                                                         |\r\n+-----------------------------------------------------------------------------------------+\r\n{code}\r\n\r\n\r\n\r\n{code}\r\nIn [189]: user.ec2.show_instances([ins1, ins2])\r\n\r\n[07-13 21:34:21][INFO][EC2ops(admin:testrunner)]: \r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n|INSTANCE ID          |INSTANCE IMAGE      |INSTANCE STATE     |INSTANCE NETWORK INFO:                                                      |\r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n|ID: i-45326f3a       |EMI: emi-ee45c8c0   |STATE: running     |NODE:???              KEYPAIR:testrunner173                                 |\r\n|TYPE: m1.small       |OS: linux           |AGE: 227           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|RES: r-d195f8cb      |VIRT: HVM           |ZONE: one          ||    VPC     |     SUBNET    |  SEC GRPS |P|    PRIV IP    |     PUB IP    ||\r\n|ACCOUNT ID:          |IMAGE NAME:         |ROOTDEV:           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|000093021272         |centos7_w_net_util..|ebs:vol-1da5e7ad   ||vpc-3f225129|subnet-2982d305|sg-03805dd2|N|   172.1.1.89  | 10.116.132.124||\r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n|ID: i-7223ad89       |EMI: emi-ee45c8c0   |STATE: running     |NODE:???              KEYPAIR:testrunner173                                 |\r\n|TYPE: m1.small       |OS: linux           |AGE: 114           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|RES: r-309d3f3d      |VIRT: HVM           |ZONE: one          ||    VPC     |     SUBNET    |  SEC GRPS |P|    PRIV IP    |     PUB IP    ||\r\n|ACCOUNT ID:          |IMAGE NAME:         |ROOTDEV:           |+------------+---------------+-----------+-+---------------+---------------+|\r\n|000093021272         |centos7_w_net_util..|ebs:vol-b492867d   ||vpc-3f225129|subnet-2982d305|sg-03805dd2|N|   172.1.1.89  | 10.116.132.157||\r\n+---------------------+--------------------+-------------------+----------------------------------------------------------------------------+\r\n\r\n\r\nIn [190]: user.ec2.show_network_interfaces([eni1, eni2])\r\n[07-13 21:34:30][INFO][EC2ops(admin:testrunner)]: \r\n+------------+--------------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|ID          |PUB IP        |VPC         |SUBNET         |SEC GRPS   |PRIV IPS        |ATTACH_ID|INST ID|#|STATUS|DOT|\r\n+------------+--------------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|eni-2fe6d8b8|10.116.132.124|vpc-3f225129|subnet-2982d305|sg-03805dd2|P 172.1.1.89    |         |       | |      |   |\r\n+------------+--------------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|eni-6b74726f|None          |vpc-3f225129|subnet-2982d305|sg-03805dd2|P 172.1.1.89    |         |       | |      |   |\r\n+------------+--------------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n\r\n\r\nIn [191]: ins1.sho\r\nins1.show_enis                      ins1.show_network_interfaces_table  ins1.show_summary                   ins1.show_tags                      \r\nins1.show_network_interfaces_delta  ins1.show_network_ipv4_info         ins1.show_sys_info                  \r\n\r\nIn [191]: ins1.show_enis()\r\n[07-13 21:34:37][DEBUG][EC2ops(admin:testrunner)]: Found matching security group for name:None and id:sg-03805dd2\r\n[07-13 21:34:37][INFO][i-45326f3a]: \r\n+------------------------------------------------------------------------------------------------------------+\r\n| Index:0, eni-2fe6d8b8, DESC:This was created by: 1468450480, STATUS:in-use (attached)                      |\r\n+------------------------------------------------------------------------------------------------------------+\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|. ENI INFO                           . PRIV_IPS (Primary)   . PUB IP           . MAC ADDR          . DOT   .|\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|.  ID:       eni-2fe6d8b8            .    172.1.1.89 (P)    . 10.116.132.124   . d0:0d:2f:e6:d8:b8 . ?     .|\r\n|.  VPC:      vpc-3f225129            .                      .                  .                   .       .|\r\n|.  SUBNET:   subnet-2982d305         .                      .                  .                   .       .|\r\n|.  REGION:   ec2.g-12-01.autoqa.qa1  .                      .                  .                   .       .|\r\n|.            .eucalyptus-            .                      .                  .                   .       .|\r\n|.            systems.com             .                      .                  .                   .       .|\r\n|.  OWNER:    000093021272            .                      .                  .                   .       .|\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|Security Groups For ENI eni-2fe6d8b8:                                                                       |\r\n| Security Group: default/sg-03805dd2, VPC: vpc-3f225129                                                     |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| |  CIDR_IP  | SRC_GRP_NAME |  SRC_GRP_ID |   OWNER_ID   | PORT | END_PORT | PROTO |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| |    None   |   default    | sg-03805dd2 | 000093021272 | None |   None   |   -1  |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| | 0.0.0.0/0 |     None     |     None    |     None     |  -1  |    -1    |  icmp |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| | 0.0.0.0/0 |     None     |     None    |     None     |  22  |    22    |  tcp  |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n+------------------------------------------------------------------------------------------------------------+\r\n\r\n\r\nIn [192]: ins2.sho\r\nins2.show_enis                      ins2.show_network_interfaces_table  ins2.show_summary                   ins2.show_tags                      \r\nins2.show_network_interfaces_delta  ins2.show_network_ipv4_info         ins2.show_sys_info                  \r\n\r\nIn [192]: ins2.show_enis()\r\n[07-13 21:34:42][DEBUG][EC2ops(admin:testrunner)]: Found matching security group for name:None and id:sg-03805dd2\r\n[07-13 21:34:42][INFO][i-7223ad89]: \r\n+------------------------------------------------------------------------------------------------------------+\r\n| Index:0, eni-6b74726f, DESC:This was created by: 1468450480, STATUS:in-use (attached)                      |\r\n+------------------------------------------------------------------------------------------------------------+\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|. ENI INFO                           . PRIV_IPS (Primary)   . PUB IP           . MAC ADDR          . DOT   .|\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|.  ID:       eni-6b74726f            .    172.1.1.89 (P)    . 10.116.132.157   . d0:0d:6b:74:72:6f . ?     .|\r\n|.  VPC:      vpc-3f225129            .                      .                  .                   .       .|\r\n|.  SUBNET:   subnet-2982d305         .                      .                  .                   .       .|\r\n|.  REGION:   ec2.g-12-01.autoqa.qa1  .                      .                  .                   .       .|\r\n|.            .eucalyptus-            .                      .                  .                   .       .|\r\n|.            systems.com             .                      .                  .                   .       .|\r\n|.  OWNER:    000093021272            .                      .                  .                   .       .|\r\n|+------------------------------------+----------------------+------------------+-------------------+-------+|\r\n|Security Groups For ENI eni-6b74726f:                                                                       |\r\n| Security Group: default/sg-03805dd2, VPC: vpc-3f225129                                                     |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| |  CIDR_IP  | SRC_GRP_NAME |  SRC_GRP_ID |   OWNER_ID   | PORT | END_PORT | PROTO |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| |    None   |   default    | sg-03805dd2 | 000093021272 | None |   None   |   -1  |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| | 0.0.0.0/0 |     None     |     None    |     None     |  -1  |    -1    |  icmp |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n| | 0.0.0.0/0 |     None     |     None    |     None     |  22  |    22    |  tcp  |                        |\r\n| +-----------+--------------+-------------+--------------+------+----------+-------+                        |\r\n+------------------------------------------------------------------------------------------------------------+\r\n\r\n{code}","customfield_13200":null,"customfield_11300":null,"customfield_11500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"(VPC) User can create more ENIs than IPs in subnet. Creates duplicate IPs. ","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i03v1b:","customfield_10000":"3_*:*_1_*:*_329659228_*|*_10000_*:*_1_*:*_52443825_*|*_10001_*:*_1_*:*_6675145_*|*_10003_*:*_1_*:*_215684374_*|*_10006_*:*_1_*:*_0","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2016-07-14T11:32:39.066-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["lbiasi(lbiasi)","mclark(mclark)","sjones(sjones)","tony(tony)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-12558/votes","votes":0,"hasVoted":false},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/106868","id":"106868","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Can also just request the duplicate IP. I have not yet tested this behavior in AWS yet to see if duplicates have a use case, and are allowed. \r\nThanks,\r\n-M\r\n\r\n{code}\r\nn [202]: eni.private_ip_address\r\nOut[202]: u'172.1.1.215'\r\n\r\nIn [203]: eni = user.ec2.connection.create_network_interface?\r\n\r\nIn [204]: enia = user.ec2.connection.create_network_interface(subnet.id, eni.private_ip_address)\r\n\r\nIn [205]: enia\r\nOut[205]: NetworkInterface:eni-55d51a82\r\n\r\nIn [206]: enia.private_ip_address\r\nOut[206]: u'172.1.1.215'\r\n\r\nIn [207]: user.ec2.show_network_interfaces([eni, enia])\r\n[07-13 22:28:41][INFO][EC2ops(admin:testrunner)]: \r\n+------------+------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|ID          |PUB IP|VPC         |SUBNET         |SEC GRPS   |PRIV IPS        |ATTACH_ID|INST ID|#|STATUS|DOT|\r\n+------------+------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|eni-df15e8a2|None  |vpc-3f225129|subnet-2982d305|sg-03805dd2|P 172.1.1.215   |         |       | |      |   |\r\n+------------+------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n|eni-55d51a82|None  |vpc-3f225129|subnet-2982d305|sg-03805dd2|P 172.1.1.215   |         |       | |      |   |\r\n+------------+------+------------+---------------+-----------+----------------+---------+-------+-+------+---+\r\n\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-14T00:31:02.331-0500","updated":"2016-07-14T00:31:02.331-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/106911","id":"106911","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"More info, the first time I ran this above test (attempting to exceed available subnet addr count), the system responded with the correct  error (shown below). I repeated the same test on the same subnet after a few hours of testing/using the subnet and was able to exceed it. The testing in that period involved attaching/detaching ENIs to instances, associating/dis-assoc EIPs, and deleting a handful of the created ENIs within the subnet. Attempting to reproduce now. \r\n\r\nExample of a new subnet showing the error:\r\n\r\n{code}\r\nIn [320]: enis = vt.get_test_enis_for_subnet(subnet=subnet, count=260)\r\n\r\n---------------------------------------------------------------------------\r\nEC2ResponseError                          Traceback (most recent call last)\r\n...\r\n...\r\nEC2ResponseError: EC2ResponseError: 400 InvalidParameterValue\r\n<Response xmlns=\"\"><Errors><Error><Code>InvalidParameterValue</Code><Message>Insufficient addresses</Message></Error></Errors><RequestID>4ec028e6-75d1-4cfe-939f-4563fd60e647</RequestID></Response>\r\n\r\nIn [321]: enis = user.ec2.connection.get_all_network_interfaces(filters={'subnet-id':subnet.id})\r\n\r\nIn [322]: len(enis)\r\nOut[322]: 253\r\n\r\n\r\nIn [332]: user.ec2.show_subnet(subnet)\r\n[07-14 08:33:43][INFO][EC2ops(admin:testrunner)]: \r\n+-----------------------------------------------------------------------------------------+\r\n|  SUBNET SUMMARY: \"subnet-80576c9d\"                                                      |\r\n+-----------------------------------------------------------------------------------------+\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||VPC ID      |CIDR BLOCK          |AVAIL ADDRS|MAP PUB IP|STATE       |ZONE|ZONE DEFAULT||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||vpc-3f225129|    172.1.3.0/24    |    250    |  False   | available  |one |   False    ||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n|SUBNET \"subnet-80576c9d\" TAGS:                                                           |\r\n|+------------------------+---------+                                                     |\r\n||TAG NAME                |TAG VALUE|                                                     |\r\n|+------------------------+---------+                                                     |\r\n||VpcBasics_CREATED_NUMBER|0        |                                                     |\r\n|+------------------------+---------+                                                     |\r\n|                                                                                         |\r\n+-----------------------------------------------------------------------------------------+\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-14T10:34:04.126-0500","updated":"2016-07-14T10:34:04.126-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/106916","id":"106916","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"We are not correctly tracking the state of private ip addresses when they are allocated for use with an eni. These addresses remain in a pending state and will then be cleaned up after 35 minutes (by default, the actual timeout is configurable)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-14T11:32:39.066-0500","updated":"2016-07-14T11:32:39.066-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/106922","id":"106922","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"body":"Given the severity of the impact of this I concur that this is a blocker and needs to be fixed prior to release of 4.3.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tony","name":"tony","key":"tony","accountId":"557058:353956db-b78c-4f3b-9096-f8f58e6709c8","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/14ec1b18e630cc0743492fc327a12df7?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtony%26avatarId%3D16600%26noRedirect%3Dtrue"},"displayName":"Tony Beckham","active":true,"timeZone":"America/Tijuana"},"created":"2016-07-14T14:15:10.487-0500","updated":"2016-07-14T14:15:10.487-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/106952","id":"106952","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"The fix is to track ownership of private ips by eni and to update the address state to \"EXTANT\" rather than it remaining in \"PENDING\" for addresses allocated when creating an eni in vpc mode.\r\n\r\nA new database column metadata_network_interface_fk is added to the eucalyptus_cloud.metadata_private_addresses table:\r\n\r\n{code}\r\neucalyptus_shared=# select version, metadata_state, metadata_display_name, metadata_partition_name, metadata_address_scope, metadata_address_tag, metadata_instance_fk, metadata_network_interface_fk from eucalyptus_cloud.metadata_private_addresses;\r\n version | metadata_state | metadata_display_name | metadata_partition_name | metadata_address_scope | metadata_address_tag | metadata_instance_fk |  metadata_network_interface_fk   \r\n---------+----------------+-----------------------+-------------------------+------------------------+----------------------+----------------------+----------------------------------\r\n       1 | EXTANT         | 172.31.6.128          | one                     | vpc-5d84504b           | subnet-9d818170      |                      | 8aef81e555ed8e490155ed92471b00bf\r\n       1 | EXTANT         | 172.31.15.213         | one                     | vpc-fd4e2c90           | subnet-3dba3513      |                      | 8aef81e555ed8e490155ef757cc80816\r\n       1 | EXTANT         | 172.31.1.237          | one                     | vpc-fd4e2c90           | subnet-3dba3513      |                      | 8aef81e555ed8e490155ef71e6080811\r\n(3 rows)\r\n{code}\r\n\r\non upgrade to 4.3 on a vpc cloud the metadata_instance_fk column will be cleared and the metadata_network_interface_fk column populated. To manually run upgrade for testing purposes you can use:\r\n\r\n{code}\r\n#\r\n# euctl --region admin@localhost euca='com.eucalyptus.network.PrivateAddress.PrivateAddressEntityUpgrade43.INSTANCE.apply(null)'\r\ntrue\r\n# \r\n#\r\n{code}\r\n\r\non the cloud controller. The metadata_private_addresses table is used in edge and vpc modes but not in managed modes.\r\n\r\nNote that the upgrade will only process primary network interfaces (other interfaces are not supported in 4.2). If updating a 4.3 (pre-release) cloud all instances should be terminated prior to updating the software.\r\n\r\nWhen verifying this issue we should test upgrades for edge and vpc modes as well as basic regression testing for all network modes. For vpc we should verify that private addresses are correctly tracked when the user specifies a private address as well as when the system allocates a private address. We should test use of explicitly created network interfaces when running instances (for both primary and other enis). We should also verify that private addresses for ebs instances are correctly handled (i.e. tracking is correct with stop/start of instances)\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-15T20:23:49.941-0500","updated":"2016-07-15T20:23:49.941-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/107177","id":"107177","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"body":"Verified. Ran the following several times over an 8 hour period...\r\n{code}\r\nIn [69]: user.ec2.show_subnet(subnet)\r\n[07-20 21:33:48][INFO][EC2ops(admin:testrunner)]: \r\n+-----------------------------------------------------------------------------------------+\r\n|  SUBNET SUMMARY: \"subnet-bfeb31be\"                                                      |\r\n+-----------------------------------------------------------------------------------------+\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||VPC ID      |CIDR BLOCK          |AVAIL ADDRS|MAP PUB IP|STATE       |ZONE|ZONE DEFAULT||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n||vpc-690e1ee5|    172.1.6.0/24    |    250    |  False   | available  |two |   False    ||\r\n|+------------+--------------------+-----------+----------+------------+----+------------+|\r\n|SUBNET \"subnet-bfeb31be\" TAGS:                                                           |\r\n|+--------------------+---------+                                                         |\r\n||TAG NAME            |TAG VALUE|                                                         |\r\n|+--------------------+---------+                                                         |\r\n||VpcBasics_CREATED_NU|2        |                                                         |\r\n||MBER                |         |                                                         |\r\n|+--------------------+---------+                                                         |\r\n|                                                                                         |\r\n+-----------------------------------------------------------------------------------------+\r\n\r\n\r\nIn [70]: enis = vt.get_test_enis_for_subnet(subnet=subnet, count=270)\r\nEC2ResponseError: EC2ResponseError: 400 InvalidParameterValue\r\n<Response xmlns=\"\"><Errors><Error><Code>InvalidParameterValue</Code><Message>Insufficient addresses</Message></Error></Errors><RequestID>98791902-1d9c-4e2c-bb1f-8749e66485aa</RequestID></Response>\r\n\r\n\r\n\r\nIn [71]: new_eni = user.ec2.connection.create_network_interface(eni.subnet_id, eni.private_ip_address)\r\n\r\nEC2ResponseError: EC2ResponseError: 400 InvalidParameterValue\r\n<Response xmlns=\"\"><Errors><Error><Code>InvalidParameterValue</Code><Message>Address (172.1.2.75) not available</Message></Error></Errors><RequestID>c5633f15-abb7-4f2d-b979-483835570b8a</RequestID></Response>\r\n\r\n\r\n\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mclark","name":"mclark","key":"mclark","accountId":"557058:9b68e4d6-90d8-47d3-9c86-519770009164","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/4227b07e7ea0ea725670fc4e987ed04d?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Matt Clark","active":true,"timeZone":"America/Los_Angeles"},"created":"2016-07-20T23:35:59.864-0500","updated":"2016-07-20T23:37:11.209-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/46010/comment/108289","id":"108289","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"body":"4.3.0 Released 8/9/2016","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=lbiasi","name":"lbiasi","key":"lbiasi","accountId":"557058:daaebf52-3713-4e4f-a29b-79f55aed32c9","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3d92822583af436915b8264dbff0d30a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dlbiasi%26avatarId%3D15002%26noRedirect%3Dtrue"},"displayName":"Leslie Biasi","active":false,"timeZone":"US/Central"},"created":"2016-08-12T20:03:54.564-0500","updated":"2016-08-12T20:03:54.564-0500"}],"maxResults":7,"total":7,"startAt":0},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}