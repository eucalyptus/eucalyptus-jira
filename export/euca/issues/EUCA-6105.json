{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"21188","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188","key":"EUCA-6105","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/7","id":"7","description":"Signifies completion of tasks, info requests, etc.","name":"Completed"},"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10308","value":"Managed-NOVLAN","id":"10308"}],"customfield_11400":null,"customfield_10104":[],"customfield_10302":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":null,"customfield_10703":null,"resolutiondate":"2013-06-09T13:00:11.829-0500","customfield_10704":null,"customfield_10308":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6105/watchers","watchCount":5,"isWatching":false},"created":"2013-05-09T16:35:08.196-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10300":null,"customfield_10102":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/11300","id":"11300","name":"3.2.1","archived":false,"released":true,"releaseDate":"2013-02-14"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"updated":"2013-06-09T13:00:11.916-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Please follow the instructions here to build a bfEBS: \r\nhttp://www.youtube.com/watch?v=IbAOl0dRB40\r\n\r\nThis is a 10GB image with a 5GB logical volume mounted on /var\r\n\r\nNow create an instance based on this image. Let's say it's 1 CPU core, 512 RAM, and 30GB hard drive space.\r\n\r\nOnce you log into the box, you'll see something similar to this when you fdisk:\r\nDisk /dev/vda: 10.7 GB, 10737418240 bytes\r\n16 heads, 63 sectors/track, 20805 cylinders, total 20971520 sectors\r\nUnits = sectors of 1 * 512 = 512 bytes\r\nSector size (logical/physical): 512 bytes / 512 bytes\r\nI/O size (minimum/optimal): 512 bytes / 512 bytes\r\nDisk identifier: 0x00069706\r\n\r\n   Device Boot      Start         End      Blocks   Id  System\r\n/dev/vda1   *        2048     9764863     4881408   83  Linux\r\n/dev/vda2        19017728    20969471      975872   82  Linux swap / Solaris\r\n/dev/vda3         9766910    19017727     4625409    5  Extended\r\n/dev/vda5         9766912    19017727     4625408   8e  Linux LVM\r\n\r\nPartition table entries are not in disk order\r\n\r\nDisk /dev/vdb: 32.2 GB, 32212254720 bytes\r\n16 heads, 63 sectors/track, 62415 cylinders, total 62914560 sectors\r\nUnits = sectors of 1 * 512 = 512 bytes\r\nSector size (logical/physical): 512 bytes / 512 bytes\r\nI/O size (minimum/optimal): 512 bytes / 512 bytes\r\nDisk identifier: 0x00000000\r\n\r\nDisk /dev/vdb doesn't contain a valid partition table\r\n\r\nNow I want to add vdb as a physical volume to VolG_0. pvcreate /dev/vdb. Then extend the logical volume from 5GB to 35GB. \r\n\r\nroot@ip-172-31-254-53:/home/jay# pvscan\r\n  PV /dev/vda5   VG VolG_0   lvm2 [4.41 GiB / 0    free]\r\n  PV /dev/vdb    VG VolG_0   lvm2 [30.00 GiB / 0    free]\r\n  Total: 2 [34.41 GiB] / in use: 2 [34.41 GiB] / in no VG: 0 [0   ]\r\n\r\n --- Logical volume ---\r\n  LV Name                /dev/VolG_0/LVol_0\r\n  VG Name                VolG_0\r\n  LV UUID                nBEx72-GKe9-e4Gm-mtrv-dF07-Z7NF-w9nFQW\r\n  LV Write Access        read/write\r\n  LV Status              available\r\n  # open                 1\r\n  LV Size                34.41 GiB\r\n  Current LE             8808\r\n  Segments               2\r\n  Allocation             inherit\r\n  Read ahead sectors     auto\r\n  - currently set to     256\r\n  Block device           252:0\r\n\r\nGreat. Now stop the instance. Once the instance is stopped and restarted, the IP has to be reassociated (is there a way to automatically do this?). Once you've assigned the original IP, you'll notice you can't SSH into the instance. \r\n\r\nI had to go to Virtual Manager on the NC server to see what was wrong. There's an error with the /dev/mapper and /var can't be mounted. I hit \"M\" and I do a pvscan. I noticed that vdb isn't part of the volume group anymore. I perform a pvcreate --uuid [UUID from pvscan] and reboot and now there are no errors from pvscan but the data is missing from /var\r\n\r\nRebooting it a few times I finally get a filesystem consistency error from Virtual Manager. I hit \"F\" to autofix and everything is OK again. \r\n\r\nThis doesn't seem like the normal behavior. ","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"LVM mounts are lost and corrupted when instance is stopped.","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i0215r:","customfield_10000":"10001_*:*_1_*:*_477569_*|*_10000_*:*_1_*:*_1382564_*|*_6_*:*_1_*:*_0_*|*_10007_*:*_1_*:*_2663643588","customfield_10001":"2013-05-09T17:03:25.452-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["jayluong(jayluong)","tjcramer(tjcramer)","zhill(zhill)"],"environment":"Quickstart Frontend + NC","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/45211","id":"45211","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"For ebs-instances, /dev/vdb is by default the ephemeral disk and will not be persisted across stop/start cycles of the instance.\n\nYou can verify this by looking at the output of euca-describe-volumes. If there is only one volume associated with your instance (as 'attached' /dev/sda or /dev/sda1), then /dev/vdb is the ephemeral disk.\n\nAs per AWS spec, the ephemeral disks are deleted on instance termination or instance stop (stop is the same as terminate as far as the actual vm state is concerned, only metadata and ebs-volumes persist).\n\nIf you want a persistent volume then create another ebs-volume and attach it to the instance. That attachment will survive instance stop/start cycles and keep the data and LVM metadata.\n\nIf you still see errors, please let us know. Thanks!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-09T17:03:25.452-0500","updated":"2013-05-09T17:03:25.452-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/45214","id":"45214","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"body":"I apologize ahead of time for the novice questions. I'm new to the cloud infrastructure. \n\nAre you saying all data is forgotten on the ephemeral disk once the instance is stopped, whether I use a bfEBS image or not? I could've sworn I was able to re-attach the volume with all data present after a stop/start cycle.\n\nIf I have vm types A and B:\nA: m1.small, 1 CPU, 1GB ram, 30GB\nB: c1.medium, 2 CPU, 2GB ram, 100GB\n\nand I start an instance based on A and B with the 10GB bfEBS image. How does one make the 30GB and 100GB drives non-ephemeral? How do users normally do this in production? For example if they need a production database server with 100GB of space? I figured spinning up a B instance, everything will still persist after a power outage, etc. \n\nIf this is the case what's the point of setting up different disk sizes for the various vmtypes? I don't think you can even set zero as the disk space for the vmtypes? For production, it seems like EBS always have to be created in order to persist anything? \n\nWe're just trying to setup various production level servers that could survive and recover from crashes/power failures/accidental terminations, etc. What is the best way of doing this?","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-05-09T17:20:04.816-0500","updated":"2013-05-09T17:20:04.816-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/45318","id":"45318","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"body":"Any additional information would be greatly appreciated.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=jayluong","name":"jayluong","key":"jayluong","accountId":"557058:1f1841dc-390f-46ed-9687-1dfadc191594","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/1451632373c00016540cf875bfe0e3e3?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Jay Luong","active":false,"timeZone":"America/Los_Angeles"},"created":"2013-05-11T10:13:25.840-0500","updated":"2013-05-11T10:13:25.840-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/45322","id":"45322","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"body":"No problem at all. I would recommend taking a look here for a good comprehensive overview of instances and images in AWS, Eucalyptus is essentially the same: http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/concepts.html\n\nThe reason for defining disk sizes is that the vm types are for ephemeral disks so the cloud admin needs to set those sizes such that the hosts that run the VMs have enough hard-disk space to accomodate the VMs. However, because EBS volumes are hosted remotely the size of their volumes is not bound by disk space on the NCs but rather on the SAN or SC (depending on deployment specifics).\n\nFor a DB server I would create a separate EBS volume for the DB store. Then you can attach it to any instance as needed. You an also snapshot it periodically for backup. For snapshot, however, be sure that the volume is not mounted and all IO has been flushed to be sure the volume is in a consistent state (snapshotting makes no guarantee of consistency if the disk is in use, just as in AWS).\n\nIn Eucalyptus 3.2.x, EBS-instances (those that have a root volume that is an EBS volume) are also allocated ephemeral disks of the size indicated by the instance-type (30GB or 100GB in your case). That disk is made available to the instance as /dev/vdb. This is where Eucalyptus 3.2.x differs from AWS in that in AWS you are not allocated ephemeral disks unless you specifically request it in the run request or as part of the image registration (using --block-device-mapping options). This has been fixed in Eucalyptus 3.3, so in the future EBS-instances will not have ephemeral disks by default unless requested.\n\nTo solve your problem, you should create another EBS volume using 'euca-create-volume' and attach it to the instance you want to use it one 'euca-attach-volume'. That will ensure that the volume is not deleted with the instance is stopped or terminated. Plus, you can always attach that volume to any other instance in the cluster if needed (by only to 1 instance at a time). I would also recommend taking regular snapshots of the volume so that you can restore it if anything happens to it.\n\nAnother option is to simply increase the size of the root volume for your instance when you run the instance, or you can do so by registering another image using the same snapshot but specify a larger volume in the image registration call. This can be accomplished at run-instance time by:\n\neuca-run-instances emi-xxxx <your other parameters> -b \"/dev/sda=:100\"\n\nThat will give you a 100GB root device (/dev/sda or /dev/vda). That will give you a root device that is as large as you need so you don't need another disk (if that meets your requirements).\n\nYou can also do this at registration time so that any time you run an instance of the specified emi it will create a larger disk than the source snapshot size (this makes creating the image faster because the snapshot can be small but the instance can have a much larger disk when it is run). (My examples are on Eucalyptus 3.3 development code, so the syntax might be slightly different...you may need to use /dev/sda1 instead of /dev/sda)\n\neuca-register -n ImageName --root-device-name /dev/sda -s snap-XXXX\n-b \"/dev/sda=:snap-XXXX:100\"\n\nThis will result in an emi where any time you run it the root volume will be 100GB even if snap-XXX is only 5GB, for example.\n\nI hope this answers your questions sufficiently. If not, let me know what is still confusing and I'll try to be more clear. Thanks!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=zhill","name":"zhill","key":"zhill","accountId":"557058:70b4b768-eb1f-43a3-a225-3353d0fe3f56","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/239165321c2f152424c9be883721791a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dzhill%26avatarId%3D10406%26noRedirect%3Dtrue"},"displayName":"Zach Hill","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-11T17:47:44.226-0500","updated":"2013-05-11T17:47:44.226-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/46577","id":"46577","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jayluong], let us know if your issue is resolved","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-05-24T22:36:25.192-0500","updated":"2013-05-24T22:36:25.192-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/21188/comment/47277","id":"47277","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"body":"[~jayluong], let us know if you need anything else.  Closing this as remediated.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tjcramer","name":"tjcramer","key":"tjcramer","accountId":"557058:e076cf45-80ca-4b67-befb-7b0c21f32739","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/65e7a5c18fc469f1978f6367993c3bf0?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtjcramer%26avatarId%3D10401%26noRedirect%3Dtrue"},"displayName":"Tim Cramer","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-06-09T13:00:11.875-0500","updated":"2013-06-09T13:00:11.875-0500"}],"maxResults":6,"total":6,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-6105/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}