{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"14695","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14695","key":"EUCA-2994","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_10310":null,"customfield_10311":null,"customfield_11401":null,"customfield_11400":null,"customfield_12800":null,"customfield_10104":[],"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10308":null,"resolutiondate":"2013-12-31T10:57:16.851-0600","customfield_10704":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2994/watchers","watchCount":2,"isWatching":false},"created":"2012-07-21T11:51:44.317-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[],"issuelinks":[{"id":"22410","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/22410","type":{"id":"10102","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10102"},"outwardIssue":{"id":"22020","key":"EUCA-6639","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/22020","fields":{"summary":"Java Dependency Update: Spring","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}}],"assignee":null,"updated":"2015-05-08T17:16:47.642-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10600","id":"10600","name":"Dependencies","description":"cloud-lib dependency bundle"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"Linux distros are mostly using spring 3 at this point.  We have built against 3.0.6 in Debian already.  Fedora has 3.1.1.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Update spring dependency to 3.x","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i01gsf:","customfield_10000":"10000_*:*_1_*:*_45619532656_*|*_5_*:*_1_*:*_0","customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":["DistroInclusion3.2"],"customfield_12500":null,"customfield_10004":null,"customfield_10400":null,"customfield_11600":["agrimm(agrimm)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14695/comment/30937","id":"30937","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"Spring 3.1 definitely breaks mule.  It has to do with their introduction of bean definition profiles.  The problem surfaces when you attempt to make a request such as euca-describe-services, which will hang forever, and you'll see this in cloud-exhaust.log:\n\n{noformat}\nSat Aug 11 15:21:56 2012  WARN [org.mule.transport.vm.VMMessageDispatcher.doDispatch(VMMessageDispatcher.java):63] No receiver for endpointUri: vm://RequestQueue\n{noformat}\n\nRelated discussion of the spring feature:\nhttp://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/\n\nMuleSoft has done the work to migrate to spring 3.1 in mule 3.3M2:\nhttp://www.mulesoft.org/jira/browse/MULE-5995\nhttp://www.mulesoft.org/documentation/display/MULECDEV/Spring+3.1+Upgrade\n\nThere are a small number of related commits.  We could try to use those to figure out what needs to happen in 2.2.  I've already taken some notes on the code diffs between spring 3.0.7 and 3.1.0M1, and the fix may be something as simple as setting a sane default bean \"environment\"\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-08-11T18:42:03.859-0500","updated":"2012-08-11T18:42:03.859-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14695/comment/30938","id":"30938","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"body":"The upgrade page mentions this:\n\n{quote}\nMule uses some Spring protected API that may have changed in this version. One example of this are the changes on DefaultBeanDefinitionDocumentReader class that is extended by Mule.\n{quote}\n\nand in commit 23606, there is this patch:\n\n{code}\n--- mule-3.2.0/modules/spring-config/src/main/java/org/mule/config/spring/MuleBeanDefinitionDocumentReader.java 2011-10-04 22:30:50.992878212 -0400\n+++ mule-3.x/modules/spring-config/src/main/java/org/mule/config/spring/MuleBeanDefinitionDocumentReader.java   2012-08-11 20:42:46.595975023 -0400\n@@ -1,5 +1,5 @@\n /*\n- * $Id: MuleBeanDefinitionDocumentReader.java 19191 2010-08-25 21:05:23Z tcarlson $\n+ * $Id: MuleBeanDefinitionDocumentReader.java 23617 2012-01-17 13:10:39Z svacas $\n  * --------------------------------------------------------------------------------------\n  * Copyright (c) MuleSoft, Inc.  All rights reserved.  http://www.mulesoft.com\n  *\n@@ -23,6 +23,15 @@\n public class MuleBeanDefinitionDocumentReader extends DefaultBeanDefinitionDocumentReader\n {\n \n+    @Override\n+    protected BeanDefinitionParserDelegate createHelper(XmlReaderContext readerContext, Element root, BeanDefinitionParserDelegate parentDelegate)\n+    {\n+        BeanDefinitionParserDelegate delegate = new MuleHierarchicalBeanDefinitionParserDelegate(readerContext, this);\n+        delegate.initDefaults(root, parentDelegate);\n+        return delegate;\n+    }\n+\n+    /* Keep backward compatibility with spring 3.0 */\n     protected BeanDefinitionParserDelegate createHelper(XmlReaderContext readerContext, Element root)\n     {\n         BeanDefinitionParserDelegate delegate = new MuleHierarchicalBeanDefinitionParserDelegate(readerContext, this);\n{code}\n\nSure enough, this patch applied to mule 2.0.2 (minus the @Override line, because it's using source=1.4 and annotations dont work), and seems to be the only thing needed to make mule 2.0.2 work with spring 3.1.1.   Hooray!","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=agrimm","name":"agrimm","key":"agrimm","accountId":"557058:9ebc3512-73d8-45c9-85de-4325aaa62488","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/0e947b5413f5d57fba29a8ea5412f773?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dagrimm%26avatarId%3D10500%26noRedirect%3Dtrue"},"displayName":"Andy Grimm","active":false,"timeZone":"America/New_York"},"created":"2012-08-11T21:06:21.253-0500","updated":"2012-08-11T21:06:21.253-0500"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-2994/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}