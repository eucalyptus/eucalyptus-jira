{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"37601","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601","key":"EUCA-11219","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_10311":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/11500","value":"Edge","id":"11500"}],"customfield_11401":null,"customfield_11400":null,"customfield_10302":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10202","value":"Low","id":"10202"},"customfield_10702":null,"customfield_10703":null,"resolutiondate":null,"customfield_10308":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11219/watchers","watchCount":2,"isWatching":false},"lastViewed":null,"created":"2015-08-03T10:15:05.361-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10102":null,"labels":[],"customfield_10301":null,"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/14801","id":"14801","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"issuelinks":[{"id":"31701","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLink/31701","type":{"id":"10600","name":"Bonfire Testing","inward":"discovered while testing","outward":"testing discovered","self":"https://eucalyptus.atlassian.net/rest/api/2/issueLinkType/10600"},"inwardIssue":{"id":"36708","key":"EUCA-10993","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/36708","fields":{"summary":"Add support for ARNs in policies for all services","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/2","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/critical.svg","name":"Critical","id":"2"},"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815}}}}],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=kedwards","name":"kedwards","key":"kedwards","accountId":"557058:f9c2f8da-1fc6-4aa7-8fb0-750e7e422b6b","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/d1746a6d05a30ca027012a7da4545962?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dkedwards%26avatarId%3D10200%26noRedirect%3Dtrue"},"displayName":"Ken Edwards","active":true,"timeZone":"America/Los_Angeles"},"updated":"2015-12-04T19:14:36.292-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/11503","id":"11503","name":"IAM"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nWhile testing EUCA-10993, the example IAM policy contained the following for SWF:\r\n{code}\r\n....\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"simpleworkflow:*\",\r\n            \"Resource\": \"arn:aws:swf:::/domain/*\"\r\n        },\r\n{code}\r\nWhen testing this on AWS - in addition to the error seen in EUCA-11218 - the following error was returned:\r\n{code}\r\n$ aws iam create-policy --policy-name developers-base-policy --policy-document file://euca10993-base-policy.json --profile hspencer-personal\r\n\r\nA client error (MalformedPolicyDocument) occurred when calling the CreatePolicy operation: Action field contains AWS services that are not specified in the resource field.\r\n{code}\r\nI generated a policy using AWS Policy Generator, and saw the following:\r\n{code}\r\n{\r\n  \"Version\": \"2012-10-17\",\r\n  \"Statement\": [\r\n    {\r\n      \"Sid\": \"Stmt1438611546741\",\r\n      \"Action\": \"swf:*\",\r\n      \"Effect\": \"Allow\",\r\n      \"Resource\": \"*\"\r\n    }\r\n  ]\r\n}\r\n{code}\r\nOn Eucalyptus 4.2, we accepted the IAM policy with no problem.\r\n{code}\r\n# euare-grouplistpolicies -g admins --as-account development-operations --region euca-admin@asap-rocky-2015 -v\r\nall-access\r\n{\r\n    \"Statement\": [\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"autoscaling:*\",\r\n            \"Resource\": \"arn:aws:autoscaling:::autoScalingGroup:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudformation:*\",\r\n            \"Resource\": \"arn:aws:cloudformation:::stack/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudwatch:*\",\r\n            \"Resource\": \"arn:aws:cloudwatch:::alarm:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"ec2:*\",\r\n            \"Resource\": \"arn:aws:ec2:::instance/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"elasticloadbalancing:*\",\r\n            \"Resource\": \"arn:aws:elasticloadbalancing:::loadbalancer/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"simpleworkflow:*\",\r\n            \"Resource\": \"arn:aws:swf:::/domain/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"s3:*\",\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::*\",\r\n                \"arn:aws:s3:::*/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n{code}\r\n\r\n*Steps*\r\n\r\n# Set up two Eucalyptus 4.2 clouds, built from source\r\n#* [hspencer-779 (asap-rocky-2015) |http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Master/779/]\r\n#* [hspencer-781 (asap-rocky-2013) |http://jenkins.qa1.eucalyptus-systems.com/job/Quick%20Launch%20Master/781/]\r\n# Enabled Eucalyptus DNS on both clouds\r\n# Sourced eucalyptus/admin creds, then set {{region.region_name}} on both clouds\r\n{code}\r\n[root@h-08 ~]# euctl region.region_name=asap-rocky-2015 --region euca-admin@localhost\r\n[root@h-08 ~]# euctl region.region_name --region @localhost\r\nregion.region_name = asap-rocky-2015\r\n\r\n[root@e-18 ~]# euctl region.region_name=asap-rocky-2013 --region euca-admin@localhost\r\n[root@e-18 ~]# euctl region.region_name --region @localhost\r\nregion.region_name = asap-rocky-2013\r\n{code}\r\n# Set {{region.region_configuration}} on both clouds\r\n{code}\r\n[root@h-08 ~]# cat region-config.json\r\n{\r\n    \"Regions\": [\r\n        {\r\n            \"Name\": \"asap-rocky-2015\",\r\n            \"CertificateFingerprintDigest\": \"SHA-256\",\r\n            \"CertificateFingerprint\": \"ED:8F:9A:92:45:4D:37:F3:54:E4:2E:E7:26:28:EE:04:A1:DF:AD:82:87:60:A6:C3:4A:15:CB:D7:E9:F2:99:13\",\r\n            \"IdentifierPartitions\": [\r\n                1\r\n            ],\r\n            \"Services\": [\r\n                {\r\n                    \"Type\": \"identity\",\r\n                    \"Endpoints\": [\r\n                        \"http://identity.a-41.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                },\r\n                {\r\n                    \"Type\": \"compute\",\r\n                    \"Endpoints\": [\r\n                        \"http://compute.a-41.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"Name\": \"asap-rocky-2013\",\r\n            \"CertificateFingerprintDigest\": \"SHA-256\",\r\n            \"CertificateFingerprint\": \"3A:69:0F:B3:A5:03:92:50:39:F2:C6:EB:E5:77:94:36:F9:36:12:E2:01:CA:AB:75:B2:6E:71:9B:D0:5E:61:94\",\r\n            \"IdentifierPartitions\": [\r\n                2\r\n            ],\r\n            \"Services\": [\r\n                {\r\n                    \"Type\": \"identity\",\r\n                    \"Endpoints\": [\r\n                        \"http://identity.c-40.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                },\r\n                {\r\n                    \"Type\": \"compute\",\r\n                    \"Endpoints\": [\r\n                        \"http://compute.c-40.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n[root@h-08 ~]# euca-modify-property -f region.region_configuration=region-config.json\r\n\r\n[root@e-18 ~]# cat region-config.json\r\n{\r\n    \"Regions\": [\r\n        {\r\n            \"Name\": \"asap-rocky-2015\",\r\n            \"CertificateFingerprintDigest\": \"SHA-256\",\r\n            \"CertificateFingerprint\": \"ED:8F:9A:92:45:4D:37:F3:54:E4:2E:E7:26:28:EE:04:A1:DF:AD:82:87:60:A6:C3:4A:15:CB:D7:E9:F2:99:13\",\r\n            \"IdentifierPartitions\": [\r\n                1\r\n            ],\r\n            \"Services\": [\r\n                {\r\n                    \"Type\": \"identity\",\r\n                    \"Endpoints\": [\r\n                        \"http://identity.a-41.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                },\r\n                {\r\n                    \"Type\": \"compute\",\r\n                    \"Endpoints\": [\r\n                        \"http://compute.a-41.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"Name\": \"asap-rocky-2013\",\r\n            \"CertificateFingerprintDigest\": \"SHA-256\",\r\n            \"CertificateFingerprint\": \"3A:69:0F:B3:A5:03:92:50:39:F2:C6:EB:E5:77:94:36:F9:36:12:E2:01:CA:AB:75:B2:6E:71:9B:D0:5E:61:94\",\r\n            \"IdentifierPartitions\": [\r\n                2\r\n            ],\r\n            \"Services\": [\r\n                {\r\n                    \"Type\": \"identity\",\r\n                    \"Endpoints\": [\r\n                        \"http://identity.c-40.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                },\r\n                {\r\n                    \"Type\": \"compute\",\r\n                    \"Endpoints\": [\r\n                        \"http://compute.c-40.autoqa.qa1.eucalyptus-systems.com:8773/\"\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n[root@e-18 ~]# euca-modify-property -f region.region_configuration=region-config.json\r\n{code}\r\n# Using eucalyptus/admin credentials on region 'asap-rocky-2015', created 'devops' account, and downloaded creds\r\n{code}\r\n[root@h-08 ~]# euare-accountcreate -a devops\r\ndevops\t001476132417\r\n[root@h-08 ~]# euca-get-credentials -a devops -u admin devops-admin.zip\r\n[root@h-08 ~]# mkdir devops\r\n[root@h-08 ~]# mv devops-admin.zip devops/.\r\n[root@h-08 ~]# cd devops/\r\n[root@h-08 devops]# unzip devops-admin.zip\r\nArchive:  devops-admin.zip\r\nTo setup the environment run: source /path/to/eucarc\r\n  inflating: eucarc\r\n  inflating: iamrc\r\n  inflating: cloud-cert.pem\r\n  inflating: jssecacerts\r\n  inflating: euca2-admin-b8f90311-pk.pem\r\n  inflating: euca2-admin-b8f90311-cert.pem\r\n[root@h-08 devops]# source eucarc\r\n[root@h-08 devops]# euare-userlistbypath\r\narn:aws:iam::001476132417:user/admin\r\n{code}\r\n# Created user 'user01' and group 'admins' under 'devops' account\r\n# Created following IAM access policy file, and uploaded as a group policy.  This should have failed, similar to how it does on AWS.  Eucalyptus applied the policy just fine.\r\n{code}\r\n# cat euca10993-base-policy.json\r\n{\r\n    \"Statement\": [\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"autoscaling:*\",\r\n            \"Resource\": \"arn:aws:autoscaling:::autoScalingGroup:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudformation:*\",\r\n            \"Resource\": \"arn:aws:cloudformation:::stack/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudwatch:*\",\r\n            \"Resource\": \"arn:aws:cloudwatch:::alarm:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"ec2:*\",\r\n            \"Resource\": \"arn:aws:ec2:::instance/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"elasticloadbalancing:*\",\r\n            \"Resource\": \"arn:aws:elasticloadbalancing:::loadbalancer/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"simpleworkflow:*\",\r\n            \"Resource\": \"arn:aws:swf:::/domain/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"s3:*\",\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::*\",\r\n                \"arn:aws:s3:::*/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n# euare-groupuploadpolicy -p all-access -f euca10993-base-policy.json -g admins --as-account development-operations --region euca-admin@asap-rocky-2015\r\n# # euare-grouplistpolicies -g admins --as-account development-operations --region euca-admin@asap-rocky-2015 -v\r\nall-access\r\n{\r\n    \"Statement\": [\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"autoscaling:*\",\r\n            \"Resource\": \"arn:aws:autoscaling:::autoScalingGroup:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudformation:*\",\r\n            \"Resource\": \"arn:aws:cloudformation:::stack/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"cloudwatch:*\",\r\n            \"Resource\": \"arn:aws:cloudwatch:::alarm:*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"ec2:*\",\r\n            \"Resource\": \"arn:aws:ec2:::instance/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"elasticloadbalancing:*\",\r\n            \"Resource\": \"arn:aws:elasticloadbalancing:::loadbalancer/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"simpleworkflow:*\",\r\n            \"Resource\": \"arn:aws:swf:::/domain/*\"\r\n        },\r\n        {\r\n            \"Effect\": \"Allow\",\r\n            \"Action\": \"s3:*\",\r\n            \"Resource\": [\r\n                \"arn:aws:s3:::*\",\r\n                \"arn:aws:s3:::*/*\"\r\n            ]\r\n        }\r\n    ]\r\n}\r\n{code}","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/25206","id":"25206","filename":"euca10993-aws-action-services-not-specified-in-resource-swf-policy.json","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T12:49:55.600-0500","size":1159,"mimeType":"application/json","content":"https://eucalyptus.atlassian.net/secure/attachment/25206/euca10993-aws-action-services-not-specified-in-resource-swf-policy.json"}],"summary":"Mismatch namespace between Action and Resource elements should return Error","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i03bsv:","customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-08-03T11:05:53.696-0500","customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["hspencer(hspencer)","kedwards(kedwards)","sjones(sjones)"],"environment":"Federated Clouds","customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89907","id":"89907","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], the example policy in EUCA-10993 is incorrect, \"swf\" is the expected prefix for simpleworkflow actions.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T11:05:53.696-0500","updated":"2015-08-03T11:05:53.696-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89910","id":"89910","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones], \r\n\r\nCool.  I will update the title of this ticket.  Thanks.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T11:50:01.874-0500","updated":"2015-08-03T11:50:01.874-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89912","id":"89912","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"I do not think it is correct to attempt validation of the action ( as per EUCA-8959 )","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T11:55:23.544-0500","updated":"2015-08-03T11:55:23.544-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89915","id":"89915","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nHmm.. Well, did something change to where the behavior in EUCA-8959 is deprecated?  When I had an action that wasn't present in the Resource element, I got the following on AWS:\r\n{code}\r\n$ aws iam create-policy --policy-name developers-base-policy --policy-document file://euca10993-base-policy.json --profile hspencer-personal\r\n\r\nA client error (MalformedPolicyDocument) occurred when calling the CreatePolicy operation: Action field contains AWS services that are not specified in the resource field.\r\n{code}\r\nOn AWS, there seems to be dependency relationship between {{Action}} and {{Resource}} elements.  \r\n\r\nHere is what I got when I tried it again on AWS, using the {{--debug}} flag:\r\n{code}\r\n$ aws iam create-policy --policy-name bad-policy --policy-document file://euca10993-aws-action-services-not-specified-in-resource-swf-policy.json --profile hspencer-personal --debug\r\n2015-08-03 13:47:29,373 - MainThread - awscli.clidriver - DEBUG - CLI version: aws-cli/1.7.36 Python/2.7.9 Darwin/14.5.0, botocore version: 1.0.1\r\n2015-08-03 13:47:29,373 - MainThread - awscli.clidriver - DEBUG - Arguments entered to CLI: ['iam', 'create-policy', '--policy-name', 'bad-policy', '--policy-document', 'file://euca10993-aws-action-services-not-specified-in-resource-swf-policy.json', '--profile', 'hspencer-personal', '--debug']\r\n2015-08-03 13:47:29,374 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function add_scalar_parsers at 0x10fbfdd70>\r\n2015-08-03 13:47:29,374 - MainThread - botocore.hooks - DEBUG - Event session-initialized: calling handler <function inject_assume_role_provider at 0x10fba4ed8>\r\n2015-08-03 13:47:29,437 - MainThread - botocore.hooks - DEBUG - Event service-data-loaded.iam: calling handler <function register_retries_for_service at 0x10f7e2d70>\r\n2015-08-03 13:47:29,437 - MainThread - botocore.handlers - DEBUG - Registering retry handlers for service: iam\r\n2015-08-03 13:47:29,444 - MainThread - botocore.hooks - DEBUG - Event building-command-table.iam: calling handler <function add_waiters at 0x10fbb2cf8>\r\n2015-08-03 13:47:29,448 - MainThread - awscli.clidriver - DEBUG - OrderedDict([(u'policy-name', <awscli.arguments.CLIArgument object at 0x1102bcc90>), (u'path', <awscli.arguments.CLIArgument object at 0x1102bccd0>), (u'policy-document', <awscli.arguments.CLIArgument object at 0x1102bcd10>), (u'description', <awscli.arguments.CLIArgument object at 0x1102bcd50>)])\r\n2015-08-03 13:47:29,448 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.iam.create-policy: calling handler <function add_streaming_output_arg at 0x10fa64ed8>\r\n2015-08-03 13:47:29,448 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.iam.create-policy: calling handler <function add_cli_input_json at 0x10fba42a8>\r\n2015-08-03 13:47:29,448 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.iam.create-policy: calling handler <function unify_paging_params at 0x10fa8bb90>\r\n2015-08-03 13:47:29,450 - MainThread - botocore.hooks - DEBUG - Event building-argument-table.iam.create-policy: calling handler <function add_generate_skeleton at 0x10fba46e0>\r\n2015-08-03 13:47:29,450 - MainThread - botocore.hooks - DEBUG - Event before-building-argument-table-parser.iam.create-policy: calling handler <bound method CliInputJSONArgument.override_required_args of <awscli.customizations.cliinputjson.CliInputJSONArgument object at 0x1102bcd90>>\r\n2015-08-03 13:47:29,450 - MainThread - botocore.hooks - DEBUG - Event before-building-argument-table-parser.iam.create-policy: calling handler <bound method GenerateCliSkeletonArgument.override_required_args of <awscli.customizations.generatecliskeleton.GenerateCliSkeletonArgument object at 0x110259590>>\r\n2015-08-03 13:47:29,451 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.policy-name: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,451 - MainThread - botocore.hooks - DEBUG - Event process-cli-arg.iam.create-policy: calling handler <awscli.argprocess.ParamShorthand object at 0x10fc06650>\r\n2015-08-03 13:47:29,452 - MainThread - awscli.argprocess - DEBUG - Detected structure: scalar\r\n2015-08-03 13:47:29,452 - MainThread - awscli.arguments - DEBUG - Unpacked value of u'bad-policy' for parameter \"policy_name\": u'bad-policy'\r\n2015-08-03 13:47:29,452 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.path: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,452 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.policy-document: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,453 - MainThread - botocore.hooks - DEBUG - Event process-cli-arg.iam.create-policy: calling handler <awscli.argprocess.ParamShorthand object at 0x10fc06650>\r\n2015-08-03 13:47:29,453 - MainThread - awscli.argprocess - DEBUG - Param policy_document looks like JSON, not considered for param shorthand.\r\n2015-08-03 13:47:29,453 - MainThread - awscli.arguments - DEBUG - Unpacked value of u'{\\n    \"Version\":\"2012-10-17\",\\n    \"Statement\": [\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"autoscaling:*\",\\n            \"Resource\": \"arn:aws:autoscaling:*::autoScalingGroup:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudformation:*\",\\n            \"Resource\": \"arn:aws:cloudformation:*::stack/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudwatch:*\",\\n            \"Resource\": \"arn:aws:cloudwatch:*::alarm:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"ec2:*\",\\n            \"Resource\": \"arn:aws:ec2:*::instance/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"elasticloadbalancing:*\",\\n            \"Resource\": \"arn:aws:elasticloadbalancing:*::loadbalancer/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"simpleworkflow:*\",\\n            \"Resource\": \"arn:aws:swf:*::/domain/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"s3:*\",\\n            \"Resource\": [\\n                \"arn:aws:s3:::*\",\\n                \"arn:aws:s3:::*/*\"\\n            ]\\n        }\\n    ]\\n}\\n' for parameter \"policy_document\": u'{\\n    \"Version\":\"2012-10-17\",\\n    \"Statement\": [\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"autoscaling:*\",\\n            \"Resource\": \"arn:aws:autoscaling:*::autoScalingGroup:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudformation:*\",\\n            \"Resource\": \"arn:aws:cloudformation:*::stack/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudwatch:*\",\\n            \"Resource\": \"arn:aws:cloudwatch:*::alarm:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"ec2:*\",\\n            \"Resource\": \"arn:aws:ec2:*::instance/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"elasticloadbalancing:*\",\\n            \"Resource\": \"arn:aws:elasticloadbalancing:*::loadbalancer/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"simpleworkflow:*\",\\n            \"Resource\": \"arn:aws:swf:*::/domain/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"s3:*\",\\n            \"Resource\": [\\n                \"arn:aws:s3:::*\",\\n                \"arn:aws:s3:::*/*\"\\n            ]\\n        }\\n    ]\\n}\\n'\r\n2015-08-03 13:47:29,453 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.description: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,454 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.cli-input-json: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,454 - MainThread - botocore.hooks - DEBUG - Event load-cli-arg.iam.create-policy.generate-cli-skeleton: calling handler <function uri_param at 0x10fa40578>\r\n2015-08-03 13:47:29,454 - MainThread - botocore.hooks - DEBUG - Event calling-command.iam.create-policy: calling handler <bound method GenerateCliSkeletonArgument.generate_json_skeleton of <awscli.customizations.generatecliskeleton.GenerateCliSkeletonArgument object at 0x110259590>>\r\n2015-08-03 13:47:29,454 - MainThread - botocore.hooks - DEBUG - Event calling-command.iam.create-policy: calling handler <bound method CliInputJSONArgument.add_to_call_parameters of <awscli.customizations.cliinputjson.CliInputJSONArgument object at 0x1102bcd90>>\r\n2015-08-03 13:47:29,454 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: env\r\n2015-08-03 13:47:29,454 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: assume-role\r\n2015-08-03 13:47:29,455 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: shared-credentials-file\r\n2015-08-03 13:47:29,455 - MainThread - botocore.credentials - DEBUG - Looking for credentials via: config-file\r\n2015-08-03 13:47:29,457 - MainThread - botocore.credentials - INFO - Credentials found in config file: ~/.aws/config\r\n2015-08-03 13:47:29,459 - MainThread - botocore.client - DEBUG - Registering retry handlers for service: iam\r\n2015-08-03 13:47:29,463 - MainThread - botocore.hooks - DEBUG - Event creating-client-class.iam: calling handler <function add_generate_presigned_url at 0x10f777ed8>\r\n2015-08-03 13:47:29,474 - MainThread - botocore.endpoint - DEBUG - Making request for <botocore.model.OperationModel object at 0x10ff31990> (verify_ssl=True) with params: {'body': {'Action': u'CreatePolicy', u'PolicyName': u'bad-policy', u'PolicyDocument': u'{\\n    \"Version\":\"2012-10-17\",\\n    \"Statement\": [\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"autoscaling:*\",\\n            \"Resource\": \"arn:aws:autoscaling:*::autoScalingGroup:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudformation:*\",\\n            \"Resource\": \"arn:aws:cloudformation:*::stack/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"cloudwatch:*\",\\n            \"Resource\": \"arn:aws:cloudwatch:*::alarm:*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"ec2:*\",\\n            \"Resource\": \"arn:aws:ec2:*::instance/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"elasticloadbalancing:*\",\\n            \"Resource\": \"arn:aws:elasticloadbalancing:*::loadbalancer/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"simpleworkflow:*\",\\n            \"Resource\": \"arn:aws:swf:*::/domain/*\"\\n        },\\n        {\\n            \"Effect\": \"Allow\",\\n            \"Action\": \"s3:*\",\\n            \"Resource\": [\\n                \"arn:aws:s3:::*\",\\n                \"arn:aws:s3:::*/*\"\\n            ]\\n        }\\n    ]\\n}\\n', 'Version': u'2010-05-08'}, 'url': u'https://iam.amazonaws.com/', 'headers': {'User-Agent': 'aws-cli/1.7.36 Python/2.7.9 Darwin/14.5.0'}, 'query_string': '', 'url_path': '/', 'method': u'POST'}\r\n2015-08-03 13:47:29,474 - MainThread - botocore.hooks - DEBUG - Event request-created.iam.CreatePolicy: calling handler <bound method IAM._sign_request of <botocore.client.IAM object at 0x10ff59350>>\r\n2015-08-03 13:47:29,476 - MainThread - botocore.auth - DEBUG - Calculating signature using v4 auth.\r\n2015-08-03 13:47:29,476 - MainThread - botocore.auth - DEBUG - CanonicalRequest:\r\nPOST\r\n/\r\n\r\nhost:iam.amazonaws.com\r\nuser-agent:aws-cli/1.7.36 Python/2.7.9 Darwin/14.5.0\r\nx-amz-date:20150803T174729Z\r\n\r\nhost;user-agent;x-amz-date\r\n7462c823f886a289f8d5324da87dbc4dd0857383bf6878d1bf4196cf5b8f2b1d\r\n2015-08-03 13:47:29,506 - MainThread - botocore.auth - DEBUG - StringToSign:\r\nAWS4-HMAC-SHA256\r\n20150803T174729Z\r\n20150803/us-east-1/iam/aws4_request\r\n3d4771ce841a6f5ca4cf349949fe73038a73f0f672bc6fcd5a6c5c21815de29a\r\n2015-08-03 13:47:29,507 - MainThread - botocore.auth - DEBUG - Signature:\r\nc69b107fe3ad4c864ef84610f206834c7bca77bc9606b2a5d6ead2647f07df94\r\n2015-08-03 13:47:29,512 - MainThread - botocore.endpoint - DEBUG - Sending http request: <PreparedRequest [POST]>\r\n2015-08-03 13:47:29,513 - MainThread - botocore.vendored.requests.packages.urllib3.connectionpool - INFO - Starting new HTTPS connection (1): iam.amazonaws.com\r\n2015-08-03 13:47:29,682 - MainThread - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"POST / HTTP/1.1\" 400 335\r\n2015-08-03 13:47:29,683 - MainThread - botocore.parsers - DEBUG - Response headers: {'x-amzn-requestid': 'b5f14cf0-3a07-11e5-aca1-7dd4ae3b8736', 'date': 'Mon, 03 Aug 2015 17:47:29 GMT', 'content-length': '335', 'content-type': 'text/xml'}\r\n2015-08-03 13:47:29,683 - MainThread - botocore.parsers - DEBUG - Response body:\r\n<ErrorResponse xmlns=\"https://iam.amazonaws.com/doc/2010-05-08/\">\r\n  <Error>\r\n    <Type>Sender</Type>\r\n    <Code>MalformedPolicyDocument</Code>\r\n    <Message>Action field contains AWS services that are not specified in the resource field.</Message>\r\n  </Error>\r\n  <RequestId>b5f14cf0-3a07-11e5-aca1-7dd4ae3b8736</RequestId>\r\n</ErrorResponse>\r\n\r\n2015-08-03 13:47:29,684 - MainThread - botocore.hooks - DEBUG - Event needs-retry.iam.CreatePolicy: calling handler <botocore.retryhandler.RetryHandler object at 0x110259510>\r\n2015-08-03 13:47:29,684 - MainThread - botocore.retryhandler - DEBUG - No retry needed.\r\n2015-08-03 13:47:29,685 - MainThread - botocore.hooks - DEBUG - Event after-call.iam.CreatePolicy: calling handler <function json_decode_policies at 0x10f7e3140>\r\n2015-08-03 13:47:29,685 - MainThread - botocore.hooks - DEBUG - Event after-call.iam.CreatePolicy: calling handler <awscli.errorhandler.ErrorHandler object at 0x10fc06950>\r\n2015-08-03 13:47:29,685 - MainThread - awscli.errorhandler - DEBUG - HTTP Response Code: 400\r\n2015-08-03 13:47:29,686 - MainThread - awscli.clidriver - DEBUG - Exception caught in main()\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 183, in main\r\n    return command_table[parsed_args.command](remaining, parsed_args)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 369, in __call__\r\n    return command_table[parsed_args.operation](remaining, parsed_globals)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 538, in __call__\r\n    call_parameters, parsed_globals)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/clidriver.py\", line 662, in invoke\r\n    **parameters)\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/client.py\", line 269, in _api_call\r\n    return self._make_api_call(operation_name, kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/client.py\", line 319, in _make_api_call\r\n    model=operation_model\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/hooks.py\", line 226, in emit\r\n    return self._emit(event_name, kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/botocore/hooks.py\", line 209, in _emit\r\n    response = handler(**kwargs)\r\n  File \"/usr/local/lib/python2.7/site-packages/awscli/errorhandler.py\", line 70, in __call__\r\n    http_status_code=http_response.status_code)\r\nClientError: A client error (MalformedPolicyDocument) occurred when calling the CreatePolicy operation: Action field contains AWS services that are not specified in the resource field.\r\n2015-08-03 13:47:29,693 - MainThread - awscli.clidriver - DEBUG - Exiting with rc 255\r\n\r\nA client error (MalformedPolicyDocument) occurred when calling the CreatePolicy operation: Action field contains AWS services that are not specified in the resource field.\r\n{code}\r\n","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T12:49:11.027-0500","updated":"2015-08-03T12:49:11.027-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89916","id":"89916","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"Uploaded file used to create error on AWS.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T12:50:14.236-0500","updated":"2015-08-03T12:50:14.236-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89917","id":"89917","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"body":"[~hspencer], inconsistency between the action and the resource is different from the action by itself being rejected. I think it is fine to add an error for the case that the action does not match the resource (different services)","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T12:56:41.514-0500","updated":"2015-08-03T12:56:41.514-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37601/comment/89952","id":"89952","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~sjones],\r\n\r\nAh, I see what you mean.  I will update the title to be more specific.  Thanks.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-08-03T20:50:43.860-0500","updated":"2015-08-03T20:50:43.860-0500"}],"maxResults":7,"total":7,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-11219/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}