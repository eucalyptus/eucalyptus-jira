{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"53103","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/53103","key":"EUCA-13108","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10000","id":"10000","key":"EUCA","name":"Eucalyptus","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10000&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10000&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10000&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10000&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_11401":null,"customfield_10311":null,"customfield_11400":null,"customfield_10104":[],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"resolutiondate":null,"customfield_10308":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13108/watchers","watchCount":1,"isWatching":false},"lastViewed":null,"created":"2017-01-11T12:28:47.579-0600","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":[],"customfield_11700":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=vasya","name":"vasya","key":"vasya","accountId":"557058:1c63481a-0634-4ae7-9004-cb0f143e141f","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/fa832ffa4e20c9aa05ac272214d43196?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dvasya%26avatarId%3D10408%26noRedirect%3Dtrue"},"displayName":"Vasiliy Kochergin","active":false,"timeZone":"America/Los_Angeles"},"updated":"2017-01-11T16:17:43.702-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10014","id":"10014","name":"Storage Controller"}],"timeoriginalestimate":null,"customfield_13000":null,"description":"When using DAS snapshot files can be leaked when creating a volume in another zone.\r\n\r\nIf a volume is being created from a snapshot of a volume in another zone, then it must first be downloaded from s3. If an error occurs during the download from s3 (e.g. restart eucalyptus-cloud service on ufs) then untracked files are left behind on the second zones sc:\r\n\r\n{code}\r\n#\r\n# ll /var/lib/eucalyptus/volumes/snap-35ce48d2\r\n-rw-r--r--. 1 eucalyptus eucalyptus 2430786331 Jan 11 10:04 /var/lib/eucalyptus/volumes/snap-35ce48d2\r\n#\r\n#\r\n{code}\r\n\r\nthe above is a file from a partially downloaded 10g snapshot.\r\n\r\nTo reproduce on a cloud using DAS storage and multiple availability zones:\r\n\r\n{code}\r\n#\r\n#\r\n# euca-create-volume -s 10 -z one\r\nVOLUME\tvol-7b14f13c\t10\t\tone\tcreating\t2017-01-11T17:56:54.661Z\r\n#\r\n#\r\n# euca-describe-volumes vol-7b14f13c\r\nVOLUME\tvol-7b14f13c\t10\t\tone\tavailable\t2017-01-11T17:56:54.661Z\tstandard\t\r\n#\r\n#\r\n# euca-create-snapshot vol-7b14f13c\r\nSNAPSHOT\tsnap-35ce48d2\tvol-7b14f13c\tpending\t2017-01-11T17:57:31.336Z\t000133867173\t10\t\r\n#\r\n#\r\n# euca-describe-snapshots snap-35ce48d2\r\nSNAPSHOT\tsnap-35ce48d2\tvol-7b14f13c\tpending\t2017-01-11T17:57:31.336Z\t1%\t000133867173\t10\t\r\n#\r\n#\r\n# euca-describe-snapshots snap-35ce48d2\r\nSNAPSHOT\tsnap-35ce48d2\tvol-7b14f13c\tpending\t2017-01-11T17:57:31.336Z\t41%\t000133867173\t10\t\r\n# \r\n# \r\n# euca-describe-snapshots snap-35ce48d2\r\nSNAPSHOT\tsnap-35ce48d2\tvol-7b14f13c\tpending\t2017-01-11T17:57:31.336Z\t62%\t000133867173\t10\t\r\n# \r\n# \r\n# euca-describe-snapshots snap-35ce48d2\r\nSNAPSHOT\tsnap-35ce48d2\tvol-7b14f13c\tcompleted\t2017-01-11T17:57:31.336Z\t100%\t000133867173\t10\t\r\n# \r\n# \r\n# euca-create-volume -z two --snap snap-35ce48d2\r\nVOLUME\tvol-e61a0a29\t10\tsnap-35ce48d2\ttwo\tcreating\t2017-01-11T18:04:13.571Z\r\n#\r\n#\r\n# # ufs restarted during volume creation\r\n#\r\n#\r\n# euca-describe-volumes vol-e61a0a29\r\nVOLUME\tvol-e61a0a29\t10\tsnap-35ce48d2\ttwo\tfailed\t2017-01-11T18:04:13.571Z\tstandard\t\r\n# \r\n# \r\n# euca-delete-volume vol-e61a0a29\r\nVOLUME\tvol-e61a0a29\r\n# \r\n# \r\n# euca-delete-volume vol-7b14f13c\r\nVOLUME\tvol-7b14f13c\r\n# \r\n# \r\n# euca-delete-snapshot snap-35ce48d2\r\nSNAPSHOT\tsnap-35ce48d2\r\n# \r\n# \r\n{code}\r\n\r\nIf another volume is created in the zone from the snapshot then the file is overwritten and will be correctly cleaned up when the snapshot is deleted.\r\n\r\nThe leaked file can be up to the size of the original snapshot.","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"Failed creation of (DAS) volume from snapshot in another zone leaks partial snapshot file","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=sjones","name":"sjones","key":"sjones","accountId":"557058:f5dce1b0-db45-4dd6-a0e8-3cea5effb5ce","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/037fddf6d3bf6d691a448e01136f233a?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsjones%26avatarId%3D18300%26noRedirect%3Dtrue"},"displayName":"Steve Jones","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"customfield_12100":"0|i041j3:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["sjones(sjones)","vasya(vasya)"],"customfield_10116":null,"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/EUCA-13108/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}