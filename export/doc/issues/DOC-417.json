{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"14836","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14836","key":"DOC-417","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14818&avatarType=issuetype","name":"Task","subtask":false,"avatarId":14818},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10006","id":"10006","key":"DOC","name":"Documentation","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10006&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10006&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10006&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10006&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10303":null,"customfield_10105":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10200","value":"High","id":"10200"},"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2013-10-31T17:53:46.951-0500","customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/DOC-417/watchers","watchCount":2,"isWatching":false},"created":"2012-07-24T22:30:37.692-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","labels":["3.4-PM"],"customfield_11700":null,"customfield_11900":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2013-10-31T17:54:01.311-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"This would be super-helpful for a lot of customers. I've got some draft steps that I put together but these need to be expanded upon and QA'd:\r\n\r\n** FIRST APPROACH, if you own the AMI in question:\r\n\r\nThings you'll need:\r\n\r\n- A running Eucalyptus instance.\r\n- Access to the Amazon S3 bucket containing the AMI you need\r\n\r\nSteps:\r\n\r\n1. Download and decrypt the AMI from Amazon by running:\r\n\r\n - ec2-download-bundle -b <bucketname> -d ami-conversion\r\n - ec2-unbundle-image -m ami-conversion/manifest.xml\r\n\r\n2. Now that you have the root filesystem image, you need to add the\r\nkernel modules that you are using on Eucalyptus. To do this, run a\r\nEucalyptus instance and copy the kernel modules in to your AMI, and\r\nensure that the /etc/fstab file is correct.\r\n\r\n - mount -o loop ami.img /mnt\r\n - rsync -i euca-key.private 192.168.1.100:/lib/modules/ /mnt/lib/modules/\r\n - echo \"devpts           /dev/pts      devpts   gid=5,mode=620   0 0\"\r\n>> /etc/fstab\r\n - umount /mnt\r\n\r\n3. Now, bundle the modified AMI into Eucalyptus:\r\n\r\n - euca-bundle-image -i ami.img --ramdisk eri-foo --kernel eki-foo\r\n - euca-upload-bundle -b myami -m /mnt/manifest.xml\r\n - euca-register myami/manifest.xlm\r\n\r\n4. Test the instance.\r\n\r\n** SECOND APPROACH, bundling an existing running EC2 instance:\r\n\r\n1. Install euca2ools on your EC2 instance.\r\n2. Copy your admin-credentials.zip file from Eucalyptus to this instance.\r\n3. Run euca-bundle-vol based on the instructions here:\r\nhttp://open.eucalyptus.com/participate/wiki/bundling-images\r\n4. Copy the files (.xml and .part files) to your Eucalyptus system.\r\n5. Run euca-upload-bundle and euca-register to upload and register the\r\nnew system.\r\n","customfield_13200":null,"customfield_11300":"PRD-24","customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"Add docs for AMI -> EMI conversion","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tgerla","name":"tgerla","key":"tgerla","accountId":"557058:e18f44c8-7078-4706-89e3-47f30f2483ee","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue"},"displayName":"tgerla","active":false,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=tgerla","name":"tgerla","key":"tgerla","accountId":"557058:e18f44c8-7078-4706-89e3-47f30f2483ee","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/feec4781b02a795ea0e448a8ac2fa116?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dtgerla%26avatarId%3D10404%26noRedirect%3Dtrue"},"displayName":"tgerla","active":false,"timeZone":"America/Los_Angeles"},"customfield_10000":"1_*:*_1_*:*_40072989292_*|*_5_*:*_1_*:*_0","customfield_12100":"0|i01gxr:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2013-10-31T17:53:46.972-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":["Image-Management-PM"],"customfield_12500":null,"customfield_10004":null,"customfield_10400":null,"customfield_11600":["smarvin(smarvin)","tgerla(tgerla)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/14836/comment/57549","id":"57549","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=smarvin","name":"smarvin","key":"smarvin","accountId":"557058:05586e44-7f70-416d-9933-1d102bb4cf60","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue"},"displayName":"Scot Marvin","active":true,"timeZone":"America/Los_Angeles"},"body":"Done under hybrid guide work.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=smarvin","name":"smarvin","key":"smarvin","accountId":"557058:05586e44-7f70-416d-9933-1d102bb4cf60","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue"},"displayName":"Scot Marvin","active":true,"timeZone":"America/Los_Angeles"},"created":"2013-10-31T17:53:46.972-0500","updated":"2013-10-31T17:53:46.972-0500"}],"maxResults":1,"total":1,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/DOC-417/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}