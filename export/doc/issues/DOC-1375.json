{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"30570","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30570","key":"DOC-1375","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14810&avatarType=issuetype","name":"Improvement","subtask":false,"avatarId":14810},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10006","id":"10006","key":"DOC","name":"Documentation","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10006&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10006&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10006&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10006&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":{"self":"https://eucalyptus.atlassian.net/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_10310":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10700":null,"customfield_10304":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":"2014-09-23T15:24:24.030-0500","customfield_10308":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/DOC-1375/watchers","watchCount":1,"isWatching":false},"created":"2014-06-04T10:38:21.534-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"customfield_11700":null,"customfield_11900":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2014-09-23T15:24:28.136-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Closed","id":"6","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Done"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"(from Harold)\r\n\r\nI created this to be added as an example under ['Eucalyptus Load Balancing Usage Examples'|https://www-stage.eucalyptus-systems.com/docs/eucalyptus/4.0/index.html#user-guide/elb_examples_intro.html]. \r\n\r\n*Steps to Create HTTPS/SSL ELB ( modified version of http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/US_SettingUpLoadBalancerHTTPS.html )*\r\n\r\n1)  Configure Listeners\r\n* Create SSL Certificate for Load Balancer\r\n** Create private key\r\n{code}$ openssl genrsa 2048 > acmes-dev-euca.pem{code}\r\n** If submitting the Certificate Signing Request to a Certificate Authority, generate CSR (http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/ssl-server-cert.html).  If not, create a self-signed certificate.  (Note: for production use, we recommend generating a CSR.  Self-signed certificates are great for testing):\r\n*** Generate a CSR\r\n{code}$ openssl req -new -key acmes-dev-euca.pem -out acme-dev-csr.pem{code}\r\nor\r\n*** Generate a self-signed certificate\r\n{code}$ openssl req -new -x509 -key acmes-dev-euca.pem -out acmes-cacert.pem -days 1095{code}\r\n** Upload the Certificate\r\n*** If not in PEM format, create PEM format private key \r\n{code}$ openssl rsa -in acmes-dev-euca.pem -outform PEM > acmes-dev-euca-pem.pem{code}\r\n*** If not in PEM format, create PEM format public certificate\r\n{code}$ openssl x509 -inform PEM -in acmes-cacert.pem > acmes-cacert-pem.pem{code}\r\n*** \\[\\*\\] (In case a certificate chain was provided by the CA) Typically, both intermediate and root certificates are provided by a CA in a bundled file with the proper chained order. If a certificate bundle is not available or not available in the required order, you can create your own certificate chain file.  To create your own certificate chain file, include the intermediate certificates and optionally, the root certificate, one after the other without any blank lines. If you are including the root certificate, your certificate chain must start with intermediate certificates and end with the root certificate. Use the intermediate certificates that were provided by your CA. Any intermediaries that are not involved in the chain of trust path must not be included. Once there is a certificate chain and its not in PEM format, create PEM format certificate chain\r\n{code}$ openssl x509 -inform PEM -in acmes-cachain-cert.pem > acmes-cachain-cert-pem.pem{code}\r\n*** Upload certificates\r\n**** With no certificate chain\r\n{code}$ euare-servercertupload -s acmes-dev-eucalyptus --certificate-file acmes-cacert-pem.pem --private-key-file acmes-dev-euca-pem.pem{code}\r\n**** With certificate chain\r\n{code}$ euare-servercertupload -s acmes-dev-eucalyptus --certificate-file acmes-cacert-pem.pem --private-key-file acmes-dev-euca-pem.pem --certificate-chain-file acmes-cachain-cert-pem.pem{code}\r\n** Confirm certificate\r\n{code}$ euare-servercertgetattributes -s acmes-dev-eucalyptus\r\narn:aws:iam::408396244283:server-certificate/acmes-dev-eucalyptus\r\nASCH4UCWZA6D6V0TLQQOG{code}\r\n\r\nb) Create LB with Listeners\r\n{code}$ eulb-create-lb MyLoadBalancer -z AcmeAvailabilityZone -l \"lb-port=80, protocol=HTTP, instance-port=80, instance-protocol=HTTP\" -l \"lb-port=443, protocol=https, instance-port=80, instance-protocol=http, cert-id=arn:aws:iam::408396244283:server-certificate/acmes-dev-eucalyptus\"{code}\r\n\\[\\*\\]  For more information regarding creating listeners, please refer to the following sections from this resource - http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-listener-config.html\r\n* Listeners\r\n* Using HTTP/HTTPS Protocol with Elastic Load Balancing\r\n* Using Back-End Server Authentication with Elastic Load Balancing\r\n\t  \r\n2) Configure Health Check\r\n{code}$ eulb-configure-healthcheck MyLoadBalancer --target \"HTTP:80/\" --interval 30 --timeout 2 --unhealthy-threshold 2 --healthy-threshold 2{code}\r\n\r\n3) Launch and register instances.  EMI used for instances can be either pre-baked with web server, or configured upon launching the instance using userdata file.\r\n* Create security group for instances\r\n{code}$ euca-create-group mysecuritygroup -d \"Security Group for HTTPS/SSL Web Servers\"{code}\r\n* Authorize ELB security group for back-end port communication with instance security group\r\n{code}\r\n$ eulb-describe-lbs --show-long\r\nLOAD_BALANCER\tMyLoadBalancer\tMyLoadBalancer-408396244283.elb.acme.eucalyptus-systems.com\t\t\t{interval=30,target=HTTP:80/,timeout=2,healthy-threshold=2,unhealthy-threshold=2}\tAcmeAvailabilityZone\t\t\t\t{protocol=HTTP,lb-port=80,instance-protocol=HTTP,instance-port=80},{protocol=HTTPS,lb-port=443,instance-protocol=HTTP,instance-port=80,cert-id=arn:aws:iam::408396244283:server-certificate/acmes-dev-eucalyptus}\t\t\t\t\t{owner-alias=944786667073,group-name=euca-internal-408396244283-MyLoadBalancer}\t\t2014-05-29T02:14:00.141Z\r\n$ euca-authorize mysecuritygroup -u 944786667073 -o euca-internal-408396244283-MyLoadBalancer -p -1\r\n{code}\r\n* Launch instances\r\n{code}$ euca-run-instances -g mysecuritygroup -n 2 -t m1.medium emi-50783D25{code}\r\n* Register instances with ELB\r\n{code}$ eulb-register-instances-with-lb MyLoadBalancer --instances i-A564BC81,i-B17317D1{code}\r\n4) Verify Details of Load Balancer\r\n{code}\r\n$ eulb-describe-instance-health MyLoadBalancer --show-long\r\n\tINSTANCE\ti-B17317D1\tInService\r\n\tINSTANCE\ti-A564BC81\tInService\r\n{code}\r\n\r\n","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"attachment":[],"aggregatetimeestimate":null,"summary":"ELB Use Case","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=smarvin","name":"smarvin","key":"smarvin","accountId":"557058:05586e44-7f70-416d-9933-1d102bb4cf60","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue"},"displayName":"Scot Marvin","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=smarvin","name":"smarvin","key":"smarvin","accountId":"557058:05586e44-7f70-416d-9933-1d102bb4cf60","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/95e97cadbfbf5d0194fdb73f1eee6cc8?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dsmarvin%26avatarId%3D12601%26noRedirect%3Dtrue"},"displayName":"Scot Marvin","active":true,"timeZone":"America/Los_Angeles"},"customfield_12100":"0|i02rhj:","aggregateprogress":{"progress":0,"total":0},"customfield_10000":"1_*:*_1_*:*_9607562526_*|*_5_*:*_1_*:*_0","customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["smarvin(smarvin)"],"environment":null,"customfield_10117":null,"customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/DOC-1375/votes","votes":0,"hasVoted":false},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}