{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"37320","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37320","key":"GUI-1885","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/11301","id":"11301","key":"GUI","name":"Management Console","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=11301&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=11301&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=11301&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=11301&avatarId=10011"}},"customfield_11000":null,"customfield_11001":null,"fixVersions":[],"aggregatetimespent":null,"resolution":null,"customfield_10310":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":["com.atlassian.greenhopper.service.sprint.Sprint@719f764d[id=123,rapidViewId=92,state=CLOSED,name=4.2.0 Sprint 7,goal=<null>,startDate=2015-07-02T19:45:06.233Z,endDate=2015-07-23T19:45:00.000Z,completeDate=2015-07-28T14:18:30.340Z,sequence=123]"],"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10403","value":"Not Applicable","id":"10403"},"customfield_10302":null,"customfield_10303":null,"customfield_10105":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"resolutiondate":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":null,"workratio":-1,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/GUI-1885/watchers","watchCount":2,"isWatching":false},"lastViewed":null,"created":"2015-07-14T11:44:22.485-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_12600":"{pullrequest={dataType=pullrequest, state=MERGED, stateCount=1}, json={\"cachedValue\":{\"errors\":[],\"summary\":{\"pullrequest\":{\"overall\":{\"count\":1,\"lastUpdated\":\"2015-07-29T09:27:41.000-0500\",\"stateCount\":1,\"state\":\"MERGED\",\"dataType\":\"pullrequest\",\"open\":false},\"byInstanceType\":{\"github\":{\"count\":1,\"name\":\"GitHub\"}}}}},\"isStale\":true}}","customfield_10102":null,"customfield_10300":null,"labels":[],"customfield_10301":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_11901":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/15504","id":"15504","description":"Eucalyptus 4.2.0","name":"4.2.0","archived":false,"released":true,"releaseDate":"2015-10-22"}],"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dkavanagh","name":"dkavanagh","key":"dkavanagh","accountId":"557058:03be2b52-89f7-4c8f-8e00-e2a60a3e7a5e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue"},"displayName":"David Kavanagh","active":false,"timeZone":"America/New_York"},"updated":"2015-11-11T11:04:16.725-0600","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"customfield_13000":null,"description":"Per [~mcrawford], there are templates that use a region2ami map that could include emis and we should try supporting that for 4.2","customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/25023","id":"25023","filename":"WordPress_Single_Instance_Eucalyptus.template","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mcrawford","name":"mcrawford","key":"mcrawford","accountId":"557058:75e0a4e1-089b-40d0-a2fa-f65a508a115e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue"},"displayName":"Michael Crawford","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-14T12:56:37.382-0500","size":14253,"mimeType":"application/octet-stream","content":"https://eucalyptus.atlassian.net/secure/attachment/25023/WordPress_Single_Instance_Eucalyptus.template"}],"aggregatetimeestimate":null,"summary":"stack template import flags valid euca images in map as needing conversion","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dkavanagh","name":"dkavanagh","key":"dkavanagh","accountId":"557058:03be2b52-89f7-4c8f-8e00-e2a60a3e7a5e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue"},"displayName":"David Kavanagh","active":false,"timeZone":"America/New_York"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dkavanagh","name":"dkavanagh","key":"dkavanagh","accountId":"557058:03be2b52-89f7-4c8f-8e00-e2a60a3e7a5e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue"},"displayName":"David Kavanagh","active":false,"timeZone":"America/New_York"},"customfield_12100":"0|i03azb:","customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_10001":"2015-07-14T13:08:29.034-0500","customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_11600":["dkavanagh(dkavanagh)","mcrawford(mcrawford)"],"customfield_10116":null,"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37320/comment/89258","id":"89258","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mcrawford","name":"mcrawford","key":"mcrawford","accountId":"557058:75e0a4e1-089b-40d0-a2fa-f65a508a115e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue"},"displayName":"Michael Crawford","active":true,"timeZone":"America/Los_Angeles"},"body":"[~dkavanagh] Thanks!\r\n\r\nI've just added an attachment to illustrate what I mean. This is a variant of what we created for the Discover demo, where once we uploaded a tweaked version of the CentOS 6.6 minimal image which contains cfn-init and awscli, we can modify the existing Wordpress template to specify the EMI for one or more Euca regions, so our regions work the same as AWS regions. This prevents a user of the template from having to look up the EMI, when that might not be easy or clear if there are many listed. This allows us to guarantee that the template will use an image which may have been created specifically for it, and without which the template may not work (for example, we may have a client with a \"pre-baked\" deployment pipeline, where custom AMIs/EMIs are created with most code embedded within, which uses user-data within the template to pass in configuration information. This technique is used in AWS when AS groups must respond quickly to changes in load, and can't afford to spend time loading apps on a scale up event.)\r\n\r\nI have suggested some approaches to David on this:\r\n1. Detect the presence of the map with EMI IDs within it, and disable this aspect of corrections when found.\r\n2. Provide a checkbox in the results of searching for errors, allowing the user to uncheck correcting this one before the template is \"fixed\".\r\n3. Provide a parameter in console.ini which disables this correction, so advanced users can turn this on without affecting everyone else who would benefit from it.\r\n4. Allow uploads to the sample-templates S3 bucket without testing for this correction on the upload, or when a sample template is selected from this bucket for use in the GUI. Again, this might be paired with a console.ini value which turns off fixing templates.\r\n\r\nJust curious on one more thing - what happens if a template gets through which contains errors, services we don't support, or a missing region in a map or a referenced EMI which is missing or broken? Don't we just throw a parsing error and roll back any objects created previously? And expect the user to tweak the template to fix the errors until it works properly.\r\n\r\nI know this logic is to help prevent most users from making obvious mistakes, which is a GOOD thing. Superbly helpful to most. We just need to be careful this doesn't step on expert users doing things which we can reasonably expect them to want to do - I think this is an excellent example of that.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=mcrawford","name":"mcrawford","key":"mcrawford","accountId":"557058:75e0a4e1-089b-40d0-a2fa-f65a508a115e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3737aee022e72f1e8f391d899fb15e1e?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dmcrawford%26avatarId%3D15800%26noRedirect%3Dtrue"},"displayName":"Michael Crawford","active":true,"timeZone":"America/Los_Angeles"},"created":"2015-07-14T13:08:29.034-0500","updated":"2015-07-14T13:08:29.034-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/37320/comment/89264","id":"89264","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dkavanagh","name":"dkavanagh","key":"dkavanagh","accountId":"557058:03be2b52-89f7-4c8f-8e00-e2a60a3e7a5e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue"},"displayName":"David Kavanagh","active":false,"timeZone":"America/New_York"},"body":"https://github.com/eucalyptus/eucaconsole/pull/1474\r\n\r\nI've improved the checking and ignore the image param when I find a FindInMap function and referenced map contains any emi- string. Very simple, but passes in the case of your template.\r\nI've also stopped doing the aws-template check if it's a sample template.","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=dkavanagh","name":"dkavanagh","key":"dkavanagh","accountId":"557058:03be2b52-89f7-4c8f-8e00-e2a60a3e7a5e","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/e04f1add3c50bf8a7d1676b60b8ba337?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Ddkavanagh%26avatarId%3D10202%26noRedirect%3Dtrue"},"displayName":"David Kavanagh","active":false,"timeZone":"America/New_York"},"created":"2015-07-14T14:12:12.025-0500","updated":"2015-07-14T14:13:21.549-0500"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/GUI-1885/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}