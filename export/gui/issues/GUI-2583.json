{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"42709","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/42709","key":"GUI-2583","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/7","id":"7","description":"A user story. Created by JIRA Software - do not edit or delete.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14815&avatarType=issuetype","name":"Story","subtask":false,"avatarId":14815},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/11301","id":"11301","key":"GUI","name":"Management Console","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=11301&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=11301&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=11301&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=11301&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"customfield_10310":null,"resolution":null,"customfield_11401":null,"customfield_11400":null,"customfield_10104":[],"customfield_10105":null,"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10306":null,"customfield_10702":null,"customfield_10703":null,"customfield_10704":null,"resolutiondate":null,"customfield_10309":null,"customfield_10705":null,"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/GUI-2583/watchers","watchCount":1,"isWatching":false},"created":"2016-05-04T16:56:10.924-0500","customfield_12000":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12400":null,"customfield_12201":null,"customfield_10102":null,"customfield_12600":"{}","labels":[],"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/16405","id":"16405","description":"Eucalyptus 4.2.1","name":"4.2.1","archived":false,"released":true,"releaseDate":"2015-12-07"}],"customfield_11901":null,"issuelinks":[],"assignee":null,"updated":"2016-05-04T16:56:10.924-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10000","description":"This issue has not yet been validated, and is not currently being investigated.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Unconfirmed","id":"10000","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[],"timeoriginalestimate":null,"description":"Hi Everyone,\r\nI set up nginx and eucaconsole but still I cannot login and I get 503-gateway timeout.\r\nI have attached screenshots of my web console.\r\nThese are my nginx and eucaconsole config files:\r\n*Nginx:\r\n# nginx.conf\r\n\r\n# user nginx;\r\nworker_processes 4;\r\npid /var/run/eucaconsole/nginx.pid;\r\n\r\nevents {\r\n    worker_connections 2048;\r\n    # multi_accept on;\r\n}\r\n\r\nhttp {\r\n    ### Basic Settings\r\n    ##\r\n\r\n    sendfile on;\r\n    tcp_nopush on;\r\n    tcp_nodelay on;\r\n    keepalive_timeout 15;\r\n    types_hash_max_size 2048;\r\n    # server_tokens off;\r\n\r\n    # server_names_hash_bucket_size 64;\r\n    # server_name_in_redirect off;\r\n\r\n    # include /etc/nginx/mime.types;\r\n    default_type application/octet-stream;\r\n\r\n    ### Logging Settings\r\n    ##\r\n\r\n    access_log /var/log/eucaconsole_nginx_access.log;\r\n    error_log /var/log/eucaconsole_nginx_error.log;\r\n\r\n    ### Gzip Settings\r\n    ##\r\n\r\n    gzip on;\r\n    # gzip_disable \"msie6\";\r\n\r\n    ### Virtual Host Configs\r\n    ##\r\n\r\n    server {\r\n        listen 80 default;\r\n        server_name ~^(?<domain>.+)$;\r\n        rewrite     ^ https://$domain$request_uri? permanent;\r\n    }\r\n\r\n    server {\r\n        listen 443 ssl;\r\n        server_name ~^(?<domain>.+)$;\r\n\r\n        # SSL configuration\r\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\r\n        ssl_ciphers \"ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:ECDHE-RSA-DES-CBC3-SHA:ECDHE-ECDSA-DES-CBC3-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA\";\r\n        ssl_prefer_server_ciphers on;\r\n        ssl_certificate /etc/eucaconsole/console.crt;\r\n        ssl_certificate_key /etc/eucaconsole/console.key;\r\n        add_header \"X-UA-Compatible\" \"IE=Edge\";\r\n        add_header Strict-Transport-Security \"max-age=31536000; includeSubDomains\";\r\n        # end of SSL configuration\r\n\r\n        location /static/.* {\r\n            # NOTE: Set path to static folder\r\n            root                    /path/to/eucaconsole/static;\r\n            expires                 30d;\r\n            add_header              Cache-Control public;\r\n            access_log              off;\r\n        }\r\n\r\n        location / {\r\n            proxy_set_header        Host $http_host;\r\n            proxy_set_header        X-Real-IP $remote_addr;\r\n            proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\r\n            proxy_set_header        X-Forwarded-Proto $scheme;\r\n\r\n            client_max_body_size    5g;\r\n            client_body_buffer_size 128k;\r\n            proxy_connect_timeout   30s;\r\n            proxy_send_timeout      90s;\r\n            proxy_read_timeout      90s;\r\n            proxy_buffering on;\r\n            proxy_buffer_size 128k;\r\n            proxy_buffers 4 256k;\r\n            proxy_busy_buffers_size 256k;\r\n            proxy_temp_file_write_size 512k;\r\n            # NOTE: Specify Eucalyptus Management Console hosts/ports here\r\n            # Multiple console hosts are supported\r\n            proxy_pass http://127.0.0.1:8888;\r\n            # proxy_pass http://127.0.0.1:9999;\r\n            proxy_redirect          off;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    # include /etc/nginx/conf.d/*.conf;\r\n    # include /etc/nginx/sites-enabled/*;\r\n}\r\nEt console.ini\r\n######################################\r\n# Eucalyptus Management Console Config\r\n######################################\r\n\r\n\r\n###################\r\n# App configuration\r\n# http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/environment.html\r\n###\r\n[app:main]\r\nuse = egg:eucaconsole\r\n\r\n## EUCA config\r\nufshost = 149.149.134.117\r\nufsport = 8773\r\n\r\nhelp.url=https://support.eucalyptus.com/hc/en-us\r\n# admin support url\r\nsupport.url=\r\n# examples:\r\n#support.url=http://your-cloud-admin-portal/\r\n#support.url=mailto: support@yourdomain.com\r\n\r\n# To log user interaction in the std console log (configured below), set this to true\r\nlog.useractions = false\r\n\r\n## AWS settings ##\r\naws.enabled = True\r\n# set this to define a default region for aws login\r\naws.default.region = us-east-1\r\n\r\n# configures value use for cache control on static assets (in seconds)\r\nstatic.cache.duration = 43200\r\n\r\n# if true, login forms will support browser password save, if false, browser won't prompt to save\r\nbrowser.password.save = true\r\n\r\n# If true, enable file uploads for S3/ObjectStorage\r\nfile.uploads.enabled = true\r\n\r\n# enables SSL certificate validation on communication to the cloud service endpoints.\r\n# all communication to those services uses SSL already, but enabling this requires a properly signed cert.\r\nconnection.ssl.validation = true\r\n# use this value to override the default cacerts.txt that comes with boto\r\n#connection.ssl.certfile = cacerts.txt\r\n\r\n# Cloud Formation sample templates\r\n# set this to a public bucket which contains JSON templates\r\n#cloudformation.samples.bucket = sample-templates\r\n\r\n# Cloud Formation template upload URL whitelist\r\n# This list defines wildcard patterns that are acceptable for URLs.\r\ncloudformation.url.whitelist = http://*, https://*\r\n\r\n# sets connection debug on, which really sets boto's log level to DEBUG\r\n# This provides a lot of information about console <-> CLC communication.\r\nconnection.debug = true\r\n# This sets the boto num_retries value. A lower value will be more responsive to the user in some error conditions.\r\nconnection.retries = 2\r\n\r\n## Pyramid settings ##\r\npyramid.reload_templates = false\r\npyramid.debug_authorization = false\r\npyramid.debug_notfound = false\r\npyramid.debug_routematch = false\r\npyramid.default_locale_name = en\r\npyramid.includes =\r\n    pyramid_beaker\r\n    pyramid_chameleon\r\n    pyramid_layout\r\n#    pyramid_debugtoolbar\r\n\r\n## Session config ##\r\n# See http://beaker.readthedocs.org/en/latest/configuration.html\r\n#\r\n# Session type is one of cookie, file, dbm, memory, ext:memcached, ext:database, ext:google\r\n# The 'cookie' session type has a hard limit of 4096 bytes\r\nsession.type = cookie\r\nsession.key = eucaconsole_session\r\nsession.keyini = /etc/eucaconsole/session-keys.ini\r\nsession.httponly = true\r\n# session.secure = true implies an HTTPS reverse proxy (nginx or load balancer) is configured\r\nsession.secure = true\r\nsslcert=/etc/eucaconsole/console.crt\r\nsslkey=/etc/eucaconsole/console.key\r\n# Idle timeout (1800 sec = 30 min)\r\nsession.timeout = 1800\r\n# Absolute timeout (43200 sec = 12 hours)\r\nsession.cookie_expires = 43200\r\n\r\n## Cache config ##\r\n# configuration of regions for dogpile.cache\r\ncache.memory = dogpile.cache.pylibmc\r\ncache.memory.url = 127.0.0.1:11211\r\ncache.short_term.expire = 60\r\ncache.default_term.expire = 300\r\ncache.long_term.expire = 3600\r\ncache.extra_long_term.expire = 43200\r\n# for configuring SASL PLAIN auth\r\n#cache.username =\r\n#cache.password =\r\n# disable image caching on Eucalyptus if users frequently change images outside of console\r\ncache.images.disable = false\r\n\r\n###########################\r\n# WSGI server configuration\r\n###\r\n[server:main]\r\nuse = egg:gunicorn#main\r\n# host = 127.0.0.1 limits connections to localhost and assumes a reverse proxy (e.g. nginx) is configured\r\nhost = 149.149.134.117\r\nport = 8888\r\nworkers = 4\r\n# if you use gunicorn outside of CentOS, you can set worker_class to \"gevent\"\r\nworker_class = eucaconsole.gunicorn.ggevent.GeventWorker\r\n# set the tmp_upload_dir to change the directory where uploaded files will be stored. Must be writable by 'eucaconsole' user.\r\n#tmp_upload_dir = /var/tmp\r\n\r\n\r\n#######################\r\n# Logging configuration\r\n# http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/logging.html\r\n###\r\n[loggers]\r\nkeys = root\r\n\r\n[handlers]\r\nkeys = screen_debug, logfile\r\n\r\n[formatters]\r\nkeys = generic, eucaformat\r\n\r\n[logger_root]\r\nhandlers = logfile\r\nlevel = INFO\r\n# handlers = logfile, screen_debug\r\n\r\n[handler_screen_debug]\r\nclass = StreamHandler\r\nargs = (sys.stdout,)\r\nlevel = NOTSET\r\nformatter = generic\r\n\r\n[handler_logfile]\r\nclass = handlers.RotatingFileHandler\r\nargs = ('/var/log/eucaconsole.log', 'a', 'maxBytes=1000000', 'backupCount=10')\r\n# args = ('/tmp/eucalyptus_console.log', 'a', 'maxBytes=1000000', 'backupCount=10')\r\nlevel = NOTSET\r\nformatter = eucaformat\r\n\r\n[formatter_generic]\r\nformat = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s\r\n\r\n[formatter_eucaformat]\r\nformat = %(asctime)-15s %(levelname)s %(message)s\r\ndatefmt = %Y-%m-%d %H:%M:%S\r\n\r\nI would like to know the reason behind this issue.\r\nThank you so much for your help.\r\n\r\n\r\n\r\n","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10005":null,"customfield_10401":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/29704","id":"29704","filename":"Screen Shot 2016-05-03 at 8.39.26 PM.png","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=Alaeddine","name":"Alaeddine","key":"alaeddine","accountId":"557058:8ff116cc-9503-46dc-b6fc-5d1f04f702fb","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Alaeddine Saadaoui","active":true,"timeZone":"US/Central"},"created":"2016-05-04T16:50:01.858-0500","size":115585,"mimeType":"image/png","content":"https://eucalyptus.atlassian.net/secure/attachment/29704/Screen+Shot+2016-05-03+at+8.39.26+PM.png","thumbnail":"https://eucalyptus.atlassian.net/secure/thumbnail/29704/Screen+Shot+2016-05-03+at+8.39.26+PM.png"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/attachment/29705","id":"29705","filename":"Screen Shot 2016-05-03 at 8.50.07 PM.png","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=Alaeddine","name":"Alaeddine","key":"alaeddine","accountId":"557058:8ff116cc-9503-46dc-b6fc-5d1f04f702fb","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Alaeddine Saadaoui","active":true,"timeZone":"US/Central"},"created":"2016-05-04T16:50:01.191-0500","size":21230,"mimeType":"image/png","content":"https://eucalyptus.atlassian.net/secure/attachment/29705/Screen+Shot+2016-05-03+at+8.50.07+PM.png","thumbnail":"https://eucalyptus.atlassian.net/secure/thumbnail/29705/Screen+Shot+2016-05-03+at+8.50.07+PM.png"}],"summary":"Cannot connect to the web management console","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=Alaeddine","name":"Alaeddine","key":"alaeddine","accountId":"557058:8ff116cc-9503-46dc-b6fc-5d1f04f702fb","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Alaeddine Saadaoui","active":true,"timeZone":"US/Central"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=Alaeddine","name":"Alaeddine","key":"alaeddine","accountId":"557058:8ff116cc-9503-46dc-b6fc-5d1f04f702fb","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FavatarId%3D10122%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26avatarId%3D10122%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26avatarId%3D10122%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/81c0b5e20675d8da8c0baaabdc42c5c5?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26avatarId%3D10122%26noRedirect%3Dtrue"},"displayName":"Alaeddine Saadaoui","active":true,"timeZone":"US/Central"},"customfield_10000":null,"customfield_12100":"0|i03qhz:","aggregateprogress":{"progress":0,"total":0},"customfield_10001":null,"customfield_10002":null,"customfield_10200":null,"customfield_10003":null,"customfield_10400":null,"customfield_10004":null,"customfield_12500":null,"customfield_10116":null,"customfield_11600":["Alaeddine(alaeddine)"],"customfield_10117":null,"environment":null,"customfield_11800":null,"customfield_11802":null,"duedate":null,"customfield_11805":null,"customfield_11806":null,"progress":{"progress":0,"total":0},"comment":{"comments":[],"maxResults":0,"total":0,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/GUI-2583/votes","votes":0,"hasVoted":false},"customfield_11808":null,"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]}}}