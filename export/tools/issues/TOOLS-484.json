{"expand":"renderedFields,names,schema,operations,editmeta,changelog,versionedRepresentations","id":"30323","self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30323","key":"TOOLS-484","fields":{"issuetype":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://eucalyptus.atlassian.net/secure/viewavatar?size=xsmall&avatarId=14803&avatarType=issuetype","name":"Bug","subtask":false,"avatarId":14803},"timespent":null,"customfield_13100":null,"project":{"self":"https://eucalyptus.atlassian.net/rest/api/2/project/10001","id":"10001","key":"TOOLS","name":"Euca2ools","avatarUrls":{"48x48":"https://eucalyptus.atlassian.net/secure/projectavatar?pid=10001&avatarId=10011","24x24":"https://eucalyptus.atlassian.net/secure/projectavatar?size=small&pid=10001&avatarId=10011","16x16":"https://eucalyptus.atlassian.net/secure/projectavatar?size=xsmall&pid=10001&avatarId=10011","32x32":"https://eucalyptus.atlassian.net/secure/projectavatar?size=medium&pid=10001&avatarId=10011"}},"customfield_11000":null,"fixVersions":[],"customfield_11001":null,"aggregatetimespent":null,"resolution":null,"customfield_10310":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10209","value":"CentOS 6","id":"10209"}],"customfield_11401":null,"customfield_11400":null,"customfield_10500":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10402","value":"Internal","id":"10402"},"customfield_10104":[],"customfield_10302":null,"customfield_10105":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10101","value":"No","id":"10101"},"customfield_10303":null,"customfield_10304":null,"customfield_10700":null,"customfield_10701":null,"customfield_10702":null,"customfield_10306":{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10201","value":"Medium","id":"10201"},"customfield_10703":null,"customfield_10308":null,"resolutiondate":null,"customfield_10704":null,"customfield_10705":null,"customfield_10309":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/customFieldOption/10204","value":"KVM","id":"10204"}],"workratio":-1,"lastViewed":null,"watches":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/TOOLS-484/watchers","watchCount":1,"isWatching":false},"created":"2014-05-28T09:06:54.611-0500","customfield_12000":null,"customfield_12400":null,"priority":{"self":"https://eucalyptus.atlassian.net/rest/api/2/priority/3","iconUrl":"https://eucalyptus.atlassian.net/images/icons/priorities/major.svg","name":"Major","id":"3"},"customfield_12201":null,"customfield_10102":null,"customfield_10300":null,"customfield_12600":"{}","customfield_10301":null,"labels":["AWSCompat-PM"],"customfield_11700":null,"aggregatetimeoriginalestimate":null,"timeestimate":null,"versions":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/version/12502","id":"12502","description":"3.1.0","name":"3.1.0","archived":false,"released":true,"releaseDate":"2014-05-29"}],"customfield_11901":null,"issuelinks":[],"assignee":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=gholms","name":"gholms","key":"gholms","accountId":"557058:6e5fdc25-c797-4d3d-8fd4-55c3c4ed99b0","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/3e16def22dd4a96dbe507df70f15f37f?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dgholms%26avatarId%3D18100%26noRedirect%3Dtrue"},"displayName":"Garrett Holmstrom","active":true,"timeZone":"America/Los_Angeles"},"updated":"2014-06-13T18:46:52.006-0500","status":{"self":"https://eucalyptus.atlassian.net/rest/api/2/status/10001","description":"This issue has been validated/reproduced, but has not been prioritized yet.","iconUrl":"https://eucalyptus.atlassian.net/images/icons/statuses/generic.png","name":"Confirmed","id":"10001","statusCategory":{"self":"https://eucalyptus.atlassian.net/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"To Do"}},"components":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/component/10701","id":"10701","name":"AWS Tool Compatibility","description":"Compatibility with AWS tools"}],"timeoriginalestimate":null,"description":"*Assessment*\r\n\r\nPer [AWS documentation regarding ec2-authorize|http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-AuthorizeSecurityGroupIngress.html], port should not be required if protocol hasn't been defined:\r\n\r\n{code}\r\n-p port_range\r\n\r\nFor TCP or UDP: The range of ports to allow.\r\n\r\nType: String\r\n\r\nValid values: A single integer or a range (min-max). You can specify -1 to mean all ports (for example, port range 0-65535).\r\n\r\nDefault: None\r\n\r\nRequired: Required if specifying tcp or udp (or the equivalent number) for the protocol.\r\n\r\nExample: -p 80-84\r\n{code}\r\n\r\nWhen euca-authorize with no port and protocol is used on Eucalyptus, the following is experienced:\r\n{code}\r\n[root@odc-f-13 ~]# euca-authorize default -u 944786667073 -o euca-internal-408396244283-NginxLoadBalancer --region account1-user01@VLADR\r\nusage: euca-authorize [--egress] [-P {tcp,udp,icmp,6,17,1}] [-p RANGE]\r\n                      [-t TYPE:CODE] [-s CIDR | -o GROUP] [-u ACCOUNT]\r\n                      [--show-empty-fields] [-U URL] [--region USER@REGION]\r\n                      [-I KEY_ID] [-S KEY] [--security-token TOKEN] [--debug]\r\n                      [--debugger] [--version] [-h]\r\n                      GROUP\r\neuca-authorize: error: argument -p/--port-range is required for protocol \"tcp\"\r\n{code}\r\n\r\nIt seems that we are defaulting to 'tcp' protocol.  On AWS, if a similar action is performed, both 'tcp' and 'udp' protocols are used, and all ports are open:\r\n{code}\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 authorize-security-group-ingress --source-security-group-owner-id amazon-elb --source-security-group-name amazon-elb-sg --profile harold-work --group-name default\r\ntrue\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 describe-security-groups --group-name default --profile harold-workSECURITYGROUPS\tdefault group\tsg-772c811f\tdefault\t048212016277\r\nIPPERMISSIONS\t-1\ticmp\t-1\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\nUSERIDGROUPPAIRS\tsg-772c811f\tdefault\t048212016277\r\nIPPERMISSIONS\t1\ttcp\t65535\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\nIPPERMISSIONS\t0\ttcp\t65535\r\nUSERIDGROUPPAIRS\tsg-772c811f\tdefault\t048212016277\r\nIPPERMISSIONS\t1\tudp\t65535\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\nIPPERMISSIONS\t0\tudp\t65535\r\nUSERIDGROUPPAIRS\tsg-772c811f\tdefault\t048212016277\r\nIPPERMISSIONS\t22\ttcp\t22\r\nIPRANGES\t0.0.0.0/0\r\nIPRANGES\t174.76.114.0/24\r\nIPPERMISSIONS\t53\ttcp\t53\r\nIPRANGES\t0.0.0.0/0\r\nIPPERMISSIONS\t80\ttcp\t80\r\nIPRANGES\t0.0.0.0/0\r\nIPPERMISSIONS\t53\tudp\t53\r\nIPRANGES\t0.0.0.0/0\r\n{code}\r\n\r\n*Workaround*\r\n\r\nUse '-1' as a value for -p/--port-range option, then add another rule for UDP protocol:\r\n{code}\r\n[root@odc-f-13 ~]# euca-authorize default -u 944786667073 -o euca-internal-408396244283-NginxLoadBalancer -p -1 --region account1-user01@VLADR\r\nGROUP\tdefault\r\nPERMISSION\tdefault\tALLOWS\ttcp\t1\t65535\tUSER\t944786667073\tGRPNAME\teuca-internal-408396244283-NginxLoadBalancer\tFROM\tCIDR\t0.0.0.0/0\r\n[root@odc-f-13 ~]# euca-authorize default -u 944786667073 -o euca-internal-408396244283-NginxLoadBalancer -p -1 -P udp --region account1-user01@VLADR\r\nGROUP\tdefault\r\nPERMISSION\tdefault\tALLOWS\tudp\t1\t65535\tUSER\t944786667073\tGRPNAME\teuca-internal-408396244283-NginxLoadBalancer\tFROM\tCIDR\t0.0.0.0/0\r\n{code}\r\n\r\n*Pertinent Data*\r\n\r\nThe use case that can be referenced for this is when [authorizing ELB security group with a back-end security group for EC2 instances associated with the ELB|http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/using-elb-security-groups.html#ec2-sg-cli].","customfield_13000":null,"customfield_13200":null,"customfield_11300":null,"customfield_11500":null,"timetracking":{},"customfield_10401":null,"customfield_10005":null,"customfield_10600":null,"customfield_12900":null,"aggregatetimeestimate":null,"attachment":[],"summary":"euca-authorize should authorize all protocols by default","creator":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"subtasks":[],"reporter":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"customfield_10000":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12100":"0|i02qb3:","customfield_10001":null,"customfield_10200":null,"customfield_10002":null,"customfield_10003":null,"customfield_12500":null,"customfield_10400":null,"customfield_10116":null,"customfield_11600":["gholms(gholms)","hspencer(hspencer)"],"customfield_10117":null,"environment":"* non-HA, single cluster\r\n** 1 x CLC\r\n** 1 x Walrus, UFS\r\n** 1 x UFS\r\n** 1 x CC, SC (overlay)\r\n** 2 x NCs","customfield_11800":null,"customfield_11802":null,"customfield_11805":null,"duedate":null,"progress":{"progress":0,"total":0},"customfield_11806":null,"comment":{"comments":[{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30323/comment/71657","id":"71657","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"More specific AWS example:\r\n\r\n{code}\r\n[authorize]\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 authorize-security-group-ingress --source-security-group-owner-id amazon-elb --source-security-group-name amazon-elb-sg --profile harold-work --group-name nginx-test\r\ntrue\r\n\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 describe-security-groups --group-name nginx-test --profile harold-work\r\nSECURITYGROUPS\tNginx Test Group\tsg-7436911e\tnginx-test\t048212016277\r\nIPPERMISSIONS\t-1\ticmp\t-1\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\nIPPERMISSIONS\t1\ttcp\t65535\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\nIPPERMISSIONS\t1\tudp\t65535\r\nUSERIDGROUPPAIRS\tsg-843f59ed\tamazon-elb-sg\tamazon-elb\r\n\r\n[revoke]\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 revoke-security-group-ingress --source-security-group-owner-id amazon-elb --source-security-group-name amazon-elb-sg --profile harold-work --group-name nginx-test\r\ntrue\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 describe-security-groups --group-name nginx-test --profile harold-workSECURITYGROUPS\tNginx Test Group\tsg-7436911e\tnginx-test\t048212016277\r\n{code}\r\n\r\nRequest done with --debug\r\n\r\n{code}\r\neuca-prod-1-82:~ haroldspencerjr$ aws ec2 authorize-security-group-ingress --source-security-group-owner-id amazon-elb --source-security-group-name amazon-elb-sg --profile harold-work --group-name nginx-test --debug\r\n2014-05-29 17:01:16,256 - awscli.clidriver - DEBUG - CLI version: aws-cli/1.3.6 Python/2.7.4 Darwin/13.2.0, botocore version: 0.40.0\r\n2014-05-29 17:01:16,256 - botocore.service - DEBUG - Creating service object for: ec2\r\n2014-05-29 17:01:16,544 - botocore.hooks - DEBUG - Event service-data-loaded.ec2: calling handler <function signature_overrides at 0x10c8371b8>\r\n2014-05-29 17:01:16,544 - botocore.hooks - DEBUG - Event service-created: calling handler <function register_retries_for_service at 0x10c836f50>\r\n2014-05-29 17:01:16,545 - botocore.handlers - DEBUG - Registering retry handlers for service: Service(ec2)\r\n2014-05-29 17:01:16,545 - botocore.service - DEBUG - Creating operation objects for: Service(ec2)\r\n2014-05-29 17:01:16,577 - botocore.hooks - DEBUG - Event building-command-table.ec2: calling handler <functools.partial object at 0x10cc7acb0>\r\n2014-05-29 17:01:16,577 - awscli.customizations.removals - DEBUG - Removing operation: import-instance\r\n2014-05-29 17:01:16,577 - awscli.customizations.removals - DEBUG - Removing operation: import-volume\r\n2014-05-29 17:01:16,579 - botocore.operation - DEBUG - Creating parameter objects for: Operation:AuthorizeSecurityGroupIngress\r\n2014-05-29 17:01:16,582 - awscli.clidriver - DEBUG - OrderedDict([(u'dry-run', <awscli.arguments.BooleanArgument object at 0x10d196190>), (u'no-dry-run', <awscli.arguments.BooleanArgument object at 0x10d196450>), (u'group-name', <awscli.arguments.CLIArgument object at 0x10d1964d0>), (u'group-id', <awscli.arguments.CLIArgument object at 0x10d196510>), (u'source-security-group-name', <awscli.arguments.CLIArgument object at 0x10d196550>), (u'source-security-group-owner-id', <awscli.arguments.CLIArgument object at 0x10d1965d0>), (u'ip-protocol', <awscli.arguments.CLIArgument object at 0x10d196610>), (u'from-port', <awscli.arguments.CLIArgument object at 0x10d196650>), (u'to-port', <awscli.arguments.CLIArgument object at 0x10d196690>), (u'cidr-ip', <awscli.arguments.CLIArgument object at 0x10d1966d0>), (u'ip-permissions', <awscli.arguments.ListArgument object at 0x10d196710>)])\r\n2014-05-29 17:01:16,582 - botocore.hooks - DEBUG - Event building-argument-table.ec2.authorize-security-group-ingress: calling handler <function _rename_arg at 0x10cc849b0>\r\n2014-05-29 17:01:16,602 - botocore.hooks - DEBUG - Event building-argument-table.ec2.authorize-security-group-ingress: calling handler <function _rename_arg at 0x10cc84a28>\r\n2014-05-29 17:01:16,602 - botocore.hooks - DEBUG - Event building-argument-table.ec2.authorize-security-group-ingress: calling handler <functools.partial object at 0x10cc7ad60>\r\n2014-05-29 17:01:16,603 - botocore.hooks - DEBUG - Event building-argument-table.ec2.authorize-security-group-ingress: calling handler <function _add_params at 0x10cc0fb18>\r\n2014-05-29 17:01:16,603 - botocore.hooks - DEBUG - Event building-argument-table.ec2.authorize-security-group-ingress: calling handler <function unify_paging_params at 0x10cbeb7d0>\r\n2014-05-29 17:01:16,605 - botocore.hooks - DEBUG - Event operation-args-parsed.ec2.authorize-security-group-ingress: calling handler <functools.partial object at 0x10d183208>\r\n2014-05-29 17:01:16,606 - botocore.hooks - DEBUG - Event operation-args-parsed.ec2.authorize-security-group-ingress: calling handler <function _check_args at 0x10cc0fb90>\r\n2014-05-29 17:01:16,606 - botocore.hooks - DEBUG - Event load-cli-arg.ec2.authorize-security-group-ingress: calling handler <function uri_param at 0x10cbd60c8>\r\n2014-05-29 17:01:16,606 - botocore.hooks - DEBUG - Event process-cli-arg.ec2.authorize-security-group-ingress: calling handler <awscli.argprocess.ParamShorthand object at 0x10cc81a90>\r\n2014-05-29 17:01:16,606 - awscli.arguments - DEBUG - Unpacked value of \"nginx-test\" for parameter \"group_name\": nginx-test\r\n2014-05-29 17:01:16,606 - botocore.hooks - DEBUG - Event load-cli-arg.ec2.authorize-security-group-ingress: calling handler <function uri_param at 0x10cbd60c8>\r\n2014-05-29 17:01:16,607 - botocore.hooks - DEBUG - Event process-cli-arg.ec2.authorize-security-group-ingress: calling handler <awscli.argprocess.ParamShorthand object at 0x10cc81a90>\r\n2014-05-29 17:01:16,607 - awscli.arguments - DEBUG - Unpacked value of \"amazon-elb-sg\" for parameter \"source_security_group_name\": amazon-elb-sg\r\n2014-05-29 17:01:16,608 - botocore.hooks - DEBUG - Event load-cli-arg.ec2.authorize-security-group-ingress: calling handler <function uri_param at 0x10cbd60c8>\r\n2014-05-29 17:01:16,608 - botocore.hooks - DEBUG - Event process-cli-arg.ec2.authorize-security-group-ingress: calling handler <awscli.argprocess.ParamShorthand object at 0x10cc81a90>\r\n2014-05-29 17:01:16,608 - awscli.arguments - DEBUG - Unpacked value of \"amazon-elb\" for parameter \"source_security_group_owner_id\": amazon-elb\r\n2014-05-29 17:01:16,608 - botocore.credentials - INFO - Found credentials in config file.\r\n2014-05-29 17:01:16,609 - botocore.hooks - DEBUG - Event creating-endpoint.ec2: calling handler <function maybe_switch_to_sigv4 at 0x10c837140>\r\n2014-05-29 17:01:16,731 - botocore.operation - DEBUG - Operation:AuthorizeSecurityGroupIngress called with kwargs: {u'source_security_group_name': u'amazon-elb-sg', u'source_security_group_owner_id': u'amazon-elb', u'group_name': u'nginx-test'}\r\n2014-05-29 17:01:16,732 - botocore.endpoint - DEBUG - Making request for Operation:AuthorizeSecurityGroupIngress (verify_ssl=True) with params: {u'GroupName': u'nginx-test', u'SourceSecurityGroupOwnerId': u'amazon-elb', u'SourceSecurityGroupName': u'amazon-elb-sg'}\r\n2014-05-29 17:01:16,732 - botocore.auth - DEBUG - Calculating signature using v2 auth.\r\n2014-05-29 17:01:16,733 - botocore.auth - DEBUG - String to sign: POST\r\nec2.us-east-1.amazonaws.com\r\n/\r\nAWSAccessKeyId=AKIAJG44TVZ6CSSJWQDA&Action=AuthorizeSecurityGroupIngress&GroupName=nginx-test&SignatureMethod=HmacSHA256&SignatureVersion=2&SourceSecurityGroupName=amazon-elb-sg&SourceSecurityGroupOwnerId=amazon-elb&Timestamp=2014-05-29T21%3A01%3A16.732940&Version=2014-02-01\r\n2014-05-29 17:01:16,751 - botocore.endpoint - DEBUG - Sending http request: <PreparedRequest [POST]>\r\n2014-05-29 17:01:16,752 - botocore.vendored.requests.packages.urllib3.connectionpool - INFO - Starting new HTTPS connection (1): ec2.us-east-1.amazonaws.com\r\n2014-05-29 17:01:17,657 - botocore.vendored.requests.packages.urllib3.connectionpool - DEBUG - \"POST / HTTP/1.1\" 200 None\r\n2014-05-29 17:01:17,658 - botocore.response - DEBUG - Content type from response: text/xml\r\n2014-05-29 17:01:17,659 - botocore.response - DEBUG - Response Headers:\r\ntransfer-encoding: chunked\r\ndate: Thu, 29 May 2014 21:01:34 GMT\r\ncontent-type: text/xml;charset=UTF-8\r\nserver: AmazonEC2\r\n2014-05-29 17:01:17,659 - botocore.response - DEBUG - Response Body:\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<AuthorizeSecurityGroupIngressResponse xmlns=\"http://ec2.amazonaws.com/doc/2014-02-01/\">\r\n    <requestId>00c6c23b-f54a-48a0-9964-a8a651af046a</requestId>\r\n    <return>true</return>\r\n</AuthorizeSecurityGroupIngressResponse>\r\n2014-05-29 17:01:17,663 - botocore.hooks - DEBUG - Event needs-retry.ec2.AuthorizeSecurityGroupIngress: calling handler <botocore.retryhandler.RetryHandler object at 0x10d139350>\r\n2014-05-29 17:01:17,663 - botocore.retryhandler - DEBUG - No retry needed.\r\n2014-05-29 17:01:17,663 - botocore.hooks - DEBUG - Event after-call.ec2.AuthorizeSecurityGroupIngress: calling handler <awscli.errorhandler.ErrorHandler object at 0x10cc81b10>\r\n2014-05-29 17:01:17,663 - awscli.errorhandler - DEBUG - HTTP Response Code: 200\r\n2014-05-29 17:01:17,663 - awscli.formatter - DEBUG - RequestId: 00c6c23b-f54a-48a0-9964-a8a651af046a\r\ntrue\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-29T16:00:33.422-0500","updated":"2014-05-29T16:02:49.341-0500"},{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/30323/comment/71731","id":"71731","author":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"body":"[~gholms],\r\n\r\nHere is the output with ec2-authorize, with --debug and --verbose flags:\r\n\r\n{code}\r\n$ ec2-authorize -O XXXXXXXXXX -W XXXXXXXXXXXX -o amazon-elb-sg -u amazon-elb nginx-test --verbose --debug\r\nSetting User-Agent to [ec2-api-tools 1.6.10.1]\r\nUsing AWS acces key:XXXXXXXXXXX\r\n2014-05-30 16:39:03,353 [main] DEBUG org.apache.http.wire  - >> \"POST / HTTP/1.1[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"Host: ec2.amazonaws.com[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"User-Agent: ec2-api-tools 1.6.10.1[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"Content-Type: application/x-www-form-urlencoded; charset=utf-8[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"Content-Length: 796[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"Connection: Keep-Alive[\\r][\\n]\"\r\n2014-05-30 16:39:03,356 [main] DEBUG org.apache.http.wire  - >> \"[\\r][\\n]\"\r\n2014-05-30 16:39:03,357 [main] DEBUG org.apache.http.wire  - >> \"GroupName=nginx-test&IpPermissions.1.Groups.1.GroupName=amazon-elb-sg&IpPermissions.1.IpProtocol=tcp&SignatureMethod=HmacSHA256&IpPermissions.3.ToPort=-1&IpPermissions.1.ToPort=65535&IpPermissions.2.Groups.1.GroupName=amazon-elb-sg&AWSAccessKeyId=XXXXXXXXXXXX&IpPermissions.3.IpProtocol=icmp&IpPermissions.1.FromPort=0&Signature=q3VPvmlO5srX%2Bul9x%2BWU6PUpx%2FQh9ZRmFZxpHkoXWnM%3D&Timestamp=2014-05-30T20%3A39%3A01.404Z&IpPermissions.2.FromPort=0&IpPermissions.1.Groups.1.UserId=amazon-elb&Action=AuthorizeSecurityGroupIngress&IpPermissions.3.Groups.1.UserId=amazon-elb&IpPermissions.2.IpProtocol=udp&IpPermissions.2.Groups.1.UserId=amazon-elb&SignatureVersion=2&Version=2013-08-15&IpPermissions.3.Groups.1.GroupName=amazon-elb-sg&IpPermissions.3.FromPort=-1&IpPermissions.2.ToPort=65535\"\r\n2014-05-30 16:39:03,643 [main] DEBUG org.apache.http.wire  - << \"HTTP/1.1 200 OK[\\r][\\n]\"\r\n2014-05-30 16:39:03,648 [main] DEBUG org.apache.http.wire  - << \"Content-Type: text/xml;charset=UTF-8[\\r][\\n]\"\r\n2014-05-30 16:39:03,648 [main] DEBUG org.apache.http.wire  - << \"Transfer-Encoding: chunked[\\r][\\n]\"\r\n2014-05-30 16:39:03,648 [main] DEBUG org.apache.http.wire  - << \"Date: Fri, 30 May 2014 20:39:05 GMT[\\r][\\n]\"\r\n2014-05-30 16:39:03,648 [main] DEBUG org.apache.http.wire  - << \"Server: AmazonEC2[\\r][\\n]\"\r\n2014-05-30 16:39:03,648 [main] DEBUG org.apache.http.wire  - << \"[\\r][\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"102[\\r][\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"<?xml version=\"1.0\" encoding=\"UTF-8\"?>[\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"<AuthorizeSecurityGroupIngressResponse xmlns=\"http://ec2.amazonaws.com/doc/2013-08-15/\">[\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"    <requestId>cb0a19e8-5a5d-4eb6-ba69-246a960ba18b</requestId>[\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"    <return>true</return>[\\n]\"\r\n2014-05-30 16:39:03,669 [main] DEBUG org.apache.http.wire  - << \"</AuthorizeSecurityGroupIngressResponse>\"\r\n2014-05-30 16:39:03,747 [main] DEBUG org.apache.http.wire  - << \"[\\r][\\n]\"\r\n2014-05-30 16:39:03,747 [main] DEBUG org.apache.http.wire  - << \"0[\\r][\\n]\"\r\n2014-05-30 16:39:03,747 [main] DEBUG org.apache.http.wire  - << \"[\\r][\\n]\"\r\nGROUP\t\t\tnginx-test\r\nPERMISSION\t\tnginx-test\tALLOWS\ttcp\t0\t65535\tFROM\tUSER\tamazon-elb\tNAME amazon-elb-sg\t\tingress\r\nPERMISSION\t\tnginx-test\tALLOWS\tudp\t0\t65535\tFROM\tUSER\tamazon-elb\tNAME amazon-elb-sg\t\tingress\r\nPERMISSION\t\tnginx-test\tALLOWS\ticmp\t-1\t-1\tFROM\tUSER\tamazon-elb\tNAME amazon-elb-sg\t\tingress\r\nREQUEST ID\tcb0a19e8-5a5d-4eb6-ba69-246a960ba18b\r\n{code}","updateAuthor":{"self":"https://eucalyptus.atlassian.net/rest/api/2/user?username=hspencer","name":"hspencer","key":"hspencer","accountId":"557058:4a3a93bc-21f8-4658-9f5b-9cb484c910a7","avatarUrls":{"48x48":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=48&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3FownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","24x24":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=24&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","16x16":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=16&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dxsmall%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue","32x32":"https://avatar-cdn.atlassian.com/ea43d7b9d5b27468a749f9bd25650176?s=32&d=https%3A%2F%2Feucalyptus.atlassian.net%2Fsecure%2Fuseravatar%3Fsize%3Dmedium%26ownerId%3Dhspencer%26avatarId%3D10407%26noRedirect%3Dtrue"},"displayName":"Harold Spencer Jr.","active":true,"timeZone":"America/Los_Angeles"},"created":"2014-05-30T15:52:59.327-0500","updated":"2014-05-30T15:52:59.327-0500"}],"maxResults":2,"total":2,"startAt":0},"votes":{"self":"https://eucalyptus.atlassian.net/rest/api/2/issue/TOOLS-484/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_11808":null}}